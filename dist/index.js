// @bun
var Kx=Object.create;var{getPrototypeOf:Ex,defineProperty:Sd,getOwnPropertyNames:xx}=Object;var qx=Object.prototype.hasOwnProperty;var O=(t,r,e)=>{e=t!=null?Kx(Ex(t)):{};let o=r||!t||!t.__esModule?Sd(e,"default",{value:t,enumerable:!0}):e;for(let n of xx(t))if(!qx.call(o,n))Sd(o,n,{get:()=>t[n],enumerable:!0});return o};var Q=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var wo=(t,r)=>{for(var e in r)Sd(t,e,{get:r[e],enumerable:!0,configurable:!0,set:(o)=>r[e]=()=>o})};var _=(t,r)=>()=>(t&&(r=t(t=0)),r);var Rr=import.meta.require;function xq(t){if(Xh.has(t))return Xh.get(t);let r=Error.stackTraceLimit;return Error.stackTraceLimit=4,Xh.set(t,Error()),Error.stackTraceLimit=r,Xh.get(t)}var Xh,Dd,Vd,Wc,Uo;var Jh=_(()=>{Xh=new Map,Dd=new Map,Vd=Symbol("OriginError"),Wc={};Uo=class Uo extends Promise{constructor(t,r,e,o,n={}){let c,i;super((f,h)=>{c=f,i=h});this.tagged=Array.isArray(t.raw),this.strings=t,this.args=r,this.handler=e,this.canceller=o,this.options=n,this.state=null,this.statement=null,this.resolve=(f)=>(this.active=!1,c(f)),this.reject=(f)=>(this.active=!1,i(f)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[Vd]=this.handler.debug?Error():this.tagged&&xq(this.strings)}get origin(){return(this.handler.debug?this[Vd].stack:this.tagged&&Dd.has(this.strings)?Dd.get(this.strings):Dd.set(this.strings,this[Vd].stack).get(this.strings))||""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(t=1,r){if(this.options.simple=!1,typeof t==="function")r=t,t=1;if(this.cursorRows=t,typeof r==="function")return this.cursorFn=r,this;let e;return{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};e&&e();let o=new Promise((n,c)=>{this.cursorFn=(i)=>{return n({value:i,done:!1}),new Promise((f)=>e=f)},this.resolve=()=>(this.active=!1,n({done:!0})),this.reject=(i)=>(this.active=!1,c(i))});return this.execute(),o},return(){return e&&e(Wc),{done:!0}}})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw Error(".stream has been renamed to .forEach")}forEach(t){return this.forEachFn=t,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}}});function K6(t,r,e){let{host:o,port:n}=e||r,c=Object.assign(Error("write "+t+" "+(r.path||o+":"+n)),{code:t,errno:t,address:r.path||o},r.path?{}:{port:n});return Error.captureStackTrace(c,K6),c}function E6(t){let r=new Zc(t);return Error.captureStackTrace(r,E6),r}function x6(t,r){let e=Object.assign(Error(t+": "+r),{code:t});return Error.captureStackTrace(e,x6),e}function q6(t){let r=Object.assign(Error(t+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:t});return Error.captureStackTrace(r,q6),r}var Zc,Br;var Yh=_(()=>{Zc=class Zc extends Error{constructor(t){super(t.message);this.name=this.constructor.name,Object.assign(this,t)}};Br={connection:K6,postgres:E6,generic:x6,notSupported:q6}});class Ch{then(){jd()}catch(){jd()}finally(){jd()}}function Kh(t,r,e,o){let n=t instanceof sn?t.value:t;if(n===void 0){if(t instanceof sn?t.value=o.transform.undefined:n=t=o.transform.undefined,n===void 0)throw Br.generic("UNDEFINED_VALUE","Undefined values are not allowed")}return"$"+e.push(t instanceof sn?(r.push(t.value),t.array?t.array[t.type||gh(t.value)]||t.type||tN(t.value):t.type):(r.push(t),gh(t)))}function e2(t,r,e,o,n,c){for(let i=1;i<t.strings.length;i++)r+=o2(r,e,o,n,c)+t.strings[i],e=t.args[i];return r}function o2(t,r,e,o,n){return r instanceof Qh?r.build(t,e,o,n):r instanceof Uo?r2(r,e,o,n):r instanceof Xf?r.value:r&&r[0]instanceof Uo?r.reduce((c,i)=>c+" "+r2(i,e,o,n),""):Kh(r,e,o,n)}function r2(t,r,e,o){return t.fragment=!0,e2(t,t.strings[0],t.args[0],r,e,o)}function j6(t,r,e,o,n){return t.map((c)=>"("+o.map((i)=>o2("values",c[i],r,e,n)).join(",")+")").join(",")}function D6(t,r,e,o,n){let c=Array.isArray(t[0]),i=r.length?r.flat():Object.keys(c?t[0]:t);return j6(c?t:[t],e,o,i,n)}function Ph(t,r,e,o,n){if(typeof t==="string"&&(t=[t].concat(r)),Array.isArray(t))return n2(t,n);let c;return(r.length?r.flat():Object.keys(t)).map((f)=>{return c=t[f],(c instanceof Uo?r2(c,e,o,n):c instanceof Xf?c.value:Kh(c,e,o,n))+" as "+Eh(n.transform.column.to?n.transform.column.to(f):f)}).join(",")}function jd(){throw Br.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")}function tN(t){if(Array.isArray(t))return tN(t[0]);return typeof t==="string"?1009:0}function eN(t){return Object.keys(t).reduce((r,e)=>{if(t[e].from&&[].concat(t[e].from).forEach((o)=>r.parsers[o]=t[e].parse),t[e].serialize)r.serializers[t[e].to]=t[e].serialize,t[e].from&&[].concat(t[e].from).forEach((o)=>r.serializers[o]=t[e].serialize);return r},{parsers:{},serializers:{}})}function n2(t,{transform:{column:r}}){return t.map((e)=>Eh(r.to?r.to(e):e)).join(",")}function eD(t){return t.replace(tD,"\\\\").replace(rD,"\\\"")}function sN(t,r,e,o){let n=[],c=o===1020?";":",";for(;t.i<r.length;t.i++){if(t.char=r[t.i],t.quoted)if(t.char==="\\")t.str+=r[++t.i];else if(t.char==='"')n.push(e?e(t.str):t.str),t.str="",t.quoted=r[t.i+1]==='"',t.last=t.i+2;else t.str+=t.char;else if(t.char==='"')t.quoted=!0;else if(t.char==="{")t.last=++t.i,n.push(sN(t,r,e,o));else if(t.char==="}"){t.quoted=!1,t.last<t.i&&n.push(e?e(r.slice(t.last,t.i)):r.slice(t.last,t.i)),t.last=t.i+1;break}else if(t.char===c&&t.p!=="}"&&t.p!=='"')n.push(e?e(r.slice(t.last,t.i)):r.slice(t.last,t.i)),t.last=t.i+1;t.p=t.char}return t.last<t.i&&n.push(e?e(r.slice(t.last,t.i+1)):r.slice(t.last,t.i+1)),n}function s2(t){return function r(e,o){return typeof e==="object"&&e!==null&&(o.type===114||o.type===3802)?Array.isArray(e)?e.map((n)=>r(n,o)):Object.entries(e).reduce((n,[c,i])=>Object.assign(n,{[t(c)]:r(i,o)}),{}):e}}var qq,Xf,sn,Qh,V6,Dq,Vq,jq,rN=function(t){let r=eN(t||{});return{serializers:Object.assign({},Vq,r.serializers),parsers:Object.assign({},jq,r.parsers)}},Eh=function(r){return'"'+r.replace(/"/g,'""').replace(/\./g,'"."')+'"'},gh=function t(r){return r instanceof sn?r.type:r instanceof Date?1184:r instanceof Uint8Array?17:r===!0||r===!1?16:typeof r==="bigint"?20:Array.isArray(r)?t(r[0]):0},tD,rD,oN=function t(r,e,o,n){if(Array.isArray(r)===!1)return r;if(!r.length)return"{}";let c=r[0],i=n===1020?";":",";if(Array.isArray(c)&&!c.type)return"{"+r.map((f)=>t(f,e,o,n)).join(i)+"}";return"{"+r.map((f)=>{if(f===void 0){if(f=o.transform.undefined,f===void 0)throw Br.generic("UNDEFINED_VALUE","Undefined values are not allowed")}return f===null?"null":'"'+eD(e?e(f.type?f.value:f):""+f)+'"'}).join(i)+"}"},t2,nN=function(r,e,o){return t2.i=t2.last=0,sN(t2,r,e,o)},Ys=(t)=>{let r=t[0];for(let e=1;e<t.length;e++)r+=t[e]==="_"?t[++e].toUpperCase():t[e];return r},Ps=(t)=>{let r=t[0].toUpperCase();for(let e=1;e<t.length;e++)r+=t[e]==="_"?t[++e].toUpperCase():t[e];return r},gs=(t)=>t.replace(/_/g,"-"),Wf=(t)=>t.replace(/([A-Z])/g,"_$1").toLowerCase(),Zf=(t)=>(t.slice(0,1)+t.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),Bf=(t)=>t.replace(/-/g,"_"),c2,i2,f2;var h2=_(()=>{Jh();Yh();qq={string:{to:25,from:null,serialize:(t)=>""+t},number:{to:0,from:[21,23,26,700,701],serialize:(t)=>""+t,parse:(t)=>+t},json:{to:114,from:[114,3802],serialize:(t)=>JSON.stringify(t),parse:(t)=>JSON.parse(t)},boolean:{to:16,from:16,serialize:(t)=>t===!0?"t":"f",parse:(t)=>t==="t"},date:{to:1184,from:[1082,1114,1184],serialize:(t)=>(t instanceof Date?t:new Date(t)).toISOString(),parse:(t)=>new Date(t)},bytea:{to:17,from:17,serialize:(t)=>"\\x"+Buffer.from(t).toString("hex"),parse:(t)=>Buffer.from(t.slice(2),"hex")}};Xf=class Xf extends Ch{constructor(t){super();this.value=Eh(t)}};sn=class sn extends Ch{constructor(t,r,e){super();this.value=t,this.type=r,this.array=e}};Qh=class Qh extends Ch{constructor(t,r){super();this.first=t,this.rest=r}build(t,r,e,o){let n=Dq.map(([c,i])=>({fn:i,i:t.search(c)})).sort((c,i)=>c.i-i.i).pop();return n.i===-1?n2(this.first,o):n.fn(this.first,this.rest,r,e,o)}};V6=eN(qq);Dq=Object.entries({values:D6,in:(...t)=>{let r=D6(...t);return r==="()"?"(null)":r},select:Ph,as:Ph,returning:Ph,"\\(":Ph,update(t,r,e,o,n){return(r.length?r.flat():Object.keys(t)).map((c)=>Eh(n.transform.column.to?n.transform.column.to(c):c)+"="+o2("values",t[c],e,o,n))},insert(t,r,e,o,n){let c=r.length?r.flat():Object.keys(Array.isArray(t)?t[0]:t);return"("+n2(c,n)+")values"+j6(Array.isArray(t)?t:[t],e,o,c,n)}}).map(([t,r])=>[new RegExp("((?:^|[\\s(])"+t+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),r]);Vq=V6.serializers,jq=V6.parsers;tD=/\\/g,rD=/"/g;t2={i:0,char:null,str:"",quoted:!1,last:0};Ys.column={from:Ys};Ys.value={from:s2(Ys)};Wf.column={to:Wf};c2={...Ys};c2.column.to=Wf;Ps.column={from:Ps};Ps.value={from:s2(Ps)};Zf.column={to:Zf};i2={...Ps};i2.column.to=Zf;gs.column={from:gs};gs.value={from:s2(gs)};Bf.column={to:Bf};f2={...gs};f2.column.to=Bf});var Cs;var cN=_(()=>{Cs=class Cs extends Array{constructor(){super();Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}}});function oD(t=[]){let r=t.slice(),e=0;return{get length(){return r.length-e},remove:(o)=>{let n=r.indexOf(o);return n===-1?null:(r.splice(n,1),o)},push:(o)=>(r.push(o),o),shift:()=>{let o=r[e++];if(e===r.length)e=0,r=[];else r[e-1]=void 0;return o}}}var uo;var w2=_(()=>{uo=oD});function xh(t){if(He.length-ur.i<t){let r=He,e=r.length;He=Buffer.allocUnsafe(e+(e>>1)+t),r.copy(He)}}function sD(){return ur.i=0,ur}var He,nD,ur,St;var iN=_(()=>{He=Buffer.allocUnsafe(256),nD="BCcDdEFfHPpQSX".split("").reduce((t,r)=>{let e=r.charCodeAt(0);return t[r]=()=>{return He[0]=e,ur.i=5,ur},t},{}),ur=Object.assign(sD,nD,{N:String.fromCharCode(0),i:0,inc(t){return ur.i+=t,ur},str(t){let r=Buffer.byteLength(t);return xh(r),ur.i+=He.write(t,ur.i,r,"utf8"),ur},i16(t){return xh(2),He.writeUInt16BE(t,ur.i),ur.i+=2,ur},i32(t,r){if(r||r===0)return He.writeUInt32BE(t,r),ur;return xh(4),He.writeUInt32BE(t,ur.i),ur.i+=4,ur},z(t){return xh(t),He.fill(0,ur.i,ur.i+t),ur.i+=t,ur},raw(t){return He=Buffer.concat([He.subarray(0,ur.i),t]),ur.i=He.length,ur},end(t=1){He.writeUInt32BE(ur.i-t,t);let r=He.subarray(0,ur.i);return ur.i=0,He=Buffer.allocUnsafe(256),r}}),St=ur});import fN from"net";import cD from"tls";import Jf from"crypto";import p2 from"stream";import{performance as hN}from"perf_hooks";function uN(t,r={},{onopen:e=Bc,onend:o=Bc,onclose:n=Bc}={}){let{sslnegotiation:c,ssl:i,max:f,user:h,host:w,port:p,database:u,parsers:d,transform:y,onnotice:R,onnotify:S,onparameter:T,max_pipeline:N,keep_alive:G,backoff:v,target_session_attrs:J}=t,K=uo(),D=iD++,E={pid:null,secret:null},ht=u2(k,t.idle_timeout),Rt=u2(k,t.max_lifetime),it=u2(yd,t.connect_timeout),q=null,gt,or=null,It=new Cs,Fr=Buffer.alloc(0),on=t.fetch_types,fo={},x={},Ot=Math.random().toString(36).slice(2),hr=1,Hr=0,br=0,Ht=0,Ct=0,mr=0,ar=0,Lr=0,Se=null,wr=null,Yo=!1,mo=null,ae=null,xr=null,$r=null,cr=null,_e=null,lc=null,Fc=null,rt=null,Bs=null,ie={queue:r.closed,idleTimer:ht,connect(m){xr=m,U()},terminate:P,execute:gn,cancel:pd,end:k,count:0,id:D};return r.closed&&r.closed.push(ie),ie;async function Oh(){let m;try{m=t.socket?await Promise.resolve(t.socket(t)):new fN.Socket}catch(M){b(M);return}return m.on("error",b),m.on("close",tt),m.on("drain",Nh),m}async function pd({pid:m,secret:M},_t,Yt){try{gt=St().i32(16).i32(80877102).i32(m).i32(M).end(16),await $(),q.once("error",Yt),q.once("close",_t)}catch(Wr){Yt(Wr)}}function gn(m){if(Yo)return B(m,Br.connection("CONNECTION_DESTROYED",t));if(cr)return B(m,Br.generic("COPY_IN_PROGRESS","You cannot execute queries during copy"));if(m.cancelled)return;try{return m.state=E,rt?K.push(m):(rt=m,rt.active=!0),dd(m),Or(ud(m))&&!m.describeFirst&&!m.cursorFn&&K.length<N&&(!m.options.onexecute||m.options.onexecute(ie))}catch(M){return K.length===0&&Or(En),l(M),!0}}function ud(m){if(m.parameters.length>=65534)throw Br.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return m.options.simple?St().Q().str(m.statement.string+St.N).end():m.describeFirst?Buffer.concat([Rf(m),wN]):m.prepare?m.prepared?Lc(m):Buffer.concat([Rf(m),Lc(m)]):Rh(m)}function Rf(m){return Buffer.concat([YT(m.statement.string,m.parameters,m.statement.types,m.statement.name),gx("S",m.statement.name)])}function Lc(m){return Buffer.concat([Px(m.parameters,m.statement.types,m.statement.name,m.cursorName),m.cursorFn?PT("",m.cursorRows):hD])}function Rh(m){return Buffer.concat([YT(m.statement.string,m.parameters,m.statement.types),wD,Lc(m)])}function dd(m){let M=[],_t=[],Yt=e2(m,m.strings[0],m.args[0],M,_t,t);!m.tagged&&m.args.forEach((Wr)=>Kh(Wr,M,_t,t)),m.prepare=t.prepare&&("prepare"in m.options?m.options.prepare:!0),m.string=Yt,m.signature=m.prepare&&_t+Yt,m.onlyDescribe&&delete x[m.signature],m.parameters=m.parameters||M,m.prepared=m.prepare&&m.signature in x,m.describeFirst=m.onlyDescribe||M.length&&!m.prepared,m.statement=m.prepared?x[m.signature]:{string:Yt,types:_t,name:m.prepare?Ot+hr++:""},typeof t.debug==="function"&&t.debug(D,Yt,M,_t)}function Or(m,M){if(_e=_e?Buffer.concat([_e,m]):Buffer.from(m),M||_e.length>=1024)return Ih(M);return wr===null&&(wr=setImmediate(Ih)),!0}function Ih(m){let M=q.write(_e,m);return wr!==null&&clearImmediate(wr),_e=wr=null,M}function yd(){l(Br.connection("CONNECT_TIMEOUT",t,q)),q.destroy()}async function Th(){if(c!=="direct"){if(Or(fD),!await new Promise((_t)=>q.once("data",(Yt)=>_t(Yt[0]===83)))&&i==="prefer")return F()}let m={socket:q,servername:fN.isIP(q.host)?void 0:q.host};if(c==="direct")m.ALPNProtocols=["postgresql"];if(i==="require"||i==="allow"||i==="prefer")m.rejectUnauthorized=!1;else if(typeof i==="object")Object.assign(m,i);q.removeAllListeners(),q=cD.connect(m),q.on("secureConnect",F),q.on("error",b),q.on("close",tt),q.on("drain",Nh)}function Nh(){!rt&&e(ie)}function A(m){if(mo){if(mo.push(m),br-=m.length,br>0)return}Fr=mo?Buffer.concat(mo,mr-br):Fr.length===0?m:Buffer.concat([Fr,m],Fr.length+m.length);while(Fr.length>4){if(mr=Fr.readUInt32BE(1),mr>=Fr.length){br=mr-Fr.length,mo=[Fr];break}try{mt(Fr.subarray(0,mr+1))}catch(M){rt&&(rt.cursorFn||rt.describeFirst)&&Or(En),l(M)}Fr=Fr.subarray(mr+1),br=0,mo=null}}async function $(){if(Yo=!1,fo={},q||(q=await Oh()),!q)return;if(it.start(),t.socket)return i?Th():F();if(q.on("connect",i?Th:F),t.path)return q.connect(t.path);q.ssl=i,q.connect(p[Ht],w[Ht]),q.host=w[Ht],q.port=p[Ht],Ht=(Ht+1)%p.length}function U(){setTimeout($,Hr?Math.max(0,Hr+ar-hN.now()):0)}function F(){try{x={},on=t.fetch_types,Ot=Math.random().toString(36).slice(2),hr=1,Rt.start(),q.on("data",A),G&&q.setKeepAlive&&q.setKeepAlive(!0,1000*G);let m=Qx();Or(m)}catch(m){b(m)}}function b(m){if(ie.queue===r.connecting&&t.host[Ct+1])return;l(m);while(K.length)B(K.shift(),m)}function l(m){cr&&(cr.destroy(m),cr=null),rt&&B(rt,m),xr&&(B(xr,m),xr=null)}function B(m,M){if(m.reserve)return m.reject(M);if(!M||typeof M!=="object")M=Error(M);"query"in M||"parameters"in M||Object.defineProperties(M,{stack:{value:M.stack+m.origin.replace(/.*\n/,`
`),enumerable:t.debug},query:{value:m.string,enumerable:t.debug},parameters:{value:m.parameters,enumerable:t.debug},args:{value:m.args,enumerable:t.debug},types:{value:m.statement&&m.statement.types,enumerable:t.debug}}),m.reject(M)}function k(){return $r||(!ie.reserved&&o(ie),!ie.reserved&&!xr&&!rt&&K.length===0?(P(),new Promise((m)=>q&&q.readyState!=="closed"?q.once("close",m):m())):$r=new Promise((m)=>lc=m))}function P(){if(Yo=!0,cr||rt||xr||K.length)b(Br.connection("CONNECTION_DESTROYED",t));if(clearImmediate(wr),q)q.removeListener("data",A),q.removeListener("connect",F),q.readyState==="open"&&q.end(St().X().end());lc&&(lc(),$r=lc=null)}async function tt(m){if(Fr=Buffer.alloc(0),br=0,mo=null,clearImmediate(wr),q.removeListener("data",A),q.removeListener("connect",F),ht.cancel(),Rt.cancel(),it.cancel(),q.removeAllListeners(),q=null,xr)return U();!m&&(rt||K.length)&&b(Br.connection("CONNECTION_CLOSED",t,q)),Hr=hN.now(),m&&t.shared.retries++,ar=(typeof v==="function"?v(t.shared.retries):v)*1000,n(ie,Br.connection("CONNECTION_CLOSED",t,q))}function mt(m,M=m[0]){(M===68?yt:M===100?zx:M===65?lx:M===83?kt:M===90?Dt:M===67?Xt:M===50?ho:M===49?kr:M===116?nn:M===84?yx:M===82?Ax:M===110?Ix:M===75?Tx:M===69?Hx:M===115?Fx:M===51?Lx:M===71?Gx:M===78?Wx:M===72?vx:M===99?kx:M===73?Zx:M===86?Bx:M===118?Xx:M===87?Mx:Jx)(m)}function yt(m){let M=7,_t,Yt,Wr,Ue=rt.isRaw?Array(rt.statement.columns.length):{};for(let Be=0;Be<rt.statement.columns.length;Be++)Yt=rt.statement.columns[Be],_t=m.readInt32BE(M),M+=4,Wr=_t===-1?null:rt.isRaw===!0?m.subarray(M,M+=_t):Yt.parser===void 0?m.toString("utf8",M,M+=_t):Yt.parser.array===!0?Yt.parser(m.toString("utf8",M+1,M+=_t)):Yt.parser(m.toString("utf8",M,M+=_t)),rt.isRaw?Ue[Be]=rt.isRaw===!0?Wr:y.value.from?y.value.from(Wr,Yt):Wr:Ue[Yt.name]=y.value.from?y.value.from(Wr,Yt):Wr;rt.forEachFn?rt.forEachFn(y.row.from?y.row.from(Ue):Ue,It):It[Lr++]=y.row.from?y.row.from(Ue):Ue}function kt(m){let[M,_t]=m.toString("utf8",5,m.length-1).split(St.N);if(fo[M]=_t,t.parameters[M]!==_t)t.parameters[M]=_t,T&&T(M,_t)}function Dt(m){if(rt)if(or)rt.retried?l(rt.retried):rt.prepared&&pD.has(or.routine)?bx(rt,or):l(or);else rt.resolve(ae||It);else if(or)l(or);if(rt=ae=or=null,It=new Cs,it.cancel(),xr){if(J){if(!fo.in_hot_standby||!fo.default_transaction_read_only)return Ux();else if(ax(J,fo))return P()}if(on)return xr.reserve&&(xr=null),Nx();xr&&!xr.reserve&&gn(xr),t.shared.retries=Ct=0,xr=null;return}while(K.length&&(rt=K.shift())&&(rt.active=!0,rt.cancelled))uN(t).cancel(rt.state,rt.cancelled.resolve,rt.cancelled.reject);if(rt)return;ie.reserved?!ie.reserved.release&&m[5]===73?$r?P():(ie.reserved=null,e(ie)):ie.reserved():$r?P():e(ie)}function Xt(m){Lr=0;for(let M=m.length-1;M>0;M--){if(m[M]===32&&m[M+1]<58&&It.count===null)It.count=+m.toString("utf8",M+1,m.length-1);if(m[M-1]>=65){It.command=m.toString("utf8",5,M),It.state=E;break}}if(Bs&&(Bs(),Bs=null),It.command==="BEGIN"&&f!==1&&!ie.reserved)return l(Br.generic("UNSAFE_TRANSACTION","Only use sql.begin, sql.reserved or max: 1"));if(rt.options.simple)return ho();if(rt.cursorFn)It.count&&rt.cursorFn(It),Or(En)}function kr(){rt.parsing=!1}function ho(){!It.statement&&(It.statement=rt.statement),It.columns=rt.statement.columns}function nn(m){let M=m.readUInt16BE(5);for(let _t=0;_t<M;++_t)!rt.statement.types[_t]&&(rt.statement.types[_t]=m.readUInt32BE(7+_t*4));rt.prepare&&(x[rt.signature]=rt.statement),rt.describeFirst&&!rt.onlyDescribe&&(Or(Lc(rt)),rt.describeFirst=!1)}function yx(m){if(It.command)ae=ae||[It],ae.push(It=new Cs),It.count=null,rt.statement.columns=null;let M=m.readUInt16BE(5),_t=7,Yt;rt.statement.columns=Array(M);for(let Wr=0;Wr<M;++Wr){Yt=_t;while(m[_t++]!==0);let Ue=m.readUInt32BE(_t),Be=m.readUInt16BE(_t+4),Cn=m.readUInt32BE(_t+6);rt.statement.columns[Wr]={name:y.column.from?y.column.from(m.toString("utf8",Yt,_t-1)):m.toString("utf8",Yt,_t-1),parser:d[Cn],table:Ue,number:Be,type:Cn},_t+=18}if(It.statement=rt.statement,rt.onlyDescribe)return rt.resolve(rt.statement),Or(En)}async function Ax(m,M=m.readUInt32BE(5)){(M===3?Sx:M===5?_x:M===10?$x:M===11?Ox:M===12?Rx:M!==0?Yx:Bc)(m,M)}async function Sx(){let m=await Ad();Or(St().p().str(m).z(1).end())}async function _x(m){let M="md5"+await pN(Buffer.concat([Buffer.from(await pN(await Ad()+h)),m.subarray(9)]));Or(St().p().str(M).z(1).end())}async function $x(){Fc=(await Jf.randomBytes(18)).toString("base64"),St().p().str("SCRAM-SHA-256"+St.N);let m=St.i;Or(St.inc(4).str("n,,n=*,r="+Fc).i32(St.i-m-4,m).end())}async function Ox(m){let M=m.toString("utf8",9).split(",").reduce((Be,Cn)=>(Be[Cn[0]]=Cn.slice(2),Be),{}),_t=await Jf.pbkdf2Sync(await Ad(),Buffer.from(M.s,"base64"),parseInt(M.i),32,"sha256"),Yt=await Dh(_t,"Client Key"),Wr="n=*,r="+Fc+",r="+M.r+",s="+M.s+",i="+M.i+",c=biws,r="+M.r;Se=(await Dh(await Dh(_t,"Server Key"),Wr)).toString("base64");let Ue="c=biws,r="+M.r+",p="+yD(Yt,Buffer.from(await Dh(await dD(Yt),Wr))).toString("base64");Or(St().p().str(Ue).end())}function Rx(m){if(m.toString("utf8",9).split(St.N,1)[0].slice(2)===Se)return;l(Br.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),q.destroy()}function Ad(){return Promise.resolve(typeof t.pass==="function"?t.pass():t.pass)}function Ix(){if(It.statement=rt.statement,It.statement.columns=[],rt.onlyDescribe)return rt.resolve(rt.statement),Or(En)}function Tx(m){E.pid=m.readUInt32BE(5),E.secret=m.readUInt32BE(9)}async function Nx(){on=!1,(await new Uo([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],gn)).forEach(({oid:M,typarray:_t})=>mx(M,_t))}function mx(m,M){if(!!t.parsers[M]&&!!t.serializers[M])return;let _t=t.parsers[m];t.shared.typeArrayMap[m]=M,t.parsers[M]=(Yt)=>nN(Yt,_t,M),t.parsers[M].array=!0,t.serializers[M]=(Yt)=>oN(Yt,t.serializers[m],t,M)}function ax(m,M){return m==="read-write"&&M.default_transaction_read_only==="on"||m==="read-only"&&M.default_transaction_read_only==="off"||m==="primary"&&M.in_hot_standby==="on"||m==="standby"&&M.in_hot_standby==="off"||m==="prefer-standby"&&M.in_hot_standby==="off"&&t.host[Ct]}function Ux(){let m=new Uo([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],gn,null,{simple:!0});m.resolve=([[M],[_t]])=>{fo.default_transaction_read_only=M.transaction_read_only,fo.in_hot_standby=_t.pg_is_in_recovery?"on":"off"},m.execute()}function Hx(m){if(rt)(rt.cursorFn||rt.describeFirst)&&Or(En),or=Br.postgres(qh(m));else l(Br.postgres(qh(m)))}function bx(m,M){delete x[m.signature],m.retried=M,gn(m)}function lx(m){if(!S)return;let M=9;while(m[M++]!==0);S(m.toString("utf8",9,M-1),m.toString("utf8",M,m.length-1))}async function Fx(){try{let m=await Promise.resolve(rt.cursorFn(It));Lr=0,m===Wc?Or(Cx(rt.portal)):(It=new Cs,Or(PT("",rt.cursorRows)))}catch(m){Or(En),rt.reject(m)}}function Lx(){It.count&&rt.cursorFn(It),rt.resolve(It)}function Gx(){cr=new p2.Writable({autoDestroy:!0,write(m,M,_t){q.write(St().d().raw(m).end(),_t)},destroy(m,M){M(m),q.write(St().f().str(m+St.N).end()),cr=null},final(m){q.write(St().c().end()),Bs=m,cr=null}}),rt.resolve(cr)}function vx(){cr=new p2.Readable({read(){q.resume()}}),rt.resolve(cr)}function Mx(){cr=new p2.Duplex({autoDestroy:!0,read(){q.resume()},write(m,M,_t){q.write(St().d().raw(m).end(),_t)},destroy(m,M){M(m),q.write(St().f().str(m+St.N).end()),cr=null},final(m){q.write(St().c().end()),Bs=m}}),rt.resolve(cr)}function zx(m){cr&&(cr.push(m.subarray(5))||q.pause())}function kx(){cr&&cr.push(null),cr=null}function Wx(m){R?R(qh(m)):console.log(qh(m))}function Zx(){}function Bx(){l(Br.notSupported("FunctionCallResponse"))}function Xx(){l(Br.notSupported("NegotiateProtocolVersion"))}function Jx(m){console.error("Postgres.js : Unknown Message:",m[0])}function Yx(m,M){console.error("Postgres.js : Unknown Auth:",M)}function Px(m,M,_t="",Yt=""){let Wr,Ue;return St().B().str(Yt+St.N).str(_t+St.N).i16(0).i16(m.length),m.forEach((Be,Cn)=>{if(Be===null)return St.i32(4294967295);Ue=M[Cn],m[Cn]=Be=Ue in t.serializers?t.serializers[Ue](Be):""+Be,Wr=St.i,St.inc(4).str(Be).i32(St.i-Wr-4,Wr)}),St.i16(0),St.end()}function YT(m,M,_t,Yt=""){return St().P().str(Yt+St.N).str(m+St.N).i16(M.length),M.forEach((Wr,Ue)=>St.i32(_t[Ue]||0)),St.end()}function gx(m,M=""){return St().D().str(m).str(M+St.N).end()}function PT(m="",M=0){return Buffer.concat([St().E().str(m+St.N).i32(M).end(),wN])}function Cx(m=""){return Buffer.concat([St().C().str("P").str(m+St.N).end(),St().S().end()])}function Qx(){return gt||St().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:h,database:u,client_encoding:"UTF8"},t.connection)).filter(([,m])=>m).map(([m,M])=>m+St.N+M).join(St.N)).z(2).end(0)}}function qh(t){let r={},e=5;for(let o=5;o<t.length-1;o++)if(t[o]===0)r[uD[t[e]]]=t.toString("utf8",e+1,o),e=o+1;return r}function pN(t){return Jf.createHash("md5").update(t).digest("hex")}function Dh(t,r){return Jf.createHmac("sha256",t).update(r).digest()}function dD(t){return Jf.createHash("sha256").update(t).digest()}function yD(t,r){let e=Math.max(t.length,r.length),o=Buffer.allocUnsafe(e);for(let n=0;n<e;n++)o[n]=t[n]^r[n];return o}function u2(t,r){if(r=typeof r==="function"?r():r,!r)return{cancel:Bc,start:Bc};let e;return{cancel(){e&&(clearTimeout(e),e=null)},start(){e&&clearTimeout(e),e=setTimeout(o,r*1000,arguments)}};function o(n){t.apply(null,n),e=null}}var d2,iD=1,En,wN,fD,hD,wD,Bc=()=>{},pD,uD;var dN=_(()=>{h2();Yh();cN();w2();Jh();iN();d2=uN,En=St().S().end(),wN=St().H().end(),fD=St().i32(8).i32(80877103).end(8),hD=Buffer.concat([St().E().str(St.N).i32(0).end(),En]),wD=St().D().str("S").str(St.N).end(),pD=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),uD={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"}});function y2(t,r){let e=new Map,o="postgresjs_"+Math.random().toString(36).slice(2),n={},c,i,f=!1,h=u.sql=t({...r,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...r.connection,replication:"database"},onclose:async function(){if(f)return;i=null,n.pid=n.secret=void 0,d(await y(h,o,r.publications)),e.forEach((S)=>S.forEach(({onsubscribe:T})=>T()))},no_subscribe:!0}),w=h.end,p=h.close;return h.end=async()=>{return f=!0,i&&await new Promise((S)=>(i.once("close",S),i.end())),w()},h.close=async()=>{return i&&await new Promise((S)=>(i.once("close",S),i.end())),p()},u;async function u(S,T,N=yN,G=yN){if(S=_D(S),!c)c=y(h,o,r.publications);let v={fn:T,onsubscribe:N},J=e.has(S)?e.get(S).add(v):e.set(S,new Set([v])).get(S),K=()=>{J.delete(v),J.size===0&&e.delete(S)};return c.then((D)=>{return d(D),N(),i&&i.on("error",G),{unsubscribe:K,state:n,sql:h}})}function d(S){i=S.stream,n.pid=S.state.pid,n.secret=S.state.secret}async function y(S,T,N){if(!N)throw Error("Missing publication names");let G=await S.unsafe(`CREATE_REPLICATION_SLOT ${T} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[v]=G,J=await S.unsafe(`START_REPLICATION SLOT ${T} LOGICAL ${v.consistent_point} (proto_version '1', publication_names '${N}')`).writable(),K={lsn:Buffer.concat(v.consistent_point.split("/").map((it)=>Buffer.from(("00000000"+it).slice(-8),"hex")))};return J.on("data",E),J.on("error",D),J.on("close",S.close),{stream:J,state:G.state};function D(it){console.error("Unexpected error during logical streaming - reconnecting",it)}function E(it){if(it[0]===119)SD(it.subarray(25),K,S.options.parsers,ht,r.transform);else if(it[0]===107&&it[17])K.lsn=it.subarray(1,9),Rt()}function ht(it,q){let gt=q.relation.schema+"."+q.relation.table;R("*",it,q),R("*:"+gt,it,q),q.relation.keys.length&&R("*:"+gt+"="+q.relation.keys.map((or)=>it[or.name]),it,q),R(q.command,it,q),R(q.command+":"+gt,it,q),q.relation.keys.length&&R(q.command+":"+gt+"="+q.relation.keys.map((or)=>it[or.name]),it,q)}function Rt(){let it=Buffer.alloc(34);it[0]=114,it.fill(K.lsn,1),it.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2000,0,1))*BigInt(1000),25),J.write(it)}}function R(S,T,N){e.has(S)&&e.get(S).forEach(({fn:G})=>G(T,N,S))}}function AD(t){return new Date(Date.UTC(2000,0,1)+Number(t/BigInt(1000)))}function SD(t,r,e,o,n){let c=(i,[f,h])=>(i[f.charCodeAt(0)]=h,i);Object.entries({R:(i)=>{let f=1,h=r[i.readUInt32BE(f)]={schema:i.toString("utf8",f+=4,f=i.indexOf(0,f))||"pg_catalog",table:i.toString("utf8",f+1,f=i.indexOf(0,f+1)),columns:Array(i.readUInt16BE(f+=2)),keys:[]};f+=2;let w=0,p;while(f<i.length)p=h.columns[w++]={key:i[f++],name:n.column.from?n.column.from(i.toString("utf8",f,f=i.indexOf(0,f))):i.toString("utf8",f,f=i.indexOf(0,f)),type:i.readUInt32BE(f+=1),parser:e[i.readUInt32BE(f)],atttypmod:i.readUInt32BE(f+=4)},p.key&&h.keys.push(p),f+=4},Y:()=>{},O:()=>{},B:(i)=>{r.date=AD(i.readBigInt64BE(9)),r.lsn=i.subarray(1,9)},I:(i)=>{let f=1,h=r[i.readUInt32BE(f)],{row:w}=Vh(i,h.columns,f+=7,n);o(w,{command:"insert",relation:h})},D:(i)=>{let f=1,h=r[i.readUInt32BE(f)];f+=4;let w=i[f]===75;o(w||i[f]===79?Vh(i,h.columns,f+=3,n).row:null,{command:"delete",relation:h,key:w})},U:(i)=>{let f=1,h=r[i.readUInt32BE(f)];f+=4;let w=i[f]===75,p=w||i[f]===79?Vh(i,h.columns,f+=3,n):null;p&&(f=p.i);let{row:u}=Vh(i,h.columns,f+3,n);o(u,{command:"update",relation:h,key:w,old:p&&p.row})},T:()=>{},C:()=>{}}).reduce(c,{})[t[0]](t)}function Vh(t,r,e,o){let n,c,i,f=o.raw?Array(r.length):{};for(let h=0;h<r.length;h++)n=t[e++],c=r[h],i=n===110?null:n===117?void 0:c.parser===void 0?t.toString("utf8",e+4,e+=4+t.readUInt32BE(e)):c.parser.array===!0?c.parser(t.toString("utf8",e+5,e+=4+t.readUInt32BE(e))):c.parser(t.toString("utf8",e+4,e+=4+t.readUInt32BE(e))),o.raw?f[h]=o.raw===!0?i:o.value.from?o.value.from(i,c):i:f[c.name]=o.value.from?o.value.from(i,c):i;return{i:e,row:o.row.from?o.row.from(f):f}}function _D(t){let r=t.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!r)throw Error("Malformed subscribe pattern: "+t);let[,e,o,n]=r;return(e||"*")+(o?":"+(o.indexOf(".")===-1?"public."+o:o):"")+(n?"="+n:"")}var yN=()=>{};import AN from"stream";function A2(t,r,e=393216){return new Promise(async(o,n)=>{await t.begin(async(c)=>{let i;!r&&([{oid:r}]=await c`select lo_creat(-1) as oid`);let[{fd:f}]=await c`select lo_open(${r}, ${e}) as fd`,h={writable:p,readable:w,close:()=>c`select lo_close(${f})`.then(i),tell:()=>c`select lo_tell64(${f})`,read:(u)=>c`select loread(${f}, ${u}) as data`,write:(u)=>c`select lowrite(${f}, ${u})`,truncate:(u)=>c`select lo_truncate64(${f}, ${u})`,seek:(u,d=0)=>c`select lo_lseek64(${f}, ${u}, ${d})`,size:()=>c`
          select
            lo_lseek64(${f}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return o(h),new Promise(async(u)=>i=u);async function w({highWaterMark:u=16384,start:d=0,end:y=1/0}={}){let R=y-d;return d&&await h.seek(d),new AN.Readable({highWaterMark:u,async read(S){let T=S>R?S-R:S;R-=S;let[{data:N}]=await h.read(T);if(this.push(N),N.length<S)this.push(null)}})}async function p({highWaterMark:u=16384,start:d=0}={}){return d&&await h.seek(d),new AN.Writable({highWaterMark:u,write(y,R,S){h.write(y).then(()=>S(),S)}})}}).catch(n)})}var SN=()=>{};import $D from"os";import OD from"fs";function jh(t,r){let e=RD(t,r),o=e.no_subscribe||y2(jh,{...e}),n=!1,c=uo(),i=uo(),f=uo(),h=uo(),w=uo(),p=uo(),u=uo(),d=uo(),y={connecting:i,reserved:f,closed:h,ended:w,open:p,busy:u,full:d},R=[...Array(e.max)].map(()=>d2(e,y,{onopen:on,onend:Fr,onclose:fo})),S=T(ht);return Object.assign(S,{get parameters(){return e.parameters},largeObject:A2.bind(null,S),subscribe:o,CLOSE:Wc,END:Wc,PostgresError:Zc,options:e,reserve:v,listen:N,begin:J,close:gt,end:q}),S;function T(x){return x.debug=e.debug,Object.entries(e.types).reduce((Ht,[Ct,mr])=>{return Ht[Ct]=(ar)=>new sn(ar,mr.to),Ht},Ot),Object.assign(hr,{types:Ot,typed:Ot,unsafe:Hr,notify:G,array:E,json:D,file:br}),hr;function Ot(Ht,Ct){return new sn(Ht,Ct)}function hr(Ht,...Ct){return Ht&&Array.isArray(Ht.raw)?new Uo(Ht,Ct,x,it):typeof Ht==="string"&&!Ct.length?new Xf(e.transform.column.to?e.transform.column.to(Ht):Ht):new Qh(Ht,Ct)}function Hr(Ht,Ct=[],mr={}){return arguments.length===2&&!Array.isArray(Ct)&&(mr=Ct,Ct=[]),new Uo([Ht],Ct,x,it,{prepare:!1,...mr,simple:"simple"in mr?mr.simple:Ct.length===0})}function br(Ht,Ct=[],mr={}){return arguments.length===2&&!Array.isArray(Ct)&&(mr=Ct,Ct=[]),new Uo([],Ct,(Lr)=>{OD.readFile(Ht,"utf8",(Se,wr)=>{if(Se)return Lr.reject(Se);Lr.strings=[wr],x(Lr)})},it,{...mr,simple:"simple"in mr?mr.simple:Ct.length===0})}}async function N(x,Ot,hr){let Hr={fn:Ot,onlisten:hr},br=N.sql||(N.sql=jh({...e,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(N.channels).forEach(([Lr,{listeners:Se}])=>{delete N.channels[Lr],Promise.all(Se.map((wr)=>N(Lr,wr.fn,wr.onlisten).catch(()=>{})))})},onnotify(Lr,Se){Lr in N.channels&&N.channels[Lr].listeners.forEach((wr)=>wr.fn(Se))}})),Ht=N.channels||(N.channels={});if(x in Ht){Ht[x].listeners.push(Hr);let Lr=await Ht[x].result;return Hr.onlisten&&Hr.onlisten(),{state:Lr.state,unlisten:ar}}Ht[x]={result:br`listen ${br.unsafe('"'+x.replace(/"/g,'""')+'"')}`,listeners:[Hr]};let mr=await Ht[x].result;return Hr.onlisten&&Hr.onlisten(),{state:mr.state,unlisten:ar};async function ar(){if(x in Ht===!1)return;if(Ht[x].listeners=Ht[x].listeners.filter((Lr)=>Lr!==Hr),Ht[x].listeners.length)return;return delete Ht[x],br`unlisten ${br.unsafe('"'+x.replace(/"/g,'""')+'"')}`}}async function G(x,Ot){return await S`select pg_notify(${x}, ${""+Ot})`}async function v(){let x=uo(),Ot=p.length?p.shift():await new Promise((br,Ht)=>{let Ct={reserve:br,reject:Ht};c.push(Ct),h.length&&It(h.shift(),Ct)});K(Ot,f),Ot.reserved=()=>x.length?Ot.execute(x.shift()):K(Ot,f),Ot.reserved.release=!0;let hr=T(Hr);return hr.release=()=>{Ot.reserved=null,on(Ot)},hr;function Hr(br){Ot.queue===d?x.push(br):Ot.execute(br)||K(Ot,d)}}async function J(x,Ot){!Ot&&(Ot=x,x="");let hr=uo(),Hr=0,br,Ht=null;try{return await S.unsafe("begin "+x.replace(/[^a-z ]/ig,""),[],{onexecute:mr}).execute(),await Promise.race([Ct(br,Ot),new Promise((ar,Lr)=>br.onclose=Lr)])}catch(ar){throw ar}async function Ct(ar,Lr,Se){let wr=T(xr);wr.savepoint=ae,wr.prepare=($r)=>Ht=$r.replace(/[^a-z0-9$-_. ]/gi);let Yo,mo;Se&&await wr`savepoint ${wr(Se)}`;try{if(mo=await new Promise(($r,cr)=>{let _e=Lr(wr);Promise.resolve(Array.isArray(_e)?Promise.all(_e):_e).then($r,cr)}),Yo)throw Yo}catch($r){throw await(Se?wr`rollback to ${wr(Se)}`:wr`rollback`),$r instanceof Zc&&$r.code==="25P02"&&Yo||$r}if(!Se)Ht?await wr`prepare transaction '${wr.unsafe(Ht)}'`:await wr`commit`;return mo;function ae($r,cr){if($r&&Array.isArray($r.raw))return ae((_e)=>_e.apply(_e,arguments));return arguments.length===1&&(cr=$r,$r=null),Ct(ar,cr,"s"+Hr+++($r?"_"+$r:""))}function xr($r){$r.catch((cr)=>Yo||(Yo=cr)),ar.queue===d?hr.push($r):ar.execute($r)||K(ar,d)}}function mr(ar){br=ar,K(ar,f),ar.reserved=()=>hr.length?ar.execute(hr.shift()):K(ar,f)}}function K(x,Ot){return x.queue.remove(x),Ot.push(x),x.queue=Ot,Ot===p?x.idleTimer.start():x.idleTimer.cancel(),x}function D(x){return new sn(x,3802)}function E(x,Ot){if(!Array.isArray(x))return E(Array.from(arguments));return new sn(x,Ot||(x.length?gh(x)||25:0),e.shared.typeArrayMap)}function ht(x){if(n)return x.reject(Br.connection("CONNECTION_ENDED",e,e));if(p.length)return Rt(p.shift(),x);if(h.length)return It(h.shift(),x);u.length?Rt(u.shift(),x):c.push(x)}function Rt(x,Ot){return x.execute(Ot)?K(x,u):K(x,d)}function it(x){return new Promise((Ot,hr)=>{x.state?x.active?d2(e).cancel(x.state,Ot,hr):x.cancelled={resolve:Ot,reject:hr}:(c.remove(x),x.cancelled=!0,x.reject(Br.generic("57014","canceling statement due to user request")),Ot())})}async function q({timeout:x=null}={}){if(n)return n;await 1;let Ot;return n=Promise.race([new Promise((hr)=>x!==null&&(Ot=setTimeout(or,x*1000,hr))),Promise.all(R.map((hr)=>hr.end()).concat(N.sql?N.sql.end({timeout:0}):[],o.sql?o.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(Ot))}async function gt(){await Promise.all(R.map((x)=>x.end()))}async function or(x){await Promise.all(R.map((Ot)=>Ot.terminate()));while(c.length)c.shift().reject(Br.connection("CONNECTION_DESTROYED",e));x()}function It(x,Ot){return K(x,i),x.connect(Ot),x}function Fr(x){K(x,w)}function on(x){if(c.length===0)return K(x,p);let Ot=Math.ceil(c.length/(i.length+1)),hr=!0;while(hr&&c.length&&Ot-- >0){let Hr=c.shift();if(Hr.reserve)return Hr.reserve(x);hr=x.execute(Hr)}hr?K(x,u):K(x,d)}function fo(x,Ot){K(x,h),x.reserved=null,x.onclose&&(x.onclose(Ot),x.onclose=null),e.onclose&&e.onclose(x.id),c.length&&It(x,c.shift())}}function RD(t,r){if(t&&t.shared)return t;let e=process.env,o=(!t||typeof t==="string"?r:t)||{},{url:n,multihost:c}=aD(t),i=[...n.searchParams].reduce((d,[y,R])=>(d[y]=R,d),{}),f=o.hostname||o.host||c||n.hostname||e.PGHOST||"localhost",h=o.port||n.port||e.PGPORT||5432,w=o.user||o.username||n.username||e.PGUSERNAME||e.PGUSER||UD();o.no_prepare&&(o.prepare=!1),i.sslmode&&(i.ssl=i.sslmode,delete i.sslmode),"timeout"in o&&(console.log("The timeout option is deprecated, use idle_timeout instead"),o.idle_timeout=o.timeout),i.sslrootcert==="system"&&(i.ssl="verify-full");let p=["idle_timeout","connect_timeout","max_lifetime","max_pipeline","backoff","keep_alive"],u={max:globalThis.Cloudflare?3:10,ssl:!1,sslnegotiation:null,idle_timeout:null,connect_timeout:30,max_lifetime:ND,max_pipeline:100,backoff:TD,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(f)?f:f.split(",").map((d)=>d.split(":")[0]),port:Array.isArray(h)?h:f.split(",").map((d)=>parseInt(d.split(":")[1]||h)),path:o.path||f.indexOf("/")>-1&&f+"/.s.PGSQL."+h,database:o.database||o.db||(n.pathname||"").slice(1)||e.PGDATABASE||w,user:w,pass:o.pass||o.password||n.password||e.PGPASSWORD||"",...Object.entries(u).reduce((d,[y,R])=>{let S=y in o?o[y]:(y in i)?i[y]==="disable"||i[y]==="false"?!1:i[y]:e["PG"+y.toUpperCase()]||R;return d[y]=typeof S==="string"&&p.includes(y)?+S:S,d},{}),connection:{application_name:e.PGAPPNAME||"postgres.js",...o.connection,...Object.entries(i).reduce((d,[y,R])=>((y in u)||(d[y]=R),d),{})},types:o.types||{},target_session_attrs:ID(o,n,e),onnotice:o.onnotice,onnotify:o.onnotify,onclose:o.onclose,onparameter:o.onparameter,socket:o.socket,transform:mD(o.transform||{undefined:void 0}),parameters:{},shared:{retries:0,typeArrayMap:{}},...rN(o.types)}}function ID(t,r,e){let o=t.target_session_attrs||r.searchParams.get("target_session_attrs")||e.PGTARGETSESSIONATTRS;if(!o||["read-write","read-only","primary","standby","prefer-standby"].includes(o))return o;throw Error("target_session_attrs "+o+" is not supported")}function TD(t){return(0.5+Math.random()/2)*Math.min(3**t/100,20)}function ND(){return 60*(30+Math.random()*30)}function mD(t){return{undefined:t.undefined,column:{from:typeof t.column==="function"?t.column:t.column&&t.column.from,to:t.column&&t.column.to},value:{from:typeof t.value==="function"?t.value:t.value&&t.value.from,to:t.value&&t.value.to},row:{from:typeof t.row==="function"?t.row:t.row&&t.row.from,to:t.row&&t.row.to}}}function aD(t){if(!t||typeof t!=="string")return{url:{searchParams:new Map}};let r=t;r=r.slice(r.indexOf("://")+3).split(/[?/]/)[0],r=decodeURIComponent(r.slice(r.indexOf("@")+1));let e=new URL(t.replace(r,r.split(",")[0]));return{url:{username:decodeURIComponent(e.username),password:decodeURIComponent(e.password),host:e.host,hostname:e.hostname,port:e.port,pathname:e.pathname,searchParams:e.searchParams},multihost:r.indexOf(",")>-1&&r}}function UD(){try{return $D.userInfo().username}catch(t){return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}var Xc;var S2=_(()=>{h2();dN();Jh();w2();Yh();SN();Object.assign(jh,{PostgresError:Zc,toPascal:Ps,pascal:i2,toCamel:Ys,camel:c2,toKebab:gs,kebab:f2,fromPascal:Zf,fromCamel:Wf,fromKebab:Bf,BigInt:{to:20,from:[20],parse:(t)=>BigInt(t),serialize:(t)=>t.toString()}});Xc=jh});function W(t,r){if(!t||typeof t!=="object")return!1;if(t instanceof r)return!0;if(!Object.prototype.hasOwnProperty.call(r,a))throw Error(`Class "${r.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let e=Object.getPrototypeOf(t).constructor;if(e)while(e){if(a in e&&e[a]===r[a])return!0;e=Object.getPrototypeOf(e)}return!1}var a,HD;var et=_(()=>{a=Symbol.for("drizzle:entityKind"),HD=Symbol.for("drizzle:hasOwnEntityKind")});var _2,tw,rw;var ew=_(()=>{et();_2=class _2{static[a]="ConsoleLogWriter";write(t){console.log(t)}};tw=class tw{static[a]="DefaultLogger";writer;constructor(t){this.writer=t?.writer??new _2}logQuery(t,r){let e=r.map((n)=>{try{return JSON.stringify(n)}catch{return String(n)}}),o=e.length?` -- params: [${e.join(", ")}]`:"";this.writer.write(`Query: ${t}${o}`)}};rw=class rw{static[a]="NoopLogger";logQuery(){}}});var be;var On=_(()=>{et();be=class be{static[a]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(t){return this.then(void 0,t)}finally(t){return this.then((r)=>{return t?.(),r},(r)=>{throw t?.(),r})}then(t,r){return this.execute().then(t,r)}}});var Qt;var Po=_(()=>{et();Qt=class Qt{constructor(t,r){this.table=t,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[a]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}});var ow;var $2=_(()=>{et();ow=class ow{static[a]="ColumnBuilder";config;constructor(t,r,e){this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:e,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){if(this.config.name!=="")return;this.config.name=t}}});var go;var nw=_(()=>{go=Symbol.for("drizzle:Name")});var O2,_N;var R2=_(()=>{et();nw();O2=class O2{static[a]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(t,r){if(this.reference=()=>{let{name:e,columns:o,foreignColumns:n}=t();return{name:e,columns:o,foreignTable:n[0].table,foreignColumns:n}},r)this._onUpdate=r.onUpdate,this._onDelete=r.onDelete}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new _N(t,this)}};_N=class _N{constructor(t,r){this.table=t,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[a]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:t,columns:r,foreignColumns:e}=this.reference(),o=r.map((i)=>i.name),n=e.map((i)=>i.name),c=[this.table[go],...o,e[0].table[go],...n];return t??`${c.join("_")}_fk`}}});function sw(t,...r){return t(...r)}var I2=()=>{};function $N(t){return new RN(t)}function T2(t,r){return`${t[go]}_${r.join("_")}_unique`}var ON,RN,IN;var N2=_(()=>{et();nw();ON=class ON{constructor(t,r){this.name=r,this.columns=t}static[a]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(t){return new IN(t,this.columns,this.nullsNotDistinctConfig,this.name)}};RN=class RN{static[a]="PgUniqueOnConstraintBuilder";name;constructor(t){this.name=t}on(...t){return new ON(t,this.name)}};IN=class IN{constructor(t,r,e,o){this.table=t,this.columns=r,this.name=o??T2(this.table,this.columns.map((n)=>n.name)),this.nullsNotDistinct=e}static[a]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}});function TN(t,r,e){for(let o=r;o<t.length;o++){let n=t[o];if(n==="\\"){o++;continue}if(n==='"')return[t.slice(r,o).replace(/\\/g,""),o+1];if(e)continue;if(n===","||n==="}")return[t.slice(r,o).replace(/\\/g,""),o]}return[t.slice(r).replace(/\\/g,""),t.length]}function NN(t,r=0){let e=[],o=r,n=!1;while(o<t.length){let c=t[o];if(c===","){if(n||o===r)e.push("");n=!0,o++;continue}if(n=!1,c==="\\"){o+=2;continue}if(c==='"'){let[h,w]=TN(t,o+1,!0);e.push(h),o=w;continue}if(c==="}")return[e,o+1];if(c==="{"){let[h,w]=NN(t,o+1);e.push(h),o=w;continue}let[i,f]=TN(t,o,!1);e.push(i),o=f}return[e,o]}function mN(t){let[r]=NN(t,1);return r}function m2(t){return`{${t.map((r)=>{if(Array.isArray(r))return m2(r);if(typeof r==="string")return`"${r.replace(/\\/g,"\\\\").replace(/"/g,"\\\"")}"`;return`${r}`}).join(",")}}`}var a2=()=>{};var ct,V,aN,UN,U2;var vt=_(()=>{$2();Po();et();R2();I2();N2();a2();ct=class ct extends ow{foreignKeyConfigs=[];static[a]="PgColumnBuilder";array(t){return new UN(this.config.name,this,t)}references(t,r={}){return this.foreignKeyConfigs.push({ref:t,actions:r}),this}unique(t,r){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,r){return this.foreignKeyConfigs.map(({ref:e,actions:o})=>{return sw((n,c)=>{let i=new O2(()=>{let f=n();return{columns:[t],foreignColumns:[f]}});if(c.onUpdate)i.onUpdate(c.onUpdate);if(c.onDelete)i.onDelete(c.onDelete);return i.build(r)},e,o)})}buildExtraConfigColumn(t){return new aN(t,this.config)}};V=class V extends Qt{constructor(t,r){if(!r.uniqueName)r.uniqueName=T2(t,[r.name]);super(t,r);this.table=t}static[a]="PgColumn"};aN=class aN extends V{static[a]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}};UN=class UN extends ct{static[a]="PgArrayBuilder";constructor(t,r,e){super(t,"array","PgArray");this.config.baseBuilder=r,this.config.size=e}build(t){let r=this.config.baseBuilder.build(t);return new U2(t,this.config,r)}};U2=class U2 extends V{constructor(t,r,e,o){super(t,r);this.baseColumn=e,this.range=o,this.size=r.size}size;static[a]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size==="number"?this.size:""}]`}mapFromDriverValue(t){if(typeof t==="string")t=mN(t);return t.map((r)=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(t,r=!1){let e=t.map((o)=>o===null?null:W(this.baseColumn,U2)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));if(r)return e;return m2(e)}}});function bN(t){return!!t&&typeof t==="function"&&HN in t&&t[HN]===!0}var bD,HN,lD;var H2=_(()=>{et();vt();bD=class bD extends V{static[a]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(t,r){super(t,r);this.enum=r.enum}getSQLType(){return this.enum.enumName}};HN=Symbol.for("drizzle:isPgEnum");lD=class lD extends V{static[a]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(t,r){super(t,r);this.enum=r.enum}getSQLType(){return this.enum.enumName}}});var Ur,Jc;var Co=_(()=>{et();Ur=class Ur{static[a]="Subquery";constructor(t,r,e,o=!1,n=[]){this._={brand:"Subquery",sql:t,selectedFields:r,alias:e,isWith:o,usedTables:n}}};Jc=class Jc extends Ur{static[a]="WithSubquery"}});var lN="0.45.1";var FN=()=>{};var b2,l2,Sr;var Rn=_(()=>{I2();FN();Sr={startActiveSpan(t,r){if(!b2)return r();if(!l2)l2=b2.trace.getTracer("drizzle-orm",lN);return sw((e,o)=>o.startActiveSpan(t,(n)=>{try{return r(n)}catch(c){throw n.setStatus({code:e.SpanStatusCode.ERROR,message:c instanceof Error?c.message:"Unknown error"}),c}finally{n.end()}}),b2,l2)}}});var ir;var In=_(()=>{ir=Symbol.for("drizzle:ViewBaseConfig")});function FD(t){return typeof t==="object"&&t!==null&&LN in t}function Xe(t){return t[go]}function qn(t){return`${t[xn]??"public"}.${t[go]}`}var xn,Yf,F2,cw,iw,Yc,L2,LN,j;var Je=_(()=>{et();nw();xn=Symbol.for("drizzle:Schema"),Yf=Symbol.for("drizzle:Columns"),F2=Symbol.for("drizzle:ExtraConfigColumns"),cw=Symbol.for("drizzle:OriginalName"),iw=Symbol.for("drizzle:BaseName"),Yc=Symbol.for("drizzle:IsAlias"),L2=Symbol.for("drizzle:ExtraConfigBuilder"),LN=Symbol.for("drizzle:IsDrizzleTable");j=class j{static[a]="Table";static Symbol={Name:go,Schema:xn,OriginalName:cw,Columns:Yf,ExtraConfigColumns:F2,BaseName:iw,IsAlias:Yc,ExtraConfigBuilder:L2};[go];[cw];[xn];[Yf];[F2];[iw];[Yc]=!1;[LN]=!0;[L2]=void 0;constructor(t,r,e){this[go]=this[cw]=t,this[xn]=r,this[iw]=e}}});function fw(t){return t!==null&&t!==void 0&&typeof t.getSQL==="function"}function LD(t){let r={sql:"",params:[]};for(let e of t)if(r.sql+=e.sql,r.params.push(...e.params),e.typings?.length){if(!r.typings)r.typings=[];r.typings.push(...e.typings)}return r}function GD(t){return new Pc(t)}function G2(t){return typeof t==="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue==="function"}function MD(t,r){return new Ye(t,r)}function I(t,...r){let e=[];if(r.length>0||t.length>0&&t[0]!=="")e.push(new qr(t[0]));for(let[o,n]of r.entries())e.push(n,new qr(t[o+1]));return new ot(e)}function zD(t){return new cn(t)}function hw(t,r){return t.map((e)=>{if(W(e,cn)){if(!(e.name in r))throw Error(`No value for placeholder "${e.name}" was provided`);return r[e.name]}if(W(e,Ye)&&W(e.value,cn)){if(!(e.value.name in r))throw Error(`No value for placeholder "${e.value.name}" was provided`);return e.encoder.mapToDriverValue(r[e.value.name])}return e})}function kD(t){return typeof t==="object"&&t!==null&&vN in t}function WD(t){return t[ir].name}var GN,qr,ot,Pc,v2,M2,vD,Ye,cn,vN,Pe;var gr=_(()=>{et();H2();Co();Rn();In();Po();Je();GN=class GN{static[a]="FakePrimitiveParam"};qr=class qr{static[a]="StringChunk";value;constructor(t){this.value=Array.isArray(t)?t:[t]}getSQL(){return new ot([this])}};ot=class ot{constructor(t){this.queryChunks=t;for(let r of t)if(W(r,j)){let e=r[j.Symbol.Schema];this.usedTables.push(e===void 0?r[j.Symbol.Name]:e+"."+r[j.Symbol.Name])}}static[a]="SQL";decoder=v2;shouldInlineParams=!1;usedTables=[];append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return Sr.startActiveSpan("drizzle.buildSQL",(r)=>{let e=this.buildQueryFromSourceParams(this.queryChunks,t);return r?.setAttributes({"drizzle.query.text":e.sql,"drizzle.query.params":JSON.stringify(e.params)}),e})}buildQueryFromSourceParams(t,r){let e=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:o,escapeName:n,escapeParam:c,prepareTyping:i,inlineParams:f,paramStartIndex:h}=e;return LD(t.map((w)=>{if(W(w,qr))return{sql:w.value.join(""),params:[]};if(W(w,Pc))return{sql:n(w.value),params:[]};if(w===void 0)return{sql:"",params:[]};if(Array.isArray(w)){let p=[new qr("(")];for(let[u,d]of w.entries())if(p.push(d),u<w.length-1)p.push(new qr(", "));return p.push(new qr(")")),this.buildQueryFromSourceParams(p,e)}if(W(w,ot))return this.buildQueryFromSourceParams(w.queryChunks,{...e,inlineParams:f||w.shouldInlineParams});if(W(w,j)){let p=w[j.Symbol.Schema],u=w[j.Symbol.Name];return{sql:p===void 0||w[Yc]?n(u):n(p)+"."+n(u),params:[]}}if(W(w,Qt)){let p=o.getColumnCasing(w);if(r.invokeSource==="indexes")return{sql:n(p),params:[]};let u=w.table[j.Symbol.Schema];return{sql:w.table[Yc]||u===void 0?n(w.table[j.Symbol.Name])+"."+n(p):n(u)+"."+n(w.table[j.Symbol.Name])+"."+n(p),params:[]}}if(W(w,Pe)){let p=w[ir].schema,u=w[ir].name;return{sql:p===void 0||w[ir].isAlias?n(u):n(p)+"."+n(u),params:[]}}if(W(w,Ye)){if(W(w.value,cn))return{sql:c(h.value++,w),params:[w],typings:["none"]};let p=w.value===null?null:w.encoder.mapToDriverValue(w.value);if(W(p,ot))return this.buildQueryFromSourceParams([p],e);if(f)return{sql:this.mapInlineParam(p,e),params:[]};let u=["none"];if(i)u=[i(w.encoder)];return{sql:c(h.value++,p),params:[p],typings:u}}if(W(w,cn))return{sql:c(h.value++,w),params:[w],typings:["none"]};if(W(w,ot.Aliased)&&w.fieldAlias!==void 0)return{sql:n(w.fieldAlias),params:[]};if(W(w,Ur)){if(w._.isWith)return{sql:n(w._.alias),params:[]};return this.buildQueryFromSourceParams([new qr("("),w._.sql,new qr(") "),new Pc(w._.alias)],e)}if(bN(w)){if(w.schema)return{sql:n(w.schema)+"."+n(w.enumName),params:[]};return{sql:n(w.enumName),params:[]}}if(fw(w)){if(w.shouldOmitSQLParens?.())return this.buildQueryFromSourceParams([w.getSQL()],e);return this.buildQueryFromSourceParams([new qr("("),w.getSQL(),new qr(")")],e)}if(f)return{sql:this.mapInlineParam(w,e),params:[]};return{sql:c(h.value++,w),params:[w],typings:["none"]}}))}mapInlineParam(t,{escapeString:r}){if(t===null)return"null";if(typeof t==="number"||typeof t==="boolean")return t.toString();if(typeof t==="string")return r(t);if(typeof t==="object"){let e=t.toString();if(e==="[object Object]")return r(JSON.stringify(t));return r(e)}throw Error("Unexpected param value: "+t)}getSQL(){return this}as(t){if(t===void 0)return this;return new ot.Aliased(this,t)}mapWith(t){return this.decoder=typeof t==="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};Pc=class Pc{constructor(t){this.value=t}static[a]="Name";brand;getSQL(){return new ot([this])}};v2={mapFromDriverValue:(t)=>t},M2={mapToDriverValue:(t)=>t},vD={...v2,...M2};Ye=class Ye{constructor(t,r=M2){this.value=t,this.encoder=r}static[a]="Param";brand;getSQL(){return new ot([this])}};((t)=>{function r(){return new ot([])}t.empty=r;function e(h){return new ot(h)}t.fromList=e;function o(h){return new ot([new qr(h)])}t.raw=o;function n(h,w){let p=[];for(let[u,d]of h.entries()){if(u>0&&w!==void 0)p.push(w);p.push(d)}return new ot(p)}t.join=n;function c(h){return new Pc(h)}t.identifier=c;function i(h){return new cn(h)}t.placeholder=i;function f(h,w){return new Ye(h,w)}t.param=f})(I||(I={}));((t)=>{class r{constructor(e,o){this.sql=e,this.fieldAlias=o}static[a]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}}t.Aliased=r})(ot||(ot={}));cn=class cn{constructor(t){this.name=t}static[a]="Placeholder";getSQL(){return new ot([this])}};vN=Symbol.for("drizzle:IsDrizzleView");Pe=class Pe{static[a]="View";[ir];[vN]=!0;constructor({name:t,schema:r,selectedFields:e,query:o}){this[ir]={name:t,originalName:t,schema:r,selectedFields:e,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new ot([this])}};Qt.prototype.getSQL=function(){return new ot([this])};j.prototype.getSQL=function(){return new ot([this])};Ur.prototype.getSQL=function(){return new ot([this])}});function Cc(t,r){return new Proxy(t,new gc(r,!1))}function ZD(t,r){return new Proxy(t,new z2(r))}function Qo(t,r){return new Proxy(t,new Qs(new Proxy(t.table,new gc(r,!1))))}function ww(t,r){return new ot.Aliased(Qc(t.sql,r),t.fieldAlias)}function Qc(t,r){return I.join(t.queryChunks.map((e)=>{if(W(e,Qt))return Qo(e,r);if(W(e,ot))return Qc(e,r);if(W(e,ot.Aliased))return ww(e,r);return e}))}var Qs,gc,z2;var pw=_(()=>{Po();et();gr();Je();In();Qs=class Qs{constructor(t){this.table=t}static[a]="ColumnAliasProxyHandler";get(t,r){if(r==="table")return this.table;return t[r]}};gc=class gc{constructor(t,r){this.alias=t,this.replaceOriginalName=r}static[a]="TableAliasProxyHandler";get(t,r){if(r===j.Symbol.IsAlias)return!0;if(r===j.Symbol.Name)return this.alias;if(this.replaceOriginalName&&r===j.Symbol.OriginalName)return this.alias;if(r===ir)return{...t[ir],name:this.alias,isAlias:!0};if(r===j.Symbol.Columns){let o=t[j.Symbol.Columns];if(!o)return o;let n={};return Object.keys(o).map((c)=>{n[c]=new Proxy(o[c],new Qs(new Proxy(t,this)))}),n}let e=t[r];if(W(e,Qt))return new Proxy(e,new Qs(new Proxy(t,this)));return e}};z2=class z2{constructor(t){this.alias=t}static[a]="RelationTableAliasProxyHandler";get(t,r){if(r==="sourceTable")return Cc(t.sourceTable,this.alias);return t[r]}}});var Xr;var Ks=_(()=>{pw();Po();et();gr();Co();In();Xr=class Xr{static[a]="SelectionProxyHandler";config;constructor(t){this.config={...t}}get(t,r){if(r==="_")return{...t._,selectedFields:new Proxy(t._.selectedFields,this)};if(r===ir)return{...t[ir],selectedFields:new Proxy(t[ir].selectedFields,this)};if(typeof r==="symbol")return t[r];let o=(W(t,Ur)?t._.selectedFields:W(t,Pe)?t[ir].selectedFields:t)[r];if(W(o,ot.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!o.isSelectionField)return o.sql;let n=o.clone();return n.isSelectionField=!0,n}if(W(o,ot)){if(this.config.sqlBehavior==="sql")return o;throw Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}if(W(o,Qt)){if(this.config.alias)return new Proxy(o,new Qs(new Proxy(o.table,new gc(this.config.alias,this.config.replaceOriginalName??!1))));return o}if(typeof o!=="object"||o===null)return o;return new Proxy(o,new Xr(this.config))}}});function k2(t,r,e){let o={},n=t.reduce((c,{path:i,field:f},h)=>{let w;if(W(f,Qt))w=f;else if(W(f,ot))w=f.decoder;else if(W(f,Ur))w=f._.sql.decoder;else w=f.sql.decoder;let p=c;for(let[u,d]of i.entries())if(u<i.length-1){if(!(d in p))p[d]={};p=p[d]}else{let y=r[h],R=p[d]=y===null?null:w.mapFromDriverValue(y);if(e&&W(f,Qt)&&i.length===2){let S=i[0];if(!(S in o))o[S]=R===null?Xe(f.table):!1;else if(typeof o[S]==="string"&&o[S]!==Xe(f.table))o[S]=!1}}return c},{});if(e&&Object.keys(o).length>0){for(let[c,i]of Object.entries(o))if(typeof i==="string"&&!e[i])n[c]=null}return n}function yo(t,r){return Object.entries(t).reduce((e,[o,n])=>{if(typeof o!=="string")return e;let c=r?[...r,o]:[o];if(W(n,Qt)||W(n,ot)||W(n,ot.Aliased)||W(n,Ur))e.push({path:c,field:n});else if(W(n,j))e.push(...yo(n[j.Symbol.Columns],c));else e.push(...yo(n,c));return e},[])}function Kc(t,r){let e=Object.keys(t),o=Object.keys(r);if(e.length!==o.length)return!1;for(let[n,c]of e.entries())if(c!==o[n])return!1;return!0}function Pf(t,r){let e=Object.entries(r).filter(([,o])=>o!==void 0).map(([o,n])=>{if(W(n,ot)||W(n,Qt))return[o,n];else return[o,new Ye(n,t[j.Symbol.Columns][o])]});if(e.length===0)throw Error("No values to set");return Object.fromEntries(e)}function W2(t,r){for(let e of r)for(let o of Object.getOwnPropertyNames(e.prototype)){if(o==="constructor")continue;Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(e.prototype,o)||Object.create(null))}}function Z2(t){return t[j.Symbol.Columns]}function BD(t){return t[ir].selectedFields}function fn(t){return W(t,Ur)?t._.alias:W(t,Pe)?t[ir].name:W(t,ot)?void 0:t[j.Symbol.IsAlias]?t[j.Symbol.Name]:t[j.Symbol.BaseName]}function Mt(t,r){return{name:typeof t==="string"&&t.length>0?t:"",config:typeof t==="object"?t:r}}function B2(t){if(typeof t!=="object"||t===null)return!1;if(t.constructor.name!=="Object")return!1;if("logger"in t){let r=typeof t.logger;if(r!=="boolean"&&(r!=="object"||typeof t.logger.logQuery!=="function")&&r!=="undefined")return!1;return!0}if("schema"in t){let r=typeof t.schema;if(r!=="object"&&r!=="undefined")return!1;return!0}if("casing"in t){let r=typeof t.casing;if(r!=="string"&&r!=="undefined")return!1;return!0}if("mode"in t){if(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0)return!1;return!0}if("connection"in t){let r=typeof t.connection;if(r!=="string"&&r!=="object"&&r!=="undefined")return!1;return!0}if("client"in t){let r=typeof t.client;if(r!=="object"&&r!=="function"&&r!=="undefined")return!1;return!0}if(Object.keys(t).length===0)return!0;return!1}var XD;var dr=_(()=>{Po();et();gr();Co();Je();In();XD=typeof TextDecoder>"u"?null:new TextDecoder});var Dn;var gf=_(()=>{et();vt();Dn=class Dn extends ct{static[a]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(t){if(t){let{name:r,...e}=t;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:e}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){let{name:r,...e}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:e}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}});function ZN(t,r){let{name:e,config:o}=Mt(t,r);if(o.mode==="number")return new MN(e);return new kN(e)}var MN,zN,kN,WN;var X2=_(()=>{et();dr();vt();gf();MN=class MN extends Dn{static[a]="PgBigInt53Builder";constructor(t){super(t,"number","PgBigInt53")}build(t){return new zN(t,this.config)}};zN=class zN extends V{static[a]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(t){if(typeof t==="number")return t;return Number(t)}};kN=class kN extends Dn{static[a]="PgBigInt64Builder";constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new WN(t,this.config)}};WN=class WN extends V{static[a]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}});function PN(t,r){let{name:e,config:o}=Mt(t,r);if(o.mode==="number")return new BN(e);return new JN(e)}var BN,XN,JN,YN;var J2=_(()=>{et();dr();vt();BN=class BN extends ct{static[a]="PgBigSerial53Builder";constructor(t){super(t,"number","PgBigSerial53");this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new XN(t,this.config)}};XN=class XN extends V{static[a]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(t){if(typeof t==="number")return t;return Number(t)}};JN=class JN extends ct{static[a]="PgBigSerial64Builder";constructor(t){super(t,"bigint","PgBigSerial64");this.config.hasDefault=!0}build(t){return new YN(t,this.config)}};YN=class YN extends V{static[a]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}});function Ho(t){return new gN(t??"")}var gN,CN;var Y2=_(()=>{et();vt();gN=class gN extends ct{static[a]="PgBooleanBuilder";constructor(t){super(t,"boolean","PgBoolean")}build(t){return new CN(t,this.config)}};CN=class CN extends V{static[a]="PgBoolean";getSQLType(){return"boolean"}}});function EN(t,r={}){let{name:e,config:o}=Mt(t,r);return new QN(e,o)}var QN,KN;var P2=_(()=>{et();dr();vt();QN=class QN extends ct{static[a]="PgCharBuilder";constructor(t,r){super(t,"string","PgChar");this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new KN(t,this.config)}};KN=class KN extends V{static[a]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}});function DN(t){return new xN(t??"")}var xN,qN;var g2=_(()=>{et();vt();xN=class xN extends ct{static[a]="PgCidrBuilder";constructor(t){super(t,"string","PgCidr")}build(t){return new qN(t,this.config)}};qN=class qN extends V{static[a]="PgCidr";getSQLType(){return"cidr"}}});function tm(t){return(r,e)=>{let{name:o,config:n}=Mt(r,e);return new VN(o,n,t)}}var VN,jN;var C2=_(()=>{et();dr();vt();VN=class VN extends ct{static[a]="PgCustomColumnBuilder";constructor(t,r,e){super(t,"custom","PgCustomColumn");this.config.fieldConfig=r,this.config.customTypeParams=e}build(t){return new jN(t,this.config)}};jN=class jN extends V{static[a]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(t,r){super(t,r);this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return typeof this.mapFrom==="function"?this.mapFrom(t):t}mapToDriverValue(t){return typeof this.mapTo==="function"?this.mapTo(t):t}}});var Tn;var uw=_(()=>{et();gr();vt();Tn=class Tn extends ct{static[a]="PgDateColumnBaseBuilder";defaultNow(){return this.default(I`now()`)}}});function om(t,r){let{name:e,config:o}=Mt(t,r);if(o?.mode==="date")return new rm(e);return new em(e)}var rm,dw,em,yw;var Q2=_(()=>{et();dr();vt();uw();rm=class rm extends Tn{static[a]="PgDateBuilder";constructor(t){super(t,"date","PgDate")}build(t){return new dw(t,this.config)}};dw=class dw extends V{static[a]="PgDate";getSQLType(){return"date"}mapFromDriverValue(t){if(typeof t==="string")return new Date(t);return t}mapToDriverValue(t){return t.toISOString()}};em=class em extends Tn{static[a]="PgDateStringBuilder";constructor(t){super(t,"string","PgDateString")}build(t){return new yw(t,this.config)}};yw=class yw extends V{static[a]="PgDateString";getSQLType(){return"date"}mapFromDriverValue(t){if(typeof t==="string")return t;return t.toISOString().slice(0,-14)}}});function cm(t){return new nm(t??"")}var nm,sm;var K2=_(()=>{et();vt();nm=class nm extends ct{static[a]="PgDoublePrecisionBuilder";constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new sm(t,this.config)}};sm=class sm extends V{static[a]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(t){if(typeof t==="string")return Number.parseFloat(t);return t}}});function hm(t){return new im(t??"")}var im,fm;var E2=_(()=>{et();vt();im=class im extends ct{static[a]="PgInetBuilder";constructor(t){super(t,"string","PgInet")}build(t){return new fm(t,this.config)}};fm=class fm extends V{static[a]="PgInet";getSQLType(){return"inet"}}});function Gr(t){return new wm(t??"")}var wm,pm;var x2=_(()=>{et();vt();gf();wm=class wm extends Dn{static[a]="PgIntegerBuilder";constructor(t){super(t,"number","PgInteger")}build(t){return new pm(t,this.config)}};pm=class pm extends V{static[a]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(t){if(typeof t==="string")return Number.parseInt(t);return t}}});function ym(t,r={}){let{name:e,config:o}=Mt(t,r);return new um(e,o)}var um,dm;var q2=_(()=>{et();dr();vt();um=class um extends ct{static[a]="PgIntervalBuilder";constructor(t,r){super(t,"string","PgInterval");this.config.intervalConfig=r}build(t){return new dm(t,this.config)}};dm=class dm extends V{static[a]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let t=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${t}${r}`}}});function Ec(t){return new Am(t??"")}var Am,Aw;var D2=_(()=>{et();vt();Am=class Am extends ct{static[a]="PgJsonBuilder";constructor(t){super(t,"json","PgJson")}build(t){return new Aw(t,this.config)}};Aw=class Aw extends V{static[a]="PgJson";constructor(t,r){super(t,r)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t==="string")try{return JSON.parse(t)}catch{return t}return t}}});function _m(t){return new Sm(t??"")}var Sm,Sw;var V2=_(()=>{et();vt();Sm=class Sm extends ct{static[a]="PgJsonbBuilder";constructor(t){super(t,"json","PgJsonb")}build(t){return new Sw(t,this.config)}};Sw=class Sw extends V{static[a]="PgJsonb";constructor(t,r){super(t,r)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t==="string")try{return JSON.parse(t)}catch{return t}return t}}});function Tm(t,r){let{name:e,config:o}=Mt(t,r);if(!o?.mode||o.mode==="tuple")return new $m(e);return new Rm(e)}var $m,Om,Rm,Im;var j2=_(()=>{et();dr();vt();$m=class $m extends ct{static[a]="PgLineBuilder";constructor(t){super(t,"array","PgLine")}build(t){return new Om(t,this.config)}};Om=class Om extends V{static[a]="PgLine";getSQLType(){return"line"}mapFromDriverValue(t){let[r,e,o]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(e),Number.parseFloat(o)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}};Rm=class Rm extends ct{static[a]="PgLineABCBuilder";constructor(t){super(t,"json","PgLineABC")}build(t){return new Im(t,this.config)}};Im=class Im extends V{static[a]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(t){let[r,e,o]=t.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(e),c:Number.parseFloat(o)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}});function am(t){return new Nm(t??"")}var Nm,mm;var ty=_(()=>{et();vt();Nm=class Nm extends ct{static[a]="PgMacaddrBuilder";constructor(t){super(t,"string","PgMacaddr")}build(t){return new mm(t,this.config)}};mm=class mm extends V{static[a]="PgMacaddr";getSQLType(){return"macaddr"}}});function bm(t){return new Um(t??"")}var Um,Hm;var ry=_(()=>{et();vt();Um=class Um extends ct{static[a]="PgMacaddr8Builder";constructor(t){super(t,"string","PgMacaddr8")}build(t){return new Hm(t,this.config)}};Hm=class Hm extends V{static[a]="PgMacaddr8";getSQLType(){return"macaddr8"}}});function Mm(t,r){let{name:e,config:o}=Mt(t,r),n=o?.mode;return n==="number"?new Fm(e,o?.precision,o?.scale):n==="bigint"?new Gm(e,o?.precision,o?.scale):new lm(e,o?.precision,o?.scale)}var lm,_w,Fm,Lm,Gm,vm;var ey=_(()=>{et();dr();vt();lm=class lm extends ct{static[a]="PgNumericBuilder";constructor(t,r,e){super(t,"string","PgNumeric");this.config.precision=r,this.config.scale=e}build(t){return new _w(t,this.config)}};_w=class _w extends V{static[a]="PgNumeric";precision;scale;constructor(t,r){super(t,r);this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(t){if(typeof t==="string")return t;return String(t)}getSQLType(){if(this.precision!==void 0&&this.scale!==void 0)return`numeric(${this.precision}, ${this.scale})`;else if(this.precision===void 0)return"numeric";else return`numeric(${this.precision})`}};Fm=class Fm extends ct{static[a]="PgNumericNumberBuilder";constructor(t,r,e){super(t,"number","PgNumericNumber");this.config.precision=r,this.config.scale=e}build(t){return new Lm(t,this.config)}};Lm=class Lm extends V{static[a]="PgNumericNumber";precision;scale;constructor(t,r){super(t,r);this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(t){if(typeof t==="number")return t;return Number(t)}mapToDriverValue=String;getSQLType(){if(this.precision!==void 0&&this.scale!==void 0)return`numeric(${this.precision}, ${this.scale})`;else if(this.precision===void 0)return"numeric";else return`numeric(${this.precision})`}};Gm=class Gm extends ct{static[a]="PgNumericBigIntBuilder";constructor(t,r,e){super(t,"bigint","PgNumericBigInt");this.config.precision=r,this.config.scale=e}build(t){return new vm(t,this.config)}};vm=class vm extends V{static[a]="PgNumericBigInt";precision;scale;constructor(t,r){super(t,r);this.precision=r.precision,this.scale=r.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){if(this.precision!==void 0&&this.scale!==void 0)return`numeric(${this.precision}, ${this.scale})`;else if(this.precision===void 0)return"numeric";else return`numeric(${this.precision})`}}});function Bm(t,r){let{name:e,config:o}=Mt(t,r);if(!o?.mode||o.mode==="tuple")return new zm(e);return new Wm(e)}var zm,km,Wm,Zm;var oy=_(()=>{et();dr();vt();zm=class zm extends ct{static[a]="PgPointTupleBuilder";constructor(t){super(t,"array","PgPointTuple")}build(t){return new km(t,this.config)}};km=class km extends V{static[a]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t==="string"){let[r,e]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(e)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}};Wm=class Wm extends ct{static[a]="PgPointObjectBuilder";constructor(t){super(t,"json","PgPointObject")}build(t){return new Zm(t,this.config)}};Zm=class Zm extends V{static[a]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t==="string"){let[r,e]=t.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(e)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}});function JD(t){let r=[];for(let e=0;e<t.length;e+=2)r.push(Number.parseInt(t.slice(e,e+2),16));return new Uint8Array(r)}function Xm(t,r){let e=new ArrayBuffer(8),o=new DataView(e);for(let n=0;n<8;n++)o.setUint8(n,t[r+n]);return o.getFloat64(0,!0)}function ny(t){let r=JD(t),e=0,o=r[e];e+=1;let n=new DataView(r.buffer),c=n.getUint32(e,o===1);e+=4;let i;if(c&536870912)i=n.getUint32(e,o===1),e+=4;if((c&65535)===1){let f=Xm(r,e);e+=8;let h=Xm(r,e);return e+=8,[f,h]}throw Error("Unsupported geometry type")}var Jm=()=>{};function Qm(t,r){let{name:e,config:o}=Mt(t,r);if(!o?.mode||o.mode==="tuple")return new Ym(e);return new gm(e)}var Ym,Pm,gm,Cm;var sy=_(()=>{et();dr();vt();Jm();Ym=class Ym extends ct{static[a]="PgGeometryBuilder";constructor(t){super(t,"array","PgGeometry")}build(t){return new Pm(t,this.config)}};Pm=class Pm extends V{static[a]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return ny(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}};gm=class gm extends ct{static[a]="PgGeometryObjectBuilder";constructor(t){super(t,"json","PgGeometryObject")}build(t){return new Cm(t,this.config)}};Cm=class Cm extends V{static[a]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(t){let r=ny(t);return{x:r[0],y:r[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}});function xm(t){return new Km(t??"")}var Km,Em;var cy=_(()=>{et();vt();Km=class Km extends ct{static[a]="PgRealBuilder";constructor(t,r){super(t,"number","PgReal");this.config.length=r}build(t){return new Em(t,this.config)}};Em=class Em extends V{static[a]="PgReal";constructor(t,r){super(t,r)}getSQLType(){return"real"}mapFromDriverValue=(t)=>{if(typeof t==="string")return Number.parseFloat(t);return t}}});function fe(t){return new qm(t??"")}var qm,Dm;var iy=_(()=>{et();vt();qm=class qm extends ct{static[a]="PgSerialBuilder";constructor(t){super(t,"number","PgSerial");this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Dm(t,this.config)}};Dm=class Dm extends V{static[a]="PgSerial";getSQLType(){return"serial"}}});function t8(t){return new Vm(t??"")}var Vm,jm;var fy=_(()=>{et();vt();gf();Vm=class Vm extends Dn{static[a]="PgSmallIntBuilder";constructor(t){super(t,"number","PgSmallInt")}build(t){return new jm(t,this.config)}};jm=class jm extends V{static[a]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=(t)=>{if(typeof t==="string")return Number(t);return t}}});function o8(t){return new r8(t??"")}var r8,e8;var hy=_(()=>{et();vt();r8=class r8 extends ct{static[a]="PgSmallSerialBuilder";constructor(t){super(t,"number","PgSmallSerial");this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new e8(t,this.config)}};e8=class e8 extends V{static[a]="PgSmallSerial";getSQLType(){return"smallserial"}}});function nt(t,r={}){let{name:e,config:o}=Mt(t,r);return new n8(e,o)}var n8,s8;var wy=_(()=>{et();dr();vt();n8=class n8 extends ct{static[a]="PgTextBuilder";constructor(t,r){super(t,"string","PgText");this.config.enumValues=r.enum}build(t){return new s8(t,this.config)}};s8=class s8 extends V{static[a]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}});function i8(t,r={}){let{name:e,config:o}=Mt(t,r);return new c8(e,o.withTimezone??!1,o.precision)}var c8,$w;var py=_(()=>{et();dr();vt();uw();c8=class c8 extends Tn{constructor(t,r,e){super(t,"string","PgTime");this.withTimezone=r,this.precision=e,this.config.withTimezone=r,this.config.precision=e}static[a]="PgTimeBuilder";build(t){return new $w(t,this.config)}};$w=class $w extends V{static[a]="PgTime";withTimezone;precision;constructor(t,r){super(t,r);this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}});function vr(t,r={}){let{name:e,config:o}=Mt(t,r);if(o?.mode==="string")return new h8(e,o.withTimezone??!1,o.precision);return new f8(e,o?.withTimezone??!1,o?.precision)}var f8,Ow,h8,Rw;var uy=_(()=>{et();dr();vt();uw();f8=class f8 extends Tn{static[a]="PgTimestampBuilder";constructor(t,r,e){super(t,"date","PgTimestamp");this.config.withTimezone=r,this.config.precision=e}build(t){return new Ow(t,this.config)}};Ow=class Ow extends V{static[a]="PgTimestamp";withTimezone;precision;constructor(t,r){super(t,r);this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(t){if(typeof t==="string")return new Date(this.withTimezone?t:t+"+0000");return t}mapToDriverValue=(t)=>{return t.toISOString()}};h8=class h8 extends Tn{static[a]="PgTimestampStringBuilder";constructor(t,r,e){super(t,"string","PgTimestampString");this.config.withTimezone=r,this.config.precision=e}build(t){return new Rw(t,this.config)}};Rw=class Rw extends V{static[a]="PgTimestampString";withTimezone;precision;constructor(t,r){super(t,r);this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(t){if(typeof t==="string")return t;let r=t.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){let e=t.getTimezoneOffset(),o=e<=0?"+":"-";return`${r}${o}${Math.floor(Math.abs(e)/60).toString().padStart(2,"0")}`}return r}}});function p8(t){return new w8(t??"")}var w8,Iw;var dy=_(()=>{et();gr();vt();w8=class w8 extends ct{static[a]="PgUUIDBuilder";constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(I`gen_random_uuid()`)}build(t){return new Iw(t,this.config)}};Iw=class Iw extends V{static[a]="PgUUID";getSQLType(){return"uuid"}}});function y8(t,r={}){let{name:e,config:o}=Mt(t,r);return new u8(e,o)}var u8,d8;var yy=_(()=>{et();dr();vt();u8=class u8 extends ct{static[a]="PgVarcharBuilder";constructor(t,r){super(t,"string","PgVarchar");this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new d8(t,this.config)}};d8=class d8 extends V{static[a]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}});function _8(t,r){let{name:e,config:o}=Mt(t,r);return new A8(e,o)}var A8,S8;var Ay=_(()=>{et();dr();vt();A8=class A8 extends ct{static[a]="PgBinaryVectorBuilder";constructor(t,r){super(t,"string","PgBinaryVector");this.config.dimensions=r.dimensions}build(t){return new S8(t,this.config)}};S8=class S8 extends V{static[a]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}});function R8(t,r){let{name:e,config:o}=Mt(t,r);return new $8(e,o)}var $8,O8;var Sy=_(()=>{et();dr();vt();$8=class $8 extends ct{static[a]="PgHalfVectorBuilder";constructor(t,r){super(t,"array","PgHalfVector");this.config.dimensions=r.dimensions}build(t){return new O8(t,this.config)}};O8=class O8 extends V{static[a]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map((r)=>Number.parseFloat(r))}}});function N8(t,r){let{name:e,config:o}=Mt(t,r);return new I8(e,o)}var I8,T8;var _y=_(()=>{et();dr();vt();I8=class I8 extends ct{static[a]="PgSparseVectorBuilder";constructor(t,r){super(t,"string","PgSparseVector");this.config.dimensions=r.dimensions}build(t){return new T8(t,this.config)}};T8=class T8 extends V{static[a]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}});function U8(t,r){let{name:e,config:o}=Mt(t,r);return new m8(e,o)}var m8,a8;var $y=_(()=>{et();dr();vt();m8=class m8 extends ct{static[a]="PgVectorBuilder";constructor(t,r){super(t,"array","PgVector");this.config.dimensions=r.dimensions}build(t){return new a8(t,this.config)}};a8=class a8 extends V{static[a]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map((r)=>Number.parseFloat(r))}}});function H8(){return{bigint:ZN,bigserial:PN,boolean:Ho,char:EN,cidr:DN,customType:tm,date:om,doublePrecision:cm,inet:hm,integer:Gr,interval:ym,json:Ec,jsonb:_m,line:Tm,macaddr:am,macaddr8:bm,numeric:Mm,point:Bm,geometry:Qm,real:xm,serial:fe,smallint:t8,smallserial:o8,text:nt,time:i8,timestamp:vr,uuid:p8,varchar:y8,bit:_8,halfvec:R8,sparsevec:N8,vector:U8}}var b8=_(()=>{X2();J2();Y2();P2();g2();C2();Q2();K2();E2();x2();q2();D2();V2();j2();ty();ry();ey();oy();sy();cy();iy();fy();hy();wy();py();uy();dy();yy();Ay();Sy();_y();$y()});function YD(t,r,e,o,n=t){let c=new ee(t,o,n),i=typeof r==="function"?r(H8()):r,f=Object.fromEntries(Object.entries(i).map(([p,u])=>{let d=u;d.setName(p);let y=d.build(c);return c[Oy].push(...d.buildForeignKeys(y,c)),[p,y]})),h=Object.fromEntries(Object.entries(i).map(([p,u])=>{let d=u;d.setName(p);let y=d.buildExtraConfigColumn(c);return[p,y]})),w=Object.assign(c,f);if(w[j.Symbol.Columns]=f,w[j.Symbol.ExtraConfigColumns]=h,e)w[ee.Symbol.ExtraConfigBuilder]=e;return Object.assign(w,{enableRLS:()=>{return w[ee.Symbol.EnableRLS]=!0,w}})}var Oy,l8,ee,$e=(t,r,e)=>{return YD(t,r,e,void 0)};var xc=_(()=>{et();Je();b8();Oy=Symbol.for("drizzle:PgInlineForeignKeys"),l8=Symbol.for("drizzle:EnableRLS");ee=class ee extends j{static[a]="PgTable";static Symbol=Object.assign({},j.Symbol,{InlineForeignKeys:Oy,EnableRLS:l8});[Oy]=[];[l8]=!1;[j.Symbol.ExtraConfigBuilder]=void 0;[j.Symbol.ExtraConfigColumns]={}}});var F8=()=>{};var Ry=_(()=>{X2();J2();Y2();P2();g2();vt();C2();Q2();K2();H2();E2();gf();x2();q2();D2();V2();j2();ty();ry();ey();oy();sy();cy();iy();fy();hy();wy();py();uy();dy();yy();Ay();Sy();_y();$y()});var L8=()=>{};var G8=()=>{};var Iy,v8;var Ty=_(()=>{et();xc();Iy=class Iy{static[a]="PgPrimaryKeyBuilder";columns;name;constructor(t,r){this.columns=t,this.name=r}build(t){return new v8(t,this.columns,this.name)}};v8=class v8{constructor(t,r,e){this.table=t,this.columns=r,this.name=e}static[a]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[ee.Symbol.Name]}_${this.columns.map((t)=>t.name).join("_")}_pk`}}});var M8=()=>{};function PD(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map((e)=>e.toLowerCase()).join("_")}function gD(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((e,o,n)=>{let c=n===0?o.toLowerCase():`${o[0].toUpperCase()}${o.slice(1)}`;return e+c},"")}function CD(t){return t}var Ny;var z8=_(()=>{et();Je();Ny=class Ny{static[a]="CasingCache";cache={};cachedTables={};convert;constructor(t){this.convert=t==="snake_case"?PD:t==="camelCase"?gD:CD}getColumnCasing(t){if(!t.keyAsName)return t.name;let r=t.table[j.Symbol.Schema]??"public",e=t.table[j.Symbol.OriginalName],o=`${r}.${e}.${t.name}`;if(!this.cache[o])this.cacheTable(t.table);return this.cache[o]}cacheTable(t){let r=t[j.Symbol.Schema]??"public",e=t[j.Symbol.OriginalName],o=`${r}.${e}`;if(!this.cachedTables[o]){for(let n of Object.values(t[j.Symbol.Columns])){let c=`${o}.${n.name}`;this.cache[c]=this.convert(n.name)}this.cachedTables[o]=!0}}clearCache(){this.cache={},this.cachedTables={}}}});var Cf,hn,Tw;var Nw=_(()=>{et();Cf=class Cf extends Error{static[a]="DrizzleError";constructor({message:t,cause:r}){super(t);this.name="DrizzleError",this.cause=r}};hn=class hn extends Error{constructor(t,r,e){super(`Failed query: ${t}
params: ${r}`);if(this.query=t,this.params=r,this.cause=e,Error.captureStackTrace(this,hn),e)this.cause=e}};Tw=class Tw extends Cf{static[a]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}});function Cr(t,r){if(G2(r)&&!fw(t)&&!W(t,Ye)&&!W(t,cn)&&!W(t,Qt)&&!W(t,j)&&!W(t,Pe))return new Ye(t,r);return t}function Ir(...t){let r=t.filter((e)=>e!==void 0);if(r.length===0)return;if(r.length===1)return new ot(r);return new ot([new qr("("),I.join(r,new qr(" and ")),new qr(")")])}function ge(...t){let r=t.filter((e)=>e!==void 0);if(r.length===0)return;if(r.length===1)return new ot(r);return new ot([new qr("("),I.join(r,new qr(" or ")),new qr(")")])}function ay(t){return I`not ${t}`}function bo(t,r){if(Array.isArray(r)){if(r.length===0)return I`false`;return I`${t} in ${r.map((e)=>Cr(e,t))}`}return I`${t} in ${Cr(r,t)}`}function Hy(t,r){if(Array.isArray(r)){if(r.length===0)return I`true`;return I`${t} not in ${r.map((e)=>Cr(e,t))}`}return I`${t} not in ${Cr(r,t)}`}function Dc(t){return I`${t} is null`}function by(t){return I`${t} is not null`}function ly(t){return I`exists ${t}`}function Fy(t){return I`not exists ${t}`}function Ly(t,r,e){return I`${t} between ${Cr(r,t)} and ${Cr(e,t)}`}function Gy(t,r,e){return I`${t} not between ${Cr(r,t)} and ${Cr(e,t)}`}function he(t,r){return I`${t} like ${r}`}function vy(t,r){return I`${t} not like ${r}`}function My(t,r){return I`${t} ilike ${r}`}function zy(t,r){return I`${t} not ilike ${r}`}function QD(t,r){if(Array.isArray(r)){if(r.length===0)throw Error("arrayContains requires at least one value");let e=I`${Cr(r,t)}`;return I`${t} @> ${e}`}return I`${t} @> ${Cr(r,t)}`}function KD(t,r){if(Array.isArray(r)){if(r.length===0)throw Error("arrayContained requires at least one value");let e=I`${Cr(r,t)}`;return I`${t} <@ ${e}`}return I`${t} <@ ${Cr(r,t)}`}function ED(t,r){if(Array.isArray(r)){if(r.length===0)throw Error("arrayOverlaps requires at least one value");let e=I`${Cr(r,t)}`;return I`${t} && ${e}`}return I`${t} && ${Cr(r,t)}`}var Y=(t,r)=>{return I`${t} = ${Cr(r,t)}`},my=(t,r)=>{return I`${t} <> ${Cr(r,t)}`},Uy=(t,r)=>{return I`${t} > ${Cr(r,t)}`},Ko=(t,r)=>{return I`${t} >= ${Cr(r,t)}`},qc=(t,r)=>{return I`${t} < ${Cr(r,t)}`},Qf=(t,r)=>{return I`${t} <= ${Cr(r,t)}`};var k8=_(()=>{Po();et();Je();gr()});function oo(t){return I`${t} asc`}function Vt(t){return I`${t} desc`}var W8=_(()=>{gr()});var ky=_(()=>{k8();W8()});function Wy(){return{and:Ir,between:Ly,eq:Y,exists:ly,gt:Uy,gte:Ko,ilike:My,inArray:bo,isNull:Dc,isNotNull:by,like:he,lt:qc,lte:Qf,ne:my,not:ay,notBetween:Gy,notExists:Fy,notLike:vy,notIlike:zy,notInArray:Hy,or:ge,sql:I}}function Zy(){return{sql:I,asc:oo,desc:Vt}}function By(t,r){if(Object.keys(t).length===1&&"default"in t&&!W(t.default,j))t=t.default;let e={},o={},n={};for(let[c,i]of Object.entries(t))if(W(i,j)){let f=qn(i),h=o[f];e[f]=c,n[c]={tsName:c,dbName:i[j.Symbol.Name],schema:i[j.Symbol.Schema],columns:i[j.Symbol.Columns],relations:h?.relations??{},primaryKey:h?.primaryKey??[]};for(let p of Object.values(i[j.Symbol.Columns]))if(p.primary)n[c].primaryKey.push(p);let w=i[j.Symbol.ExtraConfigBuilder]?.(i[j.Symbol.ExtraConfigColumns]);if(w){for(let p of Object.values(w))if(W(p,Iy))n[c].primaryKey.push(...p.columns)}}else if(W(i,aw)){let f=qn(i.table),h=e[f],w=i.config(r(i.table)),p;for(let[u,d]of Object.entries(w))if(h){let y=n[h];if(y.relations[u]=d,p)y.primaryKey.push(...p)}else{if(!(f in o))o[f]={relations:{},primaryKey:p};o[f].relations[u]=d}}return{tables:n,tableNamesMap:e}}function Vn(t,r){return new aw(t,(e)=>Object.fromEntries(Object.entries(r(e)).map(([o,n])=>[o,n.withFieldName(o)])))}function Z8(t){return function(e,o){return new Nn(t,e,o,o?.fields.reduce((n,c)=>n&&c.notNull,!0)??!1)}}function B8(t){return function(e,o){return new Vc(t,e,o)}}function Xy(t,r,e){if(W(e,Nn)&&e.config)return{fields:e.config.fields,references:e.config.references};let o=r[qn(e.referencedTable)];if(!o)throw Error(`Table "${e.referencedTable[j.Symbol.Name]}" not found in schema`);let n=t[o];if(!n)throw Error(`Table "${o}" not found in schema`);let c=e.sourceTable,i=r[qn(c)];if(!i)throw Error(`Table "${c[j.Symbol.Name]}" not found in schema`);let f=[];for(let h of Object.values(n.relations))if(e.relationName&&e!==h&&h.relationName===e.relationName||!e.relationName&&h.referencedTable===e.sourceTable)f.push(h);if(f.length>1)throw e.relationName?Error(`There are multiple relations with name "${e.relationName}" in table "${o}"`):Error(`There are multiple relations between "${o}" and "${e.sourceTable[j.Symbol.Name]}". Please specify relation name`);if(f[0]&&W(f[0],Nn)&&f[0].config)return{fields:f[0].config.references,references:f[0].config.fields};throw Error(`There is not enough information to infer relation "${i}.${e.fieldName}"`)}function Jy(t){return{one:Z8(t),many:B8(t)}}function Kf(t,r,e,o,n=(c)=>c){let c={};for(let[i,f]of o.entries())if(f.isJson){let h=r.relations[f.tsKey],w=e[i],p=typeof w==="string"?JSON.parse(w):w;c[f.tsKey]=W(h,Nn)?p&&Kf(t,t[f.relationTableTsKey],p,f.selection,n):p.map((u)=>Kf(t,t[f.relationTableTsKey],u,f.selection,n))}else{let h=n(e[i]),w=f.field,p;if(W(w,Qt))p=w;else if(W(w,ot))p=w.decoder;else p=w.sql.decoder;c[f.tsKey]=h===null?null:p.mapFromDriverValue(h)}return c}var mw,aw,Nn,Vc;var Ef=_(()=>{Je();Po();et();Ty();ky();gr();mw=class mw{constructor(t,r,e){this.sourceTable=t,this.referencedTable=r,this.relationName=e,this.referencedTableName=r[j.Symbol.Name]}static[a]="Relation";referencedTableName;fieldName};aw=class aw{constructor(t,r){this.table=t,this.config=r}static[a]="Relations"};Nn=class Nn extends mw{constructor(t,r,e,o){super(t,r,e?.relationName);this.config=e,this.isNullable=o}static[a]="One";withFieldName(t){let r=new Nn(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=t,r}};Vc=class Vc extends mw{constructor(t,r,e){super(t,r,e?.relationName);this.config=e}static[a]="Many";withFieldName(t){let r=new Vc(this.sourceTable,this.referencedTable,this.config);return r.fieldName=t,r}}});function Ao(t){return I`count(${t||I.raw("*")})`.mapWith(Number)}function xD(t){return I`count(distinct ${t})`.mapWith(Number)}function qD(t){return I`avg(${t})`.mapWith(String)}function DD(t){return I`avg(distinct ${t})`.mapWith(String)}function VD(t){return I`sum(${t})`.mapWith(String)}function jD(t){return I`sum(distinct ${t})`.mapWith(String)}function tV(t){return I`max(${t})`.mapWith(W(t,Qt)?t:String)}function rV(t){return I`min(${t})`.mapWith(W(t,Qt)?t:String)}var X8=_(()=>{Po();et();gr()});function jc(t){return JSON.stringify(t)}function eV(t,r){if(Array.isArray(r))return I`${t} <-> ${jc(r)}`;return I`${t} <-> ${r}`}function oV(t,r){if(Array.isArray(r))return I`${t} <+> ${jc(r)}`;return I`${t} <+> ${r}`}function nV(t,r){if(Array.isArray(r))return I`${t} <#> ${jc(r)}`;return I`${t} <#> ${r}`}function sV(t,r){if(Array.isArray(r))return I`${t} <=> ${jc(r)}`;return I`${t} <=> ${r}`}function cV(t,r){if(Array.isArray(r))return I`${t} <~> ${jc(r)}`;return I`${t} <~> ${r}`}function iV(t,r){if(Array.isArray(r))return I`${t} <%> ${jc(r)}`;return I`${t} <%> ${r}`}var J8=_(()=>{gr()});var Y8=_(()=>{X8();J8()});var Uw=_(()=>{ky();Y8();gr()});var xf;var Yy=_(()=>{et();gr();xf=class xf extends Pe{static[a]="PgViewBase"}});var Es;var Hw=_(()=>{pw();z8();Po();et();Nw();Ry();xc();Ef();Uw();gr();Co();Je();dr();In();Yy();Es=class Es{static[a]="PgDialect";casing;constructor(t){this.casing=new Ny(t?.casing)}async migrate(t,r,e){let o=typeof e==="string"?"__drizzle_migrations":e.migrationsTable??"__drizzle_migrations",n=typeof e==="string"?"drizzle":e.migrationsSchema??"drizzle",c=I`
			CREATE TABLE IF NOT EXISTS ${I.identifier(n)}.${I.identifier(o)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await r.execute(I`CREATE SCHEMA IF NOT EXISTS ${I.identifier(n)}`),await r.execute(c);let f=(await r.all(I`select id, hash, created_at from ${I.identifier(n)}.${I.identifier(o)} order by created_at desc limit 1`))[0];await r.transaction(async(h)=>{for await(let w of t)if(!f||Number(f.created_at)<w.folderMillis){for(let p of w.sql)await h.execute(I.raw(p));await h.execute(I`insert into ${I.identifier(n)}.${I.identifier(o)} ("hash", "created_at") values(${w.hash}, ${w.folderMillis})`)}})}escapeName(t){return`"${t}"`}escapeParam(t){return`$${t+1}`}escapeString(t){return`'${t.replace(/'/g,"''")}'`}buildWithCTE(t){if(!t?.length)return;let r=[I`with `];for(let[e,o]of t.entries())if(r.push(I`${I.identifier(o._.alias)} as (${o._.sql})`),e<t.length-1)r.push(I`, `);return r.push(I` `),I.join(r)}buildDeleteQuery({table:t,where:r,returning:e,withList:o}){let n=this.buildWithCTE(o),c=e?I` returning ${this.buildSelection(e,{isSingleTable:!0})}`:void 0,i=r?I` where ${r}`:void 0;return I`${n}delete from ${t}${i}${c}`}buildUpdateSet(t,r){let e=t[j.Symbol.Columns],o=Object.keys(e).filter((c)=>r[c]!==void 0||e[c]?.onUpdateFn!==void 0),n=o.length;return I.join(o.flatMap((c,i)=>{let f=e[c],h=f.onUpdateFn?.(),w=r[c]??(W(h,ot)?h:I.param(h,f)),p=I`${I.identifier(this.casing.getColumnCasing(f))} = ${w}`;if(i<n-1)return[p,I.raw(", ")];return[p]}))}buildUpdateQuery({table:t,set:r,where:e,returning:o,withList:n,from:c,joins:i}){let f=this.buildWithCTE(n),h=t[ee.Symbol.Name],w=t[ee.Symbol.Schema],p=t[ee.Symbol.OriginalName],u=h===p?void 0:h,d=I`${w?I`${I.identifier(w)}.`:void 0}${I.identifier(p)}${u&&I` ${I.identifier(u)}`}`,y=this.buildUpdateSet(t,r),R=c&&I.join([I.raw(" from "),this.buildFromTable(c)]),S=this.buildJoins(i),T=o?I` returning ${this.buildSelection(o,{isSingleTable:!c})}`:void 0,N=e?I` where ${e}`:void 0;return I`${f}update ${d} set ${y}${R}${S}${N}${T}`}buildSelection(t,{isSingleTable:r=!1}={}){let e=t.length,o=t.flatMap(({field:n},c)=>{let i=[];if(W(n,ot.Aliased)&&n.isSelectionField)i.push(I.identifier(n.fieldAlias));else if(W(n,ot.Aliased)||W(n,ot)){let f=W(n,ot.Aliased)?n.sql:n;if(r)i.push(new ot(f.queryChunks.map((h)=>{if(W(h,V))return I.identifier(this.casing.getColumnCasing(h));return h})));else i.push(f);if(W(n,ot.Aliased))i.push(I` as ${I.identifier(n.fieldAlias)}`)}else if(W(n,Qt))if(r)i.push(I.identifier(this.casing.getColumnCasing(n)));else i.push(n);else if(W(n,Ur)){let f=Object.entries(n._.selectedFields);if(f.length===1){let h=f[0][1],w=W(h,ot)?h.decoder:W(h,Qt)?{mapFromDriverValue:(p)=>h.mapFromDriverValue(p)}:h.sql.decoder;if(w)n._.sql.decoder=w}i.push(n)}if(c<e-1)i.push(I`, `);return i});return I.join(o)}buildJoins(t){if(!t||t.length===0)return;let r=[];for(let[e,o]of t.entries()){if(e===0)r.push(I` `);let n=o.table,c=o.lateral?I` lateral`:void 0,i=o.on?I` on ${o.on}`:void 0;if(W(n,ee)){let f=n[ee.Symbol.Name],h=n[ee.Symbol.Schema],w=n[ee.Symbol.OriginalName],p=f===w?void 0:o.alias;r.push(I`${I.raw(o.joinType)} join${c} ${h?I`${I.identifier(h)}.`:void 0}${I.identifier(w)}${p&&I` ${I.identifier(p)}`}${i}`)}else if(W(n,Pe)){let f=n[ir].name,h=n[ir].schema,w=n[ir].originalName,p=f===w?void 0:o.alias;r.push(I`${I.raw(o.joinType)} join${c} ${h?I`${I.identifier(h)}.`:void 0}${I.identifier(w)}${p&&I` ${I.identifier(p)}`}${i}`)}else r.push(I`${I.raw(o.joinType)} join${c} ${n}${i}`);if(e<t.length-1)r.push(I` `)}return I.join(r)}buildFromTable(t){if(W(t,j)&&t[j.Symbol.IsAlias]){let r=I`${I.identifier(t[j.Symbol.OriginalName])}`;if(t[j.Symbol.Schema])r=I`${I.identifier(t[j.Symbol.Schema])}.${r}`;return I`${r} ${I.identifier(t[j.Symbol.Name])}`}return t}buildSelectQuery({withList:t,fields:r,fieldsFlat:e,where:o,having:n,table:c,joins:i,orderBy:f,groupBy:h,limit:w,offset:p,lockingClause:u,distinct:d,setOperators:y}){let R=e??yo(r);for(let or of R)if(W(or.field,Qt)&&Xe(or.field.table)!==(W(c,Ur)?c._.alias:W(c,xf)?c[ir].name:W(c,ot)?void 0:Xe(c))&&!((It)=>i?.some(({alias:Fr})=>Fr===(It[j.Symbol.IsAlias]?Xe(It):It[j.Symbol.BaseName])))(or.field.table)){let It=Xe(or.field.table);throw Error(`Your "${or.path.join("->")}" field references a column "${It}"."${or.field.name}", but the table "${It}" is not part of the query! Did you forget to join it?`)}let S=!i||i.length===0,T=this.buildWithCTE(t),N;if(d)N=d===!0?I` distinct`:I` distinct on (${I.join(d.on,I`, `)})`;let G=this.buildSelection(R,{isSingleTable:S}),v=this.buildFromTable(c),J=this.buildJoins(i),K=o?I` where ${o}`:void 0,D=n?I` having ${n}`:void 0,E;if(f&&f.length>0)E=I` order by ${I.join(f,I`, `)}`;let ht;if(h&&h.length>0)ht=I` group by ${I.join(h,I`, `)}`;let Rt=typeof w==="object"||typeof w==="number"&&w>=0?I` limit ${w}`:void 0,it=p?I` offset ${p}`:void 0,q=I.empty();if(u){let or=I` for ${I.raw(u.strength)}`;if(u.config.of)or.append(I` of ${I.join(Array.isArray(u.config.of)?u.config.of:[u.config.of],I`, `)}`);if(u.config.noWait)or.append(I` nowait`);else if(u.config.skipLocked)or.append(I` skip locked`);q.append(or)}let gt=I`${T}select${N} ${G} from ${v}${J}${K}${ht}${D}${E}${Rt}${it}${q}`;if(y.length>0)return this.buildSetOperations(gt,y);return gt}buildSetOperations(t,r){let[e,...o]=r;if(!e)throw Error("Cannot pass undefined values to any set operator");if(o.length===0)return this.buildSetOperationQuery({leftSelect:t,setOperator:e});return this.buildSetOperations(this.buildSetOperationQuery({leftSelect:t,setOperator:e}),o)}buildSetOperationQuery({leftSelect:t,setOperator:{type:r,isAll:e,rightSelect:o,limit:n,orderBy:c,offset:i}}){let f=I`(${t.getSQL()}) `,h=I`(${o.getSQL()})`,w;if(c&&c.length>0){let y=[];for(let R of c)if(W(R,V))y.push(I.identifier(R.name));else if(W(R,ot)){for(let S=0;S<R.queryChunks.length;S++){let T=R.queryChunks[S];if(W(T,V))R.queryChunks[S]=I.identifier(T.name)}y.push(I`${R}`)}else y.push(I`${R}`);w=I` order by ${I.join(y,I`, `)} `}let p=typeof n==="object"||typeof n==="number"&&n>=0?I` limit ${n}`:void 0,u=I.raw(`${r} ${e?"all ":""}`),d=i?I` offset ${i}`:void 0;return I`${f}${u}${h}${w}${p}${d}`}buildInsertQuery({table:t,values:r,onConflict:e,returning:o,withList:n,select:c,overridingSystemValue_:i}){let f=[],h=t[j.Symbol.Columns],w=Object.entries(h).filter(([T,N])=>!N.shouldDisableInsert()),p=w.map(([,T])=>I.identifier(this.casing.getColumnCasing(T)));if(c){let T=r;if(W(T,ot))f.push(T);else f.push(T.getSQL())}else{let T=r;f.push(I.raw("values "));for(let[N,G]of T.entries()){let v=[];for(let[J,K]of w){let D=G[J];if(D===void 0||W(D,Ye)&&D.value===void 0)if(K.defaultFn!==void 0){let E=K.defaultFn(),ht=W(E,ot)?E:I.param(E,K);v.push(ht)}else if(!K.default&&K.onUpdateFn!==void 0){let E=K.onUpdateFn(),ht=W(E,ot)?E:I.param(E,K);v.push(ht)}else v.push(I`default`);else v.push(D)}if(f.push(v),N<T.length-1)f.push(I`, `)}}let u=this.buildWithCTE(n),d=I.join(f),y=o?I` returning ${this.buildSelection(o,{isSingleTable:!0})}`:void 0,R=e?I` on conflict ${e}`:void 0,S=i===!0?I`overriding system value `:void 0;return I`${u}insert into ${t} ${p} ${S}${d}${R}${y}`}buildRefreshMaterializedViewQuery({view:t,concurrently:r,withNoData:e}){let o=r?I` concurrently`:void 0,n=e?I` with no data`:void 0;return I`refresh materialized view${o} ${t}${n}`}prepareTyping(t){if(W(t,Sw)||W(t,Aw))return"json";else if(W(t,_w))return"decimal";else if(W(t,$w))return"time";else if(W(t,Ow)||W(t,Rw))return"timestamp";else if(W(t,dw)||W(t,yw))return"date";else if(W(t,Iw))return"uuid";else return"none"}sqlToQuery(t,r){return t.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:r})}buildRelationalQueryWithoutPK({fullSchema:t,schema:r,tableNamesMap:e,table:o,tableConfig:n,queryConfig:c,tableAlias:i,nestedQueryRelation:f,joinOn:h}){let w=[],p,u,d=[],y,R=[];if(c===!0)w=Object.entries(n.columns).map(([N,G])=>({dbKey:G.name,tsKey:N,field:Qo(G,i),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let T=Object.fromEntries(Object.entries(n.columns).map(([D,E])=>[D,Qo(E,i)]));if(c.where){let D=typeof c.where==="function"?c.where(T,Wy()):c.where;y=D&&Qc(D,i)}let N=[],G=[];if(c.columns){let D=!1;for(let[E,ht]of Object.entries(c.columns)){if(ht===void 0)continue;if(E in n.columns){if(!D&&ht===!0)D=!0;G.push(E)}}if(G.length>0)G=D?G.filter((E)=>c.columns?.[E]===!0):Object.keys(n.columns).filter((E)=>!G.includes(E))}else G=Object.keys(n.columns);for(let D of G){let E=n.columns[D];N.push({tsKey:D,value:E})}let v=[];if(c.with)v=Object.entries(c.with).filter((D)=>!!D[1]).map(([D,E])=>({tsKey:D,queryConfig:E,relation:n.relations[D]}));let J;if(c.extras){J=typeof c.extras==="function"?c.extras(T,{sql:I}):c.extras;for(let[D,E]of Object.entries(J))N.push({tsKey:D,value:ww(E,i)})}for(let{tsKey:D,value:E}of N)w.push({dbKey:W(E,ot.Aliased)?E.fieldAlias:n.columns[D].name,tsKey:D,field:W(E,Qt)?Qo(E,i):E,relationTableTsKey:void 0,isJson:!1,selection:[]});let K=typeof c.orderBy==="function"?c.orderBy(T,Zy()):c.orderBy??[];if(!Array.isArray(K))K=[K];d=K.map((D)=>{if(W(D,Qt))return Qo(D,i);return Qc(D,i)}),p=c.limit,u=c.offset;for(let{tsKey:D,queryConfig:E,relation:ht}of v){let Rt=Xy(r,e,ht),it=qn(ht.referencedTable),q=e[it],gt=`${i}_${D}`,or=Ir(...Rt.fields.map((on,fo)=>Y(Qo(Rt.references[fo],gt),Qo(on,i)))),It=this.buildRelationalQueryWithoutPK({fullSchema:t,schema:r,tableNamesMap:e,table:t[q],tableConfig:r[q],queryConfig:W(ht,Nn)?E===!0?{limit:1}:{...E,limit:1}:E,tableAlias:gt,joinOn:or,nestedQueryRelation:ht}),Fr=I`${I.identifier(gt)}.${I.identifier("data")}`.as(D);R.push({on:I`true`,table:new Ur(It.sql,{},gt),alias:gt,joinType:"left",lateral:!0}),w.push({dbKey:D,tsKey:D,field:Fr,relationTableTsKey:q,isJson:!0,selection:It.selection})}}if(w.length===0)throw new Cf({message:`No fields selected for table "${n.tsName}" ("${i}")`});let S;if(y=Ir(h,y),f){let T=I`json_build_array(${I.join(w.map(({field:v,tsKey:J,isJson:K})=>K?I`${I.identifier(`${i}_${J}`)}.${I.identifier("data")}`:W(v,ot.Aliased)?v.sql:v),I`, `)})`;if(W(f,Vc))T=I`coalesce(json_agg(${T}${d.length>0?I` order by ${I.join(d,I`, `)}`:void 0}), '[]'::json)`;let N=[{dbKey:"data",tsKey:"data",field:T.as("data"),isJson:!0,relationTableTsKey:n.tsName,selection:w}];if(p!==void 0||u!==void 0||d.length>0)S=this.buildSelectQuery({table:Cc(o,i),fields:{},fieldsFlat:[{path:[],field:I.raw("*")}],where:y,limit:p,offset:u,orderBy:d,setOperators:[]}),y=void 0,p=void 0,u=void 0,d=[];else S=Cc(o,i);S=this.buildSelectQuery({table:W(S,ee)?S:new Ur(S,{},i),fields:{},fieldsFlat:N.map(({field:v})=>({path:[],field:W(v,Qt)?Qo(v,i):v})),joins:R,where:y,limit:p,offset:u,orderBy:d,setOperators:[]})}else S=this.buildSelectQuery({table:Cc(o,i),fields:{},fieldsFlat:w.map(({field:T})=>({path:[],field:W(T,Qt)?Qo(T,i):T})),joins:R,where:y,limit:p,offset:u,orderBy:d,setOperators:[]});return{tableTsKey:n.tsName,sql:S,selection:w}}}});var Py;var P8=_(()=>{et();Py=class Py{static[a]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}});function ti(t,r){return(e,o,...n)=>{let c=[o,...n].map((i)=>({type:t,isAll:r,rightSelect:i}));for(let i of c)if(!Kc(e.getSelectedFields(),i.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return e.addSetOperators(c)}}var Ce,g8,gy,fV=()=>({union:hV,unionAll:wV,intersect:pV,intersectAll:uV,except:dV,exceptAll:yV}),hV,wV,pV,uV,dV,yV;var Cy=_(()=>{et();Yy();P8();On();Ks();gr();Co();Je();Rn();dr();dr();In();ri();Ce=class Ce{static[a]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(t){if(this.fields=t.fields,this.session=t.session,this.dialect=t.dialect,t.withList)this.withList=t.withList;this.distinct=t.distinct}authToken;setToken(t){return this.authToken=t,this}from(t){let r=!!this.fields,e=t,o;if(this.fields)o=this.fields;else if(W(e,Ur))o=Object.fromEntries(Object.keys(e._.selectedFields).map((n)=>[n,e[n]]));else if(W(e,xf))o=e[ir].selectedFields;else if(W(e,ot))o={};else o=Z2(e);return new gy({table:e,fields:o,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}};g8=class g8 extends Py{static[a]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:t,fields:r,isPartialSelect:e,session:o,dialect:n,withList:c,distinct:i}){super();this.config={withList:c,table:t,fields:{...r},distinct:i,setOperators:[]},this.isPartialSelect=e,this.session=o,this.dialect=n,this._={selectedFields:r,config:this.config},this.tableName=fn(t),this.joinsNotNullableMap=typeof this.tableName==="string"?{[this.tableName]:!0}:{};for(let f of Eo(t))this.usedTables.add(f)}getUsedTables(){return[...this.usedTables]}createJoin(t,r){return(e,o)=>{let n=this.tableName,c=fn(e);for(let i of Eo(e))this.usedTables.add(i);if(typeof c==="string"&&this.config.joins?.some((i)=>i.alias===c))throw Error(`Alias "${c}" is already used in this query`);if(!this.isPartialSelect){if(Object.keys(this.joinsNotNullableMap).length===1&&typeof n==="string")this.config.fields={[n]:this.config.fields};if(typeof c==="string"&&!W(e,ot)){let i=W(e,Ur)?e._.selectedFields:W(e,Pe)?e[ir].selectedFields:e[j.Symbol.Columns];this.config.fields[c]=i}}if(typeof o==="function")o=o(new Proxy(this.config.fields,new Xr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));if(!this.config.joins)this.config.joins=[];if(this.config.joins.push({on:o,table:e,joinType:t,alias:c,lateral:r}),typeof c==="string")switch(t){case"left":{this.joinsNotNullableMap[c]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[c]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[c]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[c]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(t,r){return(e)=>{let o=typeof e==="function"?e(fV()):e;if(!Kc(this.getSelectedFields(),o.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:t,isAll:r,rightSelect:o}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(t){return this.config.setOperators.push(...t),this}where(t){if(typeof t==="function")t=t(new Proxy(this.config.fields,new Xr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.where=t,this}having(t){if(typeof t==="function")t=t(new Proxy(this.config.fields,new Xr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.having=t,this}groupBy(...t){if(typeof t[0]==="function"){let r=t[0](new Proxy(this.config.fields,new Xr({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=t;return this}orderBy(...t){if(typeof t[0]==="function"){let r=t[0](new Proxy(this.config.fields,new Xr({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),e=Array.isArray(r)?r:[r];if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=e;else this.config.orderBy=e}else{let r=t;if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=r;else this.config.orderBy=r}return this}limit(t){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).limit=t;else this.config.limit=t;return this}offset(t){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).offset=t;else this.config.offset=t;return this}for(t,r={}){return this.config.lockingClause={strength:t,config:r},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(t){let r=[];if(r.push(...Eo(this.config.table)),this.config.joins)for(let e of this.config.joins)r.push(...Eo(e.table));return new Proxy(new Ur(this.getSQL(),this.config.fields,t,!1,[...new Set(r)]),new Xr({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Xr({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(t){return this.cacheConfig=t===void 0?{config:{},enable:!0,autoInvalidate:!0}:t===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...t},this}};gy=class gy extends g8{static[a]="PgSelect";_prepare(t){let{session:r,config:e,dialect:o,joinsNotNullableMap:n,authToken:c,cacheConfig:i,usedTables:f}=this;if(!r)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:h}=e;return Sr.startActiveSpan("drizzle.prepareQuery",()=>{let w=yo(h),p=r.prepareQuery(o.sqlToQuery(this.getSQL()),w,t,!0,void 0,{type:"select",tables:[...f]},i);return p.joinsNotNullableMap=n,p.setToken(c)})}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=(t)=>{return Sr.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute(t,this.authToken)})}};W2(gy,[be]);hV=ti("union",!1),wV=ti("union",!0),pV=ti("intersect",!1),uV=ti("intersect",!0),dV=ti("except",!1),yV=ti("except",!0)});var qf;var Qy=_(()=>{et();Hw();Ks();Co();Cy();qf=class qf{static[a]="PgQueryBuilder";dialect;dialectConfig;constructor(t){this.dialect=W(t,Es)?t:void 0,this.dialectConfig=W(t,Es)?void 0:t}$with=(t,r)=>{let e=this;return{as:(n)=>{if(typeof n==="function")n=n(e);return new Proxy(new Jc(n.getSQL(),r??("getSelectedFields"in n?n.getSelectedFields()??{}:{}),t,!0),new Xr({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};with(...t){let r=this;function e(c){return new Ce({fields:c??void 0,session:void 0,dialect:r.getDialect(),withList:t})}function o(c){return new Ce({fields:c??void 0,session:void 0,dialect:r.getDialect(),distinct:!0})}function n(c,i){return new Ce({fields:i??void 0,session:void 0,dialect:r.getDialect(),distinct:{on:c}})}return{select:e,selectDistinct:o,selectDistinctOn:n}}select(t){return new Ce({fields:t??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(t){return new Ce({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(t,r){return new Ce({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:t}})}getDialect(){if(!this.dialect)this.dialect=new Es(this.dialectConfig);return this.dialect}}});var C8=()=>{};function Eo(t){if(W(t,ee))return[t[xn]?`${t[xn]}.${t[j.Symbol.BaseName]}`:t[j.Symbol.BaseName]];if(W(t,Ur))return t._.usedTables??[];if(W(t,ot))return t.usedTables??[];return[]}var ri=_(()=>{et();xc();gr();Co();Je()});var bw;var Q8=_(()=>{et();On();Ks();Je();Rn();dr();ri();bw=class bw extends be{constructor(t,r,e,o){super();this.session=r,this.dialect=e,this.config={table:t,withList:o}}static[a]="PgDelete";config;cacheConfig;where(t){return this.config.where=t,this}returning(t=this.config.table[j.Symbol.Columns]){return this.config.returningFields=t,this.config.returning=yo(t),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){return Sr.startActiveSpan("drizzle.prepareQuery",()=>{return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0,void 0,{type:"delete",tables:Eo(this.config.table)},this.cacheConfig)})}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=(t)=>{return Sr.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute(t,this.authToken)})};getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Xr({alias:Xe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}});var lw,Ky;var K8=_(()=>{et();On();Ks();gr();Je();Rn();dr();ri();Qy();lw=class lw{constructor(t,r,e,o,n){this.table=t,this.session=r,this.dialect=e,this.withList=o,this.overridingSystemValue_=n}static[a]="PgInsertBuilder";authToken;setToken(t){return this.authToken=t,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(t){if(t=Array.isArray(t)?t:[t],t.length===0)throw Error("values() must be called with at least one value");let r=t.map((e)=>{let o={},n=this.table[j.Symbol.Columns];for(let c of Object.keys(e)){let i=e[c];o[c]=W(i,ot)?i:new Ye(i,n[c])}return o});return new Ky(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(t){let r=typeof t==="function"?t(new qf):t;if(!W(r,ot)&&!Kc(this.table[Yf],r._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new Ky(this.table,r,this.session,this.dialect,this.withList,!0)}};Ky=class Ky extends be{constructor(t,r,e,o,n,c,i){super();this.session=e,this.dialect=o,this.config={table:t,values:r,withList:n,select:c,overridingSystemValue_:i}}static[a]="PgInsert";config;cacheConfig;returning(t=this.config.table[j.Symbol.Columns]){return this.config.returningFields=t,this.config.returning=yo(t),this}onConflictDoNothing(t={}){if(t.target===void 0)this.config.onConflict=I`do nothing`;else{let r="";r=Array.isArray(t.target)?t.target.map((o)=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(o))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target));let e=t.where?I` where ${t.where}`:void 0;this.config.onConflict=I`(${I.raw(r)})${e} do nothing`}return this}onConflictDoUpdate(t){if(t.where&&(t.targetWhere||t.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=t.where?I` where ${t.where}`:void 0,e=t.targetWhere?I` where ${t.targetWhere}`:void 0,o=t.setWhere?I` where ${t.setWhere}`:void 0,n=this.dialect.buildUpdateSet(this.config.table,Pf(this.config.table,t.set)),c="";return c=Array.isArray(t.target)?t.target.map((i)=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(i))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target)),this.config.onConflict=I`(${I.raw(c)})${e} do update set ${n}${r}${o}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){return Sr.startActiveSpan("drizzle.prepareQuery",()=>{return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0,void 0,{type:"insert",tables:Eo(this.config.table)},this.cacheConfig)})}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=(t)=>{return Sr.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute(t,this.authToken)})};getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Xr({alias:Xe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}});var Ey;var xy=_(()=>{et();On();Rn();Ey=class Ey extends be{constructor(t,r,e){super();this.session=r,this.dialect=e,this.config={view:t}}static[a]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){return Sr.startActiveSpan("drizzle.prepareQuery",()=>{return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,t,!0)})}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=(t)=>{return Sr.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute(t,this.authToken)})}}});var Fw,E8;var x8=_(()=>{et();xc();On();Ks();gr();Co();Je();dr();In();ri();Fw=class Fw{constructor(t,r,e,o){this.table=t,this.session=r,this.dialect=e,this.withList=o}static[a]="PgUpdateBuilder";authToken;setToken(t){return this.authToken=t,this}set(t){return new E8(this.table,Pf(this.table,t),this.session,this.dialect,this.withList).setToken(this.authToken)}};E8=class E8 extends be{constructor(t,r,e,o,n){super();this.session=e,this.dialect=o,this.config={set:r,table:t,withList:n,joins:[]},this.tableName=fn(t),this.joinsNotNullableMap=typeof this.tableName==="string"?{[this.tableName]:!0}:{}}static[a]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(t){let r=t,e=fn(r);if(typeof e==="string")this.joinsNotNullableMap[e]=!0;return this.config.from=r,this}getTableLikeFields(t){if(W(t,ee))return t[j.Symbol.Columns];else if(W(t,Ur))return t._.selectedFields;return t[ir].selectedFields}createJoin(t){return(r,e)=>{let o=fn(r);if(typeof o==="string"&&this.config.joins.some((n)=>n.alias===o))throw Error(`Alias "${o}" is already used in this query`);if(typeof e==="function"){let n=this.config.from&&!W(this.config.from,ot)?this.getTableLikeFields(this.config.from):void 0;e=e(new Proxy(this.config.table[j.Symbol.Columns],new Xr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),n&&new Proxy(n,new Xr({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:e,table:r,joinType:t,alias:o}),typeof o==="string")switch(t){case"left":{this.joinsNotNullableMap[o]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([n])=>[n,!1])),this.joinsNotNullableMap[o]=!0;break}case"inner":{this.joinsNotNullableMap[o]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([n])=>[n,!1])),this.joinsNotNullableMap[o]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(t){return this.config.where=t,this}returning(t){if(!t){if(t=Object.assign({},this.config.table[j.Symbol.Columns]),this.config.from){let r=fn(this.config.from);if(typeof r==="string"&&this.config.from&&!W(this.config.from,ot)){let e=this.getTableLikeFields(this.config.from);t[r]=e}for(let e of this.config.joins){let o=fn(e.table);if(typeof o==="string"&&!W(e.table,ot)){let n=this.getTableLikeFields(e.table);t[o]=n}}}}return this.config.returningFields=t,this.config.returning=yo(t),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:t,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(t){let r=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0,void 0,{type:"insert",tables:Eo(this.config.table)},this.cacheConfig);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}prepare(t){return this._prepare(t)}authToken;setToken(t){return this.authToken=t,this}execute=(t)=>{return this._prepare().execute(t,this.authToken)};getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Xr({alias:Xe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}});var qy=_(()=>{Q8();K8();Qy();xy();Cy();x8()});var Df;var q8=_(()=>{et();gr();Df=class Df extends ot{constructor(t){super(Df.buildEmbeddedCount(t.source,t.filters).queryChunks);this.params=t,this.mapWith(Number),this.session=t.session,this.sql=Df.buildCount(t.source,t.filters)}sql;token;static[a]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(t,r){return I`(select count(*) from ${t}${I.raw(" where ").if(r)}${r})`}static buildCount(t,r){return I`select count(*) as count from ${t}${I.raw(" where ").if(r)}${r};`}setToken(t){return this.token=t,this}then(t,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(t,r)}catch(t){return this.then(void 0,t)}finally(t){return this.then((r)=>{return t?.(),r},(r)=>{throw t?.(),r})}}});var Vy,Dy;var D8=_(()=>{et();On();Ef();Rn();Vy=class Vy{constructor(t,r,e,o,n,c,i){this.fullSchema=t,this.schema=r,this.tableNamesMap=e,this.table=o,this.tableConfig=n,this.dialect=c,this.session=i}static[a]="PgRelationalQueryBuilder";findMany(t){return new Dy(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,t?t:{},"many")}findFirst(t){return new Dy(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,t?{...t,limit:1}:{limit:1},"first")}};Dy=class Dy extends be{constructor(t,r,e,o,n,c,i,f,h){super();this.fullSchema=t,this.schema=r,this.tableNamesMap=e,this.table=o,this.tableConfig=n,this.dialect=c,this.session=i,this.config=f,this.mode=h}static[a]="PgRelationalQuery";_prepare(t){return Sr.startActiveSpan("drizzle.prepareQuery",()=>{let{query:r,builtQuery:e}=this._toSQL();return this.session.prepareQuery(e,void 0,t,!0,(o,n)=>{let c=o.map((i)=>Kf(this.schema,this.tableConfig,i,r.selection,n));if(this.mode==="first")return c[0];return c})})}prepare(t){return this._prepare(t)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let t=this._getQuery(),r=this.dialect.sqlToQuery(t.sql);return{query:t,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(t){return this.authToken=t,this}execute(){return Sr.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute(void 0,this.authToken)})}}});var jy;var V8=_(()=>{et();On();jy=class jy extends be{constructor(t,r,e,o){super();this.execute=t,this.sql=r,this.query=e,this.mapBatchResult=o}static[a]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(t,r){return r?this.mapBatchResult(t):t}_prepare(){return this}isResponseInArrayMode(){return!1}}});var Vf;var Lw=_(()=>{et();qy();Ks();gr();Co();q8();D8();V8();xy();Vf=class Vf{constructor(t,r,e){if(this.dialect=t,this.session=r,this._=e?{schema:e.schema,fullSchema:e.fullSchema,tableNamesMap:e.tableNamesMap,session:r}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:r},this.query={},this._.schema)for(let[o,n]of Object.entries(this._.schema))this.query[o]=new Vy(e.fullSchema,this._.schema,this._.tableNamesMap,e.fullSchema[o],n,t,r);this.$cache={invalidate:async(o)=>{}}}static[a]="PgDatabase";query;$with=(t,r)=>{let e=this;return{as:(n)=>{if(typeof n==="function")n=n(new qf(e.dialect));return new Proxy(new Jc(n.getSQL(),r??("getSelectedFields"in n?n.getSelectedFields()??{}:{}),t,!0),new Xr({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};$count(t,r){return new Df({source:t,filters:r,session:this.session})}$cache;with(...t){let r=this;function e(h){return new Ce({fields:h??void 0,session:r.session,dialect:r.dialect,withList:t})}function o(h){return new Ce({fields:h??void 0,session:r.session,dialect:r.dialect,withList:t,distinct:!0})}function n(h,w){return new Ce({fields:w??void 0,session:r.session,dialect:r.dialect,withList:t,distinct:{on:h}})}function c(h){return new Fw(h,r.session,r.dialect,t)}function i(h){return new lw(h,r.session,r.dialect,t)}function f(h){return new bw(h,r.session,r.dialect,t)}return{select:e,selectDistinct:o,selectDistinctOn:n,update:c,insert:i,delete:f}}select(t){return new Ce({fields:t??void 0,session:this.session,dialect:this.dialect})}selectDistinct(t){return new Ce({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(t,r){return new Ce({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:{on:t}})}update(t){return new Fw(t,this.session,this.dialect)}insert(t){return new lw(t,this.session,this.dialect)}delete(t){return new bw(t,this.session,this.dialect)}refreshMaterializedView(t){return new Ey(t,this.session,this.dialect)}authToken;execute(t){let r=typeof t==="string"?I.raw(t):t.getSQL(),e=this.dialect.sqlToQuery(r),o=this.session.prepareQuery(e,void 0,void 0,!1);return new jy(()=>o.execute(void 0,this.authToken),r,e,(n)=>o.mapResult(n,!0))}transaction(t,r){return this.session.transaction(t,r)}}});async function tA(t,r){let e=`${t}-${JSON.stringify(r)}`,n=new TextEncoder().encode(e),c=await crypto.subtle.digest("SHA-256",n);return[...new Uint8Array(c)].map((h)=>h.toString(16).padStart(2,"0")).join("")}var j8,jf;var rA=_(()=>{et();j8=class j8{static[a]="Cache"};jf=class jf extends j8{strategy(){return"all"}static[a]="NoopCache";async get(t){return}async put(t,r,e,o){}async onMutate(t){}}});var ta=_(()=>{rA()});var ra=()=>{};var ea=()=>{};var oa=()=>{};var na=()=>{};var eA,oA,nA;var sA=_(()=>{rA();et();Nw();Uw();Rn();Lw();eA=class eA{constructor(t,r,e,o){if(this.query=t,this.cache=r,this.queryMetadata=e,this.cacheConfig=o,r&&r.strategy()==="all"&&o===void 0)this.cacheConfig={enable:!0,autoInvalidate:!0};if(!this.cacheConfig?.enable)this.cacheConfig=void 0}authToken;getQuery(){return this.query}mapResult(t,r){return t}setToken(t){return this.authToken=t,this}static[a]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(t,r,e){if(this.cache===void 0||W(this.cache,jf)||this.queryMetadata===void 0)try{return await e()}catch(o){throw new hn(t,r,o)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await e()}catch(o){throw new hn(t,r,o)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[o]=await Promise.all([e(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return o}catch(o){throw new hn(t,r,o)}if(!this.cacheConfig)try{return await e()}catch(o){throw new hn(t,r,o)}if(this.queryMetadata.type==="select"){let o=await this.cache.get(this.cacheConfig.tag??await tA(t,r),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(o===void 0){let n;try{n=await e()}catch(c){throw new hn(t,r,c)}return await this.cache.put(this.cacheConfig.tag??await tA(t,r),n,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),n}return o}try{return await e()}catch(o){throw new hn(t,r,o)}}};oA=class oA{constructor(t){this.dialect=t}static[a]="PgSession";execute(t,r){return Sr.startActiveSpan("drizzle.operation",()=>{return Sr.startActiveSpan("drizzle.prepareQuery",()=>{return this.prepareQuery(this.dialect.sqlToQuery(t),void 0,void 0,!1)}).setToken(r).execute(void 0,r)})}all(t){return this.prepareQuery(this.dialect.sqlToQuery(t),void 0,void 0,!1).all()}async count(t,r){let e=await this.execute(t,r);return Number(e[0].count)}};nA=class nA extends Vf{constructor(t,r,e,o=0){super(t,r,e);this.schema=e,this.nestedIndex=o}static[a]="PgTransaction";rollback(){throw new Tw}getTransactionConfigSQL(t){let r=[];if(t.isolationLevel)r.push(`isolation level ${t.isolationLevel}`);if(t.accessMode)r.push(t.accessMode);if(typeof t.deferrable==="boolean")r.push(t.deferrable?"deferrable":"not deferrable");return I.raw(r.join(" "))}setTransaction(t){return this.session.execute(I`set transaction ${this.getTransactionConfigSQL(t)}`)}}});var sa=_(()=>{a2()});var cA=_(()=>{ra();F8();Ry();Lw();Hw();R2();L8();G8();Ty();qy();ea();na();oa();sA();xc();N2();ri();sa();M8();C8()});var ca,t0,iA;var fA=_(()=>{ta();et();ew();cA();sA();gr();Rn();dr();ca=class ca extends eA{constructor(t,r,e,o,n,c,i,f,h,w){super({sql:r,params:e},n,c,i);this.client=t,this.queryString=r,this.params=e,this.logger=o,this.fields=f,this._isResponseInArrayMode=h,this.customResultMapper=w}static[a]="PostgresJsPreparedQuery";async execute(t={}){return Sr.startActiveSpan("drizzle.execute",async(r)=>{let e=hw(this.params,t);r?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(e)}),this.logger.logQuery(this.queryString,e);let{fields:o,queryString:n,client:c,joinsNotNullableMap:i,customResultMapper:f}=this;if(!o&&!f)return Sr.startActiveSpan("drizzle.driver.execute",()=>{return this.queryWithCache(n,e,async()=>{return await c.unsafe(n,e)})});let h=await Sr.startActiveSpan("drizzle.driver.execute",()=>{return r?.setAttributes({"drizzle.query.text":n,"drizzle.query.params":JSON.stringify(e)}),this.queryWithCache(n,e,async()=>{return await c.unsafe(n,e).values()})});return Sr.startActiveSpan("drizzle.mapResponse",()=>{return f?f(h):h.map((w)=>k2(o,w,i))})})}all(t={}){return Sr.startActiveSpan("drizzle.execute",async(r)=>{let e=hw(this.params,t);return r?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(e)}),this.logger.logQuery(this.queryString,e),Sr.startActiveSpan("drizzle.driver.execute",()=>{return r?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(e)}),this.queryWithCache(this.queryString,e,async()=>{return this.client.unsafe(this.queryString,e)})})})}isResponseInArrayMode(){return this._isResponseInArrayMode}};t0=class t0 extends oA{constructor(t,r,e,o={}){super(r);this.client=t,this.schema=e,this.options=o,this.logger=o.logger??new rw,this.cache=o.cache??new jf}static[a]="PostgresJsSession";logger;cache;prepareQuery(t,r,e,o,n,c,i){return new ca(this.client,t.sql,t.params,this.logger,this.cache,c,i,r,o,n)}query(t,r){return this.logger.logQuery(t,r),this.client.unsafe(t,r).values()}queryObjects(t,r){return this.client.unsafe(t,r)}transaction(t,r){return this.client.begin(async(e)=>{let o=new t0(e,this.dialect,this.schema,this.options),n=new iA(this.dialect,o,this.schema);if(r)await n.setTransaction(r);return t(n)})}};iA=class iA extends nA{constructor(t,r,e,o=0){super(t,r,e,o);this.session=r}static[a]="PostgresJsTransaction";transaction(t){return this.session.client.savepoint((r)=>{let e=new t0(r,this.dialect,this.schema,this.session.options),o=new iA(this.dialect,e,this.schema);return t(o)})}}});function ei(t,r={}){let e=(h)=>h;for(let h of["1184","1082","1083","1114","1182","1185","1115","1231"])t.options.parsers[h]=e,t.options.serializers[h]=e;t.options.serializers["114"]=e,t.options.serializers["3802"]=e;let o=new Es({casing:r.casing}),n;if(r.logger===!0)n=new tw;else if(r.logger!==!1)n=r.logger;let c;if(r.schema){let h=By(r.schema,Jy);c={fullSchema:r.schema,schema:h.tables,tableNamesMap:h.tableNamesMap}}let i=new t0(t,o,c,{logger:n,cache:r.cache}),f=new ia(o,i,c);if(f.$client=t,f.$cache=r.cache,f.$cache)f.$cache.invalidate=r.cache?.onMutate;return f}function Gw(...t){if(typeof t[0]==="string"){let r=Xc(t[0]);return ei(r,t[1])}if(B2(t[0])){let{connection:r,client:e,...o}=t[0];if(e)return ei(e,o);if(typeof r==="object"&&r.url!==void 0){let{url:c,...i}=r,f=Xc(c,i);return ei(f,o)}let n=Xc(r);return ei(n,o)}return ei(t[0],t[1])}var ia;var fa=_(()=>{S2();et();ew();Lw();Hw();Ef();dr();fA();ia=class ia extends Vf{static[a]="PostgresJsDatabase"};((t)=>{function r(e){return ei({options:{parsers:{},serializers:{}}},e)}t.mock=r})(Gw||(Gw={}))});var ha=_(()=>{fa();fA()});var hA={};wo(hA,{textDecoder:()=>XD,sumDistinct:()=>jD,sum:()=>VD,sql:()=>I,relations:()=>Vn,placeholder:()=>zD,param:()=>MD,orderSelectedFields:()=>yo,or:()=>ge,notLike:()=>vy,notInArray:()=>Hy,notIlike:()=>zy,notExists:()=>Fy,notBetween:()=>Gy,not:()=>ay,normalizeRelation:()=>Xy,noopMapper:()=>vD,noopEncoder:()=>M2,noopDecoder:()=>v2,ne:()=>my,name:()=>GD,min:()=>rV,max:()=>tV,mapUpdateSet:()=>Pf,mapResultRow:()=>k2,mapRelationalRow:()=>Kf,mapColumnsInSQLToAlias:()=>Qc,mapColumnsInAliasedSQLToAlias:()=>ww,lte:()=>Qf,lt:()=>qc,like:()=>he,l2Distance:()=>eV,l1Distance:()=>oV,jaccardDistance:()=>iV,isView:()=>kD,isTable:()=>FD,isSQLWrapper:()=>fw,isNull:()=>Dc,isNotNull:()=>by,isDriverValueEncoder:()=>G2,isConfig:()=>B2,is:()=>W,innerProduct:()=>nV,inArray:()=>bo,ilike:()=>My,haveSameKeys:()=>Kc,hasOwnEntityKind:()=>HD,hammingDistance:()=>cV,gte:()=>Ko,gt:()=>Uy,getViewSelectedFields:()=>BD,getViewName:()=>WD,getTableUniqueName:()=>qn,getTableName:()=>Xe,getTableLikeName:()=>fn,getTableColumns:()=>Z2,getOrderByOperators:()=>Zy,getOperators:()=>Wy,getColumnNameAndConfig:()=>Mt,fillPlaceholders:()=>hw,extractTablesRelationalConfig:()=>By,exists:()=>ly,eq:()=>Y,entityKind:()=>a,desc:()=>Vt,createTableRelationsHelpers:()=>Jy,createOne:()=>Z8,createMany:()=>B8,countDistinct:()=>xD,count:()=>Ao,cosineDistance:()=>sV,bindIfParam:()=>Cr,between:()=>Ly,avgDistinct:()=>DD,avg:()=>qD,asc:()=>oo,arrayOverlaps:()=>ED,arrayContains:()=>QD,arrayContained:()=>KD,applyMixins:()=>W2,and:()=>Ir,aliasedTableColumn:()=>Qo,aliasedTable:()=>Cc,aliasedRelation:()=>ZD,WithSubquery:()=>Jc,ViewBaseConfig:()=>ir,View:()=>Pe,TransactionRollbackError:()=>Tw,TableAliasProxyHandler:()=>gc,Table:()=>j,Subquery:()=>Ur,StringChunk:()=>qr,Schema:()=>xn,SQL:()=>ot,Relations:()=>aw,RelationTableAliasProxyHandler:()=>z2,Relation:()=>mw,QueryPromise:()=>be,Placeholder:()=>cn,Param:()=>Ye,OriginalName:()=>cw,One:()=>Nn,NoopLogger:()=>rw,Name:()=>Pc,Many:()=>Vc,IsAlias:()=>Yc,FakePrimitiveParam:()=>GN,ExtraConfigColumns:()=>F2,ExtraConfigBuilder:()=>L2,DrizzleQueryError:()=>hn,DrizzleError:()=>Cf,DefaultLogger:()=>tw,ConsoleLogWriter:()=>_2,Columns:()=>Yf,ColumnBuilder:()=>ow,ColumnAliasProxyHandler:()=>Qs,Column:()=>Qt,BaseName:()=>iw});var we=_(()=>{pw();$2();Po();et();Nw();ew();On();Ef();Uw();Co();Je();dr();In()});var r0={};wo(r0,{whitelabelPostsRelations:()=>RV,whitelabelPosts:()=>jt,whitelabelModelsRelations:()=>OV,whitelabelModels:()=>Lt,whitelabelMediaRelations:()=>IV,whitelabelMedia:()=>le,usersRelations:()=>SV,users:()=>ft,supportContacts:()=>So,subscriptionsRelations:()=>$V,subscriptions:()=>pt,posts:()=>Qr,plans:()=>Tt,paymentGateways:()=>Dr,orderBumps:()=>Wt,models:()=>$t,impressions:()=>wA,clicks:()=>pA,checkoutsRelations:()=>_V,checkouts:()=>ut,ads:()=>Zt,adminSettings:()=>AV});var ft,Tt,Dr,pt,$t,Qr,AV,Lt,jt,le,So,ut,Wt,SV,_V,$V,OV,RV,IV,Zt,wA,pA;var pe=_(()=>{cA();we();ft=$e("users",{id:fe("id").primaryKey(),name:nt("name"),email:nt("email").notNull().unique(),password:nt("password").notNull(),role:nt("role",{enum:["admin","user"]}).default("user"),subscriptionStatus:Gr("subscription_status").default(0),createdAt:vr("created_at").defaultNow()}),Tt=$e("plans",{id:fe("id").primaryKey(),name:nt("name").notNull(),price:Gr("price").notNull(),duration:Gr("duration").notNull(),benefits:Ec("benefits_json"),ctaText:nt("cta_text"),checkoutUrl:nt("checkout_url"),acceptsPix:Ho("accepts_pix").default(!0),acceptsCard:Ho("accepts_card").default(!0),isActive:Ho("is_active").default(!0),cardStyle:nt("card_style",{enum:["primary","secondary","outline"]}).default("secondary")}),Dr=$e("payment_gateways",{id:fe("id").primaryKey(),name:nt("name").notNull().unique(),publicKey:nt("public_key"),secretKey:nt("secret_key"),postbackUrl:nt("postback_url"),isActive:Ho("is_active").default(!1)}),pt=$e("subscriptions",{id:fe("id").primaryKey(),userId:Gr("user_id").references(()=>ft.id).notNull(),planId:Gr("plan_id").references(()=>Tt.id),externalId:nt("external_id"),startDate:vr("start_date"),endDate:vr("end_date"),status:nt("status",{enum:["active","expired","pending"]}).default("pending"),createdAt:vr("created_at").defaultNow()}),$t=$e("models",{id:fe("id").primaryKey(),name:nt("name").notNull(),slug:nt("slug").unique(),description:nt("description"),iconUrl:nt("icon_url"),thumbnailUrl:nt("thumbnail_url"),bannerUrl:nt("banner_url"),externalUrl:nt("external_url"),category:nt("category"),postCount:Gr("post_count").default(0),status:nt("status",{enum:["active","hidden","draft"]}).default("active"),isFeatured:Ho("is_featured").default(!1),isAdvertiser:Ho("is_advertiser").default(!1),createdAt:vr("created_at").defaultNow()}),Qr=$e("posts",{id:fe("id").primaryKey(),modelId:Gr("model_id").references(()=>$t.id),title:nt("title"),contentUrl:nt("content_url").notNull(),type:nt("type",{enum:["image","video"]}).notNull(),createdAt:vr("created_at").defaultNow()}),AV=$e("admin_settings",{key:nt("key").primaryKey(),value:nt("value").notNull()}),Lt=$e("whitelabel_models",{id:fe("id").primaryKey(),folderName:nt("folder_name").notNull().unique(),thumbnailUrl:nt("thumbnail_url"),iconUrl:nt("icon_url"),bannerUrl:nt("banner_url"),postCount:Gr("post_count").default(0),status:nt("status",{enum:["new","active","hidden"]}).default("new"),lastSyncedAt:vr("last_synced_at").defaultNow(),createdAt:vr("created_at").defaultNow()}),jt=$e("whitelabel_posts",{id:fe("id").primaryKey(),whitelabelModelId:Gr("whitelabel_model_id").references(()=>Lt.id,{onDelete:"cascade"}).notNull(),folderName:nt("folder_name").notNull(),title:nt("title"),mediaCdns:Ec("media_cdns"),createdAt:vr("created_at").defaultNow()},(t)=>({unq:$N().on(t.whitelabelModelId,t.folderName)})),le=$e("whitelabel_media",{id:fe("id").primaryKey(),whitelabelPostId:Gr("whitelabel_post_id").references(()=>jt.id,{onDelete:"cascade"}).notNull(),s3Key:nt("s3_key").notNull().unique(),url:nt("url"),type:nt("type",{enum:["image","video"]}).notNull(),createdAt:vr("created_at").defaultNow()}),So=$e("support_contacts",{id:fe("id").primaryKey(),platform:nt("platform").notNull(),url:nt("url").notNull(),isActive:Ho("is_active").default(!0),updatedAt:vr("updated_at").defaultNow().$onUpdate(()=>new Date)}),ut=$e("checkouts",{id:fe("id").primaryKey(),userId:Gr("user_id").references(()=>ft.id),planId:Gr("plan_id").references(()=>Tt.id).notNull(),externalId:nt("external_id"),status:nt("status",{enum:["pending","paid","failed","abandoned"]}).default("pending"),paymentMethod:nt("payment_method",{enum:["pix","credit_card"]}),orderBump:Ho("order_bump").default(!1),orderBumpIds:Ec("order_bump_ids"),totalAmount:Gr("total_amount").notNull(),customerName:nt("customer_name"),customerEmail:nt("customer_email"),customerDocument:nt("customer_document"),customerPhone:nt("customer_phone"),createdAt:vr("created_at").defaultNow(),updatedAt:vr("updated_at").defaultNow().$onUpdate(()=>new Date)}),Wt=$e("order_bumps",{id:fe("id").primaryKey(),name:nt("name").notNull(),description:nt("description"),price:Gr("price").notNull(),isActive:Ho("is_active").default(!0),imageUrl:nt("image_url"),displayOrder:Gr("display_order").default(0),createdAt:vr("created_at").defaultNow()}),SV=Vn(ft,({one:t,many:r})=>({subscription:t(pt,{fields:[ft.id],references:[pt.userId]}),checkouts:r(ut)})),_V=Vn(ut,({one:t})=>({user:t(ft,{fields:[ut.userId],references:[ft.id]}),plan:t(Tt,{fields:[ut.planId],references:[Tt.id]})})),$V=Vn(pt,({one:t})=>({user:t(ft,{fields:[pt.userId],references:[ft.id]}),plan:t(Tt,{fields:[pt.planId],references:[Tt.id]})})),OV=Vn(Lt,({many:t})=>({posts:t(jt)})),RV=Vn(jt,({one:t,many:r})=>({model:t(Lt,{fields:[jt.whitelabelModelId],references:[Lt.id]}),media:r(le)})),IV=Vn(le,({one:t})=>({post:t(jt,{fields:[le.whitelabelPostId],references:[jt.id]})})),Zt=$e("ads",{id:fe("id").primaryKey(),name:nt("name").notNull(),type:nt("type",{enum:["diamond","diamond_block","banner","spot","hero"]}).notNull().default("banner"),placement:nt("placement",{enum:["home_top","home_middle","home_bottom","sidebar","feed_mix","models_grid","model_profile","login","register","feed_model","model_sidebar"]}).notNull().default("home_top"),status:nt("status",{enum:["active","paused","draft"]}).notNull().default("draft"),title:nt("title").notNull(),subtitle:nt("subtitle"),ctaText:nt("cta_text"),imageUrl:nt("image_url"),link:nt("link").notNull(),category:nt("category"),impressions:Gr("impressions").default(0),clicks:Gr("clicks").default(0),priority:Gr("priority").default(0),startDate:vr("start_date"),endDate:vr("end_date"),createdAt:vr("created_at").defaultNow(),updatedAt:vr("updated_at").defaultNow().$onUpdate(()=>new Date)}),wA=$e("impressions",{id:fe("id").primaryKey(),adId:Gr("ad_id").references(()=>Zt.id,{onDelete:"cascade"}).notNull(),placement:nt("placement"),userAgent:nt("user_agent"),ip:nt("ip"),createdAt:vr("created_at").defaultNow()}),pA=$e("clicks",{id:fe("id").primaryKey(),adId:Gr("ad_id").references(()=>Zt.id,{onDelete:"cascade"}).notNull(),placement:nt("placement"),userAgent:nt("user_agent"),ip:nt("ip"),createdAt:vr("created_at").defaultNow()})});var wa={};wo(wa,{db:()=>L});var TV,NV,L;var Fe=_(()=>{ha();S2();pe();TV=process.env.DATABASE_URL||"postgres://postgres:postgres@only_testepost:5432/only?sslmode=disable",NV=Xc(TV),L=Gw(NV,{schema:r0})});var Ds=Q((lV)=>{lV.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(lV.HttpAuthLocation||(lV.HttpAuthLocation={}));lV.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(lV.HttpApiKeyAuthLocation||(lV.HttpApiKeyAuthLocation={}));lV.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(lV.EndpointURLScheme||(lV.EndpointURLScheme={}));lV.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(lV.AlgorithmId||(lV.AlgorithmId={}));var mV=(t)=>{let r=[];if(t.sha256!==void 0)r.push({algorithmId:()=>lV.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256});if(t.md5!=null)r.push({algorithmId:()=>lV.AlgorithmId.MD5,checksumConstructor:()=>t.md5});return{addChecksumAlgorithm(e){r.push(e)},checksumAlgorithms(){return r}}},aV=(t)=>{let r={};return t.checksumAlgorithms().forEach((e)=>{r[e.algorithmId()]=e.checksumConstructor()}),r},UV=(t)=>{return mV(t)},HV=(t)=>{return aV(t)};lV.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(lV.FieldPosition||(lV.FieldPosition={}));var bV="__smithy_context";lV.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(lV.IniSectionType||(lV.IniSectionType={}));lV.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(lV.RequestHandlerProtocol||(lV.RequestHandlerProtocol={}));lV.SMITHY_CONTEXT_KEY=bV;lV.getDefaultClientConfiguration=UV;lV.resolveDefaultRuntimeConfig=HV});var tr=Q((ZV)=>{var vV=Ds(),MV=(t)=>{return{setHttpHandler(r){t.httpHandler=r},httpHandler(){return t.httpHandler},updateHttpClientConfig(r,e){t.httpHandler?.updateHttpClientConfig(r,e)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}},zV=(t)=>{return{httpHandler:t.httpHandler()}};class Ga{name;kind;values;constructor({name:t,kind:r=vV.FieldPosition.HEADER,values:e=[]}){this.name=t,this.kind=r,this.values=e}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter((r)=>r!==t)}toString(){return this.values.map((t)=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}}class va{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter((r)=>r.kind===t)}}class Ww{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new Ww({...t,headers:{...t.headers}});if(r.query)r.query=kV(r.query);return r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query==="object"&&typeof r.headers==="object"}clone(){return Ww.clone(this)}}function kV(t){return Object.keys(t).reduce((r,e)=>{let o=t[e];return{...r,[e]:Array.isArray(o)?[...o]:o}},{})}class Ma{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode==="number"&&typeof r.headers==="object"}}function WV(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}ZV.Field=Ga;ZV.Fields=va;ZV.HttpRequest=Ww;ZV.HttpResponse=Ma;ZV.getHttpHandlerExtensionConfiguration=MV;ZV.isValidHostname=WV;ZV.resolveHttpHandlerRuntimeConfig=zV});function QV(t){return(r)=>async(e)=>{let{request:o}=e;if(t.expectContinueHeader!==!1&&za.HttpRequest.isInstance(o)&&o.body&&t.runtime==="node"&&t.requestHandler?.constructor?.name!=="FetchHttpHandler"){let n=!0;if(typeof t.expectContinueHeader==="number")try{n=(Number(o.headers?.["content-length"])??t.bodyLengthChecker?.(o.body)??1/0)>=t.expectContinueHeader}catch(c){}else n=!!t.expectContinueHeader;if(n)o.headers.Expect="100-continue"}return r({...e,request:o})}}var za,KV,ka=(t)=>({applyToStack:(r)=>{r.add(QV(t),KV)}});var Wa=_(()=>{za=O(tr(),1);KV={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0}});var lo,Zw,Vs,Bw,Kt,Za,n0;var Fo=_(()=>{lo={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},Zw=lo.WHEN_SUPPORTED,Vs={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},Bw=lo.WHEN_SUPPORTED;(function(t){t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.CRC64NVME="CRC64NVME",t.SHA1="SHA1",t.SHA256="SHA256"})(Kt||(Kt={}));(function(t){t.HEADER="header",t.TRAILER="trailer"})(Za||(Za={}));n0=Kt.CRC32});var es,oi=(t,r,e,o)=>{if(!(r in t))return;let n=t[r].toUpperCase();if(!Object.values(e).includes(n))throw TypeError(`Cannot load ${o} '${r}'. Expected one of ${Object.values(e)}, got '${t[r]}'.`);return n};var TA=_(()=>{(function(t){t.ENV="env",t.CONFIG="shared config entry"})(es||(es={}))});var EV="AWS_REQUEST_CHECKSUM_CALCULATION",xV="request_checksum_calculation",Ba;var Xa=_(()=>{Fo();TA();Ba={environmentVariableSelector:(t)=>oi(t,EV,lo,es.ENV),configFileSelector:(t)=>oi(t,xV,lo,es.CONFIG),default:Zw}});var qV="AWS_RESPONSE_CHECKSUM_VALIDATION",DV="response_checksum_validation",Ja;var Ya=_(()=>{Fo();TA();Ja={environmentVariableSelector:(t)=>oi(t,qV,Vs,es.ENV),configFileSelector:(t)=>oi(t,DV,Vs,es.CONFIG),default:Bw}});var Qe=Q((tj)=>{var Pa=Ds(),VV=(t)=>t[Pa.SMITHY_CONTEXT_KEY]||(t[Pa.SMITHY_CONTEXT_KEY]={}),jV=(t)=>{if(typeof t==="function")return t;let r=Promise.resolve(t);return()=>r};tj.getSmithyContext=VV;tj.normalizeProvider=jV});var mA=Q((sj)=>{var oj=tr(),ga=(t,r)=>(e,o)=>async(n)=>{let{response:c}=await e(n);try{let i=await r(c,t);return{response:c,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:c,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in i)){try{i.message+=`
  Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`}catch(h){if(!o.logger||o.logger?.constructor?.name==="NoOpLogger")console.warn("Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.");else o.logger?.warn?.("Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.")}if(typeof i.$responseBodyText<"u"){if(i.$response)i.$response.body=i.$responseBodyText}try{if(oj.HttpResponse.isInstance(c)){let{headers:h={}}=c,w=Object.entries(h);i.$metadata={httpStatusCode:c.statusCode,requestId:NA(/^x-[\w-]+-request-?id$/,w),extendedRequestId:NA(/^x-[\w-]+-id-2$/,w),cfId:NA(/^x-[\w-]+-cf-id$/,w)}}}catch(h){}}throw i}},NA=(t,r)=>{return(r.find(([e])=>{return e.match(t)})||[void 0,void 0])[1]},Ca=(t,r)=>(e,o)=>async(n)=>{let c=t,i=o.endpointV2?.url&&c.urlParser?async()=>c.urlParser(o.endpointV2.url):c.endpoint;if(!i)throw Error("No valid endpoint provider available.");let f=await r(n.input,{...t,endpoint:i});return e({...n,request:f})},Qa={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ka={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function nj(t,r,e){return{applyToStack:(o)=>{o.add(ga(t,e),Qa),o.add(Ca(t,r),Ka)}}}sj.deserializerMiddleware=ga;sj.deserializerMiddlewareOption=Qa;sj.getSerdePlugin=nj;sj.serializerMiddleware=Ca;sj.serializerMiddlewareOption=Ka});var Xw=Q((uj)=>{var pj=(t)=>typeof ArrayBuffer==="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";uj.isArrayBuffer=pj});var ni=Q((_j)=>{var yj=Xw(),aA=Rr("buffer"),Aj=(t,r=0,e=t.byteLength-r)=>{if(!yj.isArrayBuffer(t))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return aA.Buffer.from(t,r,e)},Sj=(t,r)=>{if(typeof t!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return r?aA.Buffer.from(t,r):aA.Buffer.from(t)};_j.fromArrayBuffer=Aj;_j.fromString=Sj});var qa=Q((Ea)=>{Object.defineProperty(Ea,"__esModule",{value:!0});Ea.fromBase64=void 0;var Rj=ni(),Ij=/^[A-Za-z0-9+/]*={0,2}$/,Tj=(t)=>{if(t.length*3%4!==0)throw TypeError("Incorrect padding on base64 string.");if(!Ij.exec(t))throw TypeError("Invalid base64 string.");let r=(0,Rj.fromString)(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)};Ea.fromBase64=Tj});var ue=Q((aj)=>{var Da=ni(),Va=(t)=>{let r=Da.fromString(t,"utf8");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Nj=(t)=>{if(typeof t==="string")return Va(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(t)},mj=(t)=>{if(typeof t==="string")return t;if(typeof t!=="object"||typeof t.byteOffset!=="number"||typeof t.byteLength!=="number")throw Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return Da.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};aj.fromUtf8=Va;aj.toUint8Array=Nj;aj.toUtf8=mj});var r5=Q((ja)=>{Object.defineProperty(ja,"__esModule",{value:!0});ja.toBase64=void 0;var lj=ni(),Fj=ue(),Lj=(t)=>{let r;if(typeof t==="string")r=(0,Fj.fromUtf8)(t);else r=t;if(typeof r!=="object"||typeof r.byteOffset!=="number"||typeof r.byteLength!=="number")throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,lj.fromArrayBuffer)(r.buffer,r.byteOffset,r.byteLength).toString("base64")};ja.toBase64=Lj});var Ke=Q((s0)=>{var e5=qa(),o5=r5();Object.keys(e5).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(s0,t))Object.defineProperty(s0,t,{enumerable:!0,get:function(){return e5[t]}})});Object.keys(o5).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(s0,t))Object.defineProperty(s0,t,{enumerable:!0,get:function(){return o5[t]}})})});var UA=Q((s5)=>{Object.defineProperty(s5,"__esModule",{value:!0});s5.ChecksumStream=void 0;var Gj=Ke(),vj=Rr("stream");class n5 extends vj.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:e,checksumSourceLocation:o,base64Encoder:n}){super();if(typeof e.pipe==="function")this.source=e;else throw Error(`@smithy/util-stream: unsupported source type ${e?.constructor?.name??e} in ChecksumStream.`);this.base64Encoder=n??Gj.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=o,this.source.pipe(this)}_read(t){}_write(t,r,e){try{this.checksum.update(t),this.push(t)}catch(o){return e(o)}return e()}async _final(t){try{let r=await this.checksum.digest(),e=this.base64Encoder(r);if(this.expectedChecksum!==e)return t(Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${e}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}}s5.ChecksumStream=n5});var mn=Q((i5)=>{Object.defineProperty(i5,"__esModule",{value:!0});i5.isBlob=i5.isReadableStream=void 0;var Mj=(t)=>typeof ReadableStream==="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);i5.isReadableStream=Mj;var zj=(t)=>{return typeof Blob==="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob)};i5.isBlob=zj});var u5=Q((w5)=>{Object.defineProperty(w5,"__esModule",{value:!0});w5.ChecksumStream=void 0;var Wj=typeof ReadableStream==="function"?ReadableStream:function(){};class h5 extends Wj{}w5.ChecksumStream=h5});var A5=Q((d5)=>{Object.defineProperty(d5,"__esModule",{value:!0});d5.createChecksumStream=void 0;var Zj=Ke(),Bj=mn(),Xj=u5(),Jj=({expectedChecksum:t,checksum:r,source:e,checksumSourceLocation:o,base64Encoder:n})=>{if(!(0,Bj.isReadableStream)(e))throw Error(`@smithy/util-stream: unsupported source type ${e?.constructor?.name??e} in ChecksumStream.`);let c=n??Zj.toBase64;if(typeof TransformStream!=="function")throw Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(h,w){r.update(h),w.enqueue(h)},async flush(h){let w=await r.digest(),p=c(w);if(t!==p){let u=Error(`Checksum mismatch: expected "${t}" but received "${p}" in response header "${o}".`);h.error(u)}else h.terminate()}});e.pipeThrough(i);let f=i.readable;return Object.setPrototypeOf(f,Xj.ChecksumStream.prototype),f};d5.createChecksumStream=Jj});var _5=Q((S5)=>{Object.defineProperty(S5,"__esModule",{value:!0});S5.createChecksumStream=Cj;var Yj=mn(),Pj=UA(),gj=A5();function Cj(t){if(typeof ReadableStream==="function"&&(0,Yj.isReadableStream)(t.source))return(0,gj.createChecksumStream)(t);return new Pj.ChecksumStream(t)}});var HA=Q((O5)=>{Object.defineProperty(O5,"__esModule",{value:!0});O5.ByteArrayCollector=void 0;class $5{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let e=this.byteArrays[0];return this.reset(),e}let t=this.allocByteArray(this.byteLength),r=0;for(let e=0;e<this.byteArrays.length;++e){let o=this.byteArrays[e];t.set(o,r),r+=o.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}}O5.ByteArrayCollector=$5});var U5=Q((m5)=>{Object.defineProperty(m5,"__esModule",{value:!0});m5.createBufferedReadable=void 0;m5.createBufferedReadableStream=I5;m5.merge=T5;m5.flush=Jw;m5.sizeOf=si;m5.modeOf=N5;var Kj=HA();function I5(t,r,e){let o=t.getReader(),n=!1,c=0,i=["",new Kj.ByteArrayCollector((w)=>new Uint8Array(w))],f=-1,h=async(w)=>{let{value:p,done:u}=await o.read(),d=p;if(u){if(f!==-1){let y=Jw(i,f);if(si(y)>0)w.enqueue(y)}w.close()}else{let y=N5(d,!1);if(f!==y){if(f>=0)w.enqueue(Jw(i,f));f=y}if(f===-1){w.enqueue(d);return}let R=si(d);c+=R;let S=si(i[f]);if(R>=r&&S===0)w.enqueue(d);else{let T=T5(i,f,d);if(!n&&c>r*2)n=!0,e?.warn(`@smithy/util-stream - stream chunk size ${R} is below threshold of ${r}, automatically buffering.`);if(T>=r)w.enqueue(Jw(i,f));else await h(w)}}};return new ReadableStream({pull:h})}m5.createBufferedReadable=I5;function T5(t,r,e){switch(r){case 0:return t[0]+=e,si(t[0]);case 1:case 2:return t[r].push(e),si(t[r])}}function Jw(t,r){switch(r){case 0:let e=t[0];return t[0]="",e;case 1:case 2:return t[r].flush()}throw Error(`@smithy/util-stream - invalid index ${r} given to flush()`)}function si(t){return t?.byteLength??t?.length??0}function N5(t,r=!0){if(r&&typeof Buffer<"u"&&t instanceof Buffer)return 2;if(t instanceof Uint8Array)return 1;if(typeof t==="string")return 0;return-1}});var l5=Q((b5)=>{Object.defineProperty(b5,"__esModule",{value:!0});b5.createBufferedReadable=rtt;var jj=Rr("stream"),H5=HA(),an=U5(),ttt=mn();function rtt(t,r,e){if((0,ttt.isReadableStream)(t))return(0,an.createBufferedReadableStream)(t,r,e);let o=new jj.Readable({read(){}}),n=!1,c=0,i=["",new H5.ByteArrayCollector((h)=>new Uint8Array(h)),new H5.ByteArrayCollector((h)=>Buffer.from(new Uint8Array(h)))],f=-1;return t.on("data",(h)=>{let w=(0,an.modeOf)(h,!0);if(f!==w){if(f>=0)o.push((0,an.flush)(i,f));f=w}if(f===-1){o.push(h);return}let p=(0,an.sizeOf)(h);c+=p;let u=(0,an.sizeOf)(i[f]);if(p>=r&&u===0)o.push(h);else{let d=(0,an.merge)(i,f,h);if(!n&&c>r*2)n=!0,e?.warn(`@smithy/util-stream - stream chunk size ${p} is below threshold of ${r}, automatically buffering.`);if(d>=r)o.push((0,an.flush)(i,f))}}),t.on("end",()=>{if(f!==-1){let h=(0,an.flush)(i,f);if((0,an.sizeOf)(h)>0)o.push(h)}o.push(null)}),o}});var G5=Q((F5)=>{Object.defineProperty(F5,"__esModule",{value:!0});F5.getAwsChunkedEncodingStream=void 0;var ott=(t,r)=>{let{base64Encoder:e,bodyLengthChecker:o,checksumAlgorithmFn:n,checksumLocationName:c,streamHasher:i}=r,f=e!==void 0&&o!==void 0&&n!==void 0&&c!==void 0&&i!==void 0,h=f?i(n,t):void 0,w=t.getReader();return new ReadableStream({async pull(p){let{value:u,done:d}=await w.read();if(d){if(p.enqueue(`0\r
`),f){let y=e(await h);p.enqueue(`${c}:${y}\r
`),p.enqueue(`\r
`)}p.close()}else p.enqueue(`${(o(u)||0).toString(16)}\r
${u}\r
`)}})};F5.getAwsChunkedEncodingStream=ott});var M5=Q((v5)=>{Object.defineProperty(v5,"__esModule",{value:!0});v5.getAwsChunkedEncodingStream=itt;var ntt=Rr("stream"),stt=G5(),ctt=mn();function itt(t,r){let e=t,o=t;if((0,ctt.isReadableStream)(o))return(0,stt.getAwsChunkedEncodingStream)(o,r);let{base64Encoder:n,bodyLengthChecker:c,checksumAlgorithmFn:i,checksumLocationName:f,streamHasher:h}=r,w=n!==void 0&&i!==void 0&&f!==void 0&&h!==void 0,p=w?h(i,e):void 0,u=new ntt.Readable({read:()=>{}});return e.on("data",(d)=>{let y=c(d)||0;if(y===0)return;u.push(`${y.toString(16)}\r
`),u.push(d),u.push(`\r
`)}),e.on("end",async()=>{if(u.push(`0\r
`),w){let d=n(await p);u.push(`${f}:${d}\r
`),u.push(`\r
`)}u.push(null)}),u}});var k5=Q((z5)=>{Object.defineProperty(z5,"__esModule",{value:!0});z5.headStream=htt;async function htt(t,r){let e=0,o=[],n=t.getReader(),c=!1;while(!c){let{done:h,value:w}=await n.read();if(w)o.push(w),e+=w?.byteLength??0;if(e>=r)break;c=h}n.releaseLock();let i=new Uint8Array(Math.min(r,e)),f=0;for(let h of o){if(h.byteLength>i.byteLength-f){i.set(h.subarray(0,i.byteLength-f),f);break}else i.set(h,f);f+=h.length}return i}});var X5=Q((Z5)=>{Object.defineProperty(Z5,"__esModule",{value:!0});Z5.headStream=void 0;var ptt=Rr("stream"),utt=k5(),dtt=mn(),ytt=(t,r)=>{if((0,dtt.isReadableStream)(t))return(0,utt.headStream)(t,r);return new Promise((e,o)=>{let n=new W5;n.limit=r,t.pipe(n),t.on("error",(c)=>{n.end(),o(c)}),n.on("error",o),n.on("finish",function(){let c=new Uint8Array(Buffer.concat(this.buffers));e(c)})})};Z5.headStream=ytt;class W5 extends ptt.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,e){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let o=this.bytesBuffered-this.limit,n=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=n.subarray(0,n.byteLength-o),this.emit("finish")}e()}}});var bA=Q((_tt)=>{var J5=(t)=>encodeURIComponent(t).replace(/[!'()*]/g,Att),Att=(t)=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,Stt=(t)=>t.split("/").map(J5).join("/");_tt.escapeUri=J5;_tt.escapeUriPath=Stt});var Yw=Q((Itt)=>{var lA=bA();function Rtt(t){let r=[];for(let e of Object.keys(t).sort()){let o=t[e];if(e=lA.escapeUri(e),Array.isArray(o))for(let n=0,c=o.length;n<c;n++)r.push(`${e}=${lA.escapeUri(o[n])}`);else{let n=e;if(o||typeof o==="string")n+=`=${lA.escapeUri(o)}`;r.push(n)}}return r.join("&")}Itt.buildQueryString=Rtt});var os=Q((Mtt)=>{var C5=tr(),Q5=Yw(),Pw=Rr("http"),gw=Rr("https"),K5=Rr("stream"),FA=Rr("http2"),Ntt=["ECONNRESET","EPIPE","ETIMEDOUT"],E5=(t)=>{let r={};for(let e of Object.keys(t)){let o=t[e];r[e]=Array.isArray(o)?o.join(","):o}return r},Ee={setTimeout:(t,r)=>setTimeout(t,r),clearTimeout:(t)=>clearTimeout(t)},Y5=1000,mtt=(t,r,e=0)=>{if(!e)return-1;let o=(n)=>{let c=Ee.setTimeout(()=>{t.destroy(),r(Object.assign(Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${e} ms.`),{name:"TimeoutError"}))},e-n),i=(f)=>{if(f?.connecting)f.on("connect",()=>{Ee.clearTimeout(c)});else Ee.clearTimeout(c)};if(t.socket)i(t.socket);else t.on("socket",i)};if(e<2000)return o(0),0;return Ee.setTimeout(o.bind(null,Y5),Y5)},att=(t,r,e=0,o,n)=>{if(e)return Ee.setTimeout(()=>{let c=`@smithy/node-http-handler - [${o?"ERROR":"WARN"}] a request has exceeded the configured ${e} ms requestTimeout.`;if(o){let i=Object.assign(Error(c),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(i),r(i)}else c+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",n?.warn?.(c)},e);return-1},Utt=3000,Htt=(t,{keepAlive:r,keepAliveMsecs:e},o=Utt)=>{if(r!==!0)return-1;let n=()=>{if(t.socket)t.socket.setKeepAlive(r,e||0);else t.on("socket",(c)=>{c.setKeepAlive(r,e||0)})};if(o===0)return n(),0;return Ee.setTimeout(n,o)},P5=3000,btt=(t,r,e=0)=>{let o=(n)=>{let c=e-n,i=()=>{t.destroy(),r(Object.assign(Error(`@smithy/node-http-handler - the request socket timed out after ${e} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};if(t.socket)t.socket.setTimeout(c,i),t.on("close",()=>t.socket?.removeListener("timeout",i));else t.setTimeout(c,i)};if(0<e&&e<6000)return o(0),0;return Ee.setTimeout(o.bind(null,e===0?0:P5),P5)},g5=6000;async function x5(t,r,e=g5,o=!1){let n=r.headers??{},c=n.Expect||n.expect,i=-1,f=!0;if(!o&&c==="100-continue")f=await Promise.race([new Promise((h)=>{i=Number(Ee.setTimeout(()=>h(!0),Math.max(g5,e)))}),new Promise((h)=>{t.on("continue",()=>{Ee.clearTimeout(i),h(!0)}),t.on("response",()=>{Ee.clearTimeout(i),h(!1)}),t.on("error",()=>{Ee.clearTimeout(i),h(!1)})})]);if(f)ltt(t,r.body)}function ltt(t,r){if(r instanceof K5.Readable){r.pipe(t);return}if(r){if(Buffer.isBuffer(r)||typeof r==="string"){t.end(r);return}let e=r;if(typeof e==="object"&&e.buffer&&typeof e.byteOffset==="number"&&typeof e.byteLength==="number"){t.end(Buffer.from(e.buffer,e.byteOffset,e.byteLength));return}t.end(Buffer.from(r));return}t.end()}var Ftt=0;class Cw{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(t){if(typeof t?.handle==="function")return t;return new Cw(t)}static checkSocketUsage(t,r,e=console){let{sockets:o,requests:n,maxSockets:c}=t;if(typeof c!=="number"||c===1/0)return r;let i=15000;if(Date.now()-i<r)return r;if(o&&n)for(let f in o){let h=o[f]?.length??0,w=n[f]?.length??0;if(h>=c&&w>=2*c)return e?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${h} and ${w} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,e)=>{if(typeof t==="function")t().then((o)=>{r(this.resolveDefaultConfig(o))}).catch(e);else r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:e,socketTimeout:o,socketAcquisitionWarningTimeout:n,httpAgent:c,httpsAgent:i,throwOnRequestTimeout:f}=t||{},h=!0,w=50;return{connectionTimeout:e,requestTimeout:r,socketTimeout:o,socketAcquisitionWarningTimeout:n,throwOnRequestTimeout:f,httpAgent:(()=>{if(c instanceof Pw.Agent||typeof c?.destroy==="function")return this.externalAgent=!0,c;return new Pw.Agent({keepAlive:!0,maxSockets:50,...c})})(),httpsAgent:(()=>{if(i instanceof gw.Agent||typeof i?.destroy==="function")return this.externalAgent=!0,i;return new gw.Agent({keepAlive:!0,maxSockets:50,...i})})(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:e}={}){if(!this.config)this.config=await this.configProvider;return new Promise((o,n)=>{let c=this.config,i=void 0,f=[],h=async(E)=>{await i,f.forEach(Ee.clearTimeout),o(E)},w=async(E)=>{await i,f.forEach(Ee.clearTimeout),n(E)};if(r?.aborted){let E=Error("Request aborted");E.name="AbortError",w(E);return}let p=t.protocol==="https:",u=t.headers??{},d=(u.Expect??u.expect)==="100-continue",y=p?c.httpsAgent:c.httpAgent;if(d&&!this.externalAgent)y=new(p?gw.Agent:Pw.Agent)({keepAlive:!1,maxSockets:1/0});f.push(Ee.setTimeout(()=>{this.socketWarningTimestamp=Cw.checkSocketUsage(y,this.socketWarningTimestamp,c.logger)},c.socketAcquisitionWarningTimeout??(c.requestTimeout??2000)+(c.connectionTimeout??1000)));let R=Q5.buildQueryString(t.query||{}),S=void 0;if(t.username!=null||t.password!=null){let E=t.username??"",ht=t.password??"";S=`${E}:${ht}`}let T=t.path;if(R)T+=`?${R}`;if(t.fragment)T+=`#${t.fragment}`;let N=t.hostname??"";if(N[0]==="["&&N.endsWith("]"))N=t.hostname.slice(1,-1);else N=t.hostname;let G={headers:t.headers,host:N,method:t.method,path:T,port:t.port,agent:y,auth:S},J=(p?gw.request:Pw.request)(G,(E)=>{let ht=new C5.HttpResponse({statusCode:E.statusCode||-1,reason:E.statusMessage,headers:E5(E.headers),body:E});h({response:ht})});if(J.on("error",(E)=>{if(Ntt.includes(E.code))w(Object.assign(E,{name:"TimeoutError"}));else w(E)}),r){let E=()=>{J.destroy();let ht=Error("Request aborted");ht.name="AbortError",w(ht)};if(typeof r.addEventListener==="function"){let ht=r;ht.addEventListener("abort",E,{once:!0}),J.once("close",()=>ht.removeEventListener("abort",E))}else r.onabort=E}let K=e??c.requestTimeout;f.push(mtt(J,w,c.connectionTimeout)),f.push(att(J,w,K,c.throwOnRequestTimeout,c.logger??console)),f.push(btt(J,w,c.socketTimeout));let D=G.agent;if(typeof D==="object"&&"keepAlive"in D)f.push(Htt(J,{keepAlive:D.keepAlive,keepAliveMsecs:D.keepAliveMsecs}));i=x5(J,t,K,this.externalAgent).catch((E)=>{return f.forEach(Ee.clearTimeout),n(E)})})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then((e)=>{return{...e,[t]:r}})}httpHandlerConfigs(){return this.config??{}}}class q5{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter((r)=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)if(r===t){if(!r.destroyed)r.destroy()}}}class D5{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let e=this.getUrlString(t),o=this.sessionCache.get(e);if(o){let f=o.poll();if(f&&!this.config.disableConcurrency)return f}let n=FA.connect(e);if(this.config.maxConcurrency)n.settings({maxConcurrentStreams:this.config.maxConcurrency},(f)=>{if(f)throw Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())});n.unref();let c=()=>{n.destroy(),this.deleteSession(e,n)};if(n.on("goaway",c),n.on("error",c),n.on("frameError",c),n.on("close",()=>this.deleteSession(e,n)),r.requestTimeout)n.setTimeout(r.requestTimeout,c);let i=this.sessionCache.get(e)||new q5;return i.offerLast(n),this.sessionCache.set(e,i),n}deleteSession(t,r){let e=this.sessionCache.get(t);if(!e)return;if(!e.contains(r))return;e.remove(r),this.sessionCache.set(t,e)}release(t,r){let e=this.getUrlString(t);this.sessionCache.get(e)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let e of r){if(!e.destroyed)e.destroy();r.remove(e)}this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}}class LA{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new D5({});static create(t){if(typeof t?.handle==="function")return t;return new LA(t)}constructor(t){this.configProvider=new Promise((r,e)=>{if(typeof t==="function")t().then((o)=>{r(o||{})}).catch(e);else r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:e}={}){if(!this.config){if(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams)this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams)}let{requestTimeout:o,disableConcurrentStreams:n}=this.config,c=e??o;return new Promise((i,f)=>{let h=!1,w=void 0,p=async(Rt)=>{await w,i(Rt)},u=async(Rt)=>{await w,f(Rt)};if(r?.aborted){h=!0;let Rt=Error("Request aborted");Rt.name="AbortError",u(Rt);return}let{hostname:d,method:y,port:R,protocol:S,query:T}=t,N="";if(t.username!=null||t.password!=null){let Rt=t.username??"",it=t.password??"";N=`${Rt}:${it}@`}let G=`${S}//${N}${d}${R?`:${R}`:""}`,v={destination:new URL(G)},J=this.connectionManager.lease(v,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:n||!1}),K=(Rt)=>{if(n)this.destroySession(J);h=!0,u(Rt)},D=Q5.buildQueryString(T||{}),E=t.path;if(D)E+=`?${D}`;if(t.fragment)E+=`#${t.fragment}`;let ht=J.request({...t.headers,[FA.constants.HTTP2_HEADER_PATH]:E,[FA.constants.HTTP2_HEADER_METHOD]:y});if(J.ref(),ht.on("response",(Rt)=>{let it=new C5.HttpResponse({statusCode:Rt[":status"]||-1,headers:E5(Rt),body:ht});if(h=!0,p({response:it}),n)J.close(),this.connectionManager.deleteSession(G,J)}),c)ht.setTimeout(c,()=>{ht.close();let Rt=Error(`Stream timed out because of no activity for ${c} ms`);Rt.name="TimeoutError",K(Rt)});if(r){let Rt=()=>{ht.close();let it=Error("Request aborted");it.name="AbortError",K(it)};if(typeof r.addEventListener==="function"){let it=r;it.addEventListener("abort",Rt,{once:!0}),ht.once("close",()=>it.removeEventListener("abort",Rt))}else r.onabort=Rt}ht.on("frameError",(Rt,it,q)=>{K(Error(`Frame type id ${Rt} in stream id ${q} has failed with code ${it}.`))}),ht.on("error",K),ht.on("aborted",()=>{K(Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${ht.rstCode}.`))}),ht.on("close",()=>{if(J.unref(),n)J.destroy();if(!h)K(Error("Unexpected error: http2 request did not get a response"))}),w=x5(ht,t,c)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then((e)=>{return{...e,[t]:r}})}httpHandlerConfigs(){return this.config??{}}destroySession(t){if(!t.destroyed)t.destroy()}}class V5 extends K5.Writable{bufferedBytes=[];_write(t,r,e){this.bufferedBytes.push(t),e()}}var Ltt=(t)=>{if(Gtt(t))return vtt(t);return new Promise((r,e)=>{let o=new V5;t.pipe(o),t.on("error",(n)=>{o.end(),e(n)}),o.on("error",e),o.on("finish",function(){let n=new Uint8Array(Buffer.concat(this.bufferedBytes));r(n)})})},Gtt=(t)=>typeof ReadableStream==="function"&&t instanceof ReadableStream;async function vtt(t){let r=[],e=t.getReader(),o=!1,n=0;while(!o){let{done:f,value:h}=await e.read();if(h)r.push(h),n+=h.length;o=f}let c=new Uint8Array(n),i=0;for(let f of r)c.set(f,i),i+=f.length;return c}Mtt.DEFAULT_REQUEST_TIMEOUT=Ftt;Mtt.NodeHttp2Handler=LA;Mtt.NodeHttpHandler=Cw;Mtt.streamCollector=Ltt});var rU=Q((Qtt)=>{var j5=tr(),Btt=Yw(),Xtt=Ke();function tU(t,r){return new Request(t,r)}function Jtt(t=0){return new Promise((r,e)=>{if(t)setTimeout(()=>{let o=Error(`Request did not complete within ${t} ms`);o.name="TimeoutError",e(o)},t)})}var Qw={supported:void 0};class GA{config;configProvider;static create(t){if(typeof t?.handle==="function")return t;return new GA(t)}constructor(t){if(typeof t==="function")this.configProvider=t().then((r)=>r||{});else this.config=t??{},this.configProvider=Promise.resolve(this.config);if(Qw.supported===void 0)Qw.supported=Boolean(typeof Request<"u"&&"keepalive"in tU("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:e}={}){if(!this.config)this.config=await this.configProvider;let o=e??this.config.requestTimeout,n=this.config.keepAlive===!0,c=this.config.credentials;if(r?.aborted){let N=Error("Request aborted");return N.name="AbortError",Promise.reject(N)}let i=t.path,f=Btt.buildQueryString(t.query||{});if(f)i+=`?${f}`;if(t.fragment)i+=`#${t.fragment}`;let h="";if(t.username!=null||t.password!=null){let N=t.username??"",G=t.password??"";h=`${N}:${G}@`}let{port:w,method:p}=t,u=`${t.protocol}//${h}${t.hostname}${w?`:${w}`:""}${i}`,d=p==="GET"||p==="HEAD"?void 0:t.body,y={body:d,headers:new Headers(t.headers),method:p,credentials:c};if(this.config?.cache)y.cache=this.config.cache;if(d)y.duplex="half";if(typeof AbortController<"u")y.signal=r;if(Qw.supported)y.keepalive=n;if(typeof this.config.requestInit==="function")Object.assign(y,this.config.requestInit(t));let R=()=>{},S=tU(u,y),T=[fetch(S).then((N)=>{let G=N.headers,v={};for(let K of G.entries())v[K[0]]=K[1];if(N.body==null)return N.blob().then((K)=>({response:new j5.HttpResponse({headers:v,reason:N.statusText,statusCode:N.status,body:K})}));return{response:new j5.HttpResponse({headers:v,reason:N.statusText,statusCode:N.status,body:N.body})}}),Jtt(o)];if(r)T.push(new Promise((N,G)=>{let v=()=>{let J=Error("Request aborted");J.name="AbortError",G(J)};if(typeof r.addEventListener==="function"){let J=r;J.addEventListener("abort",v,{once:!0}),R=()=>J.removeEventListener("abort",v)}else r.onabort=v}));return Promise.race(T).finally(R)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then((e)=>{return e[t]=r,e})}httpHandlerConfigs(){return this.config??{}}}var Ytt=async(t)=>{if(typeof Blob==="function"&&t instanceof Blob||t.constructor?.name==="Blob"){if(Blob.prototype.arrayBuffer!==void 0)return new Uint8Array(await t.arrayBuffer());return Ptt(t)}return gtt(t)};async function Ptt(t){let r=await Ctt(t),e=Xtt.fromBase64(r);return new Uint8Array(e)}async function gtt(t){let r=[],e=t.getReader(),o=!1,n=0;while(!o){let{done:f,value:h}=await e.read();if(h)r.push(h),n+=h.length;o=f}let c=new Uint8Array(n),i=0;for(let f of r)c.set(f,i),i+=f.length;return c}function Ctt(t){return new Promise((r,e)=>{let o=new FileReader;o.onloadend=()=>{if(o.readyState!==2)return e(Error("Reader aborted too early"));let n=o.result??"",c=n.indexOf(","),i=c>-1?c+1:n.length;r(n.substring(i))},o.onabort=()=>e(Error("Read aborted")),o.onerror=()=>e(o.error),o.readAsDataURL(t)})}Qtt.FetchHttpHandler=GA;Qtt.keepAliveSupport=Qw;Qtt.streamCollector=Ytt});var c0=Q((Vtt)=>{var eU={},vA={};for(let t=0;t<256;t++){let r=t.toString(16).toLowerCase();if(r.length===1)r=`0${r}`;eU[t]=r,vA[r]=t}function qtt(t){if(t.length%2!==0)throw Error("Hex encoded strings must have an even number length");let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){let o=t.slice(e,e+2).toLowerCase();if(o in vA)r[e/2]=vA[o];else throw Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return r}function Dtt(t){let r="";for(let e=0;e<t.byteLength;e++)r+=eU[t[e]];return r}Vtt.fromHex=qtt;Vtt.toHex=Dtt});var fU=Q((cU)=>{Object.defineProperty(cU,"__esModule",{value:!0});cU.sdkStreamMixin=void 0;var rrt=rU(),ert=Ke(),ort=c0(),nrt=ue(),oU=mn(),nU="The stream has already been transformed.",srt=(t)=>{if(!sU(t)&&!(0,oU.isReadableStream)(t)){let n=t?.__proto__?.constructor?.name||t;throw Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${n}`)}let r=!1,e=async()=>{if(r)throw Error(nU);return r=!0,await(0,rrt.streamCollector)(t)},o=(n)=>{if(typeof n.stream!=="function")throw Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return n.stream()};return Object.assign(t,{transformToByteArray:e,transformToString:async(n)=>{let c=await e();if(n==="base64")return(0,ert.toBase64)(c);else if(n==="hex")return(0,ort.toHex)(c);else if(n===void 0||n==="utf8"||n==="utf-8")return(0,nrt.toUtf8)(c);else if(typeof TextDecoder==="function")return new TextDecoder(n).decode(c);else throw Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(r)throw Error(nU);if(r=!0,sU(t))return o(t);else if((0,oU.isReadableStream)(t))return t;else throw Error(`Cannot transform payload to web stream, got ${t}`)}})};cU.sdkStreamMixin=srt;var sU=(t)=>typeof Blob==="function"&&t instanceof Blob});var uU=Q((wU)=>{Object.defineProperty(wU,"__esModule",{value:!0});wU.sdkStreamMixin=void 0;var crt=os(),irt=ni(),MA=Rr("stream"),frt=fU(),hU="The stream has already been transformed.",hrt=(t)=>{if(!(t instanceof MA.Readable))try{return(0,frt.sdkStreamMixin)(t)}catch(o){let n=t?.__proto__?.constructor?.name||t;throw Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${n}`)}let r=!1,e=async()=>{if(r)throw Error(hU);return r=!0,await(0,crt.streamCollector)(t)};return Object.assign(t,{transformToByteArray:e,transformToString:async(o)=>{let n=await e();if(o===void 0||Buffer.isEncoding(o))return(0,irt.fromArrayBuffer)(n.buffer,n.byteOffset,n.byteLength).toString(o);else return new TextDecoder(o).decode(n)},transformToWebStream:()=>{if(r)throw Error(hU);if(t.readableFlowing!==null)throw Error("The stream has been consumed by other callbacks.");if(typeof MA.Readable.toWeb!=="function")throw Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return r=!0,MA.Readable.toWeb(t)}})};wU.sdkStreamMixin=hrt});var yU=Q((dU)=>{Object.defineProperty(dU,"__esModule",{value:!0});dU.splitStream=wrt;async function wrt(t){if(typeof t.stream==="function")t=t.stream();return t.tee()}});var $U=Q((_U)=>{Object.defineProperty(_U,"__esModule",{value:!0});_U.splitStream=drt;var AU=Rr("stream"),urt=yU(),SU=mn();async function drt(t){if((0,SU.isReadableStream)(t)||(0,SU.isBlob)(t))return(0,urt.splitStream)(t);let r=new AU.PassThrough,e=new AU.PassThrough;return t.pipe(r),t.pipe(e),[r,e]}});var js=Q((Oe)=>{var OU=Ke(),RU=ue(),IU=UA(),TU=_5(),NU=l5(),mU=M5(),aU=X5(),UU=uU(),HU=$U(),bU=mn();class i0 extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t==="string"){if(r==="base64")return i0.mutate(OU.fromBase64(t));return i0.mutate(RU.fromUtf8(t))}throw Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,i0.prototype),t}transformToString(t="utf-8"){if(t==="base64")return OU.toBase64(this);return RU.toUtf8(this)}}Object.defineProperty(Oe,"isBlob",{enumerable:!0,get:function(){return bU.isBlob}});Object.defineProperty(Oe,"isReadableStream",{enumerable:!0,get:function(){return bU.isReadableStream}});Oe.Uint8ArrayBlobAdapter=i0;Object.keys(IU).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(Oe,t))Object.defineProperty(Oe,t,{enumerable:!0,get:function(){return IU[t]}})});Object.keys(TU).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(Oe,t))Object.defineProperty(Oe,t,{enumerable:!0,get:function(){return TU[t]}})});Object.keys(NU).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(Oe,t))Object.defineProperty(Oe,t,{enumerable:!0,get:function(){return NU[t]}})});Object.keys(mU).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(Oe,t))Object.defineProperty(Oe,t,{enumerable:!0,get:function(){return mU[t]}})});Object.keys(aU).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(Oe,t))Object.defineProperty(Oe,t,{enumerable:!0,get:function(){return aU[t]}})});Object.keys(UU).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(Oe,t))Object.defineProperty(Oe,t,{enumerable:!0,get:function(){return UU[t]}})});Object.keys(HU).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(Oe,t))Object.defineProperty(Oe,t,{enumerable:!0,get:function(){return HU[t]}})})});var so=Q((brt)=>{var Srt=tr(),lU=Qe(),Kw=(t)=>{if(typeof t==="function")return t();return t},WA=(t,r,e,o,n)=>({name:r,namespace:t,traits:e,input:o,output:n}),_rt=(t)=>(r,e)=>async(o)=>{let{response:n}=await r(o),{operationSchema:c}=lU.getSmithyContext(e),[,i,f,h,w,p]=c??[];try{let u=await t.protocol.deserializeResponse(WA(i,f,h,w,p),{...t,...e},n);return{response:n,output:u}}catch(u){if(Object.defineProperty(u,"$response",{value:n,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in u)){try{u.message+=`
  Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`}catch(y){if(!e.logger||e.logger?.constructor?.name==="NoOpLogger")console.warn("Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.");else e.logger?.warn?.("Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.")}if(typeof u.$responseBodyText<"u"){if(u.$response)u.$response.body=u.$responseBodyText}try{if(Srt.HttpResponse.isInstance(n)){let{headers:y={}}=n,R=Object.entries(y);u.$metadata={httpStatusCode:n.statusCode,requestId:zA(/^x-[\w-]+-request-?id$/,R),extendedRequestId:zA(/^x-[\w-]+-id-2$/,R),cfId:zA(/^x-[\w-]+-cf-id$/,R)}}}catch(y){}}throw u}},zA=(t,r)=>{return(r.find(([e])=>{return e.match(t)})||[void 0,void 0])[1]},$rt=(t)=>(r,e)=>async(o)=>{let{operationSchema:n}=lU.getSmithyContext(e),[,c,i,f,h,w]=n??[],p=e.endpointV2?.url&&t.urlParser?async()=>t.urlParser(e.endpointV2.url):t.endpoint,u=await t.protocol.serializeRequest(WA(c,i,f,h,w),o.input,{...t,...e,endpoint:p});return r({...o,request:u})},FU={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},LU={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ort(t){return{applyToStack:(r)=>{r.add($rt(t),LU),r.add(_rt(t),FU),t.protocol.setSerdeContext(t)}}}class no{name;namespace;traits;static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);if(!r&&typeof t==="object"&&t!==null)return t.symbol===this.symbol;return r}getName(){return this.namespace+"#"+this.name}}class Ew extends no{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=Ew.symbol}var Rrt=(t,r,e,o)=>no.assign(new Ew,{name:r,namespace:t,traits:e,valueSchema:o});class xw extends no{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=xw.symbol}var Irt=(t,r,e,o,n)=>no.assign(new xw,{name:r,namespace:t,traits:e,keySchema:o,valueSchema:n});class qw extends no{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=qw.symbol}var Trt=(t,r,e,o,n)=>no.assign(new qw,{name:r,namespace:t,traits:e,input:o,output:n});class w0 extends no{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=w0.symbol}var Nrt=(t,r,e,o,n)=>no.assign(new w0,{name:r,namespace:t,traits:e,memberNames:o,memberList:n});class Dw extends w0{static symbol=Symbol.for("@smithy/err");ctor;symbol=Dw.symbol}var mrt=(t,r,e,o,n,c)=>no.assign(new Dw,{name:r,namespace:t,traits:e,memberNames:o,memberList:n,ctor:null});function h0(t){if(typeof t==="object")return t;t=t|0;let r={},e=0;for(let o of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])if((t>>e++&1)===1)r[o]=1;return r}class Hn{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=Hn.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let e=[],o=t,n=t;this._isMemberSchema=!1;while(kA(o))e.push(o[1]),o=o[0],n=Kw(o),this._isMemberSchema=!0;if(e.length>0){this.memberTraits={};for(let c=e.length-1;c>=0;--c){let i=e[c];Object.assign(this.memberTraits,h0(i))}}else this.memberTraits=0;if(n instanceof Hn){let c=this.memberTraits;Object.assign(this,n),this.memberTraits=Object.assign({},c,n.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??n.memberName;return}if(this.schema=Kw(n),GU(this.schema))this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3];else this.name=this.memberName??String(n),this.traits=0;if(this._isMemberSchema&&!r)throw Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);if(!r&&typeof t==="object"&&t!==null)return t.symbol===this.symbol;return r}static of(t){let r=Kw(t);if(r instanceof Hn)return r;if(kA(r)){let[e,o]=r;if(e instanceof Hn)return Object.assign(e.getMergedTraits(),h0(o)),e;throw Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new Hn(r)}getSchema(){let t=this.schema;if(t[0]===0)return t[4];return t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t==="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t==="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let r=this.getSchema()[0];return r===3||r===-3||r===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t==="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=(n)=>(n&4)===4||!!n?.idempotencyToken,{normalizedTraits:r,traits:e,memberTraits:o}=this;return t(r)||t(e)||t(o)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return h0(this.memberTraits)}getOwnTraits(){return h0(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let e=this.getSchema(),o=t?15:e[4]??0;return f0([o,0],"key")}getValueSchema(){let t=this.getSchema(),[r,e,o]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],n=typeof t==="number"?63&t:t&&typeof t==="object"&&(e||o)?t[3+t[0]]:r?15:void 0;if(n!=null)return f0([n,0],e?"value":"member");throw Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let e=r[4].indexOf(t),o=r[5][e];return f0(kA(o)?o:[o,0],t)}if(this.isDocumentSchema())return f0([15,0],t);throw Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,e]of this.structIterator())t[r]=e}catch(r){}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],f0([t[5][r],0],t[4][r])]}}function f0(t,r){if(t instanceof Hn)return Object.assign(t,{memberName:r,_isMemberSchema:!0});return new Hn(t,r)}var kA=(t)=>Array.isArray(t)&&t.length===2,GU=(t)=>Array.isArray(t)&&t.length>=5;class p0 extends no{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=p0.symbol}var art=(t,r,e,o)=>no.assign(new p0,{name:r,namespace:t,traits:o,schemaRef:e}),Urt=(t,r,e,o)=>no.assign(new p0,{name:r,namespace:t,traits:e,schemaRef:o}),Hrt={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128};class Un{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,e=new Map){this.namespace=t,this.schemas=r,this.exceptions=e}static for(t){if(!Un.registries.has(t))Un.registries.set(t,new Un(t));return Un.registries.get(t)}register(t,r){let e=this.normalizeShapeId(t);Un.for(e.split("#")[0]).schemas.set(e,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let e=t,o=Un.for(e[1]);o.schemas.set(e[1]+"#"+e[2],e),o.exceptions.set(e,r)}getErrorCtor(t){let r=t;return Un.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,e]=t,o=r+"#"+e;if(o.startsWith("smithy.ts.sdk.synthetic.")&&o.endsWith("ServiceException"))return t}return}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){if(t.includes("#"))return t;return this.namespace+"#"+t}}brt.ErrorSchema=Dw;brt.ListSchema=Ew;brt.MapSchema=xw;brt.NormalizedSchema=Hn;brt.OperationSchema=qw;brt.SCHEMA=Hrt;brt.Schema=no;brt.SimpleSchema=p0;brt.StructureSchema=w0;brt.TypeRegistry=Un;brt.deref=Kw;brt.deserializerMiddlewareOption=FU;brt.error=mrt;brt.getSchemaSerdePlugin=Ort;brt.isStaticSchema=GU;brt.list=Rrt;brt.map=Irt;brt.op=Trt;brt.operation=WA;brt.serializerMiddlewareOption=LU;brt.sim=art;brt.simAdapter=Urt;brt.struct=Nrt;brt.translateTraits=h0});var ii=Q((NZt,tp)=>{var vU,MU,zU,kU,WU,ZU,BU,XU,JU,YU,PU,gU,CU,Vw,ZA,QU,KU,EU,ci,xU,qU,DU,VU,jU,tH,rH,eH,oH,jw,nH,sH,cH;(function(t){var r=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd)define("tslib",["exports"],function(o){t(e(r,e(o)))});else if(typeof tp==="object"&&typeof NZt==="object")t(e(r,e(NZt)));else t(e(r));function e(o,n){if(o!==r)if(typeof Object.create==="function")Object.defineProperty(o,"__esModule",{value:!0});else o.__esModule=!0;return function(c,i){return o[c]=n?n(c,i):i}}})(function(t){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,i){c.__proto__=i}||function(c,i){for(var f in i)if(Object.prototype.hasOwnProperty.call(i,f))c[f]=i[f]};vU=function(c,i){if(typeof i!=="function"&&i!==null)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");r(c,i);function f(){this.constructor=c}c.prototype=i===null?Object.create(i):(f.prototype=i.prototype,new f)},MU=Object.assign||function(c){for(var i,f=1,h=arguments.length;f<h;f++){i=arguments[f];for(var w in i)if(Object.prototype.hasOwnProperty.call(i,w))c[w]=i[w]}return c},zU=function(c,i){var f={};for(var h in c)if(Object.prototype.hasOwnProperty.call(c,h)&&i.indexOf(h)<0)f[h]=c[h];if(c!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var w=0,h=Object.getOwnPropertySymbols(c);w<h.length;w++)if(i.indexOf(h[w])<0&&Object.prototype.propertyIsEnumerable.call(c,h[w]))f[h[w]]=c[h[w]]}return f},kU=function(c,i,f,h){var w=arguments.length,p=w<3?i:h===null?h=Object.getOwnPropertyDescriptor(i,f):h,u;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")p=Reflect.decorate(c,i,f,h);else for(var d=c.length-1;d>=0;d--)if(u=c[d])p=(w<3?u(p):w>3?u(i,f,p):u(i,f))||p;return w>3&&p&&Object.defineProperty(i,f,p),p},WU=function(c,i){return function(f,h){i(f,h,c)}},ZU=function(c,i,f,h,w,p){function u(D){if(D!==void 0&&typeof D!=="function")throw TypeError("Function expected");return D}var d=h.kind,y=d==="getter"?"get":d==="setter"?"set":"value",R=!i&&c?h.static?c:c.prototype:null,S=i||(R?Object.getOwnPropertyDescriptor(R,h.name):{}),T,N=!1;for(var G=f.length-1;G>=0;G--){var v={};for(var J in h)v[J]=J==="access"?{}:h[J];for(var J in h.access)v.access[J]=h.access[J];v.addInitializer=function(D){if(N)throw TypeError("Cannot add initializers after decoration has completed");p.push(u(D||null))};var K=(0,f[G])(d==="accessor"?{get:S.get,set:S.set}:S[y],v);if(d==="accessor"){if(K===void 0)continue;if(K===null||typeof K!=="object")throw TypeError("Object expected");if(T=u(K.get))S.get=T;if(T=u(K.set))S.set=T;if(T=u(K.init))w.unshift(T)}else if(T=u(K))if(d==="field")w.unshift(T);else S[y]=T}if(R)Object.defineProperty(R,h.name,S);N=!0},BU=function(c,i,f){var h=arguments.length>2;for(var w=0;w<i.length;w++)f=h?i[w].call(c,f):i[w].call(c);return h?f:void 0},XU=function(c){return typeof c==="symbol"?c:"".concat(c)},JU=function(c,i,f){if(typeof i==="symbol")i=i.description?"[".concat(i.description,"]"):"";return Object.defineProperty(c,"name",{configurable:!0,value:f?"".concat(f," ",i):i})},YU=function(c,i){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(c,i)},PU=function(c,i,f,h){function w(p){return p instanceof f?p:new f(function(u){u(p)})}return new(f||(f=Promise))(function(p,u){function d(S){try{R(h.next(S))}catch(T){u(T)}}function y(S){try{R(h.throw(S))}catch(T){u(T)}}function R(S){S.done?p(S.value):w(S.value).then(d,y)}R((h=h.apply(c,i||[])).next())})},gU=function(c,i){var f={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},h,w,p,u=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(R){return function(S){return y([R,S])}}function y(R){if(h)throw TypeError("Generator is already executing.");while(u&&(u=0,R[0]&&(f=0)),f)try{if(h=1,w&&(p=R[0]&2?w.return:R[0]?w.throw||((p=w.return)&&p.call(w),0):w.next)&&!(p=p.call(w,R[1])).done)return p;if(w=0,p)R=[R[0]&2,p.value];switch(R[0]){case 0:case 1:p=R;break;case 4:return f.label++,{value:R[1],done:!1};case 5:f.label++,w=R[1],R=[0];continue;case 7:R=f.ops.pop(),f.trys.pop();continue;default:if((p=f.trys,!(p=p.length>0&&p[p.length-1]))&&(R[0]===6||R[0]===2)){f=0;continue}if(R[0]===3&&(!p||R[1]>p[0]&&R[1]<p[3])){f.label=R[1];break}if(R[0]===6&&f.label<p[1]){f.label=p[1],p=R;break}if(p&&f.label<p[2]){f.label=p[2],f.ops.push(R);break}if(p[2])f.ops.pop();f.trys.pop();continue}R=i.call(c,f)}catch(S){R=[6,S],w=0}finally{h=p=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},CU=function(c,i){for(var f in c)if(f!=="default"&&!Object.prototype.hasOwnProperty.call(i,f))jw(i,c,f)},jw=Object.create?function(c,i,f,h){if(h===void 0)h=f;var w=Object.getOwnPropertyDescriptor(i,f);if(!w||("get"in w?!i.__esModule:w.writable||w.configurable))w={enumerable:!0,get:function(){return i[f]}};Object.defineProperty(c,h,w)}:function(c,i,f,h){if(h===void 0)h=f;c[h]=i[f]},Vw=function(c){var i=typeof Symbol==="function"&&Symbol.iterator,f=i&&c[i],h=0;if(f)return f.call(c);if(c&&typeof c.length==="number")return{next:function(){if(c&&h>=c.length)c=void 0;return{value:c&&c[h++],done:!c}}};throw TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ZA=function(c,i){var f=typeof Symbol==="function"&&c[Symbol.iterator];if(!f)return c;var h=f.call(c),w,p=[],u;try{while((i===void 0||i-- >0)&&!(w=h.next()).done)p.push(w.value)}catch(d){u={error:d}}finally{try{if(w&&!w.done&&(f=h.return))f.call(h)}finally{if(u)throw u.error}}return p},QU=function(){for(var c=[],i=0;i<arguments.length;i++)c=c.concat(ZA(arguments[i]));return c},KU=function(){for(var c=0,i=0,f=arguments.length;i<f;i++)c+=arguments[i].length;for(var h=Array(c),w=0,i=0;i<f;i++)for(var p=arguments[i],u=0,d=p.length;u<d;u++,w++)h[w]=p[u];return h},EU=function(c,i,f){if(f||arguments.length===2){for(var h=0,w=i.length,p;h<w;h++)if(p||!(h in i)){if(!p)p=Array.prototype.slice.call(i,0,h);p[h]=i[h]}}return c.concat(p||Array.prototype.slice.call(i))},ci=function(c){return this instanceof ci?(this.v=c,this):new ci(c)},xU=function(c,i,f){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var h=f.apply(c,i||[]),w,p=[];return w=Object.create((typeof AsyncIterator==="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),w[Symbol.asyncIterator]=function(){return this},w;function u(G){return function(v){return Promise.resolve(v).then(G,T)}}function d(G,v){if(h[G]){if(w[G]=function(J){return new Promise(function(K,D){p.push([G,J,K,D])>1||y(G,J)})},v)w[G]=v(w[G])}}function y(G,v){try{R(h[G](v))}catch(J){N(p[0][3],J)}}function R(G){G.value instanceof ci?Promise.resolve(G.value.v).then(S,T):N(p[0][2],G)}function S(G){y("next",G)}function T(G){y("throw",G)}function N(G,v){if(G(v),p.shift(),p.length)y(p[0][0],p[0][1])}},qU=function(c){var i,f;return i={},h("next"),h("throw",function(w){throw w}),h("return"),i[Symbol.iterator]=function(){return this},i;function h(w,p){i[w]=c[w]?function(u){return(f=!f)?{value:ci(c[w](u)),done:!1}:p?p(u):u}:p}},DU=function(c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i=c[Symbol.asyncIterator],f;return i?i.call(c):(c=typeof Vw==="function"?Vw(c):c[Symbol.iterator](),f={},h("next"),h("throw"),h("return"),f[Symbol.asyncIterator]=function(){return this},f);function h(p){f[p]=c[p]&&function(u){return new Promise(function(d,y){u=c[p](u),w(d,y,u.done,u.value)})}}function w(p,u,d,y){Promise.resolve(y).then(function(R){p({value:R,done:d})},u)}},VU=function(c,i){if(Object.defineProperty)Object.defineProperty(c,"raw",{value:i});else c.raw=i;return c};var e=Object.create?function(c,i){Object.defineProperty(c,"default",{enumerable:!0,value:i})}:function(c,i){c.default=i},o=function(c){return o=Object.getOwnPropertyNames||function(i){var f=[];for(var h in i)if(Object.prototype.hasOwnProperty.call(i,h))f[f.length]=h;return f},o(c)};jU=function(c){if(c&&c.__esModule)return c;var i={};if(c!=null){for(var f=o(c),h=0;h<f.length;h++)if(f[h]!=="default")jw(i,c,f[h])}return e(i,c),i},tH=function(c){return c&&c.__esModule?c:{default:c}},rH=function(c,i,f,h){if(f==="a"&&!h)throw TypeError("Private accessor was defined without a getter");if(typeof i==="function"?c!==i||!h:!i.has(c))throw TypeError("Cannot read private member from an object whose class did not declare it");return f==="m"?h:f==="a"?h.call(c):h?h.value:i.get(c)},eH=function(c,i,f,h,w){if(h==="m")throw TypeError("Private method is not writable");if(h==="a"&&!w)throw TypeError("Private accessor was defined without a setter");if(typeof i==="function"?c!==i||!w:!i.has(c))throw TypeError("Cannot write private member to an object whose class did not declare it");return h==="a"?w.call(c,f):w?w.value=f:i.set(c,f),f},oH=function(c,i){if(i===null||typeof i!=="object"&&typeof i!=="function")throw TypeError("Cannot use 'in' operator on non-object");return typeof c==="function"?i===c:c.has(i)},nH=function(c,i,f){if(i!==null&&i!==void 0){if(typeof i!=="object"&&typeof i!=="function")throw TypeError("Object expected.");var h,w;if(f){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");h=i[Symbol.asyncDispose]}if(h===void 0){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");if(h=i[Symbol.dispose],f)w=h}if(typeof h!=="function")throw TypeError("Object not disposable.");if(w)h=function(){try{w.call(this)}catch(p){return Promise.reject(p)}};c.stack.push({value:i,dispose:h,async:f})}else if(f)c.stack.push({async:!0});return i};var n=typeof SuppressedError==="function"?SuppressedError:function(c,i,f){var h=Error(f);return h.name="SuppressedError",h.error=c,h.suppressed=i,h};sH=function(c){function i(p){c.error=c.hasError?new n(p,c.error,"An error was suppressed during disposal."):p,c.hasError=!0}var f,h=0;function w(){while(f=c.stack.pop())try{if(!f.async&&h===1)return h=0,c.stack.push(f),Promise.resolve().then(w);if(f.dispose){var p=f.dispose.call(f.value);if(f.async)return h|=2,Promise.resolve(p).then(w,function(u){return i(u),w()})}else h|=1}catch(u){i(u)}if(h===1)return c.hasError?Promise.reject(c.error):Promise.resolve();if(c.hasError)throw c.error}return w()},cH=function(c,i){if(typeof c==="string"&&/^\.\.?\//.test(c))return c.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(f,h,w,p,u){return h?i?".jsx":".js":w&&(!p||!u)?f:w+p+"."+u.toLowerCase()+"js"});return c},t("__extends",vU),t("__assign",MU),t("__rest",zU),t("__decorate",kU),t("__param",WU),t("__esDecorate",ZU),t("__runInitializers",BU),t("__propKey",XU),t("__setFunctionName",JU),t("__metadata",YU),t("__awaiter",PU),t("__generator",gU),t("__exportStar",CU),t("__createBinding",jw),t("__values",Vw),t("__read",ZA),t("__spread",QU),t("__spreadArrays",KU),t("__spreadArray",EU),t("__await",ci),t("__asyncGenerator",xU),t("__asyncDelegator",qU),t("__asyncValues",DU),t("__makeTemplateObject",VU),t("__importStar",jU),t("__importDefault",tH),t("__classPrivateFieldGet",rH),t("__classPrivateFieldSet",eH),t("__classPrivateFieldIn",oH),t("__addDisposableResource",nH),t("__disposeResources",sH),t("__rewriteRelativeImportExtension",cH)})});var wH=Q((fH)=>{Object.defineProperty(fH,"__esModule",{value:!0});fH.randomUUID=void 0;var jrt=ii(),iH=jrt.__importDefault(Rr("crypto"));fH.randomUUID=iH.default.randomUUID.bind(iH.default)});var BA=Q((ret)=>{var pH=wH(),Le=Array.from({length:256},(t,r)=>r.toString(16).padStart(2,"0")),tet=()=>{if(pH.randomUUID)return pH.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,Le[t[0]]+Le[t[1]]+Le[t[2]]+Le[t[3]]+"-"+Le[t[4]]+Le[t[5]]+"-"+Le[t[6]]+Le[t[7]]+"-"+Le[t[8]]+Le[t[9]]+"-"+Le[t[10]]+Le[t[11]]+Le[t[12]]+Le[t[13]]+Le[t[14]]+Le[t[15]]};ret.v4=tet});var pi=Q((RH)=>{var oet=BA(),net=(t,r,e=(o)=>o)=>t,set=(t)=>{switch(t){case"true":return!0;case"false":return!1;default:throw Error(`Unable to parse boolean value "${t}"`)}},cet=(t)=>{if(t===null||t===void 0)return;if(typeof t==="number"){if(t===0||t===1)A0.warn(ep(`Expected boolean, got ${typeof t}: ${t}`));if(t===0)return!1;if(t===1)return!0}if(typeof t==="string"){let r=t.toLowerCase();if(r==="false"||r==="true")A0.warn(ep(`Expected boolean, got ${typeof t}: ${t}`));if(r==="false")return!1;if(r==="true")return!0}if(typeof t==="boolean")return t;throw TypeError(`Expected boolean, got ${typeof t}: ${t}`)},d0=(t)=>{if(t===null||t===void 0)return;if(typeof t==="string"){let r=parseFloat(t);if(!Number.isNaN(r)){if(String(r)!==String(t))A0.warn(ep(`Expected number but observed string: ${t}`));return r}}if(typeof t==="number")return t;throw TypeError(`Expected number, got ${typeof t}: ${t}`)},iet=Math.ceil(340282346638528860000000000000000000000),rp=(t)=>{let r=d0(t);if(r!==void 0&&!Number.isNaN(r)&&r!==1/0&&r!==-1/0){if(Math.abs(r)>iet)throw TypeError(`Expected 32-bit float, got ${t}`)}return r},y0=(t)=>{if(t===null||t===void 0)return;if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw TypeError(`Expected integer, got ${typeof t}: ${t}`)},fet=y0,JA=(t)=>gA(t,32),YA=(t)=>gA(t,16),PA=(t)=>gA(t,8),gA=(t,r)=>{let e=y0(t);if(e!==void 0&&het(e,r)!==e)throw TypeError(`Expected ${r}-bit integer, got ${t}`);return e},het=(t,r)=>{switch(r){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},wet=(t,r)=>{if(t===null||t===void 0){if(r)throw TypeError(`Expected a non-null value for ${r}`);throw TypeError("Expected a non-null value")}return t},dH=(t)=>{if(t===null||t===void 0)return;if(typeof t==="object"&&!Array.isArray(t))return t;let r=Array.isArray(t)?"array":typeof t;throw TypeError(`Expected object, got ${r}: ${t}`)},pet=(t)=>{if(t===null||t===void 0)return;if(typeof t==="string")return t;if(["boolean","number","bigint"].includes(typeof t))return A0.warn(ep(`Expected string, got ${typeof t}: ${t}`)),String(t);throw TypeError(`Expected string, got ${typeof t}: ${t}`)},uet=(t)=>{if(t===null||t===void 0)return;let r=dH(t),e=Object.entries(r).filter(([,o])=>o!=null).map(([o])=>o);if(e.length===0)throw TypeError("Unions must have exactly one non-null member. None were found.");if(e.length>1)throw TypeError(`Unions must have exactly one non-null member. Keys ${e} were not null.`);return r},CA=(t)=>{if(typeof t=="string")return d0(wi(t));return d0(t)},det=CA,yH=(t)=>{if(typeof t=="string")return rp(wi(t));return rp(t)},yet=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,wi=(t)=>{let r=t.match(yet);if(r===null||r[0].length!==t.length)throw TypeError("Expected real number, got implicit NaN");return parseFloat(t)},QA=(t)=>{if(typeof t=="string")return AH(t);return d0(t)},Aet=QA,_et=QA,$et=(t)=>{if(typeof t=="string")return AH(t);return rp(t)},AH=(t)=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw Error(`Unable to parse float value: ${t}`)}},SH=(t)=>{if(typeof t==="string")return y0(wi(t));return y0(t)},Oet=SH,Ret=(t)=>{if(typeof t==="string")return JA(wi(t));return JA(t)},fi=(t)=>{if(typeof t==="string")return YA(wi(t));return YA(t)},_H=(t)=>{if(typeof t==="string")return PA(wi(t));return PA(t)},ep=(t)=>{return String(TypeError(t).stack||t).split(`
`).slice(0,5).filter((r)=>!r.includes("stackTraceWarning")).join(`
`)},A0={warn:console.warn},Iet=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],KA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Tet(t){let r=t.getUTCFullYear(),e=t.getUTCMonth(),o=t.getUTCDay(),n=t.getUTCDate(),c=t.getUTCHours(),i=t.getUTCMinutes(),f=t.getUTCSeconds(),h=n<10?`0${n}`:`${n}`,w=c<10?`0${c}`:`${c}`,p=i<10?`0${i}`:`${i}`,u=f<10?`0${f}`:`${f}`;return`${Iet[o]}, ${h} ${KA[e]} ${r} ${w}:${p}:${u} GMT`}var Net=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),met=(t)=>{if(t===null||t===void 0)return;if(typeof t!=="string")throw TypeError("RFC-3339 date-times must be expressed as strings");let r=Net.exec(t);if(!r)throw TypeError("Invalid RFC-3339 date-time value");let[e,o,n,c,i,f,h,w]=r,p=fi(hi(o)),u=wn(n,"month",1,12),d=wn(c,"day",1,31);return u0(p,u,d,{hours:i,minutes:f,seconds:h,fractionalMilliseconds:w})},aet=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Uet=(t)=>{if(t===null||t===void 0)return;if(typeof t!=="string")throw TypeError("RFC-3339 date-times must be expressed as strings");let r=aet.exec(t);if(!r)throw TypeError("Invalid RFC-3339 date-time value");let[e,o,n,c,i,f,h,w,p]=r,u=fi(hi(o)),d=wn(n,"month",1,12),y=wn(c,"day",1,31),R=u0(u,d,y,{hours:i,minutes:f,seconds:h,fractionalMilliseconds:w});if(p.toUpperCase()!="Z")R.setTime(R.getTime()-Xet(p));return R},Het=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),bet=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Fet=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Let=(t)=>{if(t===null||t===void 0)return;if(typeof t!=="string")throw TypeError("RFC-7231 date-times must be expressed as strings");let r=Het.exec(t);if(r){let[e,o,n,c,i,f,h,w]=r;return u0(fi(hi(c)),XA(n),wn(o,"day",1,31),{hours:i,minutes:f,seconds:h,fractionalMilliseconds:w})}if(r=bet.exec(t),r){let[e,o,n,c,i,f,h,w]=r;return zet(u0(vet(c),XA(n),wn(o,"day",1,31),{hours:i,minutes:f,seconds:h,fractionalMilliseconds:w}))}if(r=Fet.exec(t),r){let[e,o,n,c,i,f,h,w]=r;return u0(fi(hi(w)),XA(o),wn(n.trimLeft(),"day",1,31),{hours:c,minutes:i,seconds:f,fractionalMilliseconds:h})}throw TypeError("Invalid RFC-7231 date-time value")},Get=(t)=>{if(t===null||t===void 0)return;let r;if(typeof t==="number")r=t;else if(typeof t==="string")r=CA(t);else if(typeof t==="object"&&t.tag===1)r=t.value;else throw TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(r)||r===1/0||r===-1/0)throw TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(r*1000))},u0=(t,r,e,o)=>{let n=r-1;return Wet(t,n,e),new Date(Date.UTC(t,n,e,wn(o.hours,"hour",0,23),wn(o.minutes,"minute",0,59),wn(o.seconds,"seconds",0,60),Bet(o.fractionalMilliseconds)))},vet=(t)=>{let r=new Date().getUTCFullYear(),e=Math.floor(r/100)*100+fi(hi(t));if(e<r)return e+100;return e},Met=1576800000000,zet=(t)=>{if(t.getTime()-new Date().getTime()>Met)return new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()));return t},XA=(t)=>{let r=KA.indexOf(t);if(r<0)throw TypeError(`Invalid month: ${t}`);return r+1},ket=[31,28,31,30,31,30,31,31,30,31,30,31],Wet=(t,r,e)=>{let o=ket[r];if(r===1&&Zet(t))o=29;if(e>o)throw TypeError(`Invalid day for ${KA[r]} in ${t}: ${e}`)},Zet=(t)=>{return t%4===0&&(t%100!==0||t%400===0)},wn=(t,r,e,o)=>{let n=_H(hi(t));if(n<e||n>o)throw TypeError(`${r} must be between ${e} and ${o}, inclusive`);return n},Bet=(t)=>{if(t===null||t===void 0)return 0;return yH("0."+t)*1000},Xet=(t)=>{let r=t[0],e=1;if(r=="+")e=1;else if(r=="-")e=-1;else throw TypeError(`Offset direction, ${r}, must be "+" or "-"`);let o=Number(t.substring(1,3)),n=Number(t.substring(4,6));return e*(o*60+n)*60*1000},hi=(t)=>{let r=0;while(r<t.length-1&&t.charAt(r)==="0")r++;if(r===0)return t;return t.slice(r)},tc=function(r){return Object.assign(new String(r),{deserializeJSON(){return JSON.parse(String(r))},toString(){return String(r)},toJSON(){return String(r)}})};tc.from=(t)=>{if(t&&typeof t==="object"&&(t instanceof tc||("deserializeJSON"in t)))return t;else if(typeof t==="string"||Object.getPrototypeOf(t)===String.prototype)return tc(String(t));return tc(JSON.stringify(t))};tc.fromObject=tc.from;function Jet(t){if(t.includes(",")||t.includes('"'))t=`"${t.replace(/"/g,"\\\"")}"`;return t}var EA="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",xA="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",qA="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",$H="(\\d?\\d)",OH="(\\d{4})",Yet=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),Pet=new RegExp(`^${EA}, ${$H} ${xA} ${OH} ${qA} GMT$`),get=new RegExp(`^${EA}, ${$H}-${xA}-(\\d\\d) ${qA} GMT$`),Cet=new RegExp(`^${EA} ${xA} ( [1-9]|\\d\\d) ${qA} ${OH}$`),Qet=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ket=(t)=>{if(t==null)return;let r=NaN;if(typeof t==="number")r=t;else if(typeof t==="string"){if(!/^-?\d*\.?\d+$/.test(t))throw TypeError("parseEpochTimestamp - numeric string invalid.");r=Number.parseFloat(t)}else if(typeof t==="object"&&t.tag===1)r=t.value;if(isNaN(r)||Math.abs(r)===1/0)throw TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(r*1000))},Eet=(t)=>{if(t==null)return;if(typeof t!=="string")throw TypeError("RFC3339 timestamps must be strings");let r=Yet.exec(t);if(!r)throw TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,e,o,n,c,i,f,,h,w]=r;bn(o,1,12),bn(n,1,31),bn(c,0,23),bn(i,0,59),bn(f,0,60);let p=new Date(Date.UTC(Number(e),Number(o)-1,Number(n),Number(c),Number(i),Number(f),Number(h)?Math.round(parseFloat(`0.${h}`)*1000):0));if(p.setUTCFullYear(Number(e)),w.toUpperCase()!="Z"){let[,u,d,y]=/([+-])(\d\d):(\d\d)/.exec(w)||[void 0,"+",0,0],R=u==="-"?1:-1;p.setTime(p.getTime()+R*(Number(d)*60*60*1000+Number(y)*60*1000))}return p},xet=(t)=>{if(t==null)return;if(typeof t!=="string")throw TypeError("RFC7231 timestamps must be strings.");let r,e,o,n,c,i,f,h;if(h=Pet.exec(t))[,r,e,o,n,c,i,f]=h;else if(h=get.exec(t))[,r,e,o,n,c,i,f]=h,o=(Number(o)+1900).toString();else if(h=Cet.exec(t))[,e,r,n,c,i,f,o]=h;if(o&&i){let w=Date.UTC(Number(o),Qet.indexOf(e),Number(r),Number(n),Number(c),Number(i),f?Math.round(parseFloat(`0.${f}`)*1000):0);bn(r,1,31),bn(n,0,23),bn(c,0,59),bn(i,0,60);let p=new Date(w);return p.setUTCFullYear(Number(o)),p}throw TypeError(`Invalid RFC7231 date-time value ${t}.`)};function bn(t,r,e){let o=Number(t);if(o<r||o>e)throw Error(`Value ${o} out of range [${r}, ${e}]`)}function qet(t,r,e){if(e<=0||!Number.isInteger(e))throw Error("Invalid number of delimiters ("+e+") for splitEvery.");let o=t.split(r);if(e===1)return o;let n=[],c="";for(let i=0;i<o.length;i++){if(c==="")c=o[i];else c+=r+o[i];if((i+1)%e===0)n.push(c),c=""}if(c!=="")n.push(c);return n}var Det=(t)=>{let r=t.length,e=[],o=!1,n=void 0,c=0;for(let i=0;i<r;++i){let f=t[i];switch(f){case'"':if(n!=="\\")o=!o;break;case",":if(!o)e.push(t.slice(c,i)),c=i+1;break}n=f}return e.push(t.slice(c)),e.map((i)=>{i=i.trim();let f=i.length;if(f<2)return i;if(i[0]==='"'&&i[f-1]==='"')i=i.slice(1,f-1);return i.replace(/\\"/g,'"')})},uH=/^-?\d*(\.\d+)?$/;class op{string;type;constructor(t,r){if(this.string=t,this.type=r,!uH.test(t))throw Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!=="object")return!1;let r=t;return op.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&uH.test(r.string)}}function Vet(t){return new op(String(t),"bigDecimal")}Object.defineProperty(RH,"generateIdempotencyToken",{enumerable:!0,get:function(){return oet.v4}});RH.LazyJsonString=tc;RH.NumericValue=op;RH._parseEpochTimestamp=Ket;RH._parseRfc3339DateTimeWithOffset=Eet;RH._parseRfc7231DateTime=xet;RH.copyDocumentWithTransform=net;RH.dateToUtcString=Tet;RH.expectBoolean=cet;RH.expectByte=PA;RH.expectFloat32=rp;RH.expectInt=fet;RH.expectInt32=JA;RH.expectLong=y0;RH.expectNonNull=wet;RH.expectNumber=d0;RH.expectObject=dH;RH.expectShort=YA;RH.expectString=pet;RH.expectUnion=uet;RH.handleFloat=Aet;RH.limitedParseDouble=QA;RH.limitedParseFloat=_et;RH.limitedParseFloat32=$et;RH.logger=A0;RH.nv=Vet;RH.parseBoolean=set;RH.parseEpochTimestamp=Get;RH.parseRfc3339DateTime=met;RH.parseRfc3339DateTimeWithOffset=Uet;RH.parseRfc7231DateTime=Let;RH.quoteHeader=Jet;RH.splitEvery=qet;RH.splitHeader=Det;RH.strictParseByte=_H;RH.strictParseDouble=CA;RH.strictParseFloat=det;RH.strictParseFloat32=yH;RH.strictParseInt=Oet;RH.strictParseInt32=Ret;RH.strictParseLong=SH;RH.strictParseShort=fi});var NH=Q((Xot)=>{var IH=ue();class TH{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:e,serdeContext:o,defaultContentType:n}){this.marshaller=t,this.serializer=r,this.deserializer=e,this.serdeContext=o,this.defaultContentType=n}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:e}){let o=this.marshaller,n=r.getEventStreamMember(),c=r.getMemberSchema(n),i=this.serializer,f=this.defaultContentType,h=Symbol("initialRequestMarker"),w={async*[Symbol.asyncIterator](){if(e){let p={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:f}};i.write(r,e);let u=i.flush();yield{[h]:!0,headers:p,body:u}}for await(let p of t)yield p}};return o.serialize(w,(p)=>{if(p[h])return{headers:p.headers,body:p.body};let u=Object.keys(p).find((N)=>{return N!=="__type"})??"",{additionalHeaders:d,body:y,eventType:R,explicitPayloadContentType:S}=this.writeEventBody(u,c,p);return{headers:{":event-type":{type:"string",value:R},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:S??f},...d},body:y}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:e}){let o=this.marshaller,n=r.getEventStreamMember(),i=r.getMemberSchema(n).getMemberSchemas(),f=Symbol("initialResponseMarker"),h=o.deserialize(t.body,async(u)=>{let d=Object.keys(u).find((R)=>{return R!=="__type"})??"",y=u[d].body;if(d==="initial-response"){let R=await this.deserializer.read(r,y);return delete R[n],{[f]:!0,...R}}else if(d in i){let R=i[d];if(R.isStructSchema()){let S={},T=!1;for(let[N,G]of R.structIterator()){let{eventHeader:v,eventPayload:J}=G.getMergedTraits();if(T=T||Boolean(v||J),J){if(G.isBlobSchema())S[N]=y;else if(G.isStringSchema())S[N]=(this.serdeContext?.utf8Encoder??IH.toUtf8)(y);else if(G.isStructSchema())S[N]=await this.deserializer.read(G,y)}else if(v){let K=u[d].headers[N]?.value;if(K!=null)if(G.isNumericSchema())if(K&&typeof K==="object"&&"bytes"in K)S[N]=BigInt(K.toString());else S[N]=Number(K);else S[N]=K}}if(T)return{[d]:S}}return{[d]:await this.deserializer.read(R,y)}}else return{$unknown:u}}),w=h[Symbol.asyncIterator](),p=await w.next();if(p.done)return h;if(p.value?.[f]){if(!r)throw Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[u,d]of Object.entries(p.value))e[u]=d}return{async*[Symbol.asyncIterator](){if(!p?.value?.[f])yield p.value;while(!0){let{done:u,value:d}=await w.next();if(u)break;yield d}}}}writeEventBody(t,r,e){let o=this.serializer,n=t,c=null,i,f=(()=>{return r.getSchema()[4].includes(t)})(),h={};if(!f){let[u,d]=e[t];n=u,o.write(15,d)}else{let u=r.getMemberSchema(t);if(u.isStructSchema()){for(let[d,y]of u.structIterator()){let{eventHeader:R,eventPayload:S}=y.getMergedTraits();if(S)c=d;else if(R){let T=e[t][d],N="binary";if(y.isNumericSchema())if(-2147483648<=T&&T<=2147483647)N="integer";else N="long";else if(y.isTimestampSchema())N="timestamp";else if(y.isStringSchema())N="string";else if(y.isBooleanSchema())N="boolean";if(T!=null)h[d]={type:N,value:T},delete e[t][d]}}if(c!==null){let d=u.getMemberSchema(c);if(d.isBlobSchema())i="application/octet-stream";else if(d.isStringSchema())i="text/plain";o.write(d,e[t][c])}else o.write(u,e[t])}else throw Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}let w=o.flush();return{body:typeof w==="string"?(this.serdeContext?.utf8Decoder??IH.fromUtf8)(w):w,eventType:n,explicitPayloadContentType:i,additionalHeaders:h}}}Xot.EventStreamSerde=TH});var di=Q((Pot)=>{var np=js(),Go=so(),Lo=pi(),S0=tr(),sp=Ke(),DA=ue(),rc=async(t=new Uint8Array,r)=>{if(t instanceof Uint8Array)return np.Uint8ArrayBlobAdapter.mutate(t);if(!t)return np.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let e=r.streamCollector(t);return np.Uint8ArrayBlobAdapter.mutate(await e)};function _0(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16).toUpperCase()})}class ui{serdeContext;setSerdeContext(t){this.serdeContext=t}}class cp extends ui{options;constructor(t){super();this.options=t}getRequestType(){return S0.HttpRequest}getResponseType(){return S0.HttpResponse}setSerdeContext(t){if(this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec())this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){if(t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,!t.query)t.query={};for(let[e,o]of r.url.searchParams.entries())t.query[e]=o;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,e){if(this.serdeContext?.disableHostPrefix)return;let o=Go.NormalizedSchema.of(r.input),n=Go.translateTraits(r.traits??{});if(n.endpoint){let c=n.endpoint?.[0];if(typeof c==="string"){let i=[...o.structIterator()].filter(([,f])=>f.getMergedTraits().hostLabel);for(let[f]of i){let h=e[f];if(typeof h!=="string")throw Error(`@smithy/core/schema - ${f} in input must be a string as hostLabel.`);c=c.replace(`{${f}}`,h)}t.hostname=c+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:e}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:e})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:e}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:e})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(() => O(NH()));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,e,o,n){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}class mH extends cp{async serializeRequest(t,r,e){let o={...r??{}},n=this.serializer,c={},i={},f=await e.endpoint(),h=Go.NormalizedSchema.of(t?.input),w=h.getSchema(),p=!1,u,d=new S0.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:c,headers:i,body:void 0});if(f){this.updateServiceEndpoint(d,f),this.setHostPrefix(d,t,o);let y=Go.translateTraits(t.traits);if(y.http){d.method=y.http[0];let[R,S]=y.http[1].split("?");if(d.path=="/")d.path=R;else d.path+=R;let T=new URLSearchParams(S??"");Object.assign(c,Object.fromEntries(T))}}for(let[y,R]of h.structIterator()){let S=R.getMergedTraits()??{},T=o[y];if(T==null&&!R.isIdempotencyToken())continue;if(S.httpPayload){if(R.isStreaming())if(R.isStructSchema()){if(o[y])u=await this.serializeEventStream({eventStream:o[y],requestSchema:h})}else u=T;else n.write(R,T),u=n.flush();delete o[y]}else if(S.httpLabel){n.write(R,T);let N=n.flush();if(d.path.includes(`{${y}+}`))d.path=d.path.replace(`{${y}+}`,N.split("/").map(_0).join("/"));else if(d.path.includes(`{${y}}`))d.path=d.path.replace(`{${y}}`,_0(N));delete o[y]}else if(S.httpHeader)n.write(R,T),i[S.httpHeader.toLowerCase()]=String(n.flush()),delete o[y];else if(typeof S.httpPrefixHeaders==="string"){for(let[N,G]of Object.entries(T)){let v=S.httpPrefixHeaders+N;n.write([R.getValueSchema(),{httpHeader:v}],G),i[v.toLowerCase()]=n.flush()}delete o[y]}else if(S.httpQuery||S.httpQueryParams)this.serializeQuery(R,T,c),delete o[y];else p=!0}if(p&&o)n.write(w,o),u=n.flush();return d.headers=i,d.query=c,d.body=u,d}serializeQuery(t,r,e){let o=this.serializer,n=t.getMergedTraits();if(n.httpQueryParams){for(let[c,i]of Object.entries(r))if(!(c in e)){let f=t.getValueSchema();Object.assign(f.getMergedTraits(),{...n,httpQuery:c,httpQueryParams:void 0}),this.serializeQuery(f,i,e)}return}if(t.isListSchema()){let c=!!t.getMergedTraits().sparse,i=[];for(let f of r){o.write([t.getValueSchema(),n],f);let h=o.flush();if(c||h!==void 0)i.push(h)}e[n.httpQuery]=i}else o.write([t,n],r),e[n.httpQuery]=o.flush()}async deserializeResponse(t,r,e){let o=this.deserializer,n=Go.NormalizedSchema.of(t.output),c={};if(e.statusCode>=300){let f=await rc(e.body,r);if(f.byteLength>0)Object.assign(c,await o.read(15,f));throw await this.handleError(t,r,e,c,this.deserializeMetadata(e)),Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let f in e.headers){let h=e.headers[f];delete e.headers[f],e.headers[f.toLowerCase()]=h}let i=await this.deserializeHttpMessage(n,r,e,c);if(i.length){let f=await rc(e.body,r);if(f.byteLength>0){let h=await o.read(n,f);for(let w of i)c[w]=h[w]}}else if(i.discardResponseBody)await rc(e.body,r);return c.$metadata=this.deserializeMetadata(e),c}async deserializeHttpMessage(t,r,e,o,n){let c;if(o instanceof Set)c=n;else c=o;let i=!0,f=this.deserializer,h=Go.NormalizedSchema.of(t),w=[];for(let[p,u]of h.structIterator()){let d=u.getMemberTraits();if(d.httpPayload){if(i=!1,u.isStreaming())if(u.isStructSchema())c[p]=await this.deserializeEventStream({response:e,responseSchema:h});else c[p]=np.sdkStreamMixin(e.body);else if(e.body){let R=await rc(e.body,r);if(R.byteLength>0)c[p]=await f.read(u,R)}}else if(d.httpHeader){let y=String(d.httpHeader).toLowerCase(),R=e.headers[y];if(R!=null)if(u.isListSchema()){let S=u.getValueSchema();S.getMergedTraits().httpHeader=y;let T;if(S.isTimestampSchema()&&S.getSchema()===4)T=Lo.splitEvery(R,",",2);else T=Lo.splitHeader(R);let N=[];for(let G of T)N.push(await f.read(S,G.trim()));c[p]=N}else c[p]=await f.read(u,R)}else if(d.httpPrefixHeaders!==void 0){c[p]={};for(let[y,R]of Object.entries(e.headers))if(y.startsWith(d.httpPrefixHeaders)){let S=u.getValueSchema();S.getMergedTraits().httpHeader=y,c[p][y.slice(d.httpPrefixHeaders.length)]=await f.read(S,R)}}else if(d.httpResponseCode)c[p]=e.statusCode;else w.push(p)}return w.discardResponseBody=i,w}}class aH extends cp{async serializeRequest(t,r,e){let o=this.serializer,n={},c={},i=await e.endpoint(),f=Go.NormalizedSchema.of(t?.input),h=f.getSchema(),w,p=new S0.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:n,headers:c,body:void 0});if(i)this.updateServiceEndpoint(p,i),this.setHostPrefix(p,t,r);let u={...r};if(r){let d=f.getEventStreamMember();if(d){if(u[d]){let y={};for(let[R,S]of f.structIterator())if(R!==d&&u[R])o.write(S,u[R]),y[R]=o.flush();w=await this.serializeEventStream({eventStream:u[d],requestSchema:f,initialRequest:y})}}else o.write(h,u),w=o.flush()}return p.headers=c,p.query=n,p.body=w,p.method="POST",p}async deserializeResponse(t,r,e){let o=this.deserializer,n=Go.NormalizedSchema.of(t.output),c={};if(e.statusCode>=300){let f=await rc(e.body,r);if(f.byteLength>0)Object.assign(c,await o.read(15,f));throw await this.handleError(t,r,e,c,this.deserializeMetadata(e)),Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let f in e.headers){let h=e.headers[f];delete e.headers[f],e.headers[f.toLowerCase()]=h}let i=n.getEventStreamMember();if(i)c[i]=await this.deserializeEventStream({response:e,responseSchema:n,initialResponseContainer:c});else{let f=await rc(e.body,r);if(f.byteLength>0)Object.assign(c,await o.read(n,f))}return c.$metadata=this.deserializeMetadata(e),c}}var UH=(t,r,e,o,n,c)=>{if(r!=null&&r[e]!==void 0){let i=o();if(i.length<=0)throw Error("Empty value provided for input HTTP label: "+e+".");t=t.replace(n,c?i.split("/").map((f)=>_0(f)).join("/"):_0(i))}else throw Error("No value provided for input HTTP label: "+e+".");return t};function Yot(t,r){return new VA(t,r)}class VA{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:e,path:o}=await this.context.endpoint();this.path=o;for(let n of this.resolvePathStack)n(this.path);return new S0.HttpRequest({protocol:r,hostname:this.hostname||t,port:e,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push((r)=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,e,o){return this.resolvePathStack.push((n)=>{this.path=UH(n,this.input,t,r,e,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}function jA(t,r){if(r.timestampFormat.useTrait){if(t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema()}let{httpLabel:e,httpPrefixHeaders:o,httpHeader:n,httpQuery:c}=t.getMergedTraits();return(r.httpBindings?typeof o==="string"||Boolean(n)?6:Boolean(c)||Boolean(e)?5:void 0:void 0)??r.timestampFormat.default}class tS extends ui{settings;constructor(t){super();this.settings=t}read(t,r){let e=Go.NormalizedSchema.of(t);if(e.isListSchema())return Lo.splitHeader(r).map((o)=>this.read(e.getValueSchema(),o));if(e.isBlobSchema())return(this.serdeContext?.base64Decoder??sp.fromBase64)(r);if(e.isTimestampSchema())switch(jA(e,this.settings)){case 5:return Lo._parseRfc3339DateTimeWithOffset(r);case 6:return Lo._parseRfc7231DateTime(r);case 7:return Lo._parseEpochTimestamp(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(e.isStringSchema()){let o=e.getMergedTraits().mediaType,n=r;if(o){if(e.getMergedTraits().httpHeader)n=this.base64ToUtf8(n);if(o==="application/json"||o.endsWith("+json"))n=Lo.LazyJsonString.from(n);return n}}if(e.isNumericSchema())return Number(r);if(e.isBigIntegerSchema())return BigInt(r);if(e.isBigDecimalSchema())return new Lo.NumericValue(r,"bigDecimal");if(e.isBooleanSchema())return String(r).toLowerCase()==="true";return r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??DA.toUtf8)((this.serdeContext?.base64Decoder??sp.fromBase64)(t))}}class HH extends ui{codecDeserializer;stringDeserializer;constructor(t,r){super();this.codecDeserializer=t,this.stringDeserializer=new tS(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let e=Go.NormalizedSchema.of(t),o=e.getMergedTraits(),n=this.serdeContext?.utf8Encoder??DA.toUtf8;if(o.httpHeader||o.httpResponseCode)return this.stringDeserializer.read(e,n(r));if(o.httpPayload){if(e.isBlobSchema()){let c=this.serdeContext?.utf8Decoder??DA.fromUtf8;if(typeof r==="string")return c(r);return r}else if(e.isStringSchema()){if("byteLength"in r)return n(r);return r}}return this.codecDeserializer.read(e,r)}}class rS extends ui{settings;stringBuffer="";constructor(t){super();this.settings=t}write(t,r){let e=Go.NormalizedSchema.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(e.isTimestampSchema()){if(!(r instanceof Date))throw Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${e.getName(!0)}`);switch(jA(e,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Lo.dateToUtcString(r);break;case 7:this.stringBuffer=String(r.getTime()/1000);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1000)}return}if(e.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??sp.toBase64)(r);return}if(e.isListSchema()&&Array.isArray(r)){let c="";for(let i of r){this.write([e.getValueSchema(),e.getMergedTraits()],i);let f=this.flush(),h=e.getValueSchema().isTimestampSchema()?f:Lo.quoteHeader(f);if(c!=="")c+=", ";c+=h}this.stringBuffer=c;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let o=e.getMergedTraits().mediaType,n=r;if(o){if(o==="application/json"||o.endsWith("+json"))n=Lo.LazyJsonString.from(n);if(e.getMergedTraits().httpHeader){this.stringBuffer=(this.serdeContext?.base64Encoder??sp.toBase64)(n.toString());return}}this.stringBuffer=r;break;default:if(e.isIdempotencyToken())this.stringBuffer=Lo.generateIdempotencyToken();else this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}class bH{codecSerializer;stringSerializer;buffer;constructor(t,r,e=new rS(r)){this.codecSerializer=t,this.stringSerializer=e}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let e=Go.NormalizedSchema.of(t),o=e.getMergedTraits();if(o.httpHeader||o.httpLabel||o.httpQuery){this.stringSerializer.write(e,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(e,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}Pot.FromStringShapeDeserializer=tS;Pot.HttpBindingProtocol=mH;Pot.HttpInterceptingShapeDeserializer=HH;Pot.HttpInterceptingShapeSerializer=bH;Pot.HttpProtocol=cp;Pot.RequestBuilder=VA;Pot.RpcProtocol=aH;Pot.SerdeContext=ui;Pot.ToStringShapeSerializer=rS;Pot.collectBody=rc;Pot.determineTimestampFormat=jA;Pot.extendedEncodeURIComponent=_0;Pot.requestBuilder=Yot;Pot.resolvedPath=UH});var Kr=Q((JH)=>{var ip=Ds(),lH=Qe(),nnt=mA(),eS=tr(),snt=di(),cnt=(t)=>t[ip.SMITHY_CONTEXT_KEY]||(t[ip.SMITHY_CONTEXT_KEY]={}),int=(t,r)=>{if(!r||r.length===0)return t;let e=[];for(let o of r)for(let n of t)if(n.schemeId.split("#")[1]===o)e.push(n);for(let o of t)if(!e.find(({schemeId:n})=>n===o.schemeId))e.push(o);return e};function fnt(t){let r=new Map;for(let e of t)r.set(e.schemeId,e);return r}var oS=(t,r)=>(e,o)=>async(n)=>{let c=t.httpAuthSchemeProvider(await r.httpAuthSchemeParametersProvider(t,o,n.input)),i=t.authSchemePreference?await t.authSchemePreference():[],f=int(c,i),h=fnt(t.httpAuthSchemes),w=lH.getSmithyContext(o),p=[];for(let u of f){let d=h.get(u.schemeId);if(!d){p.push(`HttpAuthScheme \`${u.schemeId}\` was not enabled for this service.`);continue}let y=d.identityProvider(await r.identityProviderConfigProvider(t));if(!y){p.push(`HttpAuthScheme \`${u.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:R={},signingProperties:S={}}=u.propertiesExtractor?.(t,o)||{};u.identityProperties=Object.assign(u.identityProperties||{},R),u.signingProperties=Object.assign(u.signingProperties||{},S),w.selectedHttpAuthScheme={httpAuthOption:u,identity:await y(u.identityProperties),signer:d.signer};break}if(!w.selectedHttpAuthScheme)throw Error(p.join(`
`));return e(n)},FH={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},hnt=(t,{httpAuthSchemeParametersProvider:r,identityProviderConfigProvider:e})=>({applyToStack:(o)=>{o.addRelativeTo(oS(t,{httpAuthSchemeParametersProvider:r,identityProviderConfigProvider:e}),FH)}}),LH={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:nnt.serializerMiddlewareOption.name},wnt=(t,{httpAuthSchemeParametersProvider:r,identityProviderConfigProvider:e})=>({applyToStack:(o)=>{o.addRelativeTo(oS(t,{httpAuthSchemeParametersProvider:r,identityProviderConfigProvider:e}),LH)}}),pnt=(t)=>(r)=>{throw r},unt=(t,r)=>{},GH=(t)=>(r,e)=>async(o)=>{if(!eS.HttpRequest.isInstance(o.request))return r(o);let c=lH.getSmithyContext(e).selectedHttpAuthScheme;if(!c)throw Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:f,signer:h}=c,w=await r({...o,request:await h.sign(o.request,f,i)}).catch((h.errorHandler||pnt)(i));return(h.successHandler||unt)(w.response,i),w},vH={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},dnt=(t)=>({applyToStack:(r)=>{r.addRelativeTo(GH(),vH)}}),ynt=(t)=>{if(typeof t==="function")return t;let r=Promise.resolve(t);return()=>r},Ant=async(t,r,e,o=(c)=>c,...n)=>{let c=new t(e);return c=o(c)??c,await r.send(c,...n)};function Snt(t,r,e,o,n){return async function*(i,f,...h){let w=f,p=i.startingToken??w[e],u=!0,d;while(u){if(w[e]=p,n)w[n]=w[n]??i.pageSize;if(i.client instanceof t)d=await Ant(r,i.client,f,i.withCommand,...h);else throw Error(`Invalid client, expected instance of ${t.name}`);yield d;let y=p;p=_nt(d,o),u=!!(p&&(!i.stopOnSameToken||p!==y))}return}}var _nt=(t,r)=>{let e=t,o=r.split(".");for(let n of o){if(!e||typeof e!=="object")return;e=e[n]}return e};function $nt(t,r,e){if(!t.__smithy_context)t.__smithy_context={features:{}};else if(!t.__smithy_context.features)t.__smithy_context.features={};t.__smithy_context.features[r]=e}class MH{authSchemes=new Map;constructor(t){for(let[r,e]of Object.entries(t))if(e!==void 0)this.authSchemes.set(r,e)}getIdentityProvider(t){return this.authSchemes.get(t)}}class zH{async sign(t,r,e){if(!e)throw Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!e.name)throw Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!e.in)throw Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let o=eS.HttpRequest.clone(t);if(e.in===ip.HttpApiKeyAuthLocation.QUERY)o.query[e.name]=r.apiKey;else if(e.in===ip.HttpApiKeyAuthLocation.HEADER)o.headers[e.name]=e.scheme?`${e.scheme} ${r.apiKey}`:r.apiKey;else throw Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+e.in+"`");return o}}class kH{async sign(t,r,e){let o=eS.HttpRequest.clone(t);if(!r.token)throw Error("request could not be signed with `token` since the `token` is not defined");return o.headers.Authorization=`Bearer ${r.token}`,o}}class WH{async sign(t,r,e){return t}}var ZH=(t)=>function(e){return XH(e)&&e.expiration.getTime()-Date.now()<t},BH=300000,Ont=ZH(BH),XH=(t)=>t.expiration!==void 0,Rnt=(t,r,e)=>{if(t===void 0)return;let o=typeof t!=="function"?async()=>Promise.resolve(t):t,n,c,i,f=!1,h=async(w)=>{if(!c)c=o(w);try{n=await c,i=!0,f=!1}finally{c=void 0}return n};if(r===void 0)return async(w)=>{if(!i||w?.forceRefresh)n=await h(w);return n};return async(w)=>{if(!i||w?.forceRefresh)n=await h(w);if(f)return n;if(!e(n))return f=!0,n;if(r(n))return await h(w),n;return n}};Object.defineProperty(JH,"requestBuilder",{enumerable:!0,get:function(){return snt.requestBuilder}});JH.DefaultIdentityProviderConfig=MH;JH.EXPIRATION_MS=BH;JH.HttpApiKeyAuthSigner=zH;JH.HttpBearerAuthSigner=kH;JH.NoAuthSigner=WH;JH.createIsIdentityExpiredFunction=ZH;JH.createPaginator=Snt;JH.doesIdentityRequireRefresh=XH;JH.getHttpAuthSchemeEndpointRuleSetPlugin=hnt;JH.getHttpAuthSchemePlugin=wnt;JH.getHttpSigningPlugin=dnt;JH.getSmithyContext=cnt;JH.httpAuthSchemeEndpointRuleSetMiddlewareOptions=FH;JH.httpAuthSchemeMiddleware=oS;JH.httpAuthSchemeMiddlewareOptions=LH;JH.httpSigningMiddleware=GH;JH.httpSigningMiddlewareOptions=vH;JH.isIdentityExpired=Ont;JH.memoizeIdentityProvider=Rnt;JH.normalizeProvider=ynt;JH.setFeature=$nt});var _r=Q((Cnt)=>{class yi extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let e,o=!0;if(typeof r==="boolean")e=void 0,o=r;else if(r!=null&&typeof r==="object")e=r.logger,o=r.tryNextLink??!0;super(t);this.tryNextLink=o,Object.setPrototypeOf(this,yi.prototype),e?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}}class nS extends yi{name="CredentialsProviderError";constructor(t,r=!0){super(t,r);Object.setPrototypeOf(this,nS.prototype)}}class sS extends yi{name="TokenProviderError";constructor(t,r=!0){super(t,r);Object.setPrototypeOf(this,sS.prototype)}}var Ynt=(...t)=>async()=>{if(t.length===0)throw new yi("No providers in chain");let r;for(let e of t)try{return await e()}catch(o){if(r=o,o?.tryNextLink)continue;throw o}throw r},Pnt=(t)=>()=>Promise.resolve(t),gnt=(t,r,e)=>{let o,n,c,i=!1,f=async()=>{if(!n)n=t();try{o=await n,c=!0,i=!1}finally{n=void 0}return o};if(r===void 0)return async(h)=>{if(!c||h?.forceRefresh)o=await f();return o};return async(h)=>{if(!c||h?.forceRefresh)o=await f();if(i)return o;if(e&&!e(o))return i=!0,o;if(r(o))return await f(),o;return o}};Cnt.CredentialsProviderError=nS;Cnt.ProviderError=yi;Cnt.TokenProviderError=sS;Cnt.chain=Ynt;Cnt.fromStatic=Pnt;Cnt.memoize=gnt});var Ge=Q((est)=>{var cS={warningEmitted:!1},Vnt=(t)=>{if(t&&!cS.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<20)cS.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${t} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`)};function jnt(t,r,e){if(!t.$source)t.$source={};return t.$source[r]=e,t}function tst(t,r,e){if(!t.__aws_sdk_context)t.__aws_sdk_context={features:{}};else if(!t.__aws_sdk_context.features)t.__aws_sdk_context.features={};t.__aws_sdk_context.features[r]=e}function rst(t,r,e){if(!t.$source)t.$source={};return t.$source[r]=e,t}est.emitWarningIfUnsupportedVersion=Vnt;est.setCredentialFeature=jnt;est.setFeature=tst;est.setTokenFeature=rst;est.state=cS});var yp=Q(($st)=>{var ns=c0(),ec=ue(),fst=Xw(),CH=tr(),YH=Qe(),fp=bA(),QH="X-Amz-Algorithm",KH="X-Amz-Credential",hS="X-Amz-Date",EH="X-Amz-SignedHeaders",xH="X-Amz-Expires",wS="X-Amz-Signature",pS="X-Amz-Security-Token",hst="X-Amz-Region-Set",uS="authorization",dS=hS.toLowerCase(),qH="date",DH=[uS,dS,qH],VH=wS.toLowerCase(),dp="x-amz-content-sha256",jH=pS.toLowerCase(),wst="host",tb={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},rb=/^proxy-/,eb=/^sec-/,pst=[/^proxy-/i,/^sec-/i],hp="AWS4-HMAC-SHA256",ust="AWS4-ECDSA-P256-SHA256",ob="AWS4-HMAC-SHA256-PAYLOAD",nb="UNSIGNED-PAYLOAD",sb=50,yS="aws4_request",cb=604800,Ai={},wp=[],pp=(t,r,e)=>`${t}/${r}/${e}/${yS}`,ib=async(t,r,e,o,n)=>{let c=await PH(t,r.secretAccessKey,r.accessKeyId),i=`${e}:${o}:${n}:${ns.toHex(c)}:${r.sessionToken}`;if(i in Ai)return Ai[i];wp.push(i);while(wp.length>sb)delete Ai[wp.shift()];let f=`AWS4${r.secretAccessKey}`;for(let h of[e,o,n,yS])f=await PH(t,f,h);return Ai[i]=f},dst=()=>{wp.length=0,Object.keys(Ai).forEach((t)=>{delete Ai[t]})},PH=(t,r,e)=>{let o=new t(r);return o.update(ec.toUint8Array(e)),o.digest()},iS=({headers:t},r,e)=>{let o={};for(let n of Object.keys(t).sort()){if(t[n]==null)continue;let c=n.toLowerCase();if(c in tb||r?.has(c)||rb.test(c)||eb.test(c)){if(!e||e&&!e.has(c))continue}o[c]=t[n].trim().replace(/\s+/g," ")}return o},up=async({headers:t,body:r},e)=>{for(let o of Object.keys(t))if(o.toLowerCase()===dp)return t[o];if(r==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";else if(typeof r==="string"||ArrayBuffer.isView(r)||fst.isArrayBuffer(r)){let o=new e;return o.update(ec.toUint8Array(r)),ns.toHex(await o.digest())}return nb};class fb{format(t){let r=[];for(let n of Object.keys(t)){let c=ec.fromUtf8(n);r.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(t[n]))}let e=new Uint8Array(r.reduce((n,c)=>n+c.byteLength,0)),o=0;for(let n of r)e.set(n,o),o+=n.byteLength;return e}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let e=new DataView(new ArrayBuffer(5));return e.setUint8(0,4),e.setInt32(1,t.value,!1),new Uint8Array(e.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let n=new DataView(new ArrayBuffer(3+t.value.byteLength));n.setUint8(0,6),n.setUint16(1,t.value.byteLength,!1);let c=new Uint8Array(n.buffer);return c.set(t.value,3),c;case"string":let i=ec.fromUtf8(t.value),f=new DataView(new ArrayBuffer(3+i.byteLength));f.setUint8(0,7),f.setUint16(1,i.byteLength,!1);let h=new Uint8Array(f.buffer);return h.set(i,3),h;case"timestamp":let w=new Uint8Array(9);return w[0]=8,w.set(AS.fromNumber(t.value.valueOf()).bytes,1),w;case"uuid":if(!yst.test(t.value))throw Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set(ns.fromHex(t.value.replace(/\-/g,"")),1),p}}}var yst=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class AS{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776000||t<-9223372036854776000)throw Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let e=7,o=Math.abs(Math.round(t));e>-1&&o>0;e--,o/=256)r[e]=o;if(t<0)gH(r);return new AS(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;if(r)gH(t);return parseInt(ns.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function gH(t){for(let r=0;r<8;r++)t[r]^=255;for(let r=7;r>-1;r--)if(t[r]++,t[r]!==0)break}var hb=(t,r)=>{t=t.toLowerCase();for(let e of Object.keys(r))if(t===e.toLowerCase())return!0;return!1},wb=(t,r={})=>{let{headers:e,query:o={}}=CH.HttpRequest.clone(t);for(let n of Object.keys(e)){let c=n.toLowerCase();if(c.slice(0,6)==="x-amz-"&&!r.unhoistableHeaders?.has(c)||r.hoistableHeaders?.has(c))o[n]=e[n],delete e[n]}return{...t,headers:e,query:o}},fS=(t)=>{t=CH.HttpRequest.clone(t);for(let r of Object.keys(t.headers))if(DH.indexOf(r.toLowerCase())>-1)delete t.headers[r];return t},pb=({query:t={}})=>{let r=[],e={};for(let o of Object.keys(t)){if(o.toLowerCase()===VH)continue;let n=fp.escapeUri(o);r.push(n);let c=t[o];if(typeof c==="string")e[n]=`${n}=${fp.escapeUri(c)}`;else if(Array.isArray(c))e[n]=c.slice(0).reduce((i,f)=>i.concat([`${n}=${fp.escapeUri(f)}`]),[]).sort().join("&")}return r.sort().map((o)=>e[o]).filter((o)=>o).join("&")},Ast=(t)=>Sst(t).toISOString().replace(/\.\d{3}Z$/,"Z"),Sst=(t)=>{if(typeof t==="number")return new Date(t*1000);if(typeof t==="string"){if(Number(t))return new Date(Number(t)*1000);return new Date(t)}return t};class SS{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:e,service:o,sha256:n,uriEscapePath:c=!0}){this.service=o,this.sha256=n,this.uriEscapePath=c,this.applyChecksum=typeof t==="boolean"?t:!0,this.regionProvider=YH.normalizeProvider(e),this.credentialProvider=YH.normalizeProvider(r)}createCanonicalRequest(t,r,e){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${pb(t)}
${o.map((n)=>`${n}:${r[n]}`).join(`
`)}

${o.join(";")}
${e}`}async createStringToSign(t,r,e,o){let n=new this.sha256;n.update(ec.toUint8Array(e));let c=await n.digest();return`${o}
${t}
${r}
${ns.toHex(c)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let n of t.split("/")){if(n?.length===0)continue;if(n===".")continue;if(n==="..")r.pop();else r.push(n)}let e=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return fp.escapeUri(e).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!=="object"||typeof t.accessKeyId!=="string"||typeof t.secretAccessKey!=="string")throw Error("Resolved credential object is not valid")}formatDate(t){let r=Ast(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}}class ub extends SS{headerFormatter=new fb;constructor({applyChecksum:t,credentials:r,region:e,service:o,sha256:n,uriEscapePath:c=!0}){super({applyChecksum:t,credentials:r,region:e,service:o,sha256:n,uriEscapePath:c})}async presign(t,r={}){let{signingDate:e=new Date,expiresIn:o=3600,unsignableHeaders:n,unhoistableHeaders:c,signableHeaders:i,hoistableHeaders:f,signingRegion:h,signingService:w}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let u=h??await this.regionProvider(),{longDate:d,shortDate:y}=this.formatDate(e);if(o>cb)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let R=pp(y,u,w??this.service),S=wb(fS(t),{unhoistableHeaders:c,hoistableHeaders:f});if(p.sessionToken)S.query[pS]=p.sessionToken;S.query[QH]=hp,S.query[KH]=`${p.accessKeyId}/${R}`,S.query[hS]=d,S.query[xH]=o.toString(10);let T=iS(S,n,i);return S.query[EH]=this.getCanonicalHeaderList(T),S.query[wS]=await this.getSignature(d,R,this.getSigningKey(p,u,y,w),this.createCanonicalRequest(S,T,await up(t,this.sha256))),S}async sign(t,r){if(typeof t==="string")return this.signString(t,r);else if(t.headers&&t.payload)return this.signEvent(t,r);else if(t.message)return this.signMessage(t,r);else return this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:e=new Date,priorSignature:o,signingRegion:n,signingService:c}){let i=n??await this.regionProvider(),{shortDate:f,longDate:h}=this.formatDate(e),w=pp(f,i,c??this.service),p=await up({headers:{},body:r},this.sha256),u=new this.sha256;u.update(t);let d=ns.toHex(await u.digest()),y=[ob,h,w,o,d,p].join(`
`);return this.signString(y,{signingDate:e,signingRegion:i,signingService:c})}async signMessage(t,{signingDate:r=new Date,signingRegion:e,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:e,signingService:o,priorSignature:t.priorSignature}).then((c)=>{return{message:t.message,signature:c}})}async signString(t,{signingDate:r=new Date,signingRegion:e,signingService:o}={}){let n=await this.credentialProvider();this.validateResolvedCredentials(n);let c=e??await this.regionProvider(),{shortDate:i}=this.formatDate(r),f=new this.sha256(await this.getSigningKey(n,c,i,o));return f.update(ec.toUint8Array(t)),ns.toHex(await f.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:e,unsignableHeaders:o,signingRegion:n,signingService:c}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let f=n??await this.regionProvider(),h=fS(t),{longDate:w,shortDate:p}=this.formatDate(r),u=pp(p,f,c??this.service);if(h.headers[dS]=w,i.sessionToken)h.headers[jH]=i.sessionToken;let d=await up(h,this.sha256);if(!hb(dp,h.headers)&&this.applyChecksum)h.headers[dp]=d;let y=iS(h,o,e),R=await this.getSignature(w,u,this.getSigningKey(i,f,p,c),this.createCanonicalRequest(h,y,d));return h.headers[uS]=`${hp} Credential=${i.accessKeyId}/${u}, SignedHeaders=${this.getCanonicalHeaderList(y)}, Signature=${R}`,h}async getSignature(t,r,e,o){let n=await this.createStringToSign(t,r,o,hp),c=new this.sha256(await e);return c.update(ec.toUint8Array(n)),ns.toHex(await c.digest())}getSigningKey(t,r,e,o){return ib(this.sha256,t,e,r,o||this.service)}}var _st={SignatureV4a:null};$st.ALGORITHM_IDENTIFIER=hp;$st.ALGORITHM_IDENTIFIER_V4A=ust;$st.ALGORITHM_QUERY_PARAM=QH;$st.ALWAYS_UNSIGNABLE_HEADERS=tb;$st.AMZ_DATE_HEADER=dS;$st.AMZ_DATE_QUERY_PARAM=hS;$st.AUTH_HEADER=uS;$st.CREDENTIAL_QUERY_PARAM=KH;$st.DATE_HEADER=qH;$st.EVENT_ALGORITHM_IDENTIFIER=ob;$st.EXPIRES_QUERY_PARAM=xH;$st.GENERATED_HEADERS=DH;$st.HOST_HEADER=wst;$st.KEY_TYPE_IDENTIFIER=yS;$st.MAX_CACHE_SIZE=sb;$st.MAX_PRESIGNED_TTL=cb;$st.PROXY_HEADER_PATTERN=rb;$st.REGION_SET_PARAM=hst;$st.SEC_HEADER_PATTERN=eb;$st.SHA256_HEADER=dp;$st.SIGNATURE_HEADER=VH;$st.SIGNATURE_QUERY_PARAM=wS;$st.SIGNED_HEADERS_QUERY_PARAM=EH;$st.SignatureV4=ub;$st.SignatureV4Base=SS;$st.TOKEN_HEADER=jH;$st.TOKEN_QUERY_PARAM=pS;$st.UNSIGNABLE_PATTERNS=pst;$st.UNSIGNED_PAYLOAD=nb;$st.clearCredentialCache=dst;$st.createScope=pp;$st.getCanonicalHeaders=iS;$st.getCanonicalQuery=pb;$st.getPayloadHash=up;$st.getSigningKey=ib;$st.hasHeader=hb;$st.moveHeadersToQuery=wb;$st.prepareRequest=fS;$st.signatureV4aContainer=_st});var yb=Q((sct)=>{var db=typeof TextEncoder=="function"?new TextEncoder:null,nct=(t)=>{if(typeof t==="string"){if(db)return db.encode(t).byteLength;let r=t.length;for(let e=r-1;e>=0;e--){let o=t.charCodeAt(e);if(o>127&&o<=2047)r++;else if(o>2047&&o<=65535)r+=2;if(o>=56320&&o<=57343)e--}return r}else if(typeof t.byteLength==="number")return t.byteLength;else if(typeof t.size==="number")return t.size;throw Error(`Body Length computation failed for ${t}`)};sct.calculateBodyLength=nct});var FS=Q((lct)=>{var _i=pi(),$b=ue(),O0=di(),ict=tr(),fct=yb(),Si=so(),hct=Qe(),Ob=Ke(),_p=0,$p=1,oc=2,ss=3,$0=4,Ap=5,Rb=6,_S=7,Ib=20,RS=21,Tb=22,wct=23,TS=24,nc=25,sc=26,cs=27,NS=31;function $i(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}var mS=Symbol("@smithy/core/cbor::tagSymbol");function aS(t){return t[mS]=!0,t}var pct=typeof TextDecoder<"u",uct=typeof Buffer<"u",yr=$i(0),Ln=new DataView(yr.buffer,yr.byteOffset,yr.byteLength),Ab=pct?new TextDecoder:null,Gt=0;function dct(t){yr=t,Ln=new DataView(yr.buffer,yr.byteOffset,yr.byteLength)}function Gn(t,r){if(t>=r)throw Error("unexpected end of (decode) payload.");let e=(yr[t]&224)>>5,o=yr[t]&31;switch(e){case _p:case $p:case Rb:let n,c;if(o<24)n=o,c=1;else switch(o){case TS:case nc:case sc:case cs:let i=mb[o],f=i+1;if(c=f,r-t<f)throw Error(`countLength ${i} greater than remaining buf len.`);let h=t+1;if(i===1)n=yr[h];else if(i===2)n=Ln.getUint16(h);else if(i===4)n=Ln.getUint32(h);else n=Ln.getBigUint64(h);break;default:throw Error(`unexpected minor value ${o}.`)}if(e===_p)return Gt=c,$S(n);else if(e===$p){let i;if(typeof n==="bigint")i=BigInt(-1)-n;else i=-1-n;return Gt=c,$S(i)}else if(o===2||o===3){let i=R0(t+c,r),f=BigInt(0),h=t+c+Gt;for(let w=h;w<h+i;++w)f=f<<BigInt(8)|BigInt(yr[w]);return Gt=c+Gt+i,o===3?-f-BigInt(1):f}else if(o===4){let i=Gn(t+c,r),[f,h]=i,w=h<0?-1:1,p="0".repeat(Math.abs(f)+1)+String(BigInt(w)*BigInt(h)),u,d=h<0?"-":"";if(u=f===0?p:p.slice(0,p.length+f)+"."+p.slice(f),u=u.replace(/^0+/g,""),u==="")u="0";if(u[0]===".")u="0"+u;return u=d+u,Gt=c+Gt,_i.nv(u)}else{let i=Gn(t+c,r);return Gt=c+Gt,aS({tag:$S(n),value:i})}case ss:case Ap:case $0:case oc:if(o===NS)switch(e){case ss:return _ct(t,r);case Ap:return Tct(t,r);case $0:return Rct(t,r);case oc:return $ct(t,r)}else switch(e){case ss:return Sct(t,r);case Ap:return Ict(t,r);case $0:return Oct(t,r);case oc:return US(t,r)}default:return Nct(t,r)}}function Nb(t,r,e){if(uct&&t.constructor?.name==="Buffer")return t.toString("utf-8",r,e);if(Ab)return Ab.decode(t.subarray(r,e));return $b.toUtf8(t.subarray(r,e))}function yct(t){let r=Number(t);if(r<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<r)console.warn(Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${r} with loss of precision.`));return r}var mb={[TS]:1,[nc]:2,[sc]:4,[cs]:8};function Act(t,r){let e=t>>7,o=(t&124)>>2,n=(t&3)<<8|r,c=e===0?1:-1,i,f;if(o===0)if(n===0)return 0;else i=Math.pow(2,-14),f=0;else if(o===31)if(n===0)return c*(1/0);else return NaN;else i=Math.pow(2,o-15),f=1;return f+=n/1024,c*(i*f)}function R0(t,r){let e=yr[t]&31;if(e<24)return Gt=1,e;if(e===TS||e===nc||e===sc||e===cs){let o=mb[e];if(Gt=o+1,r-t<Gt)throw Error(`countLength ${o} greater than remaining buf len.`);let n=t+1;if(o===1)return yr[n];else if(o===2)return Ln.getUint16(n);else if(o===4)return Ln.getUint32(n);return yct(Ln.getBigUint64(n))}throw Error(`unexpected minor value ${e}.`)}function Sct(t,r){let e=R0(t,r),o=Gt;if(t+=o,r-t<e)throw Error(`string len ${e} greater than remaining buf len.`);let n=Nb(yr,t,t+e);return Gt=o+e,n}function _ct(t,r){t+=1;let e=[];for(let o=t;t<r;){if(yr[t]===255){let h=$i(e.length);return h.set(e,0),Gt=t-o+2,Nb(h,0,h.length)}let n=(yr[t]&224)>>5,c=yr[t]&31;if(n!==ss)throw Error(`unexpected major type ${n} in indefinite string.`);if(c===NS)throw Error("nested indefinite string.");let i=US(t,r);t+=Gt;for(let h=0;h<i.length;++h)e.push(i[h])}throw Error("expected break marker.")}function US(t,r){let e=R0(t,r),o=Gt;if(t+=o,r-t<e)throw Error(`unstructured byte string len ${e} greater than remaining buf len.`);let n=yr.subarray(t,t+e);return Gt=o+e,n}function $ct(t,r){t+=1;let e=[];for(let o=t;t<r;){if(yr[t]===255){let h=$i(e.length);return h.set(e,0),Gt=t-o+2,h}let n=(yr[t]&224)>>5,c=yr[t]&31;if(n!==oc)throw Error(`unexpected major type ${n} in indefinite string.`);if(c===NS)throw Error("nested indefinite string.");let i=US(t,r);t+=Gt;for(let h=0;h<i.length;++h)e.push(i[h])}throw Error("expected break marker.")}function Oct(t,r){let e=R0(t,r),o=Gt;t+=o;let n=t,c=Array(e);for(let i=0;i<e;++i){let f=Gn(t,r),h=Gt;c[i]=f,t+=h}return Gt=o+(t-n),c}function Rct(t,r){t+=1;let e=[];for(let o=t;t<r;){if(yr[t]===255)return Gt=t-o+2,e;let n=Gn(t,r);t+=Gt,e.push(n)}throw Error("expected break marker.")}function Ict(t,r){let e=R0(t,r),o=Gt;t+=o;let n=t,c={};for(let i=0;i<e;++i){if(t>=r)throw Error("unexpected end of map payload.");let f=(yr[t]&224)>>5;if(f!==ss)throw Error(`unexpected major type ${f} for map key at index ${t}.`);let h=Gn(t,r);t+=Gt;let w=Gn(t,r);t+=Gt,c[h]=w}return Gt=o+(t-n),c}function Tct(t,r){t+=1;let e=t,o={};for(;t<r;){if(t>=r)throw Error("unexpected end of map payload.");if(yr[t]===255)return Gt=t-e+2,o;let n=(yr[t]&224)>>5;if(n!==ss)throw Error(`unexpected major type ${n} for map key.`);let c=Gn(t,r);t+=Gt;let i=Gn(t,r);t+=Gt,o[c]=i}throw Error("expected break marker.")}function Nct(t,r){let e=yr[t]&31;switch(e){case RS:case Ib:return Gt=1,e===RS;case Tb:return Gt=1,null;case wct:return Gt=1,null;case nc:if(r-t<3)throw Error("incomplete float16 at end of buf.");return Gt=3,Act(yr[t+1],yr[t+2]);case sc:if(r-t<5)throw Error("incomplete float32 at end of buf.");return Gt=5,Ln.getFloat32(t+1);case cs:if(r-t<9)throw Error("incomplete float64 at end of buf.");return Gt=9,Ln.getFloat64(t+1);default:throw Error(`unexpected minor value ${e}.`)}}function $S(t){if(typeof t==="number")return t;let r=Number(t);if(Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER)return r;return t}var Sb=typeof Buffer<"u",mct=2048,at=$i(mct),Fn=new DataView(at.buffer,at.byteOffset,at.byteLength),At=0;function OS(t){if(at.byteLength-At<t)if(At<16000000)IS(Math.max(at.byteLength*4,at.byteLength+t));else IS(at.byteLength+t+16000000)}function _b(){let t=$i(At);return t.set(at.subarray(0,At),0),At=0,t}function IS(t){let r=at;if(at=$i(t),r)if(r.copy)r.copy(at,0,0,r.byteLength);else at.set(r,0);Fn=new DataView(at.buffer,at.byteOffset,at.byteLength)}function ln(t,r){if(r<24)at[At++]=t<<5|r;else if(r<256)at[At++]=t<<5|24,at[At++]=r;else if(r<65536)at[At++]=t<<5|nc,Fn.setUint16(At,r),At+=2;else if(r<4294967296)at[At++]=t<<5|sc,Fn.setUint32(At,r),At+=4;else at[At++]=t<<5|cs,Fn.setBigUint64(At,typeof r==="bigint"?r:BigInt(r)),At+=8}function act(t){let r=[t];while(r.length){let e=r.pop();if(OS(typeof e==="string"?e.length*4:64),typeof e==="string"){if(Sb)ln(ss,Buffer.byteLength(e)),At+=at.write(e,At);else{let o=$b.fromUtf8(e);ln(ss,o.byteLength),at.set(o,At),At+=o.byteLength}continue}else if(typeof e==="number"){if(Number.isInteger(e)){let o=e>=0,n=o?_p:$p,c=o?e:-e-1;if(c<24)at[At++]=n<<5|c;else if(c<256)at[At++]=n<<5|24,at[At++]=c;else if(c<65536)at[At++]=n<<5|nc,at[At++]=c>>8,at[At++]=c;else if(c<4294967296)at[At++]=n<<5|sc,Fn.setUint32(At,c),At+=4;else at[At++]=n<<5|cs,Fn.setBigUint64(At,BigInt(c)),At+=8;continue}at[At++]=_S<<5|cs,Fn.setFloat64(At,e),At+=8;continue}else if(typeof e==="bigint"){let o=e>=0,n=o?_p:$p,c=o?e:-e-BigInt(1),i=Number(c);if(i<24)at[At++]=n<<5|i;else if(i<256)at[At++]=n<<5|24,at[At++]=i;else if(i<65536)at[At++]=n<<5|nc,at[At++]=i>>8,at[At++]=i&255;else if(i<4294967296)at[At++]=n<<5|sc,Fn.setUint32(At,i),At+=4;else if(c<BigInt("18446744073709551616"))at[At++]=n<<5|cs,Fn.setBigUint64(At,c),At+=8;else{let f=c.toString(2),h=new Uint8Array(Math.ceil(f.length/8)),w=c,p=0;while(h.byteLength-++p>=0)h[h.byteLength-p]=Number(w&BigInt(255)),w>>=BigInt(8);if(OS(h.byteLength*2),at[At++]=o?194:195,Sb)ln(oc,Buffer.byteLength(h));else ln(oc,h.byteLength);at.set(h,At),At+=h.byteLength}continue}else if(e===null){at[At++]=_S<<5|Tb;continue}else if(typeof e==="boolean"){at[At++]=_S<<5|(e?RS:Ib);continue}else if(typeof e>"u")throw Error("@smithy/core/cbor: client may not serialize undefined value.");else if(Array.isArray(e)){for(let o=e.length-1;o>=0;--o)r.push(e[o]);ln($0,e.length);continue}else if(typeof e.byteLength==="number"){OS(e.length*2),ln(oc,e.length),at.set(e,At),At+=e.byteLength;continue}else if(typeof e==="object"){if(e instanceof _i.NumericValue){let n=e.string.indexOf("."),c=n===-1?0:n-e.string.length+1,i=BigInt(e.string.replace(".",""));at[At++]=196,r.push(i),r.push(c),ln($0,2);continue}if(e[mS])if("tag"in e&&"value"in e){r.push(e.value),ln(Rb,e.tag);continue}else throw Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(e));let o=Object.keys(e);for(let n=o.length-1;n>=0;--n){let c=o[n];r.push(e[c]),r.push(c)}ln(Ap,o.length);continue}throw Error(`data type ${e?.constructor?.name??typeof e} not compatible for encoding.`)}}var Op={deserialize(t){return dct(t),Gn(0,t.length)},serialize(t){try{return act(t),_b()}catch(r){throw _b(),r}},resizeEncodingBuffer(t){IS(t)}},ab=(t,r)=>{return O0.collectBody(t,r).then(async(e)=>{if(e.length)try{return Op.deserialize(e)}catch(o){throw Object.defineProperty(o,"$responseBodyText",{value:r.utf8Encoder(e)}),o}return{}})},Sp=(t)=>{return aS({tag:1,value:t.getTime()/1000})},Uct=async(t,r)=>{let e=await ab(t,r);return e.message=e.message??e.Message,e},Ub=(t,r)=>{let e=(n)=>{let c=n;if(typeof c==="number")c=c.toString();if(c.indexOf(",")>=0)c=c.split(",")[0];if(c.indexOf(":")>=0)c=c.split(":")[0];if(c.indexOf("#")>=0)c=c.split("#")[1];return c};if(r.__type!==void 0)return e(r.__type);let o=Object.keys(r).find((n)=>n.toLowerCase()==="code");if(o&&r[o]!==void 0)return e(r[o])},Hct=(t)=>{if(String(t.headers["smithy-protocol"]).toLowerCase()!=="rpc-v2-cbor")throw Error("Malformed RPCv2 CBOR response, status: "+t.statusCode)},bct=async(t,r,e,o,n)=>{let{hostname:c,protocol:i="https",port:f,path:h}=await t.endpoint(),w={protocol:i,hostname:c,port:f,method:"POST",path:h.endsWith("/")?h.slice(0,-1)+e:h+e,headers:{...r}};if(o!==void 0)w.hostname=o;if(n!==void 0){w.body=n;try{w.headers["content-length"]=String(fct.calculateBodyLength(n))}catch(p){}}return new ict.HttpRequest(w)};class HS extends O0.SerdeContext{createSerializer(){let t=new bS;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new lS;return t.setSerdeContext(this.serdeContext),t}}class bS extends O0.SerdeContext{value;write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let e=Si.NormalizedSchema.of(t);if(r==null){if(e.isIdempotencyToken())return _i.generateIdempotencyToken();return r}if(e.isBlobSchema()){if(typeof r==="string")return(this.serdeContext?.base64Decoder??Ob.fromBase64)(r);return r}if(e.isTimestampSchema()){if(typeof r==="number"||typeof r==="bigint")return Sp(new Date(Number(r)/1000|0));return Sp(r)}if(typeof r==="function"||typeof r==="object"){let o=r;if(e.isListSchema()&&Array.isArray(o)){let c=!!e.getMergedTraits().sparse,i=[],f=0;for(let h of o){let w=this.serialize(e.getValueSchema(),h);if(w!=null||c)i[f++]=w}return i}if(o instanceof Date)return Sp(o);let n={};if(e.isMapSchema()){let c=!!e.getMergedTraits().sparse;for(let i of Object.keys(o)){let f=this.serialize(e.getValueSchema(),o[i]);if(f!=null||c)n[i]=f}}else if(e.isStructSchema()){for(let[i,f]of e.structIterator()){let h=this.serialize(f,o[i]);if(h!=null)n[i]=h}if(e.isUnionSchema()&&Array.isArray(o.$unknown)){let[i,f]=o.$unknown;n[i]=f}else if(typeof o.__type==="string"){for(let[i,f]of Object.entries(o))if(!(i in n))n[i]=this.serialize(15,f)}}else if(e.isDocumentSchema())for(let c of Object.keys(o))n[c]=this.serialize(e.getValueSchema(),o[c]);else if(e.isBigDecimalSchema())return o;return n}return r}flush(){let t=Op.serialize(this.value);return this.value=void 0,t}}class lS extends O0.SerdeContext{read(t,r){let e=Op.deserialize(r);return this.readValue(t,e)}readValue(t,r){let e=Si.NormalizedSchema.of(t);if(e.isTimestampSchema()){if(typeof r==="number")return _i._parseEpochTimestamp(r);if(typeof r==="object"){if(r.tag===1&&"value"in r)return _i._parseEpochTimestamp(r.value)}}if(e.isBlobSchema()){if(typeof r==="string")return(this.serdeContext?.base64Decoder??Ob.fromBase64)(r);return r}if(typeof r>"u"||typeof r==="boolean"||typeof r==="number"||typeof r==="string"||typeof r==="bigint"||typeof r==="symbol")return r;else if(typeof r==="object"){if(r===null)return null;if("byteLength"in r)return r;if(r instanceof Date)return r;if(e.isDocumentSchema())return r;if(e.isListSchema()){let n=[],c=e.getValueSchema(),i=!!e.getMergedTraits().sparse;for(let f of r){let h=this.readValue(c,f);if(h!=null||i)n.push(h)}return n}let o={};if(e.isMapSchema()){let n=!!e.getMergedTraits().sparse,c=e.getValueSchema();for(let i of Object.keys(r)){let f=this.readValue(c,r[i]);if(f!=null||n)o[i]=f}}else if(e.isStructSchema()){let n=e.isUnionSchema(),c;if(n)c=new Set(Object.keys(r).filter((i)=>i!=="__type"));for(let[i,f]of e.structIterator()){if(n)c.delete(i);if(r[i]!=null)o[i]=this.readValue(f,r[i])}if(n&&c?.size===1&&Object.keys(o).length===0){let i=c.values().next().value;o.$unknown=[i,r[i]]}else if(typeof r.__type==="string"){for(let[i,f]of Object.entries(r))if(!(i in o))o[i]=f}}else if(r instanceof _i.NumericValue)return r;return o}else return r}}class Hb extends O0.RpcProtocol{codec=new HS;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e);if(Object.assign(o.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Si.deref(t.input)==="unit")delete o.body,delete o.headers["content-type"];else{if(!o.body)this.serializer.write(15,{}),o.body=this.serializer.flush();try{o.headers["content-length"]=String(o.body.byteLength)}catch(f){}}let{service:n,operation:c}=hct.getSmithyContext(e),i=`/service/${n}/operation/${c}`;if(o.path.endsWith("/"))o.path+=i.slice(1);else o.path+=i;return o}async deserializeResponse(t,r,e){return super.deserializeResponse(t,r,e)}async handleError(t,r,e,o,n){let c=Ub(e,o)??"Unknown",i=this.options.defaultNamespace;if(c.includes("#"))[i]=c.split("#");let f={$metadata:n,$fault:e.statusCode<=500?"client":"server"},h=Si.TypeRegistry.for(i),w;try{w=h.getSchema(c)}catch(S){if(o.Message)o.message=o.Message;let T=Si.TypeRegistry.for("smithy.ts.sdk.synthetic."+i),N=T.getBaseException();if(N){let G=T.getErrorCtor(N);throw Object.assign(new G({name:c}),f,o)}throw Object.assign(Error(c),f,o)}let p=Si.NormalizedSchema.of(w),u=h.getErrorCtor(w),d=o.message??o.Message??"Unknown",y=new u(d),R={};for(let[S,T]of p.structIterator())R[S]=this.deserializer.readValue(T,o[S]);throw Object.assign(y,f,{$fault:p.getMergedTraits().error,message:d},R)}getDefaultContentType(){return"application/cbor"}}lct.CborCodec=HS;lct.CborShapeDeserializer=lS;lct.CborShapeSerializer=bS;lct.SmithyRpcV2CborProtocol=Hb;lct.buildHttpRpcRequest=bct;lct.cbor=Op;lct.checkCborResponse=Hct;lct.dateToTag=Sp;lct.loadSmithyRpcV2CborErrorCode=Ub;lct.parseCborBody=ab;lct.parseCborErrorBody=Uct;lct.tag=aS;lct.tagSymbol=mS});var Fb=Q((Pct)=>{var cc=(t,r)=>{let e=[];if(t)e.push(t);if(r)for(let o of r)e.push(o);return e},is=(t,r)=>{return`${t||"anonymous"}${r&&r.length>0?` (a.k.a. ${r.join(",")})`:""}`},LS=()=>{let t=[],r=[],e=!1,o=new Set,n=(u)=>u.sort((d,y)=>bb[y.step]-bb[d.step]||lb[y.priority||"normal"]-lb[d.priority||"normal"]),c=(u)=>{let d=!1,y=(R)=>{let S=cc(R.name,R.aliases);if(S.includes(u)){d=!0;for(let T of S)o.delete(T);return!1}return!0};return t=t.filter(y),r=r.filter(y),d},i=(u)=>{let d=!1,y=(R)=>{if(R.middleware===u){d=!0;for(let S of cc(R.name,R.aliases))o.delete(S);return!1}return!0};return t=t.filter(y),r=r.filter(y),d},f=(u)=>{return t.forEach((d)=>{u.add(d.middleware,{...d})}),r.forEach((d)=>{u.addRelativeTo(d.middleware,{...d})}),u.identifyOnResolve?.(p.identifyOnResolve()),u},h=(u)=>{let d=[];return u.before.forEach((y)=>{if(y.before.length===0&&y.after.length===0)d.push(y);else d.push(...h(y))}),d.push(u),u.after.reverse().forEach((y)=>{if(y.before.length===0&&y.after.length===0)d.push(y);else d.push(...h(y))}),d},w=(u=!1)=>{let d=[],y=[],R={};return t.forEach((T)=>{let N={...T,before:[],after:[]};for(let G of cc(N.name,N.aliases))R[G]=N;d.push(N)}),r.forEach((T)=>{let N={...T,before:[],after:[]};for(let G of cc(N.name,N.aliases))R[G]=N;y.push(N)}),y.forEach((T)=>{if(T.toMiddleware){let N=R[T.toMiddleware];if(N===void 0){if(u)return;throw Error(`${T.toMiddleware} is not found when adding ${is(T.name,T.aliases)} middleware ${T.relation} ${T.toMiddleware}`)}if(T.relation==="after")N.after.push(T);if(T.relation==="before")N.before.push(T)}}),n(d).map(h).reduce((T,N)=>{return T.push(...N),T},[])},p={add:(u,d={})=>{let{name:y,override:R,aliases:S}=d,T={step:"initialize",priority:"normal",middleware:u,...d},N=cc(y,S);if(N.length>0){if(N.some((G)=>o.has(G))){if(!R)throw Error(`Duplicate middleware name '${is(y,S)}'`);for(let G of N){let v=t.findIndex((K)=>K.name===G||K.aliases?.some((D)=>D===G));if(v===-1)continue;let J=t[v];if(J.step!==T.step||T.priority!==J.priority)throw Error(`"${is(J.name,J.aliases)}" middleware with ${J.priority} priority in ${J.step} step cannot be overridden by "${is(y,S)}" middleware with ${T.priority} priority in ${T.step} step.`);t.splice(v,1)}}for(let G of N)o.add(G)}t.push(T)},addRelativeTo:(u,d)=>{let{name:y,override:R,aliases:S}=d,T={middleware:u,...d},N=cc(y,S);if(N.length>0){if(N.some((G)=>o.has(G))){if(!R)throw Error(`Duplicate middleware name '${is(y,S)}'`);for(let G of N){let v=r.findIndex((K)=>K.name===G||K.aliases?.some((D)=>D===G));if(v===-1)continue;let J=r[v];if(J.toMiddleware!==T.toMiddleware||J.relation!==T.relation)throw Error(`"${is(J.name,J.aliases)}" middleware ${J.relation} "${J.toMiddleware}" middleware cannot be overridden by "${is(y,S)}" middleware ${T.relation} "${T.toMiddleware}" middleware.`);r.splice(v,1)}}for(let G of N)o.add(G)}r.push(T)},clone:()=>f(LS()),use:(u)=>{u.applyToStack(p)},remove:(u)=>{if(typeof u==="string")return c(u);else return i(u)},removeByTag:(u)=>{let d=!1,y=(R)=>{let{tags:S,name:T,aliases:N}=R;if(S&&S.includes(u)){let G=cc(T,N);for(let v of G)o.delete(v);return d=!0,!1}return!0};return t=t.filter(y),r=r.filter(y),d},concat:(u)=>{let d=f(LS());return d.use(u),d.identifyOnResolve(e||d.identifyOnResolve()||(u.identifyOnResolve?.()??!1)),d},applyToStack:f,identify:()=>{return w(!0).map((u)=>{let d=u.step??u.relation+" "+u.toMiddleware;return is(u.name,u.aliases)+" - "+d})},identifyOnResolve(u){if(typeof u==="boolean")e=u;return e},resolve:(u,d)=>{for(let y of w().map((R)=>R.middleware).reverse())u=y(u,d);if(e)console.log(p.identify());return u}};return p},bb={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},lb={high:3,normal:2,low:1};Pct.constructStack=LS});var z=Q((Ri)=>{var vb=Fb(),kS=di(),vS=Ds(),Cct=so(),Lb=pi();class Mb{config;middlewareStack=vb.constructStack();initConfig;handlers;constructor(t){this.config=t;let{protocol:r,protocolSettings:e}=t;if(e){if(typeof r==="function")t.protocol=new r(e)}}send(t,r,e){let o=typeof r!=="function"?r:void 0,n=typeof r==="function"?r:e,c=o===void 0&&this.config.cacheMiddleware===!0,i;if(c){if(!this.handlers)this.handlers=new WeakMap;let f=this.handlers;if(f.has(t.constructor))i=f.get(t.constructor);else i=t.resolveMiddleware(this.middlewareStack,this.config,o),f.set(t.constructor,i)}else delete this.handlers,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(n)i(t).then((f)=>n(null,f.output),(f)=>n(f)).catch(()=>{});else return i(t).then((f)=>f.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}var GS="***SensitiveInformation***";function MS(t,r){if(r==null)return r;let e=Cct.NormalizedSchema.of(t);if(e.getMergedTraits().sensitive)return GS;if(e.isListSchema()){if(!!e.getValueSchema().getMergedTraits().sensitive)return GS}else if(e.isMapSchema()){if(!!e.getKeySchema().getMergedTraits().sensitive||!!e.getValueSchema().getMergedTraits().sensitive)return GS}else if(e.isStructSchema()&&typeof r==="object"){let o=r,n={};for(let[c,i]of e.structIterator())if(o[c]!=null)n[c]=MS(i,o[c]);return n}return r}class WS{middlewareStack=vb.constructStack();schema;static classBuilder(){return new zb}resolveMiddlewareWithContext(t,r,e,{middlewareFn:o,clientName:n,commandName:c,inputFilterSensitiveLog:i,outputFilterSensitiveLog:f,smithyContext:h,additionalContext:w,CommandCtor:p}){for(let S of o.bind(this)(p,t,r,e))this.middlewareStack.use(S);let u=t.concat(this.middlewareStack),{logger:d}=r,y={logger:d,clientName:n,commandName:c,inputFilterSensitiveLog:i,outputFilterSensitiveLog:f,[vS.SMITHY_CONTEXT_KEY]:{commandInstance:this,...h},...w},{requestHandler:R}=r;return u.resolve((S)=>R.handle(S.request,e||{}),y)}}class zb{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,e={}){return this._smithyContext={service:t,operation:r,...e},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=(e)=>e,r=(e)=>e){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends WS{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[e]){super();this.input=e??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(e,o,n){let c=t._operationSchema,i=c?.[4]??c?.input,f=c?.[5]??c?.output;return this.resolveMiddlewareWithContext(e,o,n,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(c?MS.bind(null,i):(h)=>h),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(c?MS.bind(null,f):(h)=>h),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}}var Qct="***SensitiveInformation***",Kct=(t,r)=>{for(let e of Object.keys(t)){let o=t[e],n=async function(i,f,h){let w=new o(i);if(typeof f==="function")this.send(w,f);else if(typeof h==="function"){if(typeof f!=="object")throw Error(`Expected http options but got ${typeof f}`);this.send(w,f||{},h)}else return this.send(w,f)},c=(e[0].toLowerCase()+e.slice(1)).replace(/Command$/,"");r.prototype[c]=n}};class Oi extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message);Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return Oi.prototype.isPrototypeOf(r)||Boolean(r.$fault)&&Boolean(r.$metadata)&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;if(this===Oi)return Oi.isInstance(t);if(Oi.isInstance(t)){if(r.name&&this.name)return this.prototype.isPrototypeOf(t)||r.name===this.name;return this.prototype.isPrototypeOf(t)}return!1}}var kb=(t,r={})=>{Object.entries(r).filter(([,o])=>o!==void 0).forEach(([o,n])=>{if(t[o]==null||t[o]==="")t[o]=n});let e=t.message||t.Message||"UnknownError";return t.message=e,delete t.Message,t},Wb=({output:t,parsedBody:r,exceptionCtor:e,errorCode:o})=>{let n=xct(t),c=n.httpStatusCode?n.httpStatusCode+"":void 0,i=new e({name:r?.code||r?.Code||o||c||"UnknownError",$fault:"client",$metadata:n});throw kb(i,r)},Ect=(t)=>{return({output:r,parsedBody:e,errorCode:o})=>{Wb({output:r,parsedBody:e,exceptionCtor:t,errorCode:o})}},xct=(t)=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),qct=(t)=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:30000};default:return{}}},Gb=!1,Dct=(t)=>{if(t&&!Gb&&parseInt(t.substring(1,t.indexOf(".")))<16)Gb=!0},Vct=(t)=>{let r=[];for(let e in vS.AlgorithmId){let o=vS.AlgorithmId[e];if(t[o]===void 0)continue;r.push({algorithmId:()=>o,checksumConstructor:()=>t[o]})}return{addChecksumAlgorithm(e){r.push(e)},checksumAlgorithms(){return r}}},jct=(t)=>{let r={};return t.checksumAlgorithms().forEach((e)=>{r[e.algorithmId()]=e.checksumConstructor()}),r},tit=(t)=>{return{setRetryStrategy(r){t.retryStrategy=r},retryStrategy(){return t.retryStrategy}}},rit=(t)=>{let r={};return r.retryStrategy=t.retryStrategy(),r},Zb=(t)=>{return Object.assign(Vct(t),tit(t))},eit=Zb,oit=(t)=>{return Object.assign(jct(t),rit(t))},nit=(t)=>Array.isArray(t)?t:[t],Bb=(t)=>{for(let e in t)if(t.hasOwnProperty(e)&&t[e]["#text"]!==void 0)t[e]=t[e]["#text"];else if(typeof t[e]==="object"&&t[e]!==null)t[e]=Bb(t[e]);return t},sit=(t)=>{return t!=null};class Xb{trace(){}debug(){}info(){}warn(){}error(){}}function Jb(t,r,e){let o,n,c;if(typeof r>"u"&&typeof e>"u")o={},c=t;else if(o=t,typeof r==="function")return n=r,c=e,fit(o,n,c);else c=r;for(let i of Object.keys(c)){if(!Array.isArray(c[i])){o[i]=c[i];continue}Yb(o,null,c,i)}return o}var cit=(t)=>{let r={};for(let[e,o]of Object.entries(t||{}))r[e]=[,o];return r},iit=(t,r)=>{let e={};for(let o in r)Yb(e,t,r,o);return e},fit=(t,r,e)=>{return Jb(t,Object.entries(e).reduce((o,[n,c])=>{if(Array.isArray(c))o[n]=c;else if(typeof c==="function")o[n]=[r,c()];else o[n]=[r,c];return o},{}))},Yb=(t,r,e,o)=>{if(r!==null){let i=e[o];if(typeof i==="function")i=[,i];let[f=hit,h=wit,w=o]=i;if(typeof f==="function"&&f(r[w])||typeof f!=="function"&&!!f)t[o]=h(r[w]);return}let[n,c]=e[o];if(typeof c==="function"){let i,f=n===void 0&&(i=c())!=null,h=typeof n==="function"&&!!n(void 0)||typeof n!=="function"&&!!n;if(f)t[o]=i;else if(h)t[o]=c()}else{let i=n===void 0&&c!=null,f=typeof n==="function"&&!!n(c)||typeof n!=="function"&&!!n;if(i||f)t[o]=c}},hit=(t)=>t!=null,wit=(t)=>t,pit=(t)=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},uit=(t)=>t.toISOString().replace(".000Z","Z"),zS=(t)=>{if(t==null)return{};if(Array.isArray(t))return t.filter((r)=>r!=null).map(zS);if(typeof t==="object"){let r={};for(let e of Object.keys(t)){if(t[e]==null)continue;r[e]=zS(t[e])}return r}return t};Object.defineProperty(Ri,"collectBody",{enumerable:!0,get:function(){return kS.collectBody}});Object.defineProperty(Ri,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return kS.extendedEncodeURIComponent}});Object.defineProperty(Ri,"resolvedPath",{enumerable:!0,get:function(){return kS.resolvedPath}});Ri.Client=Mb;Ri.Command=WS;Ri.NoOpLogger=Xb;Ri.SENSITIVE_STRING=Qct;Ri.ServiceException=Oi;Ri._json=zS;Ri.convertMap=cit;Ri.createAggregatedClient=Kct;Ri.decorateServiceException=kb;Ri.emitWarningIfUnsupportedVersion=Dct;Ri.getArrayIfSingleItem=nit;Ri.getDefaultClientConfiguration=eit;Ri.getDefaultExtensionConfiguration=Zb;Ri.getValueFromTextNode=Bb;Ri.isSerializableHeaderValue=sit;Ri.loadConfigsForDefaultMode=qct;Ri.map=Jb;Ri.resolveDefaultRuntimeConfig=oit;Ri.serializeDateTime=uit;Ri.serializeFloat=pit;Ri.take=iit;Ri.throwDefaultError=Wb;Ri.withBaseException=Ect;Object.keys(Lb).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(Ri,t))Object.defineProperty(Ri,t,{enumerable:!0,get:function(){return Lb[t]}})})});var gb=Q((ZZt,Pb)=>{(()=>{var t={d:(A,$)=>{for(var U in $)t.o($,U)&&!t.o(A,U)&&Object.defineProperty(A,U,{enumerable:!0,get:$[U]})},o:(A,$)=>Object.prototype.hasOwnProperty.call(A,$),r:(A)=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{XMLBuilder:()=>Or,XMLParser:()=>Oh,XMLValidator:()=>Nh});let e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",o=new RegExp("^["+e+"]["+e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function n(A,$){let U=[],F=$.exec(A);for(;F;){let b=[];b.startIndex=$.lastIndex-F[0].length;let l=F.length;for(let B=0;B<l;B++)b.push(F[B]);U.push(b),F=$.exec(A)}return U}let c=function(A){return o.exec(A)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function f(A,$){$=Object.assign({},i,$);let U=[],F=!1,b=!1;A[0]==="\uFEFF"&&(A=A.substr(1));for(let l=0;l<A.length;l++)if(A[l]==="<"&&A[l+1]==="?"){if(l+=2,l=w(A,l),l.err)return l}else{if(A[l]!=="<"){if(h(A[l]))continue;return N("InvalidChar","char '"+A[l]+"' is not expected.",v(A,l))}{let B=l;if(l++,A[l]==="!"){l=p(A,l);continue}{let k=!1;A[l]==="/"&&(k=!0,l++);let P="";for(;l<A.length&&A[l]!==">"&&A[l]!==" "&&A[l]!=="\t"&&A[l]!==`
`&&A[l]!=="\r";l++)P+=A[l];if(P=P.trim(),P[P.length-1]==="/"&&(P=P.substring(0,P.length-1),l--),!c(P)){let yt;return yt=P.trim().length===0?"Invalid space after '<'.":"Tag '"+P+"' is an invalid name.",N("InvalidTag",yt,v(A,l))}let tt=y(A,l);if(tt===!1)return N("InvalidAttr","Attributes for '"+P+"' have open quote.",v(A,l));let mt=tt.value;if(l=tt.index,mt[mt.length-1]==="/"){let yt=l-mt.length;mt=mt.substring(0,mt.length-1);let kt=S(mt,$);if(kt!==!0)return N(kt.err.code,kt.err.msg,v(A,yt+kt.err.line));F=!0}else if(k){if(!tt.tagClosed)return N("InvalidTag","Closing tag '"+P+"' doesn't have proper closing.",v(A,l));if(mt.trim().length>0)return N("InvalidTag","Closing tag '"+P+"' can't have attributes or invalid starting.",v(A,B));if(U.length===0)return N("InvalidTag","Closing tag '"+P+"' has not been opened.",v(A,B));{let yt=U.pop();if(P!==yt.tagName){let kt=v(A,yt.tagStartPos);return N("InvalidTag","Expected closing tag '"+yt.tagName+"' (opened in line "+kt.line+", col "+kt.col+") instead of closing tag '"+P+"'.",v(A,B))}U.length==0&&(b=!0)}}else{let yt=S(mt,$);if(yt!==!0)return N(yt.err.code,yt.err.msg,v(A,l-mt.length+yt.err.line));if(b===!0)return N("InvalidXml","Multiple possible root nodes found.",v(A,l));$.unpairedTags.indexOf(P)!==-1||U.push({tagName:P,tagStartPos:B}),F=!0}for(l++;l<A.length;l++)if(A[l]==="<"){if(A[l+1]==="!"){l++,l=p(A,l);continue}if(A[l+1]!=="?")break;if(l=w(A,++l),l.err)return l}else if(A[l]==="&"){let yt=T(A,l);if(yt==-1)return N("InvalidChar","char '&' is not expected.",v(A,l));l=yt}else if(b===!0&&!h(A[l]))return N("InvalidXml","Extra text at the end",v(A,l));A[l]==="<"&&l--}}}return F?U.length==1?N("InvalidTag","Unclosed tag '"+U[0].tagName+"'.",v(A,U[0].tagStartPos)):!(U.length>0)||N("InvalidXml","Invalid '"+JSON.stringify(U.map((l)=>l.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):N("InvalidXml","Start tag expected.",1)}function h(A){return A===" "||A==="\t"||A===`
`||A==="\r"}function w(A,$){let U=$;for(;$<A.length;$++)if(A[$]!="?"&&A[$]!=" ");else{let F=A.substr(U,$-U);if($>5&&F==="xml")return N("InvalidXml","XML declaration allowed only at the start of the document.",v(A,$));if(A[$]=="?"&&A[$+1]==">"){$++;break}}return $}function p(A,$){if(A.length>$+5&&A[$+1]==="-"&&A[$+2]==="-"){for($+=3;$<A.length;$++)if(A[$]==="-"&&A[$+1]==="-"&&A[$+2]===">"){$+=2;break}}else if(A.length>$+8&&A[$+1]==="D"&&A[$+2]==="O"&&A[$+3]==="C"&&A[$+4]==="T"&&A[$+5]==="Y"&&A[$+6]==="P"&&A[$+7]==="E"){let U=1;for($+=8;$<A.length;$++)if(A[$]==="<")U++;else if(A[$]===">"&&(U--,U===0))break}else if(A.length>$+9&&A[$+1]==="["&&A[$+2]==="C"&&A[$+3]==="D"&&A[$+4]==="A"&&A[$+5]==="T"&&A[$+6]==="A"&&A[$+7]==="["){for($+=8;$<A.length;$++)if(A[$]==="]"&&A[$+1]==="]"&&A[$+2]===">"){$+=2;break}}return $}let u='"',d="'";function y(A,$){let U="",F="",b=!1;for(;$<A.length;$++){if(A[$]===u||A[$]===d)F===""?F=A[$]:F!==A[$]||(F="");else if(A[$]===">"&&F===""){b=!0;break}U+=A[$]}return F===""&&{value:U,index:$,tagClosed:b}}let R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function S(A,$){let U=n(A,R),F={};for(let b=0;b<U.length;b++){if(U[b][1].length===0)return N("InvalidAttr","Attribute '"+U[b][2]+"' has no space in starting.",J(U[b]));if(U[b][3]!==void 0&&U[b][4]===void 0)return N("InvalidAttr","Attribute '"+U[b][2]+"' is without value.",J(U[b]));if(U[b][3]===void 0&&!$.allowBooleanAttributes)return N("InvalidAttr","boolean attribute '"+U[b][2]+"' is not allowed.",J(U[b]));let l=U[b][2];if(!G(l))return N("InvalidAttr","Attribute '"+l+"' is an invalid name.",J(U[b]));if(F.hasOwnProperty(l))return N("InvalidAttr","Attribute '"+l+"' is repeated.",J(U[b]));F[l]=1}return!0}function T(A,$){if(A[++$]===";")return-1;if(A[$]==="#")return function(F,b){let l=/\d/;for(F[b]==="x"&&(b++,l=/[\da-fA-F]/);b<F.length;b++){if(F[b]===";")return b;if(!F[b].match(l))break}return-1}(A,++$);let U=0;for(;$<A.length;$++,U++)if(!(A[$].match(/\w/)&&U<20)){if(A[$]===";")break;return-1}return $}function N(A,$,U){return{err:{code:A,msg:$,line:U.line||U,col:U.col}}}function G(A){return c(A)}function v(A,$){let U=A.substring(0,$).split(/\r?\n/);return{line:U.length,col:U[U.length-1].length+1}}function J(A){return A.startIndex+A[1].length}let K={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(A,$){return $},attributeValueProcessor:function(A,$){return $},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(A,$,U){return A},captureMetaData:!1},D;D=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class E{constructor(A){this.tagname=A,this.child=[],this[":@"]={}}add(A,$){A==="__proto__"&&(A="#__proto__"),this.child.push({[A]:$})}addChild(A,$){A.tagname==="__proto__"&&(A.tagname="#__proto__"),A[":@"]&&Object.keys(A[":@"]).length>0?this.child.push({[A.tagname]:A.child,":@":A[":@"]}):this.child.push({[A.tagname]:A.child}),$!==void 0&&(this.child[this.child.length-1][D]={startIndex:$})}static getMetaDataSymbol(){return D}}function ht(A,$){let U={};if(A[$+3]!=="O"||A[$+4]!=="C"||A[$+5]!=="T"||A[$+6]!=="Y"||A[$+7]!=="P"||A[$+8]!=="E")throw Error("Invalid Tag instead of DOCTYPE");{$+=9;let F=1,b=!1,l=!1,B="";for(;$<A.length;$++)if(A[$]!=="<"||l)if(A[$]===">"){if(l?A[$-1]==="-"&&A[$-2]==="-"&&(l=!1,F--):F--,F===0)break}else A[$]==="["?b=!0:B+=A[$];else{if(b&&It(A,"!ENTITY",$)){let k,P;$+=7,[k,P,$]=it(A,$+1),P.indexOf("&")===-1&&(U[k]={regx:RegExp(`&${k};`,"g"),val:P})}else if(b&&It(A,"!ELEMENT",$)){$+=8;let{index:k}=or(A,$+1);$=k}else if(b&&It(A,"!ATTLIST",$))$+=8;else if(b&&It(A,"!NOTATION",$)){$+=9;let{index:k}=q(A,$+1);$=k}else{if(!It(A,"!--",$))throw Error("Invalid DOCTYPE");l=!0}F++,B=""}if(F!==0)throw Error("Unclosed DOCTYPE")}return{entities:U,i:$}}let Rt=(A,$)=>{for(;$<A.length&&/\s/.test(A[$]);)$++;return $};function it(A,$){$=Rt(A,$);let U="";for(;$<A.length&&!/\s/.test(A[$])&&A[$]!=='"'&&A[$]!=="'";)U+=A[$],$++;if(Fr(U),$=Rt(A,$),A.substring($,$+6).toUpperCase()==="SYSTEM")throw Error("External entities are not supported");if(A[$]==="%")throw Error("Parameter entities are not supported");let F="";return[$,F]=gt(A,$,"entity"),[U,F,--$]}function q(A,$){$=Rt(A,$);let U="";for(;$<A.length&&!/\s/.test(A[$]);)U+=A[$],$++;Fr(U),$=Rt(A,$);let F=A.substring($,$+6).toUpperCase();if(F!=="SYSTEM"&&F!=="PUBLIC")throw Error(`Expected SYSTEM or PUBLIC, found "${F}"`);$+=F.length,$=Rt(A,$);let b=null,l=null;if(F==="PUBLIC")[$,b]=gt(A,$,"publicIdentifier"),A[$=Rt(A,$)]!=='"'&&A[$]!=="'"||([$,l]=gt(A,$,"systemIdentifier"));else if(F==="SYSTEM"&&([$,l]=gt(A,$,"systemIdentifier"),!l))throw Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:U,publicIdentifier:b,systemIdentifier:l,index:--$}}function gt(A,$,U){let F="",b=A[$];if(b!=='"'&&b!=="'")throw Error(`Expected quoted string, found "${b}"`);for($++;$<A.length&&A[$]!==b;)F+=A[$],$++;if(A[$]!==b)throw Error(`Unterminated ${U} value`);return[++$,F]}function or(A,$){$=Rt(A,$);let U="";for(;$<A.length&&!/\s/.test(A[$]);)U+=A[$],$++;if(!Fr(U))throw Error(`Invalid element name: "${U}"`);let F="";if(A[$=Rt(A,$)]==="E"&&It(A,"MPTY",$))$+=4;else if(A[$]==="A"&&It(A,"NY",$))$+=2;else{if(A[$]!=="(")throw Error(`Invalid Element Expression, found "${A[$]}"`);for($++;$<A.length&&A[$]!==")";)F+=A[$],$++;if(A[$]!==")")throw Error("Unterminated content model")}return{elementName:U,contentModel:F.trim(),index:$}}function It(A,$,U){for(let F=0;F<$.length;F++)if($[F]!==A[U+F+1])return!1;return!0}function Fr(A){if(c(A))return A;throw Error(`Invalid entity name ${A}`)}let on=/^[-+]?0x[a-fA-F0-9]+$/,fo=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,x={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},Ot=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function hr(A){return typeof A=="function"?A:Array.isArray(A)?($)=>{for(let U of A){if(typeof U=="string"&&$===U)return!0;if(U instanceof RegExp&&U.test($))return!0}}:()=>!1}class Hr{constructor(A){this.options=A,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:($,U)=>String.fromCodePoint(Number.parseInt(U,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:($,U)=>String.fromCodePoint(Number.parseInt(U,16))}},this.addExternalEntities=br,this.parseXml=Lr,this.parseTextData=Ht,this.resolveNameSpace=Ct,this.buildAttributesMap=ar,this.isItStopNode=mo,this.replaceEntitiesValue=wr,this.readStopNodeData=$r,this.saveTextToParentTag=Yo,this.addChild=Se,this.ignoreAttributesFn=hr(this.options.ignoreAttributes)}}function br(A){let $=Object.keys(A);for(let U=0;U<$.length;U++){let F=$[U];this.lastEntities[F]={regex:new RegExp("&"+F+";","g"),val:A[F]}}}function Ht(A,$,U,F,b,l,B){if(A!==void 0&&(this.options.trimValues&&!F&&(A=A.trim()),A.length>0)){B||(A=this.replaceEntitiesValue(A));let k=this.options.tagValueProcessor($,A,U,b,l);return k==null?A:typeof k!=typeof A||k!==A?k:this.options.trimValues||A.trim()===A?cr(A,this.options.parseTagValue,this.options.numberParseOptions):A}}function Ct(A){if(this.options.removeNSPrefix){let $=A.split(":"),U=A.charAt(0)==="/"?"/":"";if($[0]==="xmlns")return"";$.length===2&&(A=U+$[1])}return A}let mr=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ar(A,$,U){if(this.options.ignoreAttributes!==!0&&typeof A=="string"){let F=n(A,mr),b=F.length,l={};for(let B=0;B<b;B++){let k=this.resolveNameSpace(F[B][1]);if(this.ignoreAttributesFn(k,$))continue;let P=F[B][4],tt=this.options.attributeNamePrefix+k;if(k.length)if(this.options.transformAttributeName&&(tt=this.options.transformAttributeName(tt)),tt==="__proto__"&&(tt="#__proto__"),P!==void 0){this.options.trimValues&&(P=P.trim()),P=this.replaceEntitiesValue(P);let mt=this.options.attributeValueProcessor(k,P,$);l[tt]=mt==null?P:typeof mt!=typeof P||mt!==P?mt:cr(P,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(l[tt]=!0)}if(!Object.keys(l).length)return;if(this.options.attributesGroupName){let B={};return B[this.options.attributesGroupName]=l,B}return l}}let Lr=function(A){A=A.replace(/\r\n?/g,`
`);let $=new E("!xml"),U=$,F="",b="";for(let l=0;l<A.length;l++)if(A[l]==="<")if(A[l+1]==="/"){let B=ae(A,">",l,"Closing Tag is not closed."),k=A.substring(l+2,B).trim();if(this.options.removeNSPrefix){let mt=k.indexOf(":");mt!==-1&&(k=k.substr(mt+1))}this.options.transformTagName&&(k=this.options.transformTagName(k)),U&&(F=this.saveTextToParentTag(F,U,b));let P=b.substring(b.lastIndexOf(".")+1);if(k&&this.options.unpairedTags.indexOf(k)!==-1)throw Error(`Unpaired tag can not be used as closing tag: </${k}>`);let tt=0;P&&this.options.unpairedTags.indexOf(P)!==-1?(tt=b.lastIndexOf(".",b.lastIndexOf(".")-1),this.tagsNodeStack.pop()):tt=b.lastIndexOf("."),b=b.substring(0,tt),U=this.tagsNodeStack.pop(),F="",l=B}else if(A[l+1]==="?"){let B=xr(A,l,!1,"?>");if(!B)throw Error("Pi Tag is not closed.");if(F=this.saveTextToParentTag(F,U,b),this.options.ignoreDeclaration&&B.tagName==="?xml"||this.options.ignorePiTags);else{let k=new E(B.tagName);k.add(this.options.textNodeName,""),B.tagName!==B.tagExp&&B.attrExpPresent&&(k[":@"]=this.buildAttributesMap(B.tagExp,b,B.tagName)),this.addChild(U,k,b,l)}l=B.closeIndex+1}else if(A.substr(l+1,3)==="!--"){let B=ae(A,"-->",l+4,"Comment is not closed.");if(this.options.commentPropName){let k=A.substring(l+4,B-2);F=this.saveTextToParentTag(F,U,b),U.add(this.options.commentPropName,[{[this.options.textNodeName]:k}])}l=B}else if(A.substr(l+1,2)==="!D"){let B=ht(A,l);this.docTypeEntities=B.entities,l=B.i}else if(A.substr(l+1,2)==="!["){let B=ae(A,"]]>",l,"CDATA is not closed.")-2,k=A.substring(l+9,B);F=this.saveTextToParentTag(F,U,b);let P=this.parseTextData(k,U.tagname,b,!0,!1,!0,!0);P==null&&(P=""),this.options.cdataPropName?U.add(this.options.cdataPropName,[{[this.options.textNodeName]:k}]):U.add(this.options.textNodeName,P),l=B+2}else{let B=xr(A,l,this.options.removeNSPrefix),k=B.tagName,P=B.rawTagName,tt=B.tagExp,mt=B.attrExpPresent,yt=B.closeIndex;this.options.transformTagName&&(k=this.options.transformTagName(k)),U&&F&&U.tagname!=="!xml"&&(F=this.saveTextToParentTag(F,U,b,!1));let kt=U;kt&&this.options.unpairedTags.indexOf(kt.tagname)!==-1&&(U=this.tagsNodeStack.pop(),b=b.substring(0,b.lastIndexOf("."))),k!==$.tagname&&(b+=b?"."+k:k);let Dt=l;if(this.isItStopNode(this.options.stopNodes,b,k)){let Xt="";if(tt.length>0&&tt.lastIndexOf("/")===tt.length-1)k[k.length-1]==="/"?(k=k.substr(0,k.length-1),b=b.substr(0,b.length-1),tt=k):tt=tt.substr(0,tt.length-1),l=B.closeIndex;else if(this.options.unpairedTags.indexOf(k)!==-1)l=B.closeIndex;else{let ho=this.readStopNodeData(A,P,yt+1);if(!ho)throw Error(`Unexpected end of ${P}`);l=ho.i,Xt=ho.tagContent}let kr=new E(k);k!==tt&&mt&&(kr[":@"]=this.buildAttributesMap(tt,b,k)),Xt&&(Xt=this.parseTextData(Xt,k,b,!0,mt,!0,!0)),b=b.substr(0,b.lastIndexOf(".")),kr.add(this.options.textNodeName,Xt),this.addChild(U,kr,b,Dt)}else{if(tt.length>0&&tt.lastIndexOf("/")===tt.length-1){k[k.length-1]==="/"?(k=k.substr(0,k.length-1),b=b.substr(0,b.length-1),tt=k):tt=tt.substr(0,tt.length-1),this.options.transformTagName&&(k=this.options.transformTagName(k));let Xt=new E(k);k!==tt&&mt&&(Xt[":@"]=this.buildAttributesMap(tt,b,k)),this.addChild(U,Xt,b,Dt),b=b.substr(0,b.lastIndexOf("."))}else{let Xt=new E(k);this.tagsNodeStack.push(U),k!==tt&&mt&&(Xt[":@"]=this.buildAttributesMap(tt,b,k)),this.addChild(U,Xt,b,Dt),U=Xt}F="",l=yt}}else F+=A[l];return $.child};function Se(A,$,U,F){this.options.captureMetaData||(F=void 0);let b=this.options.updateTag($.tagname,U,$[":@"]);b===!1||(typeof b=="string"?($.tagname=b,A.addChild($,F)):A.addChild($,F))}let wr=function(A){if(this.options.processEntities){for(let $ in this.docTypeEntities){let U=this.docTypeEntities[$];A=A.replace(U.regx,U.val)}for(let $ in this.lastEntities){let U=this.lastEntities[$];A=A.replace(U.regex,U.val)}if(this.options.htmlEntities)for(let $ in this.htmlEntities){let U=this.htmlEntities[$];A=A.replace(U.regex,U.val)}A=A.replace(this.ampEntity.regex,this.ampEntity.val)}return A};function Yo(A,$,U,F){return A&&(F===void 0&&(F=$.child.length===0),(A=this.parseTextData(A,$.tagname,U,!1,!!$[":@"]&&Object.keys($[":@"]).length!==0,F))!==void 0&&A!==""&&$.add(this.options.textNodeName,A),A=""),A}function mo(A,$,U){let F="*."+U;for(let b in A){let l=A[b];if(F===l||$===l)return!0}return!1}function ae(A,$,U,F){let b=A.indexOf($,U);if(b===-1)throw Error(F);return b+$.length-1}function xr(A,$,U,F=">"){let b=function(yt,kt,Dt=">"){let Xt,kr="";for(let ho=kt;ho<yt.length;ho++){let nn=yt[ho];if(Xt)nn===Xt&&(Xt="");else if(nn==='"'||nn==="'")Xt=nn;else if(nn===Dt[0]){if(!Dt[1])return{data:kr,index:ho};if(yt[ho+1]===Dt[1])return{data:kr,index:ho}}else nn==="\t"&&(nn=" ");kr+=nn}}(A,$+1,F);if(!b)return;let{data:l,index:B}=b,k=l.search(/\s/),P=l,tt=!0;k!==-1&&(P=l.substring(0,k),l=l.substring(k+1).trimStart());let mt=P;if(U){let yt=P.indexOf(":");yt!==-1&&(P=P.substr(yt+1),tt=P!==b.data.substr(yt+1))}return{tagName:P,tagExp:l,closeIndex:B,attrExpPresent:tt,rawTagName:mt}}function $r(A,$,U){let F=U,b=1;for(;U<A.length;U++)if(A[U]==="<")if(A[U+1]==="/"){let l=ae(A,">",U,`${$} is not closed`);if(A.substring(U+2,l).trim()===$&&(b--,b===0))return{tagContent:A.substring(F,U),i:l};U=l}else if(A[U+1]==="?")U=ae(A,"?>",U+1,"StopNode is not closed.");else if(A.substr(U+1,3)==="!--")U=ae(A,"-->",U+3,"StopNode is not closed.");else if(A.substr(U+1,2)==="![")U=ae(A,"]]>",U,"StopNode is not closed.")-2;else{let l=xr(A,U,">");l&&((l&&l.tagName)===$&&l.tagExp[l.tagExp.length-1]!=="/"&&b++,U=l.closeIndex)}}function cr(A,$,U){if($&&typeof A=="string"){let F=A.trim();return F==="true"||F!=="false"&&function(b,l={}){if(l=Object.assign({},x,l),!b||typeof b!="string")return b;let B=b.trim();if(l.skipLike!==void 0&&l.skipLike.test(B))return b;if(b==="0")return 0;if(l.hex&&on.test(B))return function(P){if(parseInt)return parseInt(P,16);if(Number.parseInt)return Number.parseInt(P,16);if(window&&window.parseInt)return window.parseInt(P,16);throw Error("parseInt, Number.parseInt, window.parseInt are not supported")}(B);if(B.search(/.+[eE].+/)!==-1)return function(P,tt,mt){if(!mt.eNotation)return P;let yt=tt.match(Ot);if(yt){let kt=yt[1]||"",Dt=yt[3].indexOf("e")===-1?"E":"e",Xt=yt[2],kr=kt?P[Xt.length+1]===Dt:P[Xt.length]===Dt;return Xt.length>1&&kr?P:Xt.length!==1||!yt[3].startsWith(`.${Dt}`)&&yt[3][0]!==Dt?mt.leadingZeros&&!kr?(tt=(yt[1]||"")+yt[3],Number(tt)):P:Number(tt)}return P}(b,B,l);{let P=fo.exec(B);if(P){let tt=P[1]||"",mt=P[2],yt=(k=P[3])&&k.indexOf(".")!==-1?((k=k.replace(/0+$/,""))==="."?k="0":k[0]==="."?k="0"+k:k[k.length-1]==="."&&(k=k.substring(0,k.length-1)),k):k,kt=tt?b[mt.length+1]===".":b[mt.length]===".";if(!l.leadingZeros&&(mt.length>1||mt.length===1&&!kt))return b;{let Dt=Number(B),Xt=String(Dt);if(Dt===0||Dt===-0)return Dt;if(Xt.search(/[eE]/)!==-1)return l.eNotation?Dt:b;if(B.indexOf(".")!==-1)return Xt==="0"||Xt===yt||Xt===`${tt}${yt}`?Dt:b;let kr=mt?yt:B;return mt?kr===Xt||tt+kr===Xt?Dt:b:kr===Xt||kr===tt+Xt?Dt:b}}return b}var k}(A,U)}return A!==void 0?A:""}let _e=E.getMetaDataSymbol();function lc(A,$){return Fc(A,$)}function Fc(A,$,U){let F,b={};for(let l=0;l<A.length;l++){let B=A[l],k=rt(B),P="";if(P=U===void 0?k:U+"."+k,k===$.textNodeName)F===void 0?F=B[k]:F+=""+B[k];else{if(k===void 0)continue;if(B[k]){let tt=Fc(B[k],$,P),mt=ie(tt,$);B[_e]!==void 0&&(tt[_e]=B[_e]),B[":@"]?Bs(tt,B[":@"],P,$):Object.keys(tt).length!==1||tt[$.textNodeName]===void 0||$.alwaysCreateTextNode?Object.keys(tt).length===0&&($.alwaysCreateTextNode?tt[$.textNodeName]="":tt=""):tt=tt[$.textNodeName],b[k]!==void 0&&b.hasOwnProperty(k)?(Array.isArray(b[k])||(b[k]=[b[k]]),b[k].push(tt)):$.isArray(k,P,mt)?b[k]=[tt]:b[k]=tt}}}return typeof F=="string"?F.length>0&&(b[$.textNodeName]=F):F!==void 0&&(b[$.textNodeName]=F),b}function rt(A){let $=Object.keys(A);for(let U=0;U<$.length;U++){let F=$[U];if(F!==":@")return F}}function Bs(A,$,U,F){if($){let b=Object.keys($),l=b.length;for(let B=0;B<l;B++){let k=b[B];F.isArray(k,U+"."+k,!0,!0)?A[k]=[$[k]]:A[k]=$[k]}}}function ie(A,$){let{textNodeName:U}=$,F=Object.keys(A).length;return F===0||!(F!==1||!A[U]&&typeof A[U]!="boolean"&&A[U]!==0)}class Oh{constructor(A){this.externalEntities={},this.options=function($){return Object.assign({},K,$)}(A)}parse(A,$){if(typeof A=="string");else{if(!A.toString)throw Error("XML data is accepted in String or Bytes[] form.");A=A.toString()}if($){$===!0&&($={});let b=f(A,$);if(b!==!0)throw Error(`${b.err.msg}:${b.err.line}:${b.err.col}`)}let U=new Hr(this.options);U.addExternalEntities(this.externalEntities);let F=U.parseXml(A);return this.options.preserveOrder||F===void 0?F:lc(F,this.options)}addEntity(A,$){if($.indexOf("&")!==-1)throw Error("Entity value can't have '&'");if(A.indexOf("&")!==-1||A.indexOf(";")!==-1)throw Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if($==="&")throw Error("An entity with value '&' is not permitted");this.externalEntities[A]=$}static getMetaDataSymbol(){return E.getMetaDataSymbol()}}function pd(A,$){let U="";return $.format&&$.indentBy.length>0&&(U=`
`),gn(A,$,"",U)}function gn(A,$,U,F){let b="",l=!1;for(let B=0;B<A.length;B++){let k=A[B],P=ud(k);if(P===void 0)continue;let tt="";if(tt=U.length===0?P:`${U}.${P}`,P===$.textNodeName){let Dt=k[P];Lc(tt,$)||(Dt=$.tagValueProcessor(P,Dt),Dt=Rh(Dt,$)),l&&(b+=F),b+=Dt,l=!1;continue}if(P===$.cdataPropName){l&&(b+=F),b+=`<![CDATA[${k[P][0][$.textNodeName]}]]>`,l=!1;continue}if(P===$.commentPropName){b+=F+`<!--${k[P][0][$.textNodeName]}-->`,l=!0;continue}if(P[0]==="?"){let Dt=Rf(k[":@"],$),Xt=P==="?xml"?"":F,kr=k[P][0][$.textNodeName];kr=kr.length!==0?" "+kr:"",b+=Xt+`<${P}${kr}${Dt}?>`,l=!0;continue}let mt=F;mt!==""&&(mt+=$.indentBy);let yt=F+`<${P}${Rf(k[":@"],$)}`,kt=gn(k[P],$,tt,mt);$.unpairedTags.indexOf(P)!==-1?$.suppressUnpairedNode?b+=yt+">":b+=yt+"/>":kt&&kt.length!==0||!$.suppressEmptyNode?kt&&kt.endsWith(">")?b+=yt+`>${kt}${F}</${P}>`:(b+=yt+">",kt&&F!==""&&(kt.includes("/>")||kt.includes("</"))?b+=F+$.indentBy+kt+F:b+=kt,b+=`</${P}>`):b+=yt+"/>",l=!0}return b}function ud(A){let $=Object.keys(A);for(let U=0;U<$.length;U++){let F=$[U];if(A.hasOwnProperty(F)&&F!==":@")return F}}function Rf(A,$){let U="";if(A&&!$.ignoreAttributes)for(let F in A){if(!A.hasOwnProperty(F))continue;let b=$.attributeValueProcessor(F,A[F]);b=Rh(b,$),b===!0&&$.suppressBooleanAttributes?U+=` ${F.substr($.attributeNamePrefix.length)}`:U+=` ${F.substr($.attributeNamePrefix.length)}="${b}"`}return U}function Lc(A,$){let U=(A=A.substr(0,A.length-$.textNodeName.length-1)).substr(A.lastIndexOf(".")+1);for(let F in $.stopNodes)if($.stopNodes[F]===A||$.stopNodes[F]==="*."+U)return!0;return!1}function Rh(A,$){if(A&&A.length>0&&$.processEntities)for(let U=0;U<$.entities.length;U++){let F=$.entities[U];A=A.replace(F.regex,F.val)}return A}let dd={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(A,$){return $},attributeValueProcessor:function(A,$){return $},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Or(A){this.options=Object.assign({},dd,A),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=hr(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Th),this.processTextOrObjNode=Ih,this.options.format?(this.indentate=yd,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function Ih(A,$,U,F){let b=this.j2x(A,U+1,F.concat($));return A[this.options.textNodeName]!==void 0&&Object.keys(A).length===1?this.buildTextValNode(A[this.options.textNodeName],$,b.attrStr,U):this.buildObjectNode(b.val,$,b.attrStr,U)}function yd(A){return this.options.indentBy.repeat(A)}function Th(A){return!(!A.startsWith(this.options.attributeNamePrefix)||A===this.options.textNodeName)&&A.substr(this.attrPrefixLen)}Or.prototype.build=function(A){return this.options.preserveOrder?pd(A,this.options):(Array.isArray(A)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(A={[this.options.arrayNodeName]:A}),this.j2x(A,0,[]).val)},Or.prototype.j2x=function(A,$,U){let F="",b="",l=U.join(".");for(let B in A)if(Object.prototype.hasOwnProperty.call(A,B))if(A[B]===void 0)this.isAttribute(B)&&(b+="");else if(A[B]===null)this.isAttribute(B)||B===this.options.cdataPropName?b+="":B[0]==="?"?b+=this.indentate($)+"<"+B+"?"+this.tagEndChar:b+=this.indentate($)+"<"+B+"/"+this.tagEndChar;else if(A[B]instanceof Date)b+=this.buildTextValNode(A[B],B,"",$);else if(typeof A[B]!="object"){let k=this.isAttribute(B);if(k&&!this.ignoreAttributesFn(k,l))F+=this.buildAttrPairStr(k,""+A[B]);else if(!k)if(B===this.options.textNodeName){let P=this.options.tagValueProcessor(B,""+A[B]);b+=this.replaceEntitiesValue(P)}else b+=this.buildTextValNode(A[B],B,"",$)}else if(Array.isArray(A[B])){let k=A[B].length,P="",tt="";for(let mt=0;mt<k;mt++){let yt=A[B][mt];if(yt===void 0);else if(yt===null)B[0]==="?"?b+=this.indentate($)+"<"+B+"?"+this.tagEndChar:b+=this.indentate($)+"<"+B+"/"+this.tagEndChar;else if(typeof yt=="object")if(this.options.oneListGroup){let kt=this.j2x(yt,$+1,U.concat(B));P+=kt.val,this.options.attributesGroupName&&yt.hasOwnProperty(this.options.attributesGroupName)&&(tt+=kt.attrStr)}else P+=this.processTextOrObjNode(yt,B,$,U);else if(this.options.oneListGroup){let kt=this.options.tagValueProcessor(B,yt);kt=this.replaceEntitiesValue(kt),P+=kt}else P+=this.buildTextValNode(yt,B,"",$)}this.options.oneListGroup&&(P=this.buildObjectNode(P,B,tt,$)),b+=P}else if(this.options.attributesGroupName&&B===this.options.attributesGroupName){let k=Object.keys(A[B]),P=k.length;for(let tt=0;tt<P;tt++)F+=this.buildAttrPairStr(k[tt],""+A[B][k[tt]])}else b+=this.processTextOrObjNode(A[B],B,$,U);return{attrStr:F,val:b}},Or.prototype.buildAttrPairStr=function(A,$){return $=this.options.attributeValueProcessor(A,""+$),$=this.replaceEntitiesValue($),this.options.suppressBooleanAttributes&&$==="true"?" "+A:" "+A+'="'+$+'"'},Or.prototype.buildObjectNode=function(A,$,U,F){if(A==="")return $[0]==="?"?this.indentate(F)+"<"+$+U+"?"+this.tagEndChar:this.indentate(F)+"<"+$+U+this.closeTag($)+this.tagEndChar;{let b="</"+$+this.tagEndChar,l="";return $[0]==="?"&&(l="?",b=""),!U&&U!==""||A.indexOf("<")!==-1?this.options.commentPropName!==!1&&$===this.options.commentPropName&&l.length===0?this.indentate(F)+`<!--${A}-->`+this.newLine:this.indentate(F)+"<"+$+U+l+this.tagEndChar+A+this.indentate(F)+b:this.indentate(F)+"<"+$+U+l+">"+A+b}},Or.prototype.closeTag=function(A){let $="";return this.options.unpairedTags.indexOf(A)!==-1?this.options.suppressUnpairedNode||($="/"):$=this.options.suppressEmptyNode?"/":`></${A}`,$},Or.prototype.buildTextValNode=function(A,$,U,F){if(this.options.cdataPropName!==!1&&$===this.options.cdataPropName)return this.indentate(F)+`<![CDATA[${A}]]>`+this.newLine;if(this.options.commentPropName!==!1&&$===this.options.commentPropName)return this.indentate(F)+`<!--${A}-->`+this.newLine;if($[0]==="?")return this.indentate(F)+"<"+$+U+"?"+this.tagEndChar;{let b=this.options.tagValueProcessor($,A);return b=this.replaceEntitiesValue(b),b===""?this.indentate(F)+"<"+$+U+this.closeTag($)+this.tagEndChar:this.indentate(F)+"<"+$+U+">"+b+"</"+$+this.tagEndChar}},Or.prototype.replaceEntitiesValue=function(A){if(A&&A.length>0&&this.options.processEntities)for(let $=0;$<this.options.entities.length;$++){let U=this.options.entities[$];A=A.replace(U.regex,U.val)}return A};let Nh={validate:f};Pb.exports=r})()});var Qb=Q((Cb)=>{Object.defineProperty(Cb,"__esModule",{value:!0});Cb.parseXML=Wit;var kit=gb(),ZS=new kit.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,r)=>r.trim()===""&&r.includes(`
`)?"":void 0});ZS.addEntity("#xD","\r");ZS.addEntity("#10",`
`);function Wit(t){return ZS.parse(t,!0)}});var XS=Q((Kb)=>{var Bit=Qb();function Xit(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Jit(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}class BS{value;constructor(t){this.value=t}toString(){return Jit(""+this.value)}}class I0{name;children;attributes={};static of(t,r,e){let o=new I0(t);if(r!==void 0)o.addChildNode(new BS(r));if(e!==void 0)o.withName(e);return o}constructor(t,r=[]){this.name=t,this.children=r}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){if(r!=null)this.attributes[t]=r;return this}cc(t,r,e=r){if(t[r]!=null){let o=I0.of(r,t[r]).withName(e);this.c(o)}}l(t,r,e,o){if(t[r]!=null)o().map((c)=>{c.withName(e),this.c(c)})}lc(t,r,e,o){if(t[r]!=null){let n=o(),c=new I0(e);n.map((i)=>{c.c(i)}),this.c(c)}}toString(){let t=Boolean(this.children.length),r=`<${this.name}`,e=this.attributes;for(let o of Object.keys(e)){let n=e[o];if(n!=null)r+=` ${o}="${Xit(""+n)}"`}return r+=!t?"/>":`>${this.children.map((o)=>o.toString()).join("")}</${this.name}>`}}Object.defineProperty(Kb,"parseXML",{enumerable:!0,get:function(){return Bit.parseXML}});Kb.XmlNode=I0;Kb.XmlText=BS});var Vr=Q((pft)=>{var YS=tr(),fs=Kr(),Eb=_r(),git=Ge(),xb=yp(),qb=FS(),rr=so(),vn=z(),Re=di(),oe=pi(),Ii=Ke(),ol=ue(),xe=XS(),JS={warningEmitted:!1},Cit=(t)=>{if(t&&!JS.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<20)JS.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js ${t} in January 2026.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/c895JFp`)};function Qit(t,r,e){if(!t.$source)t.$source={};return t.$source[r]=e,t}function Kit(t,r,e){if(!t.__aws_sdk_context)t.__aws_sdk_context={features:{}};else if(!t.__aws_sdk_context.features)t.__aws_sdk_context.features={};t.__aws_sdk_context.features[r]=e}function Eit(t,r,e){if(!t.$source)t.$source={};return t.$source[r]=e,t}var Db=(t)=>YS.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,PS=(t)=>new Date(Date.now()+t),xit=(t,r)=>Math.abs(PS(r).getTime()-t)>=300000,Vb=(t,r)=>{let e=Date.parse(t);if(xit(e,r))return e-Date.now();return r},T0=(t,r)=>{if(!r)throw Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return r},gS=async(t)=>{let r=T0("context",t.context),e=T0("config",t.config),o=r.endpointV2?.properties?.authSchemes?.[0],c=await T0("signer",e.signer)(o),i=t?.signingRegion,f=t?.signingRegionSet,h=t?.signingName;return{config:e,signer:c,signingRegion:i,signingRegionSet:f,signingName:h}};class Rp{async sign(t,r,e){if(!YS.HttpRequest.isInstance(t))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await gS(e),{config:n,signer:c}=o,{signingRegion:i,signingName:f}=o,h=e.context;if(h?.authSchemes?.length??!1){let[p,u]=h.authSchemes;if(p?.name==="sigv4a"&&u?.name==="sigv4")i=u?.signingRegion??i,f=u?.signingName??f}return await c.sign(t,{signingDate:PS(n.systemClockOffset),signingRegion:i,signingService:f})}errorHandler(t){return(r)=>{let e=r.ServerTime??Db(r.$response);if(e){let o=T0("config",t.config),n=o.systemClockOffset;if(o.systemClockOffset=Vb(e,o.systemClockOffset),o.systemClockOffset!==n&&r.$metadata)r.$metadata.clockSkewCorrected=!0}throw r}}successHandler(t,r){let e=Db(t);if(e){let o=T0("config",r.config);o.systemClockOffset=Vb(e,o.systemClockOffset)}}}var qit=Rp;class nl extends Rp{async sign(t,r,e){if(!YS.HttpRequest.isInstance(t))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:n,signingRegion:c,signingRegionSet:i,signingName:f}=await gS(e),w=(await o.sigv4aSigningRegionSet?.()??i??[c]).join(",");return await n.sign(t,{signingDate:PS(o.systemClockOffset),signingRegion:w,signingService:f})}}var jb=(t)=>typeof t==="string"&&t.length>0?t.split(",").map((r)=>r.trim()):[],sl=(t)=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`,tl="AWS_AUTH_SCHEME_PREFERENCE",rl="auth_scheme_preference",Dit={environmentVariableSelector:(t,r)=>{if(r?.signingName){if(sl(r.signingName)in t)return["httpBearerAuth"]}if(!(tl in t))return;return jb(t[tl])},configFileSelector:(t)=>{if(!(rl in t))return;return jb(t[rl])},default:[]},Vit=(t)=>{return t.sigv4aSigningRegionSet=fs.normalizeProvider(t.sigv4aSigningRegionSet),t},jit={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map((r)=>r.trim());throw new Eb.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map((r)=>r.trim());throw new Eb.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0},cl=(t)=>{let r=t.credentials,e=!!t.credentials,o=void 0;Object.defineProperty(t,"credentials",{set(w){if(w&&w!==r&&w!==o)e=!0;r=w;let p=rft(t,{credentials:r,credentialDefaultProvider:t.credentialDefaultProvider}),u=eft(t,p);if(e&&!u.attributed){let d=typeof r==="object"&&r!==null;o=async(y)=>{let S=await u(y);if(d&&(!S.$source||Object.keys(S.$source).length===0))return git.setCredentialFeature(S,"CREDENTIALS_CODE","e");return S},o.memoized=u.memoized,o.configBound=u.configBound,o.attributed=!0}else o=u},get(){return o},enumerable:!0,configurable:!0}),t.credentials=r;let{signingEscapePath:n=!0,systemClockOffset:c=t.systemClockOffset||0,sha256:i}=t,f;if(t.signer)f=fs.normalizeProvider(t.signer);else if(t.regionInfoProvider)f=()=>fs.normalizeProvider(t.region)().then(async(w)=>[await t.regionInfoProvider(w,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},w]).then(([w,p])=>{let{signingRegion:u,signingService:d}=w;t.signingRegion=t.signingRegion||u||p,t.signingName=t.signingName||d||t.serviceId;let y={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:n};return new(t.signerConstructor||xb.SignatureV4)(y)});else f=async(w)=>{w=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await fs.normalizeProvider(t.region)(),properties:{}},w);let{signingRegion:p,signingName:u}=w;t.signingRegion=t.signingRegion||p,t.signingName=t.signingName||u||t.serviceId;let d={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:n};return new(t.signerConstructor||xb.SignatureV4)(d)};return Object.assign(t,{systemClockOffset:c,signingEscapePath:n,signer:f})},tft=cl;function rft(t,{credentials:r,credentialDefaultProvider:e}){let o;if(r)if(!r?.memoized)o=fs.memoizeIdentityProvider(r,fs.isIdentityExpired,fs.doesIdentityRequireRefresh);else o=r;else if(e)o=fs.normalizeProvider(e(Object.assign({},t,{parentClientConfig:t})));else o=async()=>{throw Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")};return o.memoized=!0,o}function eft(t,r){if(r.configBound)return r;let e=async(o)=>r({...o,callerClientConfig:t});return e.memoized=r.memoized,e.configBound=!0,e}class Ti{queryCompat;constructor(t=!1){this.queryCompat=t}resolveRestContentType(t,r){let e=r.getMemberSchemas(),o=Object.values(e).find((n)=>{return!!n.getMergedTraits().httpPayload});if(o){let n=o.getMergedTraits().mediaType;if(n)return n;else if(o.isStringSchema())return"text/plain";else if(o.isBlobSchema())return"application/octet-stream";else return t}else if(!r.isUnitSchema()){if(Object.values(e).find((c)=>{let{httpQuery:i,httpQueryParams:f,httpHeader:h,httpLabel:w,httpPrefixHeaders:p}=c.getMergedTraits();return!i&&!f&&!h&&!w&&p===void 0}))return t}}async getErrorSchemaOrThrowBaseException(t,r,e,o,n,c){let i=r,f=t;if(t.includes("#"))[i,f]=t.split("#");let h={$metadata:n,$fault:e.statusCode<500?"client":"server"},w=rr.TypeRegistry.for(i);try{return{errorSchema:c?.(w,f)??w.getSchema(t),errorMetadata:h}}catch(p){o.message=o.message??o.Message??"UnknownError";let u=rr.TypeRegistry.for("smithy.ts.sdk.synthetic."+i),d=u.getBaseException();if(d){let y=u.getErrorCtor(d)??Error;throw this.decorateServiceException(Object.assign(new y({name:f}),h),o)}throw this.decorateServiceException(Object.assign(Error(f),h),o)}}decorateServiceException(t,r={}){if(this.queryCompat){let e=t.Message??r.Message,o=vn.decorateServiceException(t,r);if(e)o.message=e;o.Error={...o.Error,Type:o.Error.Type,Code:o.Error.Code,Message:o.Error.message??o.Error.Message??e};let n=o.$metadata.requestId;if(n)o.RequestId=n;return o}return vn.decorateServiceException(t,r)}setQueryCompatError(t,r){let e=r.headers?.["x-amzn-query-error"];if(t!==void 0&&e!=null){let[o,n]=e.split(";"),c=Object.entries(t),i={Code:o,Type:n};Object.assign(t,i);for(let[f,h]of c)i[f==="message"?"Message":f]=h;delete i.__type,t.Error=i}}queryCompatOutput(t,r){if(t.Error)r.Error=t.Error;if(t.Type)r.Type=t.Type;if(t.Code)r.Code=t.Code}findQueryCompatibleError(t,r){try{return t.getSchema(r)}catch(e){return t.find((o)=>rr.NormalizedSchema.of(o).getMergedTraits().awsQueryError?.[0]===r)}}}class il extends qb.SmithyRpcV2CborProtocol{awsQueryCompatible;mixin;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t});this.awsQueryCompatible=!!r,this.mixin=new Ti(this.awsQueryCompatible)}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e);if(this.awsQueryCompatible)o.headers["x-amzn-query-mode"]="true";return o}async handleError(t,r,e,o,n){if(this.awsQueryCompatible)this.mixin.setQueryCompatError(o,e);let c=(()=>{let y=e.headers["x-amzn-query-error"];if(y&&this.awsQueryCompatible)return y.split(";")[0];return qb.loadSmithyRpcV2CborErrorCode(e,o)??"Unknown"})(),{errorSchema:i,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,o,n,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),h=rr.NormalizedSchema.of(i),w=o.message??o.Message??"Unknown",u=new(rr.TypeRegistry.for(i[1]).getErrorCtor(i)??Error)(w),d={};for(let[y,R]of h.structIterator())if(o[y]!=null)d[y]=this.deserializer.readValue(R,o[y]);if(this.awsQueryCompatible)this.mixin.queryCompatOutput(o,d);throw this.mixin.decorateServiceException(Object.assign(u,f,{$fault:h.getMergedTraits().error,message:w},d),o)}}var oft=(t)=>{if(t==null)return t;if(typeof t==="number"||typeof t==="bigint"){let r=Error(`Received number ${t} where a string was expected.`);return r.name="Warning",console.warn(r),String(t)}if(typeof t==="boolean"){let r=Error(`Received boolean ${t} where a string was expected.`);return r.name="Warning",console.warn(r),String(t)}return t},nft=(t)=>{if(t==null)return t;if(typeof t==="string"){let r=t.toLowerCase();if(t!==""&&r!=="false"&&r!=="true"){let e=Error(`Received string "${t}" where a boolean was expected.`);e.name="Warning",console.warn(e)}return t!==""&&r!=="false"}return t},sft=(t)=>{if(t==null)return t;if(typeof t==="string"){let r=Number(t);if(r.toString()!==t){let e=Error(`Received string "${t}" where a number was expected.`);return e.name="Warning",console.warn(e),t}return r}return t};class hs{serdeContext;setSerdeContext(t){this.serdeContext=t}}function*CS(t,r){if(t.isUnitSchema())return;let e=t.getSchema();for(let o=0;o<e[4].length;++o){let n=e[4][o],c=e[5][o],i=new rr.NormalizedSchema([c,0],n);if(!(n in r)&&!i.isIdempotencyToken())continue;yield[n,i]}}function*cft(t,r,e){if(t.isUnitSchema())return;let o=t.getSchema(),n=Object.keys(r).filter((c)=>c!=="__type").length;for(let c=0;c<o[4].length;++c){if(n===0)break;let i=o[4][c],f=o[5][c],h=new rr.NormalizedSchema([f,0],i),w=i;if(e)w=h.getMergedTraits()[e]??i;if(!(w in r))continue;yield[i,h],n-=1}}class QS{from;to;keys;constructor(t,r){this.from=t,this.to=r,this.keys=new Set(Object.keys(this.from).filter((e)=>e!=="__type"))}mark(t){this.keys.delete(t)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let t=this.keys.values().next().value,r=this.from[t];this.to.$unknown=[t,r]}}}function ift(t,r,e){if(e?.source){let o=e.source;if(typeof r==="number"){if(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER||o!==String(r))if(o.includes("."))return new oe.NumericValue(o,"bigDecimal");else return BigInt(o)}}return r}var fl=(t,r)=>vn.collectBody(t,r).then((e)=>(r?.utf8Encoder??ol.toUtf8)(e)),KS=(t,r)=>fl(t,r).then((e)=>{if(e.length)try{return JSON.parse(e)}catch(o){if(o?.name==="SyntaxError")Object.defineProperty(o,"$responseBodyText",{value:e});throw o}return{}}),fft=async(t,r)=>{let e=await KS(t,r);return e.message=e.message??e.Message,e},ES=(t,r)=>{let e=(c,i)=>Object.keys(c).find((f)=>f.toLowerCase()===i.toLowerCase()),o=(c)=>{let i=c;if(typeof i==="number")i=i.toString();if(i.indexOf(",")>=0)i=i.split(",")[0];if(i.indexOf(":")>=0)i=i.split(":")[0];if(i.indexOf("#")>=0)i=i.split("#")[1];return i},n=e(t.headers,"x-amzn-errortype");if(n!==void 0)return o(t.headers[n]);if(r&&typeof r==="object"){let c=e(r,"code");if(c&&r[c]!==void 0)return o(r[c]);if(r.__type!==void 0)return o(r.__type)}};class xS extends hs{settings;constructor(t){super();this.settings=t}async read(t,r){return this._read(t,typeof r==="string"?JSON.parse(r,ift):await KS(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let e=r!==null&&typeof r==="object",o=rr.NormalizedSchema.of(t);if(e){if(o.isStructSchema()){let c=r,i=o.isUnionSchema(),f={},h=void 0,{jsonName:w}=this.settings;if(w)h={};let p;if(i)p=new QS(c,f);for(let[u,d]of cft(o,c,w?"jsonName":!1)){let y=u;if(w)y=d.getMergedTraits().jsonName??y,h[y]=u;if(i)p.mark(y);if(c[y]!=null)f[u]=this._read(d,c[y])}if(i)p.writeUnknown();else if(typeof c.__type==="string")for(let[u,d]of Object.entries(c)){let y=w?h[u]??u:u;if(!(y in f))f[y]=d}return f}if(Array.isArray(r)&&o.isListSchema()){let c=o.getValueSchema(),i=[],f=!!o.getMergedTraits().sparse;for(let h of r)if(f||h!=null)i.push(this._read(c,h));return i}if(o.isMapSchema()){let c=o.getValueSchema(),i={},f=!!o.getMergedTraits().sparse;for(let[h,w]of Object.entries(r))if(f||w!=null)i[h]=this._read(c,w);return i}}if(o.isBlobSchema()&&typeof r==="string")return Ii.fromBase64(r);let n=o.getMergedTraits().mediaType;if(o.isStringSchema()&&typeof r==="string"&&n){if(n==="application/json"||n.endsWith("+json"))return oe.LazyJsonString.from(r);return r}if(o.isTimestampSchema()&&r!=null)switch(Re.determineTimestampFormat(o,this.settings)){case 5:return oe.parseRfc3339DateTimeWithOffset(r);case 6:return oe.parseRfc7231DateTime(r);case 7:return oe.parseEpochTimestamp(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(o.isBigIntegerSchema()&&(typeof r==="number"||typeof r==="string"))return BigInt(r);if(o.isBigDecimalSchema()&&r!=null){if(r instanceof oe.NumericValue)return r;let c=r;if(c.type==="bigDecimal"&&"string"in c)return new oe.NumericValue(c.string,c.type);return new oe.NumericValue(String(r),"bigDecimal")}if(o.isNumericSchema()&&typeof r==="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(o.isDocumentSchema())if(e){let c=Array.isArray(r)?[]:{};for(let[i,f]of Object.entries(r))if(f instanceof oe.NumericValue)c[i]=f;else c[i]=this._read(o,f);return c}else return structuredClone(r);return r}}var el=String.fromCharCode(925);class hl{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof oe.NumericValue){let e=`${el+"nv"+this.counter++}_`+r.string;return this.values.set(`"${e}"`,r.string),e}if(typeof r==="bigint"){let e=r.toString(),o=`${el+"b"+this.counter++}_`+e;return this.values.set(`"${o}"`,e),o}return r}}replaceInJson(t){if(this.stage===0)throw Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,e]of this.values)t=t.replace(r,e);return t}}class qS extends hs{settings;buffer;useReplacer=!1;rootSchema;constructor(t){super();this.settings=t}write(t,r){this.rootSchema=rr.NormalizedSchema.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){if(this.write(t,r),typeof this.buffer==="object")this.buffer.__type=rr.NormalizedSchema.of(t).getName(!0)}flush(){let{rootSchema:t,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,t?.isStructSchema()||t?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let e=new hl;return e.replaceInJson(JSON.stringify(this.buffer,e.createReplacer(),0))}return this.buffer}_write(t,r,e){let o=r!==null&&typeof r==="object",n=rr.NormalizedSchema.of(t);if(o){if(n.isStructSchema()){let c=r,i={},{jsonName:f}=this.settings,h=void 0;if(f)h={};for(let[w,p]of CS(n,c)){let u=this._write(p,c[w],n);if(u!==void 0){let d=w;if(f)d=p.getMergedTraits().jsonName??w,h[w]=d;i[d]=u}}if(n.isUnionSchema()&&Object.keys(i).length===0){let{$unknown:w}=c;if(Array.isArray(w)){let[p,u]=w;i[p]=this._write(15,u)}}else if(typeof c.__type==="string")for(let[w,p]of Object.entries(c)){let u=f?h[w]??w:w;if(!(u in i))i[u]=this._write(15,p)}return i}if(Array.isArray(r)&&n.isListSchema()){let c=n.getValueSchema(),i=[],f=!!n.getMergedTraits().sparse;for(let h of r)if(f||h!=null)i.push(this._write(c,h));return i}if(n.isMapSchema()){let c=n.getValueSchema(),i={},f=!!n.getMergedTraits().sparse;for(let[h,w]of Object.entries(r))if(f||w!=null)i[h]=this._write(c,w);return i}if(r instanceof Uint8Array&&(n.isBlobSchema()||n.isDocumentSchema())){if(n===this.rootSchema)return r;return(this.serdeContext?.base64Encoder??Ii.toBase64)(r)}if(r instanceof Date&&(n.isTimestampSchema()||n.isDocumentSchema()))switch(Re.determineTimestampFormat(n,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return oe.dateToUtcString(r);case 7:return r.getTime()/1000;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1000}if(r instanceof oe.NumericValue)this.useReplacer=!0}if(r===null&&e?.isStructSchema())return;if(n.isStringSchema()){if(typeof r>"u"&&n.isIdempotencyToken())return oe.generateIdempotencyToken();let c=n.getMergedTraits().mediaType;if(r!=null&&c){if(c==="application/json"||c.endsWith("+json"))return oe.LazyJsonString.from(r)}return r}if(typeof r==="number"&&n.isNumericSchema()){if(Math.abs(r)===1/0||isNaN(r))return String(r);return r}if(typeof r==="string"&&n.isBlobSchema()){if(n===this.rootSchema)return r;return(this.serdeContext?.base64Encoder??Ii.toBase64)(r)}if(typeof r==="bigint")this.useReplacer=!0;if(n.isDocumentSchema())if(o){let c=Array.isArray(r)?[]:{};for(let[i,f]of Object.entries(r))if(f instanceof oe.NumericValue)this.useReplacer=!0,c[i]=f;else c[i]=this._write(n,f);return c}else return structuredClone(r);return r}}class Ip extends hs{settings;constructor(t){super();this.settings=t}createSerializer(){let t=new qS(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new xS(this.settings);return t.setSerdeContext(this.serdeContext),t}}class Tp extends Re.RpcProtocol{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o}){super({defaultNamespace:t});this.serviceTarget=r,this.codec=o??new Ip({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!e,this.mixin=new Ti(this.awsQueryCompatible)}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e);if(!o.path.endsWith("/"))o.path+="/";if(Object.assign(o.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible)o.headers["x-amzn-query-mode"]="true";if(rr.deref(t.input)==="unit"||!o.body)o.body="{}";return o}getPayloadCodec(){return this.codec}async handleError(t,r,e,o,n){if(this.awsQueryCompatible)this.mixin.setQueryCompatError(o,e);let c=ES(e,o)??"Unknown",{errorSchema:i,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,o,n,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),h=rr.NormalizedSchema.of(i),w=o.message??o.Message??"Unknown",u=new(rr.TypeRegistry.for(i[1]).getErrorCtor(i)??Error)(w),d={};for(let[y,R]of h.structIterator())if(o[y]!=null)d[y]=this.codec.createDeserializer().readObject(R,o[y]);if(this.awsQueryCompatible)this.mixin.queryCompatOutput(o,d);throw this.mixin.decorateServiceException(Object.assign(u,f,{$fault:h.getMergedTraits().error,message:w},d),o)}}class wl extends Tp{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}class pl extends Tp{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}class ul extends Re.HttpBindingProtocol{serializer;deserializer;codec;mixin=new Ti;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Ip(r),this.serializer=new Re.HttpInterceptingShapeSerializer(this.codec.createSerializer(),r),this.deserializer=new Re.HttpInterceptingShapeDeserializer(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e),n=rr.NormalizedSchema.of(t.input);if(!o.headers["content-type"]){let c=this.mixin.resolveRestContentType(this.getDefaultContentType(),n);if(c)o.headers["content-type"]=c}if(o.body==null&&o.headers["content-type"]===this.getDefaultContentType())o.body="{}";return o}async deserializeResponse(t,r,e){let o=await super.deserializeResponse(t,r,e),n=rr.NormalizedSchema.of(t.output);for(let[c,i]of n.structIterator())if(i.getMemberTraits().httpPayload&&!(c in o))o[c]=null;return o}async handleError(t,r,e,o,n){let c=ES(e,o)??"Unknown",{errorSchema:i,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,o,n),h=rr.NormalizedSchema.of(i),w=o.message??o.Message??"Unknown",u=new(rr.TypeRegistry.for(i[1]).getErrorCtor(i)??Error)(w);await this.deserializeHttpMessage(i,r,e,o);let d={};for(let[y,R]of h.structIterator()){let S=R.getMergedTraits().jsonName??y;d[y]=this.codec.createDeserializer().readObject(R,o[S])}throw this.mixin.decorateServiceException(Object.assign(u,f,{$fault:h.getMergedTraits().error,message:w},d),o)}getDefaultContentType(){return"application/json"}}var hft=(t)=>{if(t==null)return;if(typeof t==="object"&&"__type"in t)delete t.__type;return vn.expectUnion(t)};class Np extends hs{settings;stringDeserializer;constructor(t){super();this.settings=t,this.stringDeserializer=new Re.FromStringShapeDeserializer(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,e){let o=rr.NormalizedSchema.of(t),n=o.getMemberSchemas();if(o.isStructSchema()&&o.isMemberSchema()&&!!Object.values(n).find((h)=>{return!!h.getMemberTraits().eventPayload})){let h={},w=Object.keys(n)[0];if(n[w].isBlobSchema())h[w]=r;else h[w]=this.read(n[w],r);return h}let i=(this.serdeContext?.utf8Encoder??ol.toUtf8)(r),f=this.parseXml(i);return this.readSchema(t,e?f[e]:f)}readSchema(t,r){let e=rr.NormalizedSchema.of(t);if(e.isUnitSchema())return;let o=e.getMergedTraits();if(e.isListSchema()&&!Array.isArray(r))return this.readSchema(e,[r]);if(r==null)return r;if(typeof r==="object"){let n=!!o.sparse,c=!!o.xmlFlattened;if(e.isListSchema()){let f=e.getValueSchema(),h=[],w=f.getMergedTraits().xmlName??"member",p=c?r:(r[0]??r)[w],u=Array.isArray(p)?p:[p];for(let d of u)if(d!=null||n)h.push(this.readSchema(f,d));return h}let i={};if(e.isMapSchema()){let f=e.getKeySchema(),h=e.getValueSchema(),w;if(c)w=Array.isArray(r)?r:[r];else w=Array.isArray(r.entry)?r.entry:[r.entry];let p=f.getMergedTraits().xmlName??"key",u=h.getMergedTraits().xmlName??"value";for(let d of w){let y=d[p],R=d[u];if(R!=null||n)i[y]=this.readSchema(h,R)}return i}if(e.isStructSchema()){let f=e.isUnionSchema(),h;if(f)h=new QS(r,i);for(let[w,p]of e.structIterator()){let u=p.getMergedTraits(),d=!u.httpPayload?p.getMemberTraits().xmlName??w:u.xmlName??p.getName();if(f)h.mark(d);if(r[d]!=null)i[w]=this.readSchema(p,r[d])}if(f)h.writeUnknown();return i}if(e.isDocumentSchema())return r;throw Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${e.getName(!0)}`)}if(e.isListSchema())return[];if(e.isMapSchema()||e.isStructSchema())return{};return this.stringDeserializer.read(e,r)}parseXml(t){if(t.length){let r;try{r=xe.parseXML(t)}catch(c){if(c&&typeof c==="object")Object.defineProperty(c,"$responseBodyText",{value:t});throw c}let e="#text",o=Object.keys(r)[0],n=r[o];if(n[e])n[o]=n[e],delete n[e];return vn.getValueFromTextNode(n)}return{}}}class dl extends hs{settings;buffer;constructor(t){super();this.settings=t}write(t,r,e=""){if(this.buffer===void 0)this.buffer="";let o=rr.NormalizedSchema.of(t);if(e&&!e.endsWith("."))e+=".";if(o.isBlobSchema()){if(typeof r==="string"||r instanceof Uint8Array)this.writeKey(e),this.writeValue((this.serdeContext?.base64Encoder??Ii.toBase64)(r))}else if(o.isBooleanSchema()||o.isNumericSchema()||o.isStringSchema()){if(r!=null)this.writeKey(e),this.writeValue(String(r));else if(o.isIdempotencyToken())this.writeKey(e),this.writeValue(oe.generateIdempotencyToken())}else if(o.isBigIntegerSchema()){if(r!=null)this.writeKey(e),this.writeValue(String(r))}else if(o.isBigDecimalSchema()){if(r!=null)this.writeKey(e),this.writeValue(r instanceof oe.NumericValue?r.string:String(r))}else if(o.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(e),Re.determineTimestampFormat(o,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue(vn.dateToUtcString(r));break;case 7:this.writeValue(String(r.getTime()/1000));break}}else if(o.isDocumentSchema())if(Array.isArray(r))this.write(79,r,e);else if(r instanceof Date)this.write(4,r,e);else if(r instanceof Uint8Array)this.write(21,r,e);else if(r&&typeof r==="object")this.write(143,r,e);else this.writeKey(e),this.writeValue(String(r));else if(o.isListSchema()){if(Array.isArray(r))if(r.length===0){if(this.settings.serializeEmptyLists)this.writeKey(e),this.writeValue("")}else{let n=o.getValueSchema(),c=this.settings.flattenLists||o.getMergedTraits().xmlFlattened,i=1;for(let f of r){if(f==null)continue;let h=this.getKey("member",n.getMergedTraits().xmlName),w=c?`${e}${i}`:`${e}${h}.${i}`;this.write(n,f,w),++i}}}else if(o.isMapSchema()){if(r&&typeof r==="object"){let n=o.getKeySchema(),c=o.getValueSchema(),i=o.getMergedTraits().xmlFlattened,f=1;for(let[h,w]of Object.entries(r)){if(w==null)continue;let p=this.getKey("key",n.getMergedTraits().xmlName),u=i?`${e}${f}.${p}`:`${e}entry.${f}.${p}`,d=this.getKey("value",c.getMergedTraits().xmlName),y=i?`${e}${f}.${d}`:`${e}entry.${f}.${d}`;this.write(n,h,u),this.write(c,w,y),++f}}}else if(o.isStructSchema()){if(r&&typeof r==="object"){let n=!1;for(let[c,i]of CS(o,r)){if(r[c]==null&&!i.isIdempotencyToken())continue;let f=this.getKey(c,i.getMergedTraits().xmlName),h=`${e}${f}`;this.write(i,r[c],h),n=!0}if(!n&&o.isUnionSchema()){let{$unknown:c}=r;if(Array.isArray(c)){let[i,f]=c,h=`${e}${i}`;this.write(15,f,h)}}}}else if(o.isUnitSchema());else throw Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${o.getName(!0)}`)}flush(){if(this.buffer===void 0)throw Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let e=r??t;if(this.settings.capitalizeKeys)return e[0].toUpperCase()+e.slice(1);return e}writeKey(t){if(t.endsWith("."))t=t.slice(0,t.length-1);this.buffer+=`&${Re.extendedEncodeURIComponent(t)}=`}writeValue(t){this.buffer+=Re.extendedEncodeURIComponent(t)}}class DS extends Re.RpcProtocol{options;serializer;deserializer;mixin=new Ti;constructor(t){super({defaultNamespace:t.defaultNamespace});this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new dl(r),this.deserializer=new Np(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e);if(!o.path.endsWith("/"))o.path+="/";if(Object.assign(o.headers,{"content-type":"application/x-www-form-urlencoded"}),rr.deref(t.input)==="unit"||!o.body)o.body="";let n=t.name.split("#")[1]??t.name;if(o.body=`Action=${n}&Version=${this.options.version}`+o.body,o.body.endsWith("&"))o.body=o.body.slice(-1);return o}async deserializeResponse(t,r,e){let o=this.deserializer,n=rr.NormalizedSchema.of(t.output),c={};if(e.statusCode>=300){let p=await Re.collectBody(e.body,r);if(p.byteLength>0)Object.assign(c,await o.read(15,p));await this.handleError(t,r,e,c,this.deserializeMetadata(e))}for(let p in e.headers){let u=e.headers[p];delete e.headers[p],e.headers[p.toLowerCase()]=u}let i=t.name.split("#")[1]??t.name,f=n.isStructSchema()&&this.useNestedResult()?i+"Result":void 0,h=await Re.collectBody(e.body,r);if(h.byteLength>0)Object.assign(c,await o.read(n,h,f));return{$metadata:this.deserializeMetadata(e),...c}}useNestedResult(){return!0}async handleError(t,r,e,o,n){let c=this.loadQueryErrorCode(e,o)??"Unknown",i=this.loadQueryError(o),f=this.loadQueryErrorMessage(o);i.message=f,i.Error={Type:i.Type,Code:i.Code,Message:f};let{errorSchema:h,errorMetadata:w}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,i,n,this.mixin.findQueryCompatibleError),p=rr.NormalizedSchema.of(h),d=new(rr.TypeRegistry.for(h[1]).getErrorCtor(h)??Error)(f),y={Type:i.Error.Type,Code:i.Error.Code,Error:i.Error};for(let[R,S]of p.structIterator()){let T=S.getMergedTraits().xmlName??R,N=i[T]??o[T];y[R]=this.deserializer.readSchema(S,N)}throw this.mixin.decorateServiceException(Object.assign(d,w,{$fault:p.getMergedTraits().error,message:f},y),o)}loadQueryErrorCode(t,r){let e=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(e!==void 0)return e;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}class yl extends DS{options;constructor(t){super(t);this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}var Al=(t,r)=>fl(t,r).then((e)=>{if(e.length){let o;try{o=xe.parseXML(e)}catch(f){if(f&&typeof f==="object")Object.defineProperty(f,"$responseBodyText",{value:e});throw f}let n="#text",c=Object.keys(o)[0],i=o[c];if(i[n])i[c]=i[n],delete i[n];return vn.getValueFromTextNode(i)}return{}}),wft=async(t,r)=>{let e=await Al(t,r);if(e.Error)e.Error.message=e.Error.message??e.Error.Message;return e},Sl=(t,r)=>{if(r?.Error?.Code!==void 0)return r.Error.Code;if(r?.Code!==void 0)return r.Code;if(t.statusCode==404)return"NotFound"};class VS extends hs{settings;stringBuffer;byteBuffer;buffer;constructor(t){super();this.settings=t}write(t,r){let e=rr.NormalizedSchema.of(t);if(e.isStringSchema()&&typeof r==="string")this.stringBuffer=r;else if(e.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Ii.fromBase64)(r);else{this.buffer=this.writeStruct(e,r,void 0);let o=e.getMergedTraits();if(o.httpPayload&&!o.xmlName)this.buffer.withName(e.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;if(this.settings.xmlNamespace){if(!t?.attributes?.xmlns)t.addAttribute("xmlns",this.settings.xmlNamespace)}return delete this.buffer,t.toString()}writeStruct(t,r,e){let o=t.getMergedTraits(),n=t.isMemberSchema()&&!o.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():o.xmlName??t.getName();if(!n||!t.isStructSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let c=xe.XmlNode.of(n),[i,f]=this.getXmlnsAttribute(t,e);for(let[w,p]of CS(t,r)){let u=r[w];if(u!=null||p.isIdempotencyToken()){if(p.getMergedTraits().xmlAttribute){c.addAttribute(p.getMergedTraits().xmlName??w,this.writeSimple(p,u));continue}if(p.isListSchema())this.writeList(p,u,c,f);else if(p.isMapSchema())this.writeMap(p,u,c,f);else if(p.isStructSchema())c.addChildNode(this.writeStruct(p,u,f));else{let d=xe.XmlNode.of(p.getMergedTraits().xmlName??p.getMemberName());this.writeSimpleInto(p,u,d,f),c.addChildNode(d)}}}let{$unknown:h}=r;if(h&&t.isUnionSchema()&&Array.isArray(h)&&Object.keys(r).length===1){let[w,p]=h,u=xe.XmlNode.of(w);if(typeof p!=="string")if(r instanceof xe.XmlNode||r instanceof xe.XmlText)c.addChildNode(r);else throw Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,p,u,f),c.addChildNode(u)}if(f)c.addAttribute(i,f);return c}writeList(t,r,e,o){if(!t.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let n=t.getMergedTraits(),c=t.getValueSchema(),i=c.getMergedTraits(),f=!!i.sparse,h=!!n.xmlFlattened,[w,p]=this.getXmlnsAttribute(t,o),u=(d,y)=>{if(c.isListSchema())this.writeList(c,Array.isArray(y)?y:[y],d,p);else if(c.isMapSchema())this.writeMap(c,y,d,p);else if(c.isStructSchema()){let R=this.writeStruct(c,y,p);d.addChildNode(R.withName(h?n.xmlName??t.getMemberName():i.xmlName??"member"))}else{let R=xe.XmlNode.of(h?n.xmlName??t.getMemberName():i.xmlName??"member");this.writeSimpleInto(c,y,R,p),d.addChildNode(R)}};if(h){for(let d of r)if(f||d!=null)u(e,d)}else{let d=xe.XmlNode.of(n.xmlName??t.getMemberName());if(p)d.addAttribute(w,p);for(let y of r)if(f||y!=null)u(d,y);e.addChildNode(d)}}writeMap(t,r,e,o,n=!1){if(!t.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let c=t.getMergedTraits(),i=t.getKeySchema(),h=i.getMergedTraits().xmlName??"key",w=t.getValueSchema(),p=w.getMergedTraits(),u=p.xmlName??"value",d=!!p.sparse,y=!!c.xmlFlattened,[R,S]=this.getXmlnsAttribute(t,o),T=(N,G,v)=>{let J=xe.XmlNode.of(h,G),[K,D]=this.getXmlnsAttribute(i,S);if(D)J.addAttribute(K,D);N.addChildNode(J);let E=xe.XmlNode.of(u);if(w.isListSchema())this.writeList(w,v,E,S);else if(w.isMapSchema())this.writeMap(w,v,E,S,!0);else if(w.isStructSchema())E=this.writeStruct(w,v,S);else this.writeSimpleInto(w,v,E,S);N.addChildNode(E)};if(y){for(let[N,G]of Object.entries(r))if(d||G!=null){let v=xe.XmlNode.of(c.xmlName??t.getMemberName());T(v,N,G),e.addChildNode(v)}}else{let N;if(!n){if(N=xe.XmlNode.of(c.xmlName??t.getMemberName()),S)N.addAttribute(R,S);e.addChildNode(N)}for(let[G,v]of Object.entries(r))if(d||v!=null){let J=xe.XmlNode.of("entry");T(J,G,v),(n?e:N).addChildNode(J)}}}writeSimple(t,r){if(r===null)throw Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let e=rr.NormalizedSchema.of(t),o=null;if(r&&typeof r==="object")if(e.isBlobSchema())o=(this.serdeContext?.base64Encoder??Ii.toBase64)(r);else if(e.isTimestampSchema()&&r instanceof Date)switch(Re.determineTimestampFormat(e,this.settings)){case 5:o=r.toISOString().replace(".000Z","Z");break;case 6:o=vn.dateToUtcString(r);break;case 7:o=String(r.getTime()/1000);break;default:console.warn("Missing timestamp format, using http date",r),o=vn.dateToUtcString(r);break}else if(e.isBigDecimalSchema()&&r){if(r instanceof oe.NumericValue)return r.string;return String(r)}else if(e.isMapSchema()||e.isListSchema())throw Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead.");else throw Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${e.getName(!0)}`);if(e.isBooleanSchema()||e.isNumericSchema()||e.isBigIntegerSchema()||e.isBigDecimalSchema())o=String(r);if(e.isStringSchema())if(r===void 0&&e.isIdempotencyToken())o=oe.generateIdempotencyToken();else o=String(r);if(o===null)throw Error(`Unhandled schema-value pair ${e.getName(!0)}=${r}`);return o}writeSimpleInto(t,r,e,o){let n=this.writeSimple(t,r),c=rr.NormalizedSchema.of(t),i=new xe.XmlText(n),[f,h]=this.getXmlnsAttribute(c,o);if(h)e.addAttribute(f,h);e.addChildNode(i)}getXmlnsAttribute(t,r){let e=t.getMergedTraits(),[o,n]=e.xmlNamespace??[];if(n&&n!==r)return[o?`xmlns:${o}`:"xmlns",n];return[void 0,void 0]}}class jS extends hs{settings;constructor(t){super();this.settings=t}createSerializer(){let t=new VS(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Np(this.settings);return t.setSerdeContext(this.serdeContext),t}}class _l extends Re.HttpBindingProtocol{codec;serializer;deserializer;mixin=new Ti;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new jS(r),this.serializer=new Re.HttpInterceptingShapeSerializer(this.codec.createSerializer(),r),this.deserializer=new Re.HttpInterceptingShapeDeserializer(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e),n=rr.NormalizedSchema.of(t.input);if(!o.headers["content-type"]){let c=this.mixin.resolveRestContentType(this.getDefaultContentType(),n);if(c)o.headers["content-type"]=c}if(typeof o.body==="string"&&o.headers["content-type"]===this.getDefaultContentType()&&!o.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(n))o.body='<?xml version="1.0" encoding="UTF-8"?>'+o.body;return o}async deserializeResponse(t,r,e){return super.deserializeResponse(t,r,e)}async handleError(t,r,e,o,n){let c=Sl(e,o)??"Unknown",{errorSchema:i,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,o,n),h=rr.NormalizedSchema.of(i),w=o.Error?.message??o.Error?.Message??o.message??o.Message??"Unknown",u=new(rr.TypeRegistry.for(i[1]).getErrorCtor(i)??Error)(w);await this.deserializeHttpMessage(i,r,e,o);let d={};for(let[y,R]of h.structIterator()){let S=R.getMergedTraits().xmlName??y,T=o.Error?.[S]??o[S];d[y]=this.codec.createDeserializer().readSchema(R,T)}throw this.mixin.decorateServiceException(Object.assign(u,f,{$fault:h.getMergedTraits().error,message:w},d),o)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(t){for(let[,r]of t.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}pft.AWSSDKSigV4Signer=qit;pft.AwsEc2QueryProtocol=yl;pft.AwsJson1_0Protocol=wl;pft.AwsJson1_1Protocol=pl;pft.AwsJsonRpcProtocol=Tp;pft.AwsQueryProtocol=DS;pft.AwsRestJsonProtocol=ul;pft.AwsRestXmlProtocol=_l;pft.AwsSdkSigV4ASigner=nl;pft.AwsSdkSigV4Signer=Rp;pft.AwsSmithyRpcV2CborProtocol=il;pft.JsonCodec=Ip;pft.JsonShapeDeserializer=xS;pft.JsonShapeSerializer=qS;pft.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS=Dit;pft.NODE_SIGV4A_CONFIG_OPTIONS=jit;pft.XmlCodec=jS;pft.XmlShapeDeserializer=Np;pft.XmlShapeSerializer=VS;pft._toBool=nft;pft._toNum=sft;pft._toStr=oft;pft.awsExpectUnion=hft;pft.emitWarningIfUnsupportedVersion=Cit;pft.getBearerTokenEnvKey=sl;pft.loadRestJsonErrorCode=ES;pft.loadRestXmlErrorCode=Sl;pft.parseJsonBody=KS;pft.parseJsonErrorBody=fft;pft.parseXmlBody=Al;pft.parseXmlErrorBody=wft;pft.resolveAWSSDKSigV4Config=tft;pft.resolveAwsSdkSigV4AConfig=Vit;pft.resolveAwsSdkSigV4Config=cl;pft.setCredentialFeature=Qit;pft.setFeature=Kit;pft.setTokenFeature=Eit;pft.state=JS;pft.validateSigningProperties=gS});var N0,$l;var t_=_(()=>{Fo();N0=[Kt.CRC32,Kt.CRC32C,Kt.CRC64NVME,Kt.SHA1,Kt.SHA256],$l=[Kt.SHA256,Kt.SHA1,Kt.CRC32,Kt.CRC32C,Kt.CRC64NVME]});var Ol=(t,{requestChecksumRequired:r,requestAlgorithmMember:e,requestChecksumCalculation:o})=>{if(!e)return o===lo.WHEN_SUPPORTED||r?n0:void 0;if(!t[e])return;let n=t[e];if(!N0.includes(n))throw Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${N0}.`);return n};var Rl=_(()=>{Fo();t_()});var Ni=(t)=>t===Kt.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`;var mp=_(()=>{Fo()});var Il=(t,r)=>{let e=t.toLowerCase();for(let o of Object.keys(r))if(e===o.toLowerCase())return!0;return!1};var Tl=(t,r)=>{let e=t.toLowerCase();for(let o of Object.keys(r))if(o.toLowerCase().startsWith(e))return!0;return!1};var Nl,ap=(t)=>t!==void 0&&typeof t!=="string"&&!ArrayBuffer.isView(t)&&!Nl.isArrayBuffer(t);var r_=_(()=>{Nl=O(Xw(),1)});var ml,VZt,jZt,tBt,rBt,eBt,oBt,nBt,sBt,cBt,iBt,Up,Hp,fBt,hBt,bp,wBt,pBt,uBt,dBt,yBt,ABt,SBt,_Bt,$Bt,OBt,RBt,IBt,TBt,NBt,mBt,aBt,UBt;var m0=_(()=>{ml=O(ii(),1),{__extends:VZt,__assign:jZt,__rest:tBt,__decorate:rBt,__param:eBt,__esDecorate:oBt,__runInitializers:nBt,__propKey:sBt,__setFunctionName:cBt,__metadata:iBt,__awaiter:Up,__generator:Hp,__exportStar:fBt,__createBinding:hBt,__values:bp,__read:wBt,__spread:pBt,__spreadArrays:uBt,__spreadArray:dBt,__await:yBt,__asyncGenerator:ABt,__asyncDelegator:SBt,__asyncValues:_Bt,__makeTemplateObject:$Bt,__importStar:OBt,__importDefault:RBt,__classPrivateFieldGet:IBt,__classPrivateFieldSet:TBt,__classPrivateFieldIn:NBt,__addDisposableResource:mBt,__disposeResources:aBt,__rewriteRelativeImportExtension:UBt}=ml.default});import{Buffer as al}from"buffer";var Ul=(t,r)=>{if(typeof t!=="string")throw TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return r?al.from(t,r):al.from(t)};var e_=()=>{};var o_=(t)=>{let r=Ul(t,"utf8");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var n_=_(()=>{e_()});var Hl=_(()=>{n_()});var bl=_(()=>{e_()});var ll=_(()=>{n_();Hl();bl()});function a0(t){if(t instanceof Uint8Array)return t;if(typeof t==="string")return Dft(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(t)}var Dft;var Fl=_(()=>{ll();Dft=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:o_});function U0(t){if(typeof t==="string")return t.length===0;return t.byteLength===0}function ic(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}function H0(t){if(!Uint32Array.from){var r=new Uint32Array(t.length),e=0;while(e<t.length)r[e]=t[e],e+=1;return r}return Uint32Array.from(t)}var mi=_(()=>{Fl()});var c_;var Ll=_(()=>{m0();mi();i_();c_=function(){function t(){this.crc32c=new s_}return t.prototype.update=function(r){if(U0(r))return;this.crc32c.update(a0(r))},t.prototype.digest=function(){return Up(this,void 0,void 0,function(){return Hp(this,function(r){return[2,ic(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new s_},t}()});var s_,Vft,jft;var i_=_(()=>{m0();mi();Ll();s_=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(r){var e,o;try{for(var n=bp(r),c=n.next();!c.done;c=n.next()){var i=c.value;this.checksum=this.checksum>>>8^jft[(this.checksum^i)&255]}}catch(f){e={error:f}}finally{try{if(c&&!c.done&&(o=n.return))o.call(n)}finally{if(e)throw e.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),Vft=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],jft=H0(Vft)});class S_{c1=0;c2=0;constructor(){r0t(),this.reset()}update(t){let r=t.length,e=0,o=this.c1,n=this.c2;while(e+8<=r){let c=((n^t[e++])&255)<<1,i=((n>>>8^t[e++])&255)<<1,f=((n>>>16^t[e++])&255)<<1,h=((n>>>24^t[e++])&255)<<1,w=((o^t[e++])&255)<<1,p=((o>>>8^t[e++])&255)<<1,u=((o>>>16^t[e++])&255)<<1,d=((o>>>24^t[e++])&255)<<1;o=A_[c]^y_[i]^d_[f]^u_[h]^p_[w]^w_[p]^h_[u]^b0[d],n=A_[c+1]^y_[i+1]^d_[f+1]^u_[h+1]^p_[w+1]^w_[p+1]^h_[u+1]^b0[d+1]}while(e<r){let c=((n^t[e])&255)<<1;n=(n>>>8|(o&255)<<24)>>>0,o=o>>>8^b0[c],n^=b0[c+1],e++}this.c1=o,this.c2=n}async digest(){let t=this.c1^4294967295,r=this.c2^4294967295;return new Uint8Array([t>>>24,t>>>16&255,t>>>8&255,t&255,r>>>24,r>>>16&255,r>>>8&255,r&255])}reset(){this.c1=4294967295,this.c2=4294967295}}var t0t=()=>{let r=[,,,,,,,,];for(let e=0;e<8;e++){let o=Array(512);for(let n=0;n<256;n++){let c=BigInt(n);for(let i=0;i<8*(e+1);i++)if(c&1n)c=c>>1n^0x9a6c9329ac4bc9b5n;else c=c>>1n;o[n*2]=Number(c>>32n&0xffffffffn),o[n*2+1]=Number(c&0xffffffffn)}r[e]=new Uint32Array(o)}return r},f_,b0,h_,w_,p_,u_,d_,y_,A_,r0t=()=>{if(!f_)f_=t0t(),[b0,h_,w_,p_,u_,d_,y_,A_]=f_};var __;var Gl=_(()=>{__={CrtCrc64Nvme:null}});var vl=_(()=>{Gl()});var $_;var Ml=_(()=>{m0();mi();l0();$_=function(){function t(){this.crc32=new fc}return t.prototype.update=function(r){if(U0(r))return;this.crc32.update(a0(r))},t.prototype.digest=function(){return Up(this,void 0,void 0,function(){return Hp(this,function(r){return[2,ic(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new fc},t}()});var fc,e0t,o0t;var l0=_(()=>{m0();mi();Ml();fc=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(r){var e,o;try{for(var n=bp(r),c=n.next();!c.done;c=n.next()){var i=c.value;this.checksum=this.checksum>>>8^o0t[(this.checksum^i)&255]}}catch(f){e={error:f}}finally{try{if(c&&!c.done&&(o=n.return))o.call(n)}finally{if(e)throw e.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),e0t=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o0t=H0(e0t)});import*as O_ from"zlib";class zl{checksum=0;update(t){this.checksum=O_.crc32(t,this.checksum)}async digest(){return ic(this.checksum)}reset(){this.checksum=0}}var kl=()=>{if(typeof O_.crc32>"u")return $_;return zl};var Wl=_(()=>{l0();mi()});var lp=(t,r)=>{switch(t){case Kt.MD5:return r.md5;case Kt.CRC32:return kl();case Kt.CRC32C:return c_;case Kt.CRC64NVME:if(typeof __.CrtCrc64Nvme!=="function")return S_;return __.CrtCrc64Nvme;case Kt.SHA1:return r.sha1;case Kt.SHA256:return r.sha256;default:throw Error(`Unsupported checksum algorithm: ${t}`)}};var R_=_(()=>{i_();vl();Fo();Wl()});var Zl,Fp=(t,r)=>{let e=new t;return e.update(Zl.toUint8Array(r||"")),e.digest()};var I_=_(()=>{Zl=O(ue(),1)});var ai,Bl,Xl,Jl,Yl=(t,r)=>(e,o)=>async(n)=>{if(!Bl.HttpRequest.isInstance(n.request))return e(n);if(Tl("x-amz-checksum-",n.request.headers))return e(n);let{request:c,input:i}=n,{body:f,headers:h}=c,{base64Encoder:w,streamHasher:p}=t,{requestChecksumRequired:u,requestAlgorithmMember:d}=r,y=await t.requestChecksumCalculation(),R=d?.name,S=d?.httpHeader;if(R&&!i[R]){if(y===lo.WHEN_SUPPORTED||u){if(i[R]=n0,S)h[S]=n0}}let T=Ol(i,{requestChecksumRequired:u,requestAlgorithmMember:d?.name,requestChecksumCalculation:y}),N=f,G=h;if(T){switch(T){case Kt.CRC32:ai.setFeature(o,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case Kt.CRC32C:ai.setFeature(o,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case Kt.CRC64NVME:ai.setFeature(o,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case Kt.SHA1:ai.setFeature(o,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case Kt.SHA256:ai.setFeature(o,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}let v=Ni(T),J=lp(T,t);if(ap(f)){let{getAwsChunkedEncodingStream:K,bodyLengthChecker:D}=t;N=K(typeof t.requestStreamBufferSize==="number"&&t.requestStreamBufferSize>=8192?Xl.createBufferedReadable(f,t.requestStreamBufferSize,o.logger):f,{base64Encoder:w,bodyLengthChecker:D,checksumLocationName:v,checksumAlgorithmFn:J,streamHasher:p}),G={...h,"content-encoding":h["content-encoding"]?`${h["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":h["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":v},delete G["content-length"]}else if(!Il(v,h)){let K=await Fp(J,f);G={...h,[v]:w(K)}}}try{return await e({...n,request:{...c,headers:G,body:N}})}catch(v){if(v instanceof Error&&v.name==="InvalidChunkSizeError")try{if(!v.message.endsWith("."))v.message+=".";v.message+=" Set [requestStreamBufferSize=number e.g. 65_536] in client constructor to instruct AWS SDK to buffer your input stream."}catch(J){}throw v}};var T_=_(()=>{Fo();Rl();mp();r_();R_();I_();ai=O(Vr(),1),Bl=O(tr(),1),Xl=O(js(),1),Jl={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0}});var F0,Pl,gl=(t,r)=>(e,o)=>async(n)=>{let c=n.input,{requestValidationModeMember:i}=r,f=await t.requestChecksumCalculation(),h=await t.responseChecksumValidation();switch(f){case lo.WHEN_REQUIRED:F0.setFeature(o,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case lo.WHEN_SUPPORTED:F0.setFeature(o,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(h){case Vs.WHEN_REQUIRED:F0.setFeature(o,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case Vs.WHEN_SUPPORTED:F0.setFeature(o,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}if(i&&!c[i]){if(h===Vs.WHEN_SUPPORTED)c[i]="ENABLED"}return e(n)};var Cl=_(()=>{Fo();F0=O(Vr(),1),Pl={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0}});var Lp=(t=[])=>{let r=[];for(let e of $l){if(!t.includes(e)||!N0.includes(e))continue;r.push(e)}return r};var N_=_(()=>{t_()});var Ql=(t)=>{let r=t.lastIndexOf("-");if(r!==-1){let e=t.slice(r+1);if(!e.startsWith("0")){let o=parseInt(e,10);if(!isNaN(o)&&o>=1&&o<=1e4)return!0}}return!1};var Kl=async(t,{checksumAlgorithmFn:r,base64Encoder:e})=>e(await Fp(r,t));var El=_(()=>{I_()});var xl,ql=async(t,{config:r,responseAlgorithms:e,logger:o})=>{let n=Lp(e),{body:c,headers:i}=t;for(let f of n){let h=Ni(f),w=i[h];if(w){let p;try{p=lp(f,r)}catch(y){if(f===Kt.CRC64NVME){o?.warn(`Skipping ${Kt.CRC64NVME} checksum validation: ${y.message}`);continue}throw y}let{base64Encoder:u}=r;if(ap(c)){t.body=xl.createChecksumStream({expectedChecksum:w,checksumSourceLocation:h,checksum:new p,source:c,base64Encoder:u});return}let d=await Kl(c,{checksumAlgorithmFn:p,base64Encoder:u});if(d===w)break;throw Error(`Checksum mismatch: expected "${d}" but received "${w}" in response header "${h}".`)}}};var Dl=_(()=>{Fo();El();N_();mp();r_();R_();xl=O(js(),1)});var Vl,jl,tF=(t,r)=>(e,o)=>async(n)=>{if(!Vl.HttpRequest.isInstance(n.request))return e(n);let c=n.input,i=await e(n),f=i.response,{requestValidationModeMember:h,responseAlgorithms:w}=r;if(h&&c[h]==="ENABLED"){let{clientName:p,commandName:u}=o;if(p==="S3Client"&&u==="GetObjectCommand"&&Lp(w).every((y)=>{let R=Ni(y),S=f.headers[R];return!S||Ql(S)}))return i;await ql(f,{config:t,responseAlgorithms:w,logger:o.logger})}return i};var rF=_(()=>{N_();mp();Dl();Vl=O(tr(),1),jl={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0}});var dt=(t,r)=>({applyToStack:(e)=>{e.add(Yl(t,r),Jl),e.addRelativeTo(gl(t,r),Pl),e.addRelativeTo(tF(t,r),jl)}});var eF=_(()=>{Cl();T_();rF()});var m_,oF=(t)=>{let{requestChecksumCalculation:r,responseChecksumValidation:e,requestStreamBufferSize:o}=t;return Object.assign(t,{requestChecksumCalculation:m_.normalizeProvider(r??Zw),responseChecksumValidation:m_.normalizeProvider(e??Bw),requestStreamBufferSize:Number(o??0)})};var nF=_(()=>{Fo();m_=O(Qe(),1)});var Et=_(()=>{Xa();Ya();Fo();T_();eF();nF()});var Ui=Q((i0t)=>{var n0t=tr();function s0t(t){return t}var sF=(t)=>(r)=>async(e)=>{if(!n0t.HttpRequest.isInstance(e.request))return r(e);let{request:o}=e,{handlerProtocol:n=""}=t.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!o.headers[":authority"])delete o.headers.host,o.headers[":authority"]=o.hostname+(o.port?":"+o.port:"");else if(!o.headers.host){let c=o.hostname;if(o.port!=null)c+=`:${o.port}`;o.headers.host=c}return r(e)},cF={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},c0t=(t)=>({applyToStack:(r)=>{r.add(sF(t),cF)}});i0t.getHostHeaderPlugin=c0t;i0t.hostHeaderMiddleware=sF;i0t.hostHeaderMiddlewareOptions=cF;i0t.resolveHostHeaderConfig=s0t});var Hi=Q((d0t)=>{var iF=()=>(t,r)=>async(e)=>{try{let o=await t(e),{clientName:n,commandName:c,logger:i,dynamoDbDocumentClientOptions:f={}}=r,{overrideInputFilterSensitiveLog:h,overrideOutputFilterSensitiveLog:w}=f,p=h??r.inputFilterSensitiveLog,u=w??r.outputFilterSensitiveLog,{$metadata:d,...y}=o.output;return i?.info?.({clientName:n,commandName:c,input:p(e.input),output:u(y),metadata:d}),o}catch(o){let{clientName:n,commandName:c,logger:i,dynamoDbDocumentClientOptions:f={}}=r,{overrideInputFilterSensitiveLog:h}=f,w=h??r.inputFilterSensitiveLog;throw i?.error?.({clientName:n,commandName:c,input:w(e.input),error:o,metadata:o.$metadata}),o}},fF={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},u0t=(t)=>({applyToStack:(r)=>{r.add(iF(),fF)}});d0t.getLoggerPlugin=u0t;d0t.loggerMiddleware=iF;d0t.loggerMiddlewareOptions=fF});var wF=Q((_0t)=>{var L0={REQUEST_ID:Symbol.for("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol.for("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol.for("_AWS_LAMBDA_TENANT_ID")},a_=["true","1"].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??"");if(!a_)globalThis.awslambda=globalThis.awslambda||{};class Gp{static PROTECTED_KEYS=L0;isProtectedKey(t){return Object.values(L0).includes(t)}getRequestId(){return this.get(L0.REQUEST_ID)??"-"}getXRayTraceId(){return this.get(L0.X_RAY_TRACE_ID)}getTenantId(){return this.get(L0.TENANT_ID)}}class hF extends Gp{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(t){return this.currentContext?.[t]}set(t,r){if(this.isProtectedKey(t))throw Error(`Cannot modify protected Lambda context field: ${String(t)}`);this.currentContext=this.currentContext||{},this.currentContext[t]=r}run(t,r){return this.currentContext=t,r()}}class H_ extends Gp{als;static async create(){let t=new H_,r=await import("async_hooks");return t.als=new r.AsyncLocalStorage,t}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(t){return this.als.getStore()?.[t]}set(t,r){if(this.isProtectedKey(t))throw Error(`Cannot modify protected Lambda context field: ${String(t)}`);let e=this.als.getStore();if(!e)throw Error("No context available");e[t]=r}run(t,r){return this.als.run(t,r)}}_0t.InvokeStore=void 0;(function(t){let r=null;async function e(){if(!r)r=(async()=>{let n="AWS_LAMBDA_MAX_CONCURRENCY"in process.env?await H_.create():new hF;if(!a_&&globalThis.awslambda?.InvokeStore)return globalThis.awslambda.InvokeStore;else if(!a_&&globalThis.awslambda)return globalThis.awslambda.InvokeStore=n,n;else return n})();return r}t.getInstanceAsync=e,t._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE==="1"?{reset:()=>{if(r=null,globalThis.awslambda?.InvokeStore)delete globalThis.awslambda.InvokeStore;globalThis.awslambda={InvokeStore:void 0}}}:void 0})(_0t.InvokeStore||(_0t.InvokeStore={}));_0t.InvokeStoreBase=Gp});var dF=Q((pF)=>{Object.defineProperty(pF,"__esModule",{value:!0});pF.recursionDetectionMiddleware=void 0;var O0t=wF(),R0t=tr(),b_="X-Amzn-Trace-Id",I0t="AWS_LAMBDA_FUNCTION_NAME",T0t="_X_AMZN_TRACE_ID",N0t=()=>(t)=>async(r)=>{let{request:e}=r;if(!R0t.HttpRequest.isInstance(e))return t(r);let o=Object.keys(e.headers??{}).find((p)=>p.toLowerCase()===b_.toLowerCase())??b_;if(e.headers.hasOwnProperty(o))return t(r);let n=process.env[I0t],c=process.env[T0t],h=(await O0t.InvokeStore.getInstanceAsync())?.getXRayTraceId()??c,w=(p)=>typeof p==="string"&&p.length>0;if(w(n)&&w(h))e.headers[b_]=h;return t({...r,request:e})};pF.recursionDetectionMiddleware=N0t});var bi=Q((F_)=>{var l_=dF(),m0t={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},a0t=(t)=>({applyToStack:(r)=>{r.add(l_.recursionDetectionMiddleware(),m0t)}});F_.getRecursionDetectionPlugin=a0t;Object.keys(l_).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(F_,t))Object.defineProperty(F_,t,{enumerable:!0,get:function(){return l_[t]}})})});function l0t(){return(t,r)=>async(e)=>{let{request:o}=e;if(yF.HttpRequest.isInstance(o)){if(!(H0t in o.headers)&&!(b0t in o.headers))if(typeof r?.logger?.warn==="function"&&!(r.logger instanceof AF.NoOpLogger))r.logger.warn("Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.");else console.warn("Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.")}return t({...e})}}var yF,AF,H0t="content-length",b0t="x-amz-decoded-content-length",F0t,SF=(t)=>({applyToStack:(r)=>{r.add(l0t(),F0t)}});var _F=_(()=>{yF=O(tr(),1),AF=O(z(),1);F0t={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0}});var $F=(t)=>{return(r,e)=>async(o)=>{let n=await t.region(),c=t.region,i=()=>{};if(e.__s3RegionRedirect)Object.defineProperty(t,"region",{writable:!1,value:async()=>{return e.__s3RegionRedirect}}),i=()=>Object.defineProperty(t,"region",{writable:!0,value:c});try{let f=await r(o);if(e.__s3RegionRedirect){i();let h=await t.region();if(n!==h)throw Error("Region was not restored following S3 region redirect.")}return f}catch(f){throw i(),f}}},OF;var L_=_(()=>{OF={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"}});function L0t(t){return(r,e)=>async(o)=>{try{return await r(o)}catch(n){if(t.followRegionRedirects){let c=n?.$metadata?.httpStatusCode,i=e.commandName==="HeadBucketCommand",f=n?.$response?.headers?.["x-amz-bucket-region"];if(f){if(c===301||c===400&&(n?.name==="IllegalLocationConstraintException"||i)){try{let h=f;e.logger?.debug(`Redirecting from ${await t.region()} to ${h}`),e.__s3RegionRedirect=h}catch(h){throw Error("Region redirect failed: "+h)}return r(o)}}}throw n}}}var G0t,RF=(t)=>({applyToStack:(r)=>{r.add(L0t(t),G0t),r.addRelativeTo($F(t),OF)}});var IF=_(()=>{L_();G0t={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0}});var TF,NF,v0t=(t)=>{return(r,e)=>async(o)=>{let n=await r(o),{response:c}=n;if(TF.HttpResponse.isInstance(c)){if(c.headers.expires){c.headers.expiresstring=c.headers.expires;try{NF.parseRfc7231DateTime(c.headers.expires)}catch(i){e.logger?.warn(`AWS SDK Warning for ${e.clientName}::${e.commandName} response parsing (${c.headers.expires}): ${i}`),delete c.headers.expires}}}return n}},M0t,vp=(t)=>({applyToStack:(r)=>{r.addRelativeTo(v0t(t),M0t)}});var mF=_(()=>{TF=O(tr(),1),NF=O(z(),1),M0t={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"}});class Mp{data;lastPurgeTime=Date.now();static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=30000;constructor(t={}){this.data=t}get(t){let r=this.data[t];if(!r)return;return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){let t=Date.now();if(this.lastPurgeTime+Mp.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t)return;for(let r in this.data){let e=this.data[r];if(!e.isRefreshing){let o=await e.identity;if(o.expiration){if(o.expiration.getTime()<t)delete this.data[r]}}}}}class G0{_identity;isRefreshing;accessed;constructor(t,r=!1,e=Date.now()){this._identity=t,this.isRefreshing=r,this.accessed=e}get identity(){return this.accessed=Date.now(),this._identity}}class v0{createSessionFn;cache;static REFRESH_WINDOW_MS=60000;constructor(t,r=new Mp){this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){let e=r.Bucket,{cache:o}=this,n=o.get(e);if(n)return n.identity.then((c)=>{if((c.expiration?.getTime()??0)<Date.now())return o.set(e,new G0(this.getIdentity(e))).identity;if((c.expiration?.getTime()??0)<Date.now()+v0.REFRESH_WINDOW_MS&&!n.isRefreshing)n.isRefreshing=!0,this.getIdentity(e).then((h)=>{o.set(e,new G0(Promise.resolve(h)))});return c});return o.set(e,new G0(this.getIdentity(e))).identity}async getIdentity(t){await this.cache.purgeExpired().catch((o)=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});let r=await this.createSessionFn(t);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}}var aF=()=>{};var zp=Q((W0t)=>{var z0t=(t,r,e)=>{if(!(r in t))return;if(t[r]==="true")return!0;if(t[r]==="false")return!1;throw Error(`Cannot load ${e} "${r}". Expected "true" or "false", got ${t[r]}.`)},k0t=(t,r,e)=>{if(!(r in t))return;let o=parseInt(t[r],10);if(Number.isNaN(o))throw TypeError(`Cannot load ${e} '${r}'. Expected number, got '${t[r]}'.`);return o};W0t.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(W0t.SelectorType||(W0t.SelectorType={}));W0t.booleanSelector=z0t;W0t.numberSelector=k0t});var li,UF="Directory",HF="S3Express",bF="sigv4-s3express",kp="X-Amz-S3session-Token",M0,X0t="AWS_S3_DISABLE_EXPRESS_SESSION_AUTH",J0t="s3_disable_express_session_auth",v_;var Wp=_(()=>{li=O(zp(),1),M0=kp.toLowerCase(),v_={environmentVariableSelector:(t)=>li.booleanSelector(t,X0t,li.SelectorType.ENV),configFileSelector:(t)=>li.booleanSelector(t,J0t,li.SelectorType.CONFIG),default:!1}});function lF(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function FF(t,r){let e=setTimeout(()=>{throw Error("SignatureV4S3Express credential override was created but not called.")},10),o=t.credentialProvider,n=()=>{return clearTimeout(e),t.credentialProvider=o,Promise.resolve(r)};t.credentialProvider=n}var LF,Zp;var GF=_(()=>{Wp();LF=O(yp(),1);Zp=class Zp extends LF.SignatureV4{async signWithCredentials(t,r,e){let o=lF(r);t.headers[M0]=r.sessionToken;let n=this;return FF(n,o),n.signRequest(t,e??{})}async presignWithCredentials(t,r,e){let o=lF(r);return delete t.headers[M0],t.headers[kp]=r.sessionToken,t.query=t.query??{},t.query[kp]=r.sessionToken,FF(this,o),this.presign(t,e)}}});var vF,MF,zF=(t)=>{return(r,e)=>async(o)=>{if(e.endpointV2){let n=e.endpointV2,c=n.properties?.authSchemes?.[0]?.name===bF;if(n.properties?.backend===HF||n.properties?.bucketType===UF)vF.setFeature(e,"S3_EXPRESS_BUCKET","J"),e.isS3ExpressBucket=!0;if(c){let f=o.input.Bucket;if(f){let h=await t.s3ExpressIdentityProvider.getS3ExpressIdentity(await t.credentials(),{Bucket:f});if(e.s3ExpressIdentity=h,MF.HttpRequest.isInstance(o.request)&&h.sessionToken)o.request.headers[M0]=h.sessionToken}}}return r(o)}},kF,M_=(t)=>({applyToStack:(r)=>{r.add(zF(t),kF)}});var WF=_(()=>{Wp();vF=O(Vr(),1),MF=O(tr(),1),kF={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0}});var ZF=async(t,r,e,o)=>{let n=await o.signWithCredentials(e,t,{});if(n.headers["X-Amz-Security-Token"]||n.headers["x-amz-security-token"])throw Error("X-Amz-Security-Token must not be set for s3-express requests.");return n};var BF,XF,JF,Y0t=(t)=>(r)=>{throw r},P0t=(t,r)=>{},YF=(t)=>(r,e)=>async(o)=>{if(!XF.HttpRequest.isInstance(o.request))return r(o);let c=JF.getSmithyContext(e).selectedHttpAuthScheme;if(!c)throw Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:f,signer:h}=c,w;if(e.s3ExpressIdentity)w=await ZF(e.s3ExpressIdentity,i,o.request,await t.signer());else w=await h.sign(o.request,f,i);let p=await r({...o,request:w}).catch((h.errorHandler||Y0t)(i));return(h.successHandler||P0t)(p.response,i),p},z_=(t)=>({applyToStack:(r)=>{r.addRelativeTo(YF(t),BF.httpSigningMiddlewareOptions)}});var PF=_(()=>{BF=O(Kr(),1),XF=O(tr(),1),JF=O(Qe(),1)});var k_=_(()=>{aF();GF();Wp();WF();PF()});var gF=(t,{session:r})=>{let[e,o]=r,{forcePathStyle:n,useAccelerateEndpoint:c,disableMultiregionAccessPoints:i,followRegionRedirects:f,s3ExpressIdentityProvider:h,bucketEndpoint:w,expectContinueHeader:p}=t;return Object.assign(t,{forcePathStyle:n??!1,useAccelerateEndpoint:c??!1,disableMultiregionAccessPoints:i??!1,followRegionRedirects:f??!1,s3ExpressIdentityProvider:h??new v0(async(u)=>e().send(new o({Bucket:u}))),bucketEndpoint:w??!1,expectContinueHeader:p??2097152})};var CF=_(()=>{k_()});var QF,Bp,g0t,C0t=3000,Q0t=(t)=>(r,e)=>async(o)=>{let n=await r(o),{response:c}=n;if(!QF.HttpResponse.isInstance(c))return n;let{statusCode:i,body:f}=c;if(i<200||i>=300)return n;if(!(typeof f?.stream==="function"||typeof f?.pipe==="function"||typeof f?.tee==="function"))return n;let w=f,p=f;if(f&&typeof f==="object"&&!(f instanceof Uint8Array))[w,p]=await Bp.splitStream(f);c.body=p;let u=await K0t(w,{streamCollector:async(y)=>{return Bp.headStream(y,C0t)}});if(typeof w?.destroy==="function")w.destroy();let d=t.utf8Encoder(u.subarray(u.length-16));if(u.length===0&&g0t[e.commandName]){let y=Error("S3 aborted request");throw y.name="InternalError",y}if(d&&d.endsWith("</Error>"))c.statusCode=400;return n},K0t=(t=new Uint8Array,r)=>{if(t instanceof Uint8Array)return Promise.resolve(t);return r.streamCollector(t)||Promise.resolve(new Uint8Array)},E0t,Z=(t)=>({applyToStack:(r)=>{r.addRelativeTo(Q0t(t),E0t)}});var KF=_(()=>{QF=O(tr(),1),Bp=O(js(),1),g0t={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},E0t={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0}});var EF=(t)=>typeof t==="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function xF(t){return(r,e)=>async(o)=>{if(t.bucketEndpoint){let n=e.endpointV2;if(n){let c=o.input.Bucket;if(typeof c==="string")try{let i=new URL(c);e.endpointV2={...n,url:i}}catch(i){let f=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${c} could not be parsed as URL.`;if(e.logger?.constructor?.name==="NoOpLogger")console.warn(f);else e.logger?.warn?.(f);throw i}}}return r(o)}}var qF;var DF=_(()=>{qF={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"}});function x0t({bucketEndpoint:t}){return(r)=>async(e)=>{let{input:{Bucket:o}}=e;if(!t&&typeof o==="string"&&!EF(o)&&o.indexOf("/")>=0){let n=Error(`Bucket name shouldn't contain '/', received '${o}'`);throw n.name="InvalidBucketName",n}return r({...e})}}var q0t,VF=(t)=>({applyToStack:(r)=>{r.add(x0t(t),q0t),r.addRelativeTo(xF(t),qF)}});var jF=_(()=>{DF();q0t={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0}});var st=_(()=>{_F();L_();IF();mF();k_();CF();KF();jF()});var ps=Q((Sht)=>{var Z_=Ds();class tL{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){if(this.capacity=t??50,r)this.parameters=r}get(t,r){let e=this.hash(t);if(e===!1)return r();if(!this.data.has(e)){if(this.data.size>this.capacity+10){let o=this.data.keys(),n=0;while(!0){let{value:c,done:i}=o.next();if(this.data.delete(c),i||++n>10)break}}this.data.set(e,r())}return this.data.get(e)}size(){return this.data.size}hash(t){let r="",{parameters:e}=this;if(e.length===0)return!1;for(let o of e){let n=String(t[o]??"");if(n.includes("|;"))return!1;r+=n+"|;"}return r}}var D0t=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),rL=(t)=>D0t.test(t)||t.startsWith("[")&&t.endsWith("]"),V0t=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),X_=(t,r=!1)=>{if(!r)return V0t.test(t);let e=t.split(".");for(let o of e)if(!X_(o))return!1;return!0},B_={},z0="endpoints";function ws(t){if(typeof t!=="object"||t==null)return t;if("ref"in t)return`$${ws(t.ref)}`;if("fn"in t)return`${t.fn}(${(t.argv||[]).map(ws).join(", ")})`;return JSON.stringify(t,null,2)}class qe extends Error{constructor(t){super(t);this.name="EndpointError"}}var j0t=(t,r)=>t===r,tht=(t)=>{let r=t.split("."),e=[];for(let o of r){let n=o.indexOf("[");if(n!==-1){if(o.indexOf("]")!==o.length-1)throw new qe(`Path: '${t}' does not end with ']'`);let c=o.slice(n+1,-1);if(Number.isNaN(parseInt(c)))throw new qe(`Invalid array index: '${c}' in path: '${t}'`);if(n!==0)e.push(o.slice(0,n));e.push(c)}else e.push(o)}return e},eL=(t,r)=>tht(r).reduce((e,o)=>{if(typeof e!=="object")throw new qe(`Index '${o}' in '${r}' not found in '${JSON.stringify(t)}'`);else if(Array.isArray(e))return e[parseInt(o)];return e[o]},t),rht=(t)=>t!=null,eht=(t)=>!t,W_={[Z_.EndpointURLScheme.HTTP]:80,[Z_.EndpointURLScheme.HTTPS]:443},oht=(t)=>{let r=(()=>{try{if(t instanceof URL)return t;if(typeof t==="object"&&"hostname"in t){let{hostname:d,port:y,protocol:R="",path:S="",query:T={}}=t,N=new URL(`${R}//${d}${y?`:${y}`:""}${S}`);return N.search=Object.entries(T).map(([G,v])=>`${G}=${v}`).join("&"),N}return new URL(t)}catch(d){return null}})();if(!r)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let e=r.href,{host:o,hostname:n,pathname:c,protocol:i,search:f}=r;if(f)return null;let h=i.slice(0,-1);if(!Object.values(Z_.EndpointURLScheme).includes(h))return null;let w=rL(n),p=e.includes(`${o}:${W_[h]}`)||typeof t==="string"&&t.includes(`${o}:${W_[h]}`),u=`${o}${p?`:${W_[h]}`:""}`;return{scheme:h,authority:u,path:c,normalizedPath:c.endsWith("/")?c:`${c}/`,isIp:w}},nht=(t,r)=>t===r,sht=(t,r,e,o)=>{if(r>=e||t.length<e)return null;if(!o)return t.substring(r,e);return t.substring(t.length-e,t.length-r)},cht=(t)=>encodeURIComponent(t).replace(/[!*'()]/g,(r)=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`),iht={booleanEquals:j0t,getAttr:eL,isSet:rht,isValidHostLabel:X_,not:eht,parseURL:oht,stringEquals:nht,substring:sht,uriEncode:cht},oL=(t,r)=>{let e=[],o={...r.endpointParams,...r.referenceRecord},n=0;while(n<t.length){let c=t.indexOf("{",n);if(c===-1){e.push(t.slice(n));break}e.push(t.slice(n,c));let i=t.indexOf("}",c);if(i===-1){e.push(t.slice(c));break}if(t[c+1]==="{"&&t[i+1]==="}")e.push(t.slice(c+1,i)),n=i+2;let f=t.substring(c+1,i);if(f.includes("#")){let[h,w]=f.split("#");e.push(eL(o[h],w))}else e.push(o[f]);n=i+1}return e.join("")},fht=({ref:t},r)=>{return{...r.endpointParams,...r.referenceRecord}[t]},Xp=(t,r,e)=>{if(typeof t==="string")return oL(t,e);else if(t.fn)return sL.callFunction(t,e);else if(t.ref)return fht(t,e);throw new qe(`'${r}': ${String(t)} is not a string, function or reference.`)},nL=({fn:t,argv:r},e)=>{let o=r.map((c)=>["boolean","number"].includes(typeof c)?c:sL.evaluateExpression(c,"arg",e)),n=t.split(".");if(n[0]in B_&&n[1]!=null)return B_[n[0]][n[1]](...o);return iht[t](...o)},sL={evaluateExpression:Xp,callFunction:nL},hht=({assign:t,...r},e)=>{if(t&&t in e.referenceRecord)throw new qe(`'${t}' is already defined in Reference Record.`);let o=nL(r,e);return e.logger?.debug?.(`${z0} evaluateCondition: ${ws(r)} = ${ws(o)}`),{result:o===""?!0:!!o,...t!=null&&{toAssign:{name:t,value:o}}}},J_=(t=[],r)=>{let e={};for(let o of t){let{result:n,toAssign:c}=hht(o,{...r,referenceRecord:{...r.referenceRecord,...e}});if(!n)return{result:n};if(c)e[c.name]=c.value,r.logger?.debug?.(`${z0} assign: ${c.name} := ${ws(c.value)}`)}return{result:!0,referenceRecord:e}},wht=(t,r)=>Object.entries(t).reduce((e,[o,n])=>({...e,[o]:n.map((c)=>{let i=Xp(c,"Header value entry",r);if(typeof i!=="string")throw new qe(`Header '${o}' value '${i}' is not a string`);return i})}),{}),cL=(t,r)=>Object.entries(t).reduce((e,[o,n])=>({...e,[o]:fL.getEndpointProperty(n,r)}),{}),iL=(t,r)=>{if(Array.isArray(t))return t.map((e)=>iL(e,r));switch(typeof t){case"string":return oL(t,r);case"object":if(t===null)throw new qe(`Unexpected endpoint property: ${t}`);return fL.getEndpointProperties(t,r);case"boolean":return t;default:throw new qe(`Unexpected endpoint property type: ${typeof t}`)}},fL={getEndpointProperty:iL,getEndpointProperties:cL},pht=(t,r)=>{let e=Xp(t,"Endpoint URL",r);if(typeof e==="string")try{return new URL(e)}catch(o){throw console.error(`Failed to construct URL with ${e}`,o),o}throw new qe(`Endpoint URL must be a string, got ${typeof e}`)},uht=(t,r)=>{let{conditions:e,endpoint:o}=t,{result:n,referenceRecord:c}=J_(e,r);if(!n)return;let i={...r,referenceRecord:{...r.referenceRecord,...c}},{url:f,properties:h,headers:w}=o;return r.logger?.debug?.(`${z0} Resolving endpoint from template: ${ws(o)}`),{...w!=null&&{headers:wht(w,i)},...h!=null&&{properties:cL(h,i)},url:pht(f,i)}},dht=(t,r)=>{let{conditions:e,error:o}=t,{result:n,referenceRecord:c}=J_(e,r);if(!n)return;throw new qe(Xp(o,"Error",{...r,referenceRecord:{...r.referenceRecord,...c}}))},hL=(t,r)=>{for(let e of t)if(e.type==="endpoint"){let o=uht(e,r);if(o)return o}else if(e.type==="error")dht(e,r);else if(e.type==="tree"){let o=wL.evaluateTreeRule(e,r);if(o)return o}else throw new qe(`Unknown endpoint rule: ${e}`);throw new qe("Rules evaluation failed")},yht=(t,r)=>{let{conditions:e,rules:o}=t,{result:n,referenceRecord:c}=J_(e,r);if(!n)return;return wL.evaluateRules(o,{...r,referenceRecord:{...r.referenceRecord,...c}})},wL={evaluateRules:hL,evaluateTreeRule:yht},Aht=(t,r)=>{let{endpointParams:e,logger:o}=r,{parameters:n,rules:c}=t;r.logger?.debug?.(`${z0} Initial EndpointParams: ${ws(e)}`);let i=Object.entries(n).filter(([,w])=>w.default!=null).map(([w,p])=>[w,p.default]);if(i.length>0)for(let[w,p]of i)e[w]=e[w]??p;let f=Object.entries(n).filter(([,w])=>w.required).map(([w])=>w);for(let w of f)if(e[w]==null)throw new qe(`Missing required parameter: '${w}'`);let h=hL(c,{endpointParams:e,logger:o,referenceRecord:{}});return r.logger?.debug?.(`${z0} Resolved endpoint: ${ws(h)}`),h};Sht.EndpointCache=tL;Sht.EndpointError=qe;Sht.customEndpointFunctions=B_;Sht.isIpAddress=rL;Sht.isValidHostLabel=X_;Sht.resolveEndpoint=Aht});var pL=Q((mht)=>{function Nht(t){let r={};if(t=t.replace(/^\?/,""),t)for(let e of t.split("&")){let[o,n=null]=e.split("=");if(o=decodeURIComponent(o),n)n=decodeURIComponent(n);if(!(o in r))r[o]=n;else if(Array.isArray(r[o]))r[o].push(n);else r[o]=[r[o],n]}return r}mht.parseQueryString=Nht});var Mn=Q((Hht)=>{var Uht=pL(),uL=(t)=>{if(typeof t==="string")return uL(new URL(t));let{hostname:r,pathname:e,port:o,protocol:n,search:c}=t,i;if(c)i=Uht.parseQueryString(c);return{hostname:r,port:o?parseInt(o):void 0,protocol:n,path:e,query:i}};Hht.parseUrl=uL});var hc=Q((Jp)=>{var Fi=ps(),lht=Mn(),yL=(t,r=!1)=>{if(r){for(let e of t.split("."))if(!yL(e))return!1;return!0}if(!Fi.isValidHostLabel(t))return!1;if(t.length<3||t.length>63)return!1;if(t!==t.toLowerCase())return!1;if(Fi.isIpAddress(t))return!1;return!0},dL=":",Fht="/",Lht=(t)=>{let r=t.split(dL);if(r.length<6)return null;let[e,o,n,c,i,...f]=r;if(e!=="arn"||o===""||n===""||f.join(dL)==="")return null;let h=f.map((w)=>w.split(Fht)).flat();return{partition:o,service:n,region:c,accountId:i,resourceId:h}},Ght=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],vht="1.1",AL={partitions:Ght,version:vht},SL=AL,_L="",$L=(t)=>{let{partitions:r}=SL;for(let o of r){let{regions:n,outputs:c}=o;for(let[i,f]of Object.entries(n))if(i===t)return{...c,...f}}for(let o of r){let{regionRegex:n,outputs:c}=o;if(new RegExp(n).test(t))return{...c}}let e=r.find((o)=>o.id==="aws");if(!e)throw Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...e.outputs}},OL=(t,r="")=>{SL=t,_L=r},Mht=()=>{OL(AL,"")},zht=()=>_L,RL={isVirtualHostableS3Bucket:yL,parseArn:Lht,partition:$L};Fi.customEndpointFunctions.aws=RL;var kht=(t)=>{if(typeof t.endpointProvider!=="function")throw Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:r}=t;if(r===void 0)t.endpoint=async()=>{return IL(t.endpointProvider({Region:typeof t.region==="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint==="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint==="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))};return t},IL=(t)=>lht.parseUrl(t.url);Object.defineProperty(Jp,"EndpointError",{enumerable:!0,get:function(){return Fi.EndpointError}});Object.defineProperty(Jp,"isIpAddress",{enumerable:!0,get:function(){return Fi.isIpAddress}});Object.defineProperty(Jp,"resolveEndpoint",{enumerable:!0,get:function(){return Fi.resolveEndpoint}});Jp.awsEndpointFunctions=RL;Jp.getUserAgentPrefix=zht;Jp.partition=$L;Jp.resolveDefaultAwsRegionalEndpointsConfig=kht;Jp.setPartitionInfo=OL;Jp.toEndpointV1=IL;Jp.useDefaultPartitionInfo=Mht});var wc=Q((ewt)=>{var ght=Kr(),Cht=hc(),Qht=tr(),pn=Vr(),aL=void 0;function Kht(t){if(t===void 0)return!0;return typeof t==="string"&&t.length<=50}function Eht(t){let r=ght.normalizeProvider(t.userAgentAppId??aL),{customUserAgent:e}=t;return Object.assign(t,{customUserAgent:typeof e==="string"?[[e]]:e,userAgentAppId:async()=>{let o=await r();if(!Kht(o)){let n=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;if(typeof o!=="string")n?.warn("userAgentAppId must be a string or undefined.");else if(o.length>50)n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return o}})}var xht=/\d{12}\.ddb/;async function qht(t,r,e){if(e.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor")pn.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M");if(typeof r.retryStrategy==="function"){let c=await r.retryStrategy();if(typeof c.acquireInitialRetryToken==="function")if(c.constructor?.name?.includes("Adaptive"))pn.setFeature(t,"RETRY_MODE_ADAPTIVE","F");else pn.setFeature(t,"RETRY_MODE_STANDARD","E");else pn.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof r.accountIdEndpointMode==="function"){let c=t.endpointV2;if(String(c?.url?.hostname).match(xht))pn.setFeature(t,"ACCOUNT_ID_ENDPOINT","O");switch(await r.accountIdEndpointMode?.()){case"disabled":pn.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":pn.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":pn.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let c=n;if(c.accountId)pn.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[i,f]of Object.entries(c.$source??{}))pn.setFeature(t,i,f)}}var TL="user-agent",Y_="x-amz-user-agent",NL=" ",P_="/",Dht=/[^!$%&'*+\-.^_`|~\w]/g,Vht=/[^!$%&'*+\-.^_`|~\w#]/g,mL="-",jht=1024;function twt(t){let r="";for(let e in t){let o=t[e];if(r.length+o.length+1<=jht){if(r.length)r+=","+o;else r+=o;continue}break}return r}var UL=(t)=>(r,e)=>async(o)=>{let{request:n}=o;if(!Qht.HttpRequest.isInstance(n))return r(o);let{headers:c}=n,i=e?.userAgent?.map(Yp)||[],f=(await t.defaultUserAgentProvider()).map(Yp);await qht(e,t,o);let h=e;f.push(`m/${twt(Object.assign({},e.__smithy_context?.features,h.__aws_sdk_context?.features))}`);let w=t?.customUserAgent?.map(Yp)||[],p=await t.userAgentAppId();if(p)f.push(Yp(["app",`${p}`]));let u=Cht.getUserAgentPrefix(),d=(u?[u]:[]).concat([...f,...i,...w]).join(NL),y=[...f.filter((R)=>R.startsWith("aws-sdk-")),...w].join(NL);if(t.runtime!=="browser"){if(y)c[Y_]=c[Y_]?`${c[TL]} ${y}`:y;c[TL]=d}else c[Y_]=d;return r({...o,request:n})},Yp=(t)=>{let r=t[0].split(P_).map((i)=>i.replace(Dht,mL)).join(P_),e=t[1]?.replace(Vht,mL),o=r.indexOf(P_),n=r.substring(0,o),c=r.substring(o+1);if(n==="api")c=c.toLowerCase();return[n,c,e].filter((i)=>i&&i.length>0).reduce((i,f,h)=>{switch(h){case 0:return f;case 1:return`${i}/${f}`;default:return`${i}#${f}`}},"")},HL={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},rwt=(t)=>({applyToStack:(r)=>{r.add(UL(t),HL)}});ewt.DEFAULT_UA_APP_ID=aL;ewt.getUserAgentMiddlewareOptions=HL;ewt.getUserAgentPlugin=rwt;ewt.resolveUserAgentConfig=Eht;ewt.userAgentMiddleware=UL});var co=Q((awt)=>{var us=zp(),Pp=Qe(),fwt=ps(),FL="AWS_USE_DUALSTACK_ENDPOINT",LL="use_dualstack_endpoint",hwt=!1,wwt={environmentVariableSelector:(t)=>us.booleanSelector(t,FL,us.SelectorType.ENV),configFileSelector:(t)=>us.booleanSelector(t,LL,us.SelectorType.CONFIG),default:!1},GL="AWS_USE_FIPS_ENDPOINT",vL="use_fips_endpoint",pwt=!1,uwt={environmentVariableSelector:(t)=>us.booleanSelector(t,GL,us.SelectorType.ENV),configFileSelector:(t)=>us.booleanSelector(t,vL,us.SelectorType.CONFIG),default:!1},dwt=(t)=>{let{tls:r,endpoint:e,urlParser:o,useDualstackEndpoint:n}=t;return Object.assign(t,{tls:r??!0,endpoint:Pp.normalizeProvider(typeof e==="string"?o(e):e),isCustomEndpoint:!0,useDualstackEndpoint:Pp.normalizeProvider(n??!1)})},ywt=async(t)=>{let{tls:r=!0}=t,e=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(e))throw Error("Invalid region in client config");let n=await t.useDualstackEndpoint(),c=await t.useFipsEndpoint(),{hostname:i}=await t.regionInfoProvider(e,{useDualstackEndpoint:n,useFipsEndpoint:c})??{};if(!i)throw Error("Cannot resolve hostname from client config");return t.urlParser(`${r?"https:":"http:"}//${i}`)},Awt=(t)=>{let r=Pp.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:e,useFipsEndpoint:o,urlParser:n,tls:c}=t;return Object.assign(t,{tls:c??!0,endpoint:e?Pp.normalizeProvider(typeof e==="string"?n(e):e):()=>ywt({...t,useDualstackEndpoint:r,useFipsEndpoint:o}),isCustomEndpoint:!!e,useDualstackEndpoint:r})},ML="AWS_REGION",zL="region",Swt={environmentVariableSelector:(t)=>t[ML],configFileSelector:(t)=>t[zL],default:()=>{throw Error("Region is missing")}},_wt={preferredFile:"credentials"},bL=new Set,$wt=(t,r=fwt.isValidHostLabel)=>{if(!bL.has(t)&&!r(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else bL.add(t)},kL=(t)=>typeof t==="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Owt=(t)=>kL(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Rwt=(t)=>{let{region:r,useFipsEndpoint:e}=t;if(!r)throw Error("Region is missing");return Object.assign(t,{region:async()=>{let o=typeof r==="function"?await r():r,n=Owt(o);return $wt(n),n},useFipsEndpoint:async()=>{let o=typeof r==="string"?r:await r();if(kL(o))return!0;return typeof e!=="function"?Promise.resolve(!!e):e()}})},lL=(t=[],{useFipsEndpoint:r,useDualstackEndpoint:e})=>t.find(({tags:o})=>r===o.includes("fips")&&e===o.includes("dualstack"))?.hostname,Iwt=(t,{regionHostname:r,partitionHostname:e})=>r?r:e?e.replace("{region}",t):void 0,Twt=(t,{partitionHash:r})=>Object.keys(r||{}).find((e)=>r[e].regions.includes(t))??"aws",Nwt=(t,{signingRegion:r,regionRegex:e,useFipsEndpoint:o})=>{if(r)return r;else if(o){let n=e.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),c=t.match(n);if(c)return c[0].slice(1,-1)}},mwt=(t,{useFipsEndpoint:r=!1,useDualstackEndpoint:e=!1,signingService:o,regionHash:n,partitionHash:c})=>{let i=Twt(t,{partitionHash:c}),f=t in n?t:c[i]?.endpoint??t,h={useFipsEndpoint:r,useDualstackEndpoint:e},w=lL(n[f]?.variants,h),p=lL(c[i]?.variants,h),u=Iwt(f,{regionHostname:w,partitionHostname:p});if(u===void 0)throw Error(`Endpoint resolution failed for: ${{resolvedRegion:f,useFipsEndpoint:r,useDualstackEndpoint:e}}`);let d=Nwt(u,{signingRegion:n[f]?.signingRegion,regionRegex:c[i].regionRegex,useFipsEndpoint:r});return{partition:i,signingService:o,hostname:u,...d&&{signingRegion:d},...n[f]?.signingService&&{signingService:n[f].signingService}}};awt.CONFIG_USE_DUALSTACK_ENDPOINT=LL;awt.CONFIG_USE_FIPS_ENDPOINT=vL;awt.DEFAULT_USE_DUALSTACK_ENDPOINT=hwt;awt.DEFAULT_USE_FIPS_ENDPOINT=pwt;awt.ENV_USE_DUALSTACK_ENDPOINT=FL;awt.ENV_USE_FIPS_ENDPOINT=GL;awt.NODE_REGION_CONFIG_FILE_OPTIONS=_wt;awt.NODE_REGION_CONFIG_OPTIONS=Swt;awt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=wwt;awt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=uwt;awt.REGION_ENV_NAME=ML;awt.REGION_INI_NAME=zL;awt.getRegionInfo=mwt;awt.resolveCustomEndpointsConfig=dwt;awt.resolveEndpointsConfig=Awt;awt.resolveRegionConfig=Rwt});var WL=(t)=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)});var ZL=()=>{};var Li=Q((gwt)=>{var Ywt=tr(),BL="content-length";function XL(t){return(r)=>async(e)=>{let o=e.request;if(Ywt.HttpRequest.isInstance(o)){let{body:n,headers:c}=o;if(n&&Object.keys(c).map((i)=>i.toLowerCase()).indexOf(BL)===-1)try{let i=t(n);o.headers={...o.headers,[BL]:String(i)}}catch(i){}}return r({...e,request:o})}}var JL={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Pwt=(t)=>({applyToStack:(r)=>{r.add(XL(t.bodyLengthChecker),JL)}});gwt.contentLengthMiddleware=XL;gwt.contentLengthMiddlewareOptions=JL;gwt.getContentLengthPlugin=Pwt});var C_=Q((YL)=>{Object.defineProperty(YL,"__esModule",{value:!0});YL.getHomeDir=void 0;var Ewt=Rr("os"),xwt=Rr("path"),g_={},qwt=()=>{if(process&&process.geteuid)return`${process.geteuid()}`;return"DEFAULT"},Dwt=()=>{let{HOME:t,USERPROFILE:r,HOMEPATH:e,HOMEDRIVE:o=`C:${xwt.sep}`}=process.env;if(t)return t;if(r)return r;if(e)return`${o}${e}`;let n=qwt();if(!g_[n])g_[n]=(0,Ewt.homedir)();return g_[n]};YL.getHomeDir=Dwt});var Q_=Q((gL)=>{Object.defineProperty(gL,"__esModule",{value:!0});gL.getSSOTokenFilepath=void 0;var Vwt=Rr("crypto"),jwt=Rr("path"),tpt=C_(),rpt=(t)=>{let e=(0,Vwt.createHash)("sha1").update(t).digest("hex");return(0,jwt.join)((0,tpt.getHomeDir)(),".aws","sso","cache",`${e}.json`)};gL.getSSOTokenFilepath=rpt});var EL=Q((QL)=>{Object.defineProperty(QL,"__esModule",{value:!0});QL.getSSOTokenFromFile=QL.tokenIntercept=void 0;var ept=Rr("fs/promises"),opt=Q_();QL.tokenIntercept={};var npt=async(t)=>{if(QL.tokenIntercept[t])return QL.tokenIntercept[t];let r=(0,opt.getSSOTokenFilepath)(t),e=await(0,ept.readFile)(r,"utf8");return JSON.parse(e)};QL.getSSOTokenFromFile=npt});var DL=Q((xL)=>{Object.defineProperty(xL,"__esModule",{value:!0});xL.readFile=xL.fileIntercept=xL.filePromises=void 0;var spt=Rr("fs/promises");xL.filePromises={};xL.fileIntercept={};var cpt=(t,r)=>{if(xL.fileIntercept[t]!==void 0)return xL.fileIntercept[t];if(!xL.filePromises[t]||r?.ignoreCache)xL.filePromises[t]=(0,spt.readFile)(t,"utf8");return xL.filePromises[t]};xL.readFile=cpt});var De=Q((uc)=>{var k0=C_(),VL=Q_(),x_=EL(),Cp=Rr("path"),Qp=Ds(),Gi=DL(),tG="AWS_PROFILE",rG="default",ipt=(t)=>t.profile||process.env[tG]||rG,pc=".",fpt=(t)=>Object.entries(t).filter(([r])=>{let e=r.indexOf(pc);if(e===-1)return!1;return Object.values(Qp.IniSectionType).includes(r.substring(0,e))}).reduce((r,[e,o])=>{let n=e.indexOf(pc),c=e.substring(0,n)===Qp.IniSectionType.PROFILE?e.substring(n+1):e;return r[c]=o,r},{...t.default&&{default:t.default}}),hpt="AWS_CONFIG_FILE",eG=()=>process.env[hpt]||Cp.join(k0.getHomeDir(),".aws","config"),wpt="AWS_SHARED_CREDENTIALS_FILE",ppt=()=>process.env[wpt]||Cp.join(k0.getHomeDir(),".aws","credentials"),upt=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,dpt=["__proto__","profile __proto__"],q_=(t)=>{let r={},e,o;for(let n of t.split(/\r?\n/)){let c=n.split(/(^|\s)[;#]/)[0].trim();if(c[0]==="["&&c[c.length-1]==="]"){e=void 0,o=void 0;let f=c.substring(1,c.length-1),h=upt.exec(f);if(h){let[,w,,p]=h;if(Object.values(Qp.IniSectionType).includes(w))e=[w,p].join(pc)}else e=f;if(dpt.includes(f))throw Error(`Found invalid profile name "${f}"`)}else if(e){let f=c.indexOf("=");if(![0,-1].includes(f)){let[h,w]=[c.substring(0,f).trim(),c.substring(f+1).trim()];if(w==="")o=h;else{if(o&&n.trimStart()===n)o=void 0;r[e]=r[e]||{};let p=o?[o,h].join(pc):h;r[e][p]=w}}}}return r},jL=()=>({}),oG=async(t={})=>{let{filepath:r=ppt(),configFilepath:e=eG()}=t,o=k0.getHomeDir(),n="~/",c=r;if(r.startsWith("~/"))c=Cp.join(o,r.slice(2));let i=e;if(e.startsWith("~/"))i=Cp.join(o,e.slice(2));let f=await Promise.all([Gi.readFile(i,{ignoreCache:t.ignoreCache}).then(q_).then(fpt).catch(jL),Gi.readFile(c,{ignoreCache:t.ignoreCache}).then(q_).catch(jL)]);return{configFile:f[0],credentialsFile:f[1]}},ypt=(t)=>Object.entries(t).filter(([r])=>r.startsWith(Qp.IniSectionType.SSO_SESSION+pc)).reduce((r,[e,o])=>({...r,[e.substring(e.indexOf(pc)+1)]:o}),{}),Apt=()=>({}),Spt=async(t={})=>Gi.readFile(t.configFilepath??eG()).then(q_).then(ypt).catch(Apt),_pt=(...t)=>{let r={};for(let e of t)for(let[o,n]of Object.entries(e))if(r[o]!==void 0)Object.assign(r[o],n);else r[o]=n;return r},$pt=async(t)=>{let r=await oG(t);return _pt(r.configFile,r.credentialsFile)},Opt={getFileRecord(){return Gi.fileIntercept},interceptFile(t,r){Gi.fileIntercept[t]=Promise.resolve(r)},getTokenRecord(){return x_.tokenIntercept},interceptToken(t,r){x_.tokenIntercept[t]=r}};Object.defineProperty(uc,"getSSOTokenFromFile",{enumerable:!0,get:function(){return x_.getSSOTokenFromFile}});Object.defineProperty(uc,"readFile",{enumerable:!0,get:function(){return Gi.readFile}});uc.CONFIG_PREFIX_SEPARATOR=pc;uc.DEFAULT_PROFILE=rG;uc.ENV_PROFILE=tG;uc.externalDataInterceptor=Opt;uc.getProfileName=ipt;uc.loadSharedConfigFiles=oG;uc.loadSsoSessionData=Spt;uc.parseKnownFiles=$pt;Object.keys(k0).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(uc,t))Object.defineProperty(uc,t,{enumerable:!0,get:function(){return k0[t]}})});Object.keys(VL).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(uc,t))Object.defineProperty(uc,t,{enumerable:!0,get:function(){return VL[t]}})})});var xo=Q((vpt)=>{var W0=_r(),nG=De();function sG(t){try{let r=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return r.delete("CONFIG"),r.delete("CONFIG_PREFIX_SEPARATOR"),r.delete("ENV"),[...r].join(", ")}catch(r){return t}}var bpt=(t,r)=>async()=>{try{let e=t(process.env,r);if(e===void 0)throw Error();return e}catch(e){throw new W0.CredentialsProviderError(e.message||`Not found in ENV: ${sG(t.toString())}`,{logger:r?.logger})}},lpt=(t,{preferredFile:r="config",...e}={})=>async()=>{let o=nG.getProfileName(e),{configFile:n,credentialsFile:c}=await nG.loadSharedConfigFiles(e),i=c[o]||{},f=n[o]||{},h=r==="config"?{...i,...f}:{...f,...i};try{let p=t(h,r==="config"?n:c);if(p===void 0)throw Error();return p}catch(w){throw new W0.CredentialsProviderError(w.message||`Not found in config files w/ profile [${o}]: ${sG(t.toString())}`,{logger:e.logger})}},Fpt=(t)=>typeof t==="function",Lpt=(t)=>Fpt(t)?async()=>await t():W0.fromStatic(t),Gpt=({environmentVariableSelector:t,configFileSelector:r,default:e},o={})=>{let{signingName:n,logger:c}=o,i={signingName:n,logger:c};return W0.memoize(W0.chain(bpt(t,i),lpt(r,o),Lpt(e)))};vpt.loadConfig=Gpt});var pG=Q((hG)=>{Object.defineProperty(hG,"__esModule",{value:!0});hG.getEndpointUrlConfig=void 0;var cG=De(),iG="AWS_ENDPOINT_URL",fG="endpoint_url",zpt=(t)=>({environmentVariableSelector:(r)=>{let e=t.split(" ").map((c)=>c.toUpperCase()),o=r[[iG,...e].join("_")];if(o)return o;let n=r[iG];if(n)return n;return},configFileSelector:(r,e)=>{if(e&&r.services){let n=e[["services",r.services].join(cG.CONFIG_PREFIX_SEPARATOR)];if(n){let c=t.split(" ").map((f)=>f.toLowerCase()),i=n[[c.join("_"),fG].join(cG.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let o=r[fG];if(o)return o;return},default:void 0});hG.getEndpointUrlConfig=zpt});var yG=Q((uG)=>{Object.defineProperty(uG,"__esModule",{value:!0});uG.getEndpointFromConfig=void 0;var kpt=xo(),Wpt=pG(),Zpt=async(t)=>(0,kpt.loadConfig)((0,Wpt.getEndpointUrlConfig)(t??""))();uG.getEndpointFromConfig=Zpt});var X=Q((Dpt)=>{var SG=yG(),AG=Mn(),Bpt=Kr(),Kp=Qe(),Xpt=mA(),Jpt=async(t)=>{let r=t?.Bucket||"";if(typeof t.Bucket==="string")t.Bucket=r.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"));if(Qpt(r)){if(t.ForcePathStyle===!0)throw Error("Path-style addressing cannot be used with ARN buckets")}else if(!Cpt(r)||r.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||r.toLowerCase()!==r||r.length<3)t.ForcePathStyle=!0;if(t.DisableMultiRegionAccessPoints)t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0;return t},Ypt=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Ppt=/(\d+\.){3}\d+/,gpt=/\.\./,Cpt=(t)=>Ypt.test(t)&&!Ppt.test(t)&&!gpt.test(t),Qpt=(t)=>{let[r,e,o,,,n]=t.split(":"),c=r==="arn"&&t.split(":").length>=6,i=Boolean(c&&e&&o&&n);if(c&&!i)throw Error(`Invalid ARN: ${t} was an invalid ARN.`);return i},Kpt=(t,r,e,o=!1)=>{let n=async()=>{let c;if(o)c=e.clientContextParams?.[t]??e[t]??e[r];else c=e[t]??e[r];if(typeof c==="function")return c();return c};if(t==="credentialScope"||r==="CredentialScope")return async()=>{let c=typeof e.credentials==="function"?await e.credentials():e.credentials;return c?.credentialScope??c?.CredentialScope};if(t==="accountId"||r==="AccountId")return async()=>{let c=typeof e.credentials==="function"?await e.credentials():e.credentials;return c?.accountId??c?.AccountId};if(t==="endpoint"||r==="endpoint")return async()=>{if(e.isCustomEndpoint===!1)return;let c=await n();if(c&&typeof c==="object"){if("url"in c)return c.url.href;if("hostname"in c){let{protocol:i,hostname:f,port:h,path:w}=c;return`${i}//${f}${h?":"+h:""}${w}`}}return c};return n},D_=(t)=>{if(typeof t==="object"){if("url"in t)return AG.parseUrl(t.url);return t}return AG.parseUrl(t)},_G=async(t,r,e,o)=>{if(!e.isCustomEndpoint){let i;if(e.serviceConfiguredEndpoint)i=await e.serviceConfiguredEndpoint();else i=await SG.getEndpointFromConfig(e.serviceId);if(i)e.endpoint=()=>Promise.resolve(D_(i)),e.isCustomEndpoint=!0}let n=await $G(t,r,e);if(typeof e.endpointProvider!=="function")throw Error("config.endpointProvider is not set.");return e.endpointProvider(n,o)},$G=async(t,r,e)=>{let o={},n=r?.getEndpointParameterInstructions?.()||{};for(let[c,i]of Object.entries(n))switch(i.type){case"staticContextParams":o[c]=i.value;break;case"contextParams":o[c]=t[i.name];break;case"clientContextParams":case"builtInParams":o[c]=await Kpt(i.name,c,e,i.type!=="builtInParams")();break;case"operationContextParams":o[c]=i.get(t);break;default:throw Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}if(Object.keys(n).length===0)Object.assign(o,e);if(String(e.serviceId).toLowerCase()==="s3")await Jpt(o);return o},OG=({config:t,instructions:r})=>{return(e,o)=>async(n)=>{if(t.isCustomEndpoint)Bpt.setFeature(o,"ENDPOINT_OVERRIDE","N");let c=await _G(n.input,{getEndpointParameterInstructions(){return r}},{...t},o);o.endpointV2=c,o.authSchemes=c.properties?.authSchemes;let i=o.authSchemes?.[0];if(i){o.signing_region=i.signingRegion,o.signing_service=i.signingName;let h=Kp.getSmithyContext(o)?.selectedHttpAuthScheme?.httpAuthOption;if(h)h.signingProperties=Object.assign(h.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties)}return e({...n})}},RG={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Xpt.serializerMiddlewareOption.name},Ept=(t,r)=>({applyToStack:(e)=>{e.addRelativeTo(OG({config:t,instructions:r}),RG)}}),xpt=(t)=>{let r=t.tls??!0,{endpoint:e,useDualstackEndpoint:o,useFipsEndpoint:n}=t,c=e!=null?async()=>D_(await Kp.normalizeProvider(e)()):void 0,f=Object.assign(t,{endpoint:c,tls:r,isCustomEndpoint:!!e,useDualstackEndpoint:Kp.normalizeProvider(o??!1),useFipsEndpoint:Kp.normalizeProvider(n??!1)}),h=void 0;return f.serviceConfiguredEndpoint=async()=>{if(t.serviceId&&!h)h=SG.getEndpointFromConfig(t.serviceId);return h},f},qpt=(t)=>{let{endpoint:r}=t;if(r===void 0)t.endpoint=async()=>{throw Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")};return t};Dpt.endpointMiddleware=OG;Dpt.endpointMiddlewareOptions=RG;Dpt.getEndpointFromInstructions=_G;Dpt.getEndpointPlugin=Ept;Dpt.resolveEndpointConfig=xpt;Dpt.resolveEndpointRequiredConfig=qpt;Dpt.resolveParams=$G;Dpt.toEndpointV1=D_});var j_=Q((Aut)=>{var cut=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],iut=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],fut=["TimeoutError","RequestTimeout","RequestTimeoutException"],hut=[500,502,503,504],wut=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],put=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],IG=(t)=>t?.$retryable!==void 0,uut=(t)=>cut.includes(t.name),TG=(t)=>t.$metadata?.clockSkewCorrected,NG=(t)=>{let r=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);if(!(t&&t instanceof TypeError))return!1;return r.has(t.message)},dut=(t)=>t.$metadata?.httpStatusCode===429||iut.includes(t.name)||t.$retryable?.throttling==!0,V_=(t,r=0)=>IG(t)||TG(t)||fut.includes(t.name)||wut.includes(t?.code||"")||put.includes(t?.code||"")||hut.includes(t.$metadata?.httpStatusCode||0)||NG(t)||t.cause!==void 0&&r<=10&&V_(t.cause,r+1),yut=(t)=>{if(t.$metadata?.httpStatusCode!==void 0){let r=t.$metadata.httpStatusCode;if(500<=r&&r<=599&&!V_(t))return!0;return!1}return!1};Aut.isBrowserNetworkError=NG;Aut.isClockSkewCorrectedError=TG;Aut.isClockSkewError=uut;Aut.isRetryableByTrait=IG;Aut.isServerError=yut;Aut.isThrottlingError=dut;Aut.isTransientError=V_});var dc=Q((but)=>{var Nut=j_();but.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(but.RETRY_MODES||(but.RETRY_MODES={}));var t3=3,mut=but.RETRY_MODES.STANDARD;class Ep{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??0.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??0.5,this.scaleConstant=t?.scaleConstant??0.4,this.smooth=t?.smooth??0.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1000}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(!this.enabled)return;if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1000;await new Promise((e)=>Ep.setTimeoutFn(e,r))}this.currentCapacity=this.currentCapacity-t}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Nut.isThrottlingError(t)){let o=!this.enabled?this.measuredTxRate:Math.min(this.measuredTxRate,this.fillRate);this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let e=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(e)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,0.3333333333333333))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let e=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}}var Z0=100,e3=20000,aG=500,r3=500,UG=5,HG=10,bG=1,aut="amz-sdk-invocation-id",Uut="amz-sdk-request",Hut=()=>{let t=Z0;return{computeNextBackoffDelay:(o)=>{return Math.floor(Math.min(e3,Math.random()*2**o*t))},setDelayBase:(o)=>{t=o}}},mG=({retryDelay:t,retryCount:r,retryCost:e})=>{return{getRetryCount:()=>r,getRetryDelay:()=>Math.min(e3,t),getRetryCost:()=>e}};class xp{maxAttempts;mode=but.RETRY_MODES.STANDARD;capacity=r3;retryBackoffStrategy=Hut();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t==="function"?t:async()=>t}async acquireInitialRetryToken(t){return mG({retryDelay:Z0,retryCount:0})}async refreshRetryTokenForRetry(t,r){let e=await this.getMaxAttempts();if(this.shouldRetry(t,r,e)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?aG:Z0);let n=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),c=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,n):n,i=this.getCapacityCost(o);return this.capacity-=i,mG({retryDelay:c,retryCount:t.getRetryCount()+1,retryCost:i})}throw Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(r3,this.capacity+(t.getRetryCost()??bG))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(t){return console.warn(`Max attempts provider could not resolve. Using default of ${t3}`),t3}}shouldRetry(t,r,e){return t.getRetryCount()+1<e&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?HG:UG}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class lG{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=but.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:e}=r??{};this.rateLimiter=e??new Ep,this.standardRetryStrategy=new xp(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}class FG extends xp{computeNextBackoffDelay;constructor(t,r=Z0){super(typeof t==="function"?t:async()=>t);if(typeof r==="number")this.computeNextBackoffDelay=()=>r;else this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let e=await super.refreshRetryTokenForRetry(t,r);return e.getRetryDelay=()=>this.computeNextBackoffDelay(e.getRetryCount()),e}}but.AdaptiveRetryStrategy=lG;but.ConfiguredRetryStrategy=FG;but.DEFAULT_MAX_ATTEMPTS=t3;but.DEFAULT_RETRY_DELAY_BASE=Z0;but.DEFAULT_RETRY_MODE=mut;but.DefaultRateLimiter=Ep;but.INITIAL_RETRY_TOKENS=r3;but.INVOCATION_ID_HEADER=aut;but.MAXIMUM_RETRY_DELAY=e3;but.NO_RETRY_INCREMENT=bG;but.REQUEST_HEADER=Uut;but.RETRY_COST=UG;but.StandardRetryStrategy=xp;but.THROTTLING_RETRY_DELAY_BASE=aG;but.TIMEOUT_RETRY_COST=HG});var vG=Q((LG)=>{Object.defineProperty(LG,"__esModule",{value:!0});LG.isStreamingPayload=void 0;var gut=Rr("stream"),Cut=(t)=>t?.body instanceof gut.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;LG.isStreamingPayload=Cut});var qo=Q((n1t)=>{var zr=dc(),Mi=tr(),ds=j_(),zG=BA(),MG=Qe(),Qut=z(),Kut=vG(),Eut=(t,r)=>{let e=t,o=zr.NO_RETRY_INCREMENT,n=zr.RETRY_COST,c=zr.TIMEOUT_RETRY_COST,i=t,f=(u)=>u.name==="TimeoutError"?c:n,h=(u)=>f(u)<=i;return Object.freeze({hasRetryTokens:h,retrieveRetryTokens:(u)=>{if(!h(u))throw Error("No retry token available");let d=f(u);return i-=d,d},releaseRetryTokens:(u)=>{i+=u??o,i=Math.min(i,e)}})},kG=(t,r)=>Math.floor(Math.min(zr.MAXIMUM_RETRY_DELAY,Math.random()*2**r*t)),WG=(t)=>{if(!t)return!1;return ds.isRetryableByTrait(t)||ds.isClockSkewError(t)||ds.isThrottlingError(t)||ds.isTransientError(t)},ZG=(t)=>{if(t instanceof Error)return t;if(t instanceof Object)return Object.assign(Error(),t);if(typeof t==="string")return Error(t);return Error(`AWS SDK error wrapper for ${t}`)};class s3{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=zr.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??WG,this.delayDecider=r?.delayDecider??kG,this.retryQuota=r?.retryQuota??Eut(zr.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,e){return r<e&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch(r){t=zr.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,e){let o,n=0,c=0,i=await this.getMaxAttempts(),{request:f}=r;if(Mi.HttpRequest.isInstance(f))f.headers[zr.INVOCATION_ID_HEADER]=zG.v4();while(!0)try{if(Mi.HttpRequest.isInstance(f))f.headers[zr.REQUEST_HEADER]=`attempt=${n+1}; max=${i}`;if(e?.beforeRequest)await e.beforeRequest();let{response:h,output:w}=await t(r);if(e?.afterRequest)e.afterRequest(h);return this.retryQuota.releaseRetryTokens(o),w.$metadata.attempts=n+1,w.$metadata.totalRetryDelay=c,{response:h,output:w}}catch(h){let w=ZG(h);if(n++,this.shouldRetry(w,n,i)){o=this.retryQuota.retrieveRetryTokens(w);let p=this.delayDecider(ds.isThrottlingError(w)?zr.THROTTLING_RETRY_DELAY_BASE:zr.DEFAULT_RETRY_DELAY_BASE,n),u=xut(w.$response),d=Math.max(u||0,p);c+=d,await new Promise((y)=>setTimeout(y,d));continue}if(!w.$metadata)w.$metadata={};throw w.$metadata.attempts=n,w.$metadata.totalRetryDelay=c,w}}}var xut=(t)=>{if(!Mi.HttpResponse.isInstance(t))return;let r=Object.keys(t.headers).find((c)=>c.toLowerCase()==="retry-after");if(!r)return;let e=t.headers[r],o=Number(e);if(!Number.isNaN(o))return o*1000;return new Date(e).getTime()-Date.now()};class BG extends s3{rateLimiter;constructor(t,r){let{rateLimiter:e,...o}=r??{};super(t,o);this.rateLimiter=e??new zr.DefaultRateLimiter,this.mode=zr.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>{return this.rateLimiter.getSendToken()},afterRequest:(e)=>{this.rateLimiter.updateClientSendingRate(e)}})}}var o3="AWS_MAX_ATTEMPTS",n3="max_attempts",qut={environmentVariableSelector:(t)=>{let r=t[o3];if(!r)return;let e=parseInt(r);if(Number.isNaN(e))throw Error(`Environment variable ${o3} mast be a number, got "${r}"`);return e},configFileSelector:(t)=>{let r=t[n3];if(!r)return;let e=parseInt(r);if(Number.isNaN(e))throw Error(`Shared config file entry ${n3} mast be a number, got "${r}"`);return e},default:zr.DEFAULT_MAX_ATTEMPTS},Dut=(t)=>{let{retryStrategy:r,retryMode:e,maxAttempts:o}=t,n=MG.normalizeProvider(o??zr.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:n,retryStrategy:async()=>{if(r)return r;if(await MG.normalizeProvider(e)()===zr.RETRY_MODES.ADAPTIVE)return new zr.AdaptiveRetryStrategy(n);return new zr.StandardRetryStrategy(n)}})},XG="AWS_RETRY_MODE",JG="retry_mode",Vut={environmentVariableSelector:(t)=>t[XG],configFileSelector:(t)=>t[JG],default:zr.DEFAULT_RETRY_MODE},YG=()=>(t)=>async(r)=>{let{request:e}=r;if(Mi.HttpRequest.isInstance(e))delete e.headers[zr.INVOCATION_ID_HEADER],delete e.headers[zr.REQUEST_HEADER];return t(r)},PG={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},jut=(t)=>({applyToStack:(r)=>{r.addRelativeTo(YG(),PG)}}),gG=(t)=>(r,e)=>async(o)=>{let n=await t.retryStrategy(),c=await t.maxAttempts();if(t1t(n)){n=n;let i=await n.acquireInitialRetryToken(e.partition_id),f=Error(),h=0,w=0,{request:p}=o,u=Mi.HttpRequest.isInstance(p);if(u)p.headers[zr.INVOCATION_ID_HEADER]=zG.v4();while(!0)try{if(u)p.headers[zr.REQUEST_HEADER]=`attempt=${h+1}; max=${c}`;let{response:d,output:y}=await r(o);return n.recordSuccess(i),y.$metadata.attempts=h+1,y.$metadata.totalRetryDelay=w,{response:d,output:y}}catch(d){let y=r1t(d);if(f=ZG(d),u&&Kut.isStreamingPayload(p))throw(e.logger instanceof Qut.NoOpLogger?console:e.logger)?.warn("An error was encountered in a non-retryable streaming request."),f;try{i=await n.refreshRetryTokenForRetry(i,y)}catch(S){if(!f.$metadata)f.$metadata={};throw f.$metadata.attempts=h+1,f.$metadata.totalRetryDelay=w,f}h=i.getRetryCount();let R=i.getRetryDelay();w+=R,await new Promise((S)=>setTimeout(S,R))}}else{if(n=n,n?.mode)e.userAgent=[...e.userAgent||[],["cfg/retry-mode",n.mode]];return n.retry(r,o)}},t1t=(t)=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",r1t=(t)=>{let r={error:t,errorType:e1t(t)},e=QG(t.$response);if(e)r.retryAfterHint=e;return r},e1t=(t)=>{if(ds.isThrottlingError(t))return"THROTTLING";if(ds.isTransientError(t))return"TRANSIENT";if(ds.isServerError(t))return"SERVER_ERROR";return"CLIENT_ERROR"},CG={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},o1t=(t)=>({applyToStack:(r)=>{r.add(gG(t),CG)}}),QG=(t)=>{if(!Mi.HttpResponse.isInstance(t))return;let r=Object.keys(t.headers).find((c)=>c.toLowerCase()==="retry-after");if(!r)return;let e=t.headers[r],o=Number(e);if(!Number.isNaN(o))return new Date(o*1000);return new Date(e)};n1t.AdaptiveRetryStrategy=BG;n1t.CONFIG_MAX_ATTEMPTS=n3;n1t.CONFIG_RETRY_MODE=JG;n1t.ENV_MAX_ATTEMPTS=o3;n1t.ENV_RETRY_MODE=XG;n1t.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=qut;n1t.NODE_RETRY_MODE_CONFIG_OPTIONS=Vut;n1t.StandardRetryStrategy=s3;n1t.defaultDelayDecider=kG;n1t.defaultRetryDecider=WG;n1t.getOmitRetryHeadersPlugin=jut;n1t.getRetryAfterHint=QG;n1t.getRetryPlugin=o1t;n1t.omitRetryHeadersMiddleware=YG;n1t.omitRetryHeadersMiddlewareOptions=PG;n1t.resolveRetryConfig=Dut;n1t.retryMiddleware=gG;n1t.retryMiddlewareOptions=CG});var B0;var c3=_(()=>{B0={CrtSignerV4:null}});class yc{sigv4aSigner;sigv4Signer;signerOptions;static sigv4aDependency(){if(typeof B0.CrtSignerV4==="function")return"crt";else if(typeof i3.signatureV4aContainer.SignatureV4a==="function")return"js";return"none"}constructor(t){this.sigv4Signer=new Zp(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*")return this.getSigv4aSigner().sign(t,r);return this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,e={}){if(e.signingRegion==="*"){let o=this.getSigv4aSigner(),n=B0.CrtSignerV4;if(n&&o instanceof n)return o.signWithCredentials(t,r,e);else throw Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.signWithCredentials(t,r,e)}async presign(t,r={}){if(r.signingRegion==="*"){let e=this.getSigv4aSigner(),o=B0.CrtSignerV4;if(o&&e instanceof o)return e.presign(t,r);else throw Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,e={}){if(e.signingRegion==="*")throw Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,e)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=B0.CrtSignerV4,r=i3.signatureV4aContainer.SignatureV4a;if(this.signerOptions.runtime==="node"){if(!t&&!r)throw Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt");if(t&&typeof t==="function")this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1});else if(r&&typeof r==="function")this.sigv4aSigner=new r({...this.signerOptions});else throw Error("Available SigV4a implementation is not a valid constructor. Please ensure you've properly imported @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a.For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt")}else{if(!r||typeof r!=="function")throw Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");this.sigv4aSigner=new r({...this.signerOptions})}}return this.sigv4aSigner}}var i3;var KG=_(()=>{st();c3();i3=O(yp(),1)});var qp=_(()=>{KG();c3()});var zi,ki,X0,Mo,Tr,Ar,Er,Kv,EG,Y0,Jt,xG,qG,Ve,f3,Ev,xv,$o,Nt,qv,DG,VG,jG,Ut,zt,lt,Dp,tv,rv,ev,Vp,h3,N1t,jr,ne,de,Bt,ye,ov,te,Ae,nv,sv,cv,w3,p3,L3,iv,u3,fv,jp,io,Dv,d3,G3,hv,wv,pv,y3,Vv,jv,A3,uv,S3,_3,$3,dv,yv,J0,Av,Sv,_v,$v,Ov,O3,Rv,Iv,R3,Tv,Nv,mv,I3,av,T3,m1t,a1t,N3,Wi,Uv,U1t,m3,vo,a3,P0,g0,C0,Hv,un,bv,lv,Fv,Lv,dn,Gv,vv,Mv,zv,kv,Wv,H1t,Zv,Bv,b1t,Xv,ys,U3,Jv,l1t,Yv,H3,Pv,F1t,b3,gv,l3,F3,Cv,tu,Qv,L1t,tM;var rM=_(()=>{zi={["required"]:!1,["type"]:"string"},ki={["required"]:!0,default:!1,["type"]:"boolean"},X0={["required"]:!1,["type"]:"boolean"},Mo={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"Accelerate"},!0]},Tr={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseFIPS"},!0]},Ar={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseDualStack"},!0]},Er={["fn"]:"isSet",["argv"]:[{["ref"]:"Endpoint"}]},Kv={["fn"]:"aws.partition",["argv"]:[{["ref"]:"Region"}],["assign"]:"partitionResult"},EG={["fn"]:"stringEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[{["ref"]:"partitionResult"},"name"]},"aws-cn"]},Y0={["fn"]:"isSet",["argv"]:[{["ref"]:"Bucket"}]},Jt={["ref"]:"Bucket"},xG={["conditions"]:[Mo],["error"]:"S3Express does not support S3 Accelerate.",["type"]:"error"},qG={["conditions"]:[Er,{["fn"]:"parseURL",["argv"]:[{["ref"]:"Endpoint"}],["assign"]:"url"}],["rules"]:[{["conditions"]:[{["fn"]:"isSet",["argv"]:[{["ref"]:"DisableS3ExpressSessionAuth"}]},{["fn"]:"booleanEquals",["argv"]:[{["ref"]:"DisableS3ExpressSessionAuth"},!0]}],["rules"]:[{["conditions"]:[{["fn"]:"booleanEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[{["ref"]:"url"},"isIp"]},!0]}],["rules"]:[{["conditions"]:[{["fn"]:"uriEncode",["argv"]:[Jt],["assign"]:"uri_encoded_bucket"}],["rules"]:[{["endpoint"]:{["url"]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",["properties"]:{["backend"]:"S3Express",["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3express",["signingRegion"]:"{Region}"}]},["headers"]:{}},["type"]:"endpoint"}],["type"]:"tree"}],["type"]:"tree"},{["conditions"]:[{["fn"]:"aws.isVirtualHostableS3Bucket",["argv"]:[Jt,!1]}],["rules"]:[{["endpoint"]:{["url"]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",["properties"]:{["backend"]:"S3Express",["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3express",["signingRegion"]:"{Region}"}]},["headers"]:{}},["type"]:"endpoint"}],["type"]:"tree"},{["error"]:"S3Express bucket name is not a valid virtual hostable name.",["type"]:"error"}],["type"]:"tree"},{["conditions"]:[{["fn"]:"booleanEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[{["ref"]:"url"},"isIp"]},!0]}],["rules"]:[{["conditions"]:[{["fn"]:"uriEncode",["argv"]:[Jt],["assign"]:"uri_encoded_bucket"}],["rules"]:[{["endpoint"]:{["url"]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",["properties"]:{["backend"]:"S3Express",["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4-s3express",["signingName"]:"s3express",["signingRegion"]:"{Region}"}]},["headers"]:{}},["type"]:"endpoint"}],["type"]:"tree"}],["type"]:"tree"},{["conditions"]:[{["fn"]:"aws.isVirtualHostableS3Bucket",["argv"]:[Jt,!1]}],["rules"]:[{["endpoint"]:{["url"]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",["properties"]:{["backend"]:"S3Express",["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4-s3express",["signingName"]:"s3express",["signingRegion"]:"{Region}"}]},["headers"]:{}},["type"]:"endpoint"}],["type"]:"tree"},{["error"]:"S3Express bucket name is not a valid virtual hostable name.",["type"]:"error"}],["type"]:"tree"},Ve={["fn"]:"parseURL",["argv"]:[{["ref"]:"Endpoint"}],["assign"]:"url"},f3={["fn"]:"booleanEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[{["ref"]:"url"},"isIp"]},!0]},Ev={["ref"]:"url"},xv={["fn"]:"uriEncode",["argv"]:[Jt],["assign"]:"uri_encoded_bucket"},$o={["backend"]:"S3Express",["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3express",["signingRegion"]:"{Region}"}]},Nt={},qv={["fn"]:"aws.isVirtualHostableS3Bucket",["argv"]:[Jt,!1]},DG={["error"]:"S3Express bucket name is not a valid virtual hostable name.",["type"]:"error"},VG={["fn"]:"isSet",["argv"]:[{["ref"]:"UseS3ExpressControlEndpoint"}]},jG={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseS3ExpressControlEndpoint"},!0]},Ut={["fn"]:"not",["argv"]:[Er]},zt={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseDualStack"},!1]},lt={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseFIPS"},!1]},Dp={["error"]:"Unrecognized S3Express bucket name format.",["type"]:"error"},tv={["fn"]:"not",["argv"]:[Y0]},rv={["ref"]:"hardwareType"},ev={["conditions"]:[Ut],["error"]:"Expected a endpoint to be specified but no endpoint was found",["type"]:"error"},Vp={["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4a",["signingName"]:"s3-outposts",["signingRegionSet"]:["*"]},{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3-outposts",["signingRegion"]:"{Region}"}]},h3={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"ForcePathStyle"},!1]},N1t={["ref"]:"ForcePathStyle"},jr={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"Accelerate"},!1]},ne={["fn"]:"stringEquals",["argv"]:[{["ref"]:"Region"},"aws-global"]},de={["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3",["signingRegion"]:"us-east-1"}]},Bt={["fn"]:"not",["argv"]:[ne]},ye={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseGlobalEndpoint"},!0]},ov={["url"]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:{["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3",["signingRegion"]:"{Region}"}]},["headers"]:{}},te={["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3",["signingRegion"]:"{Region}"}]},Ae={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseGlobalEndpoint"},!1]},nv={["url"]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:{}},sv={["url"]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:{}},cv={["url"]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:{}},w3={["fn"]:"booleanEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[Ev,"isIp"]},!1]},p3={["url"]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",["properties"]:te,["headers"]:{}},L3={["url"]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",["properties"]:te,["headers"]:{}},iv={["endpoint"]:L3,["type"]:"endpoint"},u3={["url"]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:{}},fv={["url"]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:{}},jp={["error"]:"Invalid region: region was not a valid DNS name.",["type"]:"error"},io={["ref"]:"bucketArn"},Dv={["ref"]:"arnType"},d3={["fn"]:"getAttr",["argv"]:[io,"service"]},G3={["ref"]:"accessPointName"},hv={["conditions"]:[Ar],["error"]:"S3 Object Lambda does not support Dual-stack",["type"]:"error"},wv={["conditions"]:[Mo],["error"]:"S3 Object Lambda does not support S3 Accelerate",["type"]:"error"},pv={["conditions"]:[{["fn"]:"isSet",["argv"]:[{["ref"]:"DisableAccessPoints"}]},{["fn"]:"booleanEquals",["argv"]:[{["ref"]:"DisableAccessPoints"},!0]}],["error"]:"Access points are not supported for this operation",["type"]:"error"},y3={["conditions"]:[{["fn"]:"isSet",["argv"]:[{["ref"]:"UseArnRegion"}]},{["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseArnRegion"},!1]},{["fn"]:"not",["argv"]:[{["fn"]:"stringEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[io,"region"]},"{Region}"]}]}],["error"]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",["type"]:"error"},Vv={["fn"]:"getAttr",["argv"]:[{["ref"]:"bucketPartition"},"name"]},jv={["fn"]:"getAttr",["argv"]:[io,"accountId"]},A3={["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3-object-lambda",["signingRegion"]:"{bucketArn#region}"}]},uv={["error"]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",["type"]:"error"},S3={["error"]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",["type"]:"error"},_3={["error"]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",["type"]:"error"},$3={["error"]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",["type"]:"error"},dv={["error"]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",["type"]:"error"},yv={["error"]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",["type"]:"error"},J0={["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3",["signingRegion"]:"{bucketArn#region}"}]},Av={["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4a",["signingName"]:"s3-outposts",["signingRegionSet"]:["*"]},{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3-outposts",["signingRegion"]:"{bucketArn#region}"}]},Sv={["fn"]:"aws.parseArn",["argv"]:[Jt]},_v={["url"]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:te,["headers"]:{}},$v={["url"]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:te,["headers"]:{}},Ov={["url"]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:te,["headers"]:{}},O3={["url"]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",["properties"]:te,["headers"]:{}},Rv={["url"]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:te,["headers"]:{}},Iv={["ref"]:"UseObjectLambdaEndpoint"},R3={["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4",["signingName"]:"s3-object-lambda",["signingRegion"]:"{Region}"}]},Tv={["url"]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:{}},Nv={["url"]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:{}},mv={["url"]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:{}},I3={["url"]:"{url#scheme}://{url#authority}{url#path}",["properties"]:te,["headers"]:{}},av={["url"]:"https://s3.{Region}.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:{}},T3=[{["ref"]:"Region"}],m1t=[{["ref"]:"Endpoint"}],a1t=[Jt],N3=[Mo],Wi=[Er,Ve],Uv=[{["fn"]:"isSet",["argv"]:[{["ref"]:"DisableS3ExpressSessionAuth"}]},{["fn"]:"booleanEquals",["argv"]:[{["ref"]:"DisableS3ExpressSessionAuth"},!0]}],U1t=[xv],m3=[qv],vo=[Kv],a3=[Tr,Ar],P0=[Tr,zt],g0=[lt,Ar],C0=[lt,zt],Hv=[{["fn"]:"substring",["argv"]:[Jt,6,14,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,14,16,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],un=[{["conditions"]:[Tr,Ar],["endpoint"]:{["url"]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:$o,["headers"]:{}},["type"]:"endpoint"},{["conditions"]:P0,["endpoint"]:{["url"]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",["properties"]:$o,["headers"]:{}},["type"]:"endpoint"},{["conditions"]:g0,["endpoint"]:{["url"]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:$o,["headers"]:{}},["type"]:"endpoint"},{["conditions"]:C0,["endpoint"]:{["url"]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",["properties"]:$o,["headers"]:{}},["type"]:"endpoint"}],bv=[{["fn"]:"substring",["argv"]:[Jt,6,15,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,15,17,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],lv=[{["fn"]:"substring",["argv"]:[Jt,6,19,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,19,21,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],Fv=[{["fn"]:"substring",["argv"]:[Jt,6,20,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,20,22,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],Lv=[{["fn"]:"substring",["argv"]:[Jt,6,26,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,26,28,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],dn=[{["conditions"]:[Tr,Ar],["endpoint"]:{["url"]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:{["backend"]:"S3Express",["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4-s3express",["signingName"]:"s3express",["signingRegion"]:"{Region}"}]},["headers"]:{}},["type"]:"endpoint"},{["conditions"]:P0,["endpoint"]:{["url"]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",["properties"]:{["backend"]:"S3Express",["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4-s3express",["signingName"]:"s3express",["signingRegion"]:"{Region}"}]},["headers"]:{}},["type"]:"endpoint"},{["conditions"]:g0,["endpoint"]:{["url"]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:{["backend"]:"S3Express",["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4-s3express",["signingName"]:"s3express",["signingRegion"]:"{Region}"}]},["headers"]:{}},["type"]:"endpoint"},{["conditions"]:C0,["endpoint"]:{["url"]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",["properties"]:{["backend"]:"S3Express",["authSchemes"]:[{["disableDoubleEncoding"]:!0,["name"]:"sigv4-s3express",["signingName"]:"s3express",["signingRegion"]:"{Region}"}]},["headers"]:{}},["type"]:"endpoint"}],Gv=[Jt,0,7,!0],vv=[{["fn"]:"substring",["argv"]:[Jt,7,15,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,15,17,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],Mv=[{["fn"]:"substring",["argv"]:[Jt,7,16,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,16,18,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],zv=[{["fn"]:"substring",["argv"]:[Jt,7,20,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,20,22,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],kv=[{["fn"]:"substring",["argv"]:[Jt,7,21,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,21,23,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],Wv=[{["fn"]:"substring",["argv"]:[Jt,7,27,!0],["assign"]:"s3expressAvailabilityZoneId"},{["fn"]:"substring",["argv"]:[Jt,27,29,!0],["assign"]:"s3expressAvailabilityZoneDelim"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"s3expressAvailabilityZoneDelim"},"--"]}],H1t=[Y0],Zv=[{["fn"]:"isValidHostLabel",["argv"]:[{["ref"]:"outpostId"},!1]}],Bv=[{["fn"]:"stringEquals",["argv"]:[{["ref"]:"regionPrefix"},"beta"]}],b1t=["*"],Xv=[{["fn"]:"isValidHostLabel",["argv"]:[{["ref"]:"Region"},!1]}],ys=[{["fn"]:"stringEquals",["argv"]:[{["ref"]:"Region"},"us-east-1"]}],U3=[{["fn"]:"stringEquals",["argv"]:[Dv,"accesspoint"]}],Jv=[{["fn"]:"getAttr",["argv"]:[io,"resourceId[1]"],["assign"]:"accessPointName"},{["fn"]:"not",["argv"]:[{["fn"]:"stringEquals",["argv"]:[G3,""]}]}],l1t=[io,"resourceId[1]"],Yv=[Ar],H3=[{["fn"]:"not",["argv"]:[{["fn"]:"stringEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[io,"region"]},""]}]}],Pv=[{["fn"]:"not",["argv"]:[{["fn"]:"isSet",["argv"]:[{["fn"]:"getAttr",["argv"]:[io,"resourceId[2]"]}]}]}],F1t=[io,"resourceId[2]"],b3=[{["fn"]:"aws.partition",["argv"]:[{["fn"]:"getAttr",["argv"]:[io,"region"]}],["assign"]:"bucketPartition"}],gv=[{["fn"]:"stringEquals",["argv"]:[Vv,{["fn"]:"getAttr",["argv"]:[{["ref"]:"partitionResult"},"name"]}]}],l3=[{["fn"]:"isValidHostLabel",["argv"]:[{["fn"]:"getAttr",["argv"]:[io,"region"]},!0]}],F3=[{["fn"]:"isValidHostLabel",["argv"]:[jv,!1]}],Cv=[{["fn"]:"isValidHostLabel",["argv"]:[G3,!1]}],tu=[Tr],Qv=[{["fn"]:"isValidHostLabel",["argv"]:[{["ref"]:"Region"},!0]}],L1t={version:"1.0",parameters:{Bucket:zi,Region:zi,UseFIPS:ki,UseDualStack:ki,Endpoint:zi,ForcePathStyle:ki,Accelerate:ki,UseGlobalEndpoint:ki,UseObjectLambdaEndpoint:X0,Key:zi,Prefix:zi,CopySource:zi,DisableAccessPoints:X0,DisableMultiRegionAccessPoints:ki,UseArnRegion:X0,UseS3ExpressControlEndpoint:X0,DisableS3ExpressSessionAuth:X0},["rules"]:[{["conditions"]:[{["fn"]:"isSet",["argv"]:T3}],["rules"]:[{["conditions"]:[Mo,Tr],error:"Accelerate cannot be used with FIPS",["type"]:"error"},{["conditions"]:[Ar,Er],error:"Cannot set dual-stack in combination with a custom endpoint.",["type"]:"error"},{["conditions"]:[Er,Tr],error:"A custom endpoint cannot be combined with FIPS",["type"]:"error"},{["conditions"]:[Er,Mo],error:"A custom endpoint cannot be combined with S3 Accelerate",["type"]:"error"},{["conditions"]:[Tr,Kv,EG],error:"Partition does not support FIPS",["type"]:"error"},{["conditions"]:[Y0,{["fn"]:"substring",["argv"]:[Jt,0,6,!0],["assign"]:"bucketSuffix"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"bucketSuffix"},"--x-s3"]}],["rules"]:[xG,qG,{["conditions"]:[VG,jG],["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:[xv,Ut],["rules"]:[{["conditions"]:a3,endpoint:{["url"]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:$o,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:P0,endpoint:{["url"]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:$o,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:g0,endpoint:{["url"]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:$o,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:C0,endpoint:{["url"]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:$o,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"}],["type"]:"tree"}],["type"]:"tree"},{["conditions"]:m3,["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:Uv,["rules"]:[{["conditions"]:Hv,["rules"]:un,["type"]:"tree"},{["conditions"]:bv,["rules"]:un,["type"]:"tree"},{["conditions"]:lv,["rules"]:un,["type"]:"tree"},{["conditions"]:Fv,["rules"]:un,["type"]:"tree"},{["conditions"]:Lv,["rules"]:un,["type"]:"tree"},Dp],["type"]:"tree"},{["conditions"]:Hv,["rules"]:dn,["type"]:"tree"},{["conditions"]:bv,["rules"]:dn,["type"]:"tree"},{["conditions"]:lv,["rules"]:dn,["type"]:"tree"},{["conditions"]:Fv,["rules"]:dn,["type"]:"tree"},{["conditions"]:Lv,["rules"]:dn,["type"]:"tree"},Dp],["type"]:"tree"}],["type"]:"tree"},DG],["type"]:"tree"},{["conditions"]:[Y0,{["fn"]:"substring",["argv"]:Gv,["assign"]:"accessPointSuffix"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"accessPointSuffix"},"--xa-s3"]}],["rules"]:[xG,qG,{["conditions"]:m3,["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:Uv,["rules"]:[{["conditions"]:vv,["rules"]:un,["type"]:"tree"},{["conditions"]:Mv,["rules"]:un,["type"]:"tree"},{["conditions"]:zv,["rules"]:un,["type"]:"tree"},{["conditions"]:kv,["rules"]:un,["type"]:"tree"},{["conditions"]:Wv,["rules"]:un,["type"]:"tree"},Dp],["type"]:"tree"},{["conditions"]:vv,["rules"]:dn,["type"]:"tree"},{["conditions"]:Mv,["rules"]:dn,["type"]:"tree"},{["conditions"]:zv,["rules"]:dn,["type"]:"tree"},{["conditions"]:kv,["rules"]:dn,["type"]:"tree"},{["conditions"]:Wv,["rules"]:dn,["type"]:"tree"},Dp],["type"]:"tree"}],["type"]:"tree"},DG],["type"]:"tree"},{["conditions"]:[tv,VG,jG],["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:Wi,endpoint:{["url"]:"{url#scheme}://{url#authority}{url#path}",["properties"]:$o,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:a3,endpoint:{["url"]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:$o,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:P0,endpoint:{["url"]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",["properties"]:$o,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:g0,endpoint:{["url"]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}",["properties"]:$o,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:C0,endpoint:{["url"]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",["properties"]:$o,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"}],["type"]:"tree"},{["conditions"]:[Y0,{["fn"]:"substring",["argv"]:[Jt,49,50,!0],["assign"]:"hardwareType"},{["fn"]:"substring",["argv"]:[Jt,8,12,!0],["assign"]:"regionPrefix"},{["fn"]:"substring",["argv"]:Gv,["assign"]:"bucketAliasSuffix"},{["fn"]:"substring",["argv"]:[Jt,32,49,!0],["assign"]:"outpostId"},{["fn"]:"aws.partition",["argv"]:T3,["assign"]:"regionPartition"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"bucketAliasSuffix"},"--op-s3"]}],["rules"]:[{["conditions"]:Zv,["rules"]:[{["conditions"]:m3,["rules"]:[{["conditions"]:[{["fn"]:"stringEquals",["argv"]:[rv,"e"]}],["rules"]:[{["conditions"]:Bv,["rules"]:[ev,{["conditions"]:Wi,endpoint:{["url"]:"https://{Bucket}.ec2.{url#authority}",["properties"]:Vp,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"},{endpoint:{["url"]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",["properties"]:Vp,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[{["fn"]:"stringEquals",["argv"]:[rv,"o"]}],["rules"]:[{["conditions"]:Bv,["rules"]:[ev,{["conditions"]:Wi,endpoint:{["url"]:"https://{Bucket}.op-{outpostId}.{url#authority}",["properties"]:Vp,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"},{endpoint:{["url"]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",["properties"]:Vp,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',["type"]:"error"}],["type"]:"tree"},{error:"Invalid Outposts Bucket alias - it must be a valid bucket name.",["type"]:"error"}],["type"]:"tree"},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",["type"]:"error"}],["type"]:"tree"},{["conditions"]:H1t,["rules"]:[{["conditions"]:[Er,{["fn"]:"not",["argv"]:[{["fn"]:"isSet",["argv"]:[{["fn"]:"parseURL",["argv"]:m1t}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",["type"]:"error"},{["conditions"]:[h3,qv],["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:Xv,["rules"]:[{["conditions"]:[Mo,EG],error:"S3 Accelerate cannot be used in this region",["type"]:"error"},{["conditions"]:[Ar,Tr,jr,Ut,ne],endpoint:{["url"]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[Ar,Tr,jr,Ut,Bt,ye],["rules"]:[{endpoint:ov,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[Ar,Tr,jr,Ut,Bt,Ae],endpoint:ov,["type"]:"endpoint"},{["conditions"]:[zt,Tr,jr,Ut,ne],endpoint:{["url"]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[zt,Tr,jr,Ut,Bt,ye],["rules"]:[{endpoint:nv,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[zt,Tr,jr,Ut,Bt,Ae],endpoint:nv,["type"]:"endpoint"},{["conditions"]:[Ar,lt,Mo,Ut,ne],endpoint:{["url"]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[Ar,lt,Mo,Ut,Bt,ye],["rules"]:[{endpoint:sv,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[Ar,lt,Mo,Ut,Bt,Ae],endpoint:sv,["type"]:"endpoint"},{["conditions"]:[Ar,lt,jr,Ut,ne],endpoint:{["url"]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[Ar,lt,jr,Ut,Bt,ye],["rules"]:[{endpoint:cv,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[Ar,lt,jr,Ut,Bt,Ae],endpoint:cv,["type"]:"endpoint"},{["conditions"]:[zt,lt,jr,Er,Ve,f3,ne],endpoint:{["url"]:"{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[zt,lt,jr,Er,Ve,w3,ne],endpoint:{["url"]:"{url#scheme}://{Bucket}.{url#authority}{url#path}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[zt,lt,jr,Er,Ve,f3,Bt,ye],["rules"]:[{["conditions"]:ys,endpoint:p3,["type"]:"endpoint"},{endpoint:p3,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[zt,lt,jr,Er,Ve,w3,Bt,ye],["rules"]:[{["conditions"]:ys,endpoint:L3,["type"]:"endpoint"},iv],["type"]:"tree"},{["conditions"]:[zt,lt,jr,Er,Ve,f3,Bt,Ae],endpoint:p3,["type"]:"endpoint"},{["conditions"]:[zt,lt,jr,Er,Ve,w3,Bt,Ae],endpoint:L3,["type"]:"endpoint"},{["conditions"]:[zt,lt,Mo,Ut,ne],endpoint:{["url"]:"https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[zt,lt,Mo,Ut,Bt,ye],["rules"]:[{["conditions"]:ys,endpoint:u3,["type"]:"endpoint"},{endpoint:u3,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[zt,lt,Mo,Ut,Bt,Ae],endpoint:u3,["type"]:"endpoint"},{["conditions"]:[zt,lt,jr,Ut,ne],endpoint:{["url"]:"https://{Bucket}.s3.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[zt,lt,jr,Ut,Bt,ye],["rules"]:[{["conditions"]:ys,endpoint:{["url"]:"https://{Bucket}.s3.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:Nt},["type"]:"endpoint"},{endpoint:fv,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[zt,lt,jr,Ut,Bt,Ae],endpoint:fv,["type"]:"endpoint"}],["type"]:"tree"},jp],["type"]:"tree"}],["type"]:"tree"},{["conditions"]:[Er,Ve,{["fn"]:"stringEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[Ev,"scheme"]},"http"]},{["fn"]:"aws.isVirtualHostableS3Bucket",["argv"]:[Jt,!0]},h3,lt,zt,jr],["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:Xv,["rules"]:[iv],["type"]:"tree"},jp],["type"]:"tree"}],["type"]:"tree"},{["conditions"]:[h3,{["fn"]:"aws.parseArn",["argv"]:a1t,["assign"]:"bucketArn"}],["rules"]:[{["conditions"]:[{["fn"]:"getAttr",["argv"]:[io,"resourceId[0]"],["assign"]:"arnType"},{["fn"]:"not",["argv"]:[{["fn"]:"stringEquals",["argv"]:[Dv,""]}]}],["rules"]:[{["conditions"]:[{["fn"]:"stringEquals",["argv"]:[d3,"s3-object-lambda"]}],["rules"]:[{["conditions"]:U3,["rules"]:[{["conditions"]:Jv,["rules"]:[hv,wv,{["conditions"]:H3,["rules"]:[pv,{["conditions"]:Pv,["rules"]:[y3,{["conditions"]:b3,["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:gv,["rules"]:[{["conditions"]:l3,["rules"]:[{["conditions"]:[{["fn"]:"stringEquals",["argv"]:[jv,""]}],error:"Invalid ARN: Missing account id",["type"]:"error"},{["conditions"]:F3,["rules"]:[{["conditions"]:Cv,["rules"]:[{["conditions"]:Wi,endpoint:{["url"]:"{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",["properties"]:A3,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:tu,endpoint:{["url"]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",["properties"]:A3,["headers"]:Nt},["type"]:"endpoint"},{endpoint:{["url"]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",["properties"]:A3,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"},uv],["type"]:"tree"},S3],["type"]:"tree"},_3],["type"]:"tree"},$3],["type"]:"tree"}],["type"]:"tree"}],["type"]:"tree"},dv],["type"]:"tree"},{error:"Invalid ARN: bucket ARN is missing a region",["type"]:"error"}],["type"]:"tree"},yv],["type"]:"tree"},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",["type"]:"error"}],["type"]:"tree"},{["conditions"]:U3,["rules"]:[{["conditions"]:Jv,["rules"]:[{["conditions"]:H3,["rules"]:[{["conditions"]:U3,["rules"]:[{["conditions"]:H3,["rules"]:[pv,{["conditions"]:Pv,["rules"]:[y3,{["conditions"]:b3,["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:[{["fn"]:"stringEquals",["argv"]:[Vv,"{partitionResult#name}"]}],["rules"]:[{["conditions"]:l3,["rules"]:[{["conditions"]:[{["fn"]:"stringEquals",["argv"]:[d3,"s3"]}],["rules"]:[{["conditions"]:F3,["rules"]:[{["conditions"]:Cv,["rules"]:[{["conditions"]:N3,error:"Access Points do not support S3 Accelerate",["type"]:"error"},{["conditions"]:a3,endpoint:{["url"]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",["properties"]:J0,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:P0,endpoint:{["url"]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",["properties"]:J0,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:g0,endpoint:{["url"]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",["properties"]:J0,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[lt,zt,Er,Ve],endpoint:{["url"]:"{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",["properties"]:J0,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:C0,endpoint:{["url"]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",["properties"]:J0,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"},uv],["type"]:"tree"},S3],["type"]:"tree"},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",["type"]:"error"}],["type"]:"tree"},_3],["type"]:"tree"},$3],["type"]:"tree"}],["type"]:"tree"}],["type"]:"tree"},dv],["type"]:"tree"}],["type"]:"tree"}],["type"]:"tree"},{["conditions"]:[{["fn"]:"isValidHostLabel",["argv"]:[G3,!0]}],["rules"]:[{["conditions"]:Yv,error:"S3 MRAP does not support dual-stack",["type"]:"error"},{["conditions"]:tu,error:"S3 MRAP does not support FIPS",["type"]:"error"},{["conditions"]:N3,error:"S3 MRAP does not support S3 Accelerate",["type"]:"error"},{["conditions"]:[{["fn"]:"booleanEquals",["argv"]:[{["ref"]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",["type"]:"error"},{["conditions"]:[{["fn"]:"aws.partition",["argv"]:T3,["assign"]:"mrapPartition"}],["rules"]:[{["conditions"]:[{["fn"]:"stringEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[{["ref"]:"mrapPartition"},"name"]},{["fn"]:"getAttr",["argv"]:[io,"partition"]}]}],["rules"]:[{endpoint:{["url"]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",["properties"]:{["authSchemes"]:[{["disableDoubleEncoding"]:!0,name:"sigv4a",["signingName"]:"s3",["signingRegionSet"]:b1t}]},["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",["type"]:"error"}],["type"]:"tree"}],["type"]:"tree"},{error:"Invalid Access Point Name",["type"]:"error"}],["type"]:"tree"},yv],["type"]:"tree"},{["conditions"]:[{["fn"]:"stringEquals",["argv"]:[d3,"s3-outposts"]}],["rules"]:[{["conditions"]:Yv,error:"S3 Outposts does not support Dual-stack",["type"]:"error"},{["conditions"]:tu,error:"S3 Outposts does not support FIPS",["type"]:"error"},{["conditions"]:N3,error:"S3 Outposts does not support S3 Accelerate",["type"]:"error"},{["conditions"]:[{["fn"]:"isSet",["argv"]:[{["fn"]:"getAttr",["argv"]:[io,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",["type"]:"error"},{["conditions"]:[{["fn"]:"getAttr",["argv"]:l1t,["assign"]:"outpostId"}],["rules"]:[{["conditions"]:Zv,["rules"]:[y3,{["conditions"]:b3,["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:gv,["rules"]:[{["conditions"]:l3,["rules"]:[{["conditions"]:F3,["rules"]:[{["conditions"]:[{["fn"]:"getAttr",["argv"]:F1t,["assign"]:"outpostType"}],["rules"]:[{["conditions"]:[{["fn"]:"getAttr",["argv"]:[io,"resourceId[3]"],["assign"]:"accessPointName"}],["rules"]:[{["conditions"]:[{["fn"]:"stringEquals",["argv"]:[{["ref"]:"outpostType"},"accesspoint"]}],["rules"]:[{["conditions"]:Wi,endpoint:{["url"]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",["properties"]:Av,["headers"]:Nt},["type"]:"endpoint"},{endpoint:{["url"]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",["properties"]:Av,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"},{error:"Expected an outpost type `accesspoint`, found {outpostType}",["type"]:"error"}],["type"]:"tree"},{error:"Invalid ARN: expected an access point name",["type"]:"error"}],["type"]:"tree"},{error:"Invalid ARN: Expected a 4-component resource",["type"]:"error"}],["type"]:"tree"},S3],["type"]:"tree"},_3],["type"]:"tree"},$3],["type"]:"tree"}],["type"]:"tree"}],["type"]:"tree"},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",["type"]:"error"}],["type"]:"tree"},{error:"Invalid ARN: The Outpost Id was not set",["type"]:"error"}],["type"]:"tree"},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",["type"]:"error"}],["type"]:"tree"},{error:"Invalid ARN: No ARN type specified",["type"]:"error"}],["type"]:"tree"},{["conditions"]:[{["fn"]:"substring",["argv"]:[Jt,0,4,!1],["assign"]:"arnPrefix"},{["fn"]:"stringEquals",["argv"]:[{["ref"]:"arnPrefix"},"arn:"]},{["fn"]:"not",["argv"]:[{["fn"]:"isSet",["argv"]:[Sv]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",["type"]:"error"},{["conditions"]:[{["fn"]:"booleanEquals",["argv"]:[N1t,!0]},Sv],error:"Path-style addressing cannot be used with ARN buckets",["type"]:"error"},{["conditions"]:U1t,["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:[jr],["rules"]:[{["conditions"]:[Ar,Ut,Tr,ne],endpoint:{["url"]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[Ar,Ut,Tr,Bt,ye],["rules"]:[{endpoint:_v,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[Ar,Ut,Tr,Bt,Ae],endpoint:_v,["type"]:"endpoint"},{["conditions"]:[zt,Ut,Tr,ne],endpoint:{["url"]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[zt,Ut,Tr,Bt,ye],["rules"]:[{endpoint:$v,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[zt,Ut,Tr,Bt,Ae],endpoint:$v,["type"]:"endpoint"},{["conditions"]:[Ar,Ut,lt,ne],endpoint:{["url"]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[Ar,Ut,lt,Bt,ye],["rules"]:[{endpoint:Ov,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[Ar,Ut,lt,Bt,Ae],endpoint:Ov,["type"]:"endpoint"},{["conditions"]:[zt,Er,Ve,lt,ne],endpoint:{["url"]:"{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[zt,Er,Ve,lt,Bt,ye],["rules"]:[{["conditions"]:ys,endpoint:O3,["type"]:"endpoint"},{endpoint:O3,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[zt,Er,Ve,lt,Bt,Ae],endpoint:O3,["type"]:"endpoint"},{["conditions"]:[zt,Ut,lt,ne],endpoint:{["url"]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[zt,Ut,lt,Bt,ye],["rules"]:[{["conditions"]:ys,endpoint:{["url"]:"https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",["properties"]:te,["headers"]:Nt},["type"]:"endpoint"},{endpoint:Rv,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[zt,Ut,lt,Bt,Ae],endpoint:Rv,["type"]:"endpoint"}],["type"]:"tree"},{error:"Path-style addressing cannot be used with S3 Accelerate",["type"]:"error"}],["type"]:"tree"}],["type"]:"tree"}],["type"]:"tree"},{["conditions"]:[{["fn"]:"isSet",["argv"]:[Iv]},{["fn"]:"booleanEquals",["argv"]:[Iv,!0]}],["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:Qv,["rules"]:[hv,wv,{["conditions"]:Wi,endpoint:{["url"]:"{url#scheme}://{url#authority}{url#path}",["properties"]:R3,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:tu,endpoint:{["url"]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",["properties"]:R3,["headers"]:Nt},["type"]:"endpoint"},{endpoint:{["url"]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",["properties"]:R3,["headers"]:Nt},["type"]:"endpoint"}],["type"]:"tree"},jp],["type"]:"tree"}],["type"]:"tree"},{["conditions"]:[tv],["rules"]:[{["conditions"]:vo,["rules"]:[{["conditions"]:Qv,["rules"]:[{["conditions"]:[Tr,Ar,Ut,ne],endpoint:{["url"]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[Tr,Ar,Ut,Bt,ye],["rules"]:[{endpoint:Tv,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[Tr,Ar,Ut,Bt,Ae],endpoint:Tv,["type"]:"endpoint"},{["conditions"]:[Tr,zt,Ut,ne],endpoint:{["url"]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[Tr,zt,Ut,Bt,ye],["rules"]:[{endpoint:Nv,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[Tr,zt,Ut,Bt,Ae],endpoint:Nv,["type"]:"endpoint"},{["conditions"]:[lt,Ar,Ut,ne],endpoint:{["url"]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[lt,Ar,Ut,Bt,ye],["rules"]:[{endpoint:mv,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[lt,Ar,Ut,Bt,Ae],endpoint:mv,["type"]:"endpoint"},{["conditions"]:[lt,zt,Er,Ve,ne],endpoint:{["url"]:"{url#scheme}://{url#authority}{url#path}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[lt,zt,Er,Ve,Bt,ye],["rules"]:[{["conditions"]:ys,endpoint:I3,["type"]:"endpoint"},{endpoint:I3,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[lt,zt,Er,Ve,Bt,Ae],endpoint:I3,["type"]:"endpoint"},{["conditions"]:[lt,zt,Ut,ne],endpoint:{["url"]:"https://s3.{partitionResult#dnsSuffix}",["properties"]:de,["headers"]:Nt},["type"]:"endpoint"},{["conditions"]:[lt,zt,Ut,Bt,ye],["rules"]:[{["conditions"]:ys,endpoint:{["url"]:"https://s3.{partitionResult#dnsSuffix}",["properties"]:te,["headers"]:Nt},["type"]:"endpoint"},{endpoint:av,["type"]:"endpoint"}],["type"]:"tree"},{["conditions"]:[lt,zt,Ut,Bt,Ae],endpoint:av,["type"]:"endpoint"}],["type"]:"tree"},jp],["type"]:"tree"}],["type"]:"tree"}],["type"]:"tree"},{error:"A region must be set when sending requests to S3.",["type"]:"error"}]},tM=L1t});var eM,Zi,G1t,ru=(t,r={})=>{return G1t.get(t,()=>Zi.resolveEndpoint(tM,{endpointParams:t,logger:r.logger}))};var v3=_(()=>{rM();eM=O(hc(),1),Zi=O(ps(),1),G1t=new Zi.EndpointCache({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]});Zi.customEndpointFunctions.aws=eM.awsEndpointFunctions});function sM(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(r,e)=>({signingProperties:{config:r,context:e}})}}function cM(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(r,e)=>({signingProperties:{config:r,context:e}})}}var eu,oM,Bi,v1t=(t)=>async(r,e,o)=>{if(!o)throw Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let n=await t(r,e,o),c=Bi.getSmithyContext(e)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!c)throw Error(`getEndpointParameterInstructions() is not defined on '${e.commandName}'`);let i=await oM.resolveParams(o,{getEndpointParameterInstructions:c},r);return Object.assign(n,i)},M1t=async(t,r,e)=>{return{operation:Bi.getSmithyContext(r).operation,region:await Bi.normalizeProvider(t.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}},nM,z1t=(t,r,e)=>{return(n)=>{let i=t(n).properties?.authSchemes;if(!i)return r(n);let f=[];for(let h of i){let{name:w,properties:p={},...u}=h,d=w.toLowerCase();if(w!==d)console.warn(`HttpAuthScheme has been normalized with lowercasing: '${w}' to '${d}'`);let y;if(d==="sigv4a"){y="aws.auth#sigv4a";let T=i.find((N)=>{let G=N.name.toLowerCase();return G!=="sigv4a"&&G.startsWith("sigv4")});if(yc.sigv4aDependency()==="none"&&T)continue}else if(d.startsWith("sigv4"))y="aws.auth#sigv4";else throw Error(`Unknown HttpAuthScheme found in '@smithy.rules#endpointRuleSet': '${d}'`);let R=e[y];if(!R)throw Error(`Could not find HttpAuthOption create function for '${y}'`);let S=R(n);S.schemeId=y,S.signingProperties={...S.signingProperties||{},...u,...p},f.push(S)}return f}},k1t=(t)=>{let r=[];switch(t.operation){default:r.push(sM(t)),r.push(cM(t))}return r},iM,fM=(t)=>{let r=eu.resolveAwsSdkSigV4Config(t),e=eu.resolveAwsSdkSigV4AConfig(r);return Object.assign(e,{authSchemePreference:Bi.normalizeProvider(t.authSchemePreference??[])})};var M3=_(()=>{qp();v3();eu=O(Vr(),1),oM=O(X(),1),Bi=O(Qe(),1),nM=v1t(M1t);iM=z1t(ru,k1t,{"aws.auth#sigv4":sM,"aws.auth#sigv4a":cM})});var hM=(t)=>{return Object.assign(t,{useFipsEndpoint:t.useFipsEndpoint??!1,useDualstackEndpoint:t.useDualstackEndpoint??!1,forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,defaultSigningName:"s3",clientContextParams:t.clientContextParams??{}})},H;var g=_(()=>{H={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var wM,se;var z3=_(()=>{wM=O(z(),1);se=class se extends wM.ServiceException{constructor(t){super(t);Object.setPrototypeOf(this,se.prototype)}}});var ou,nu,su,cu,iu,fu,hu,wu,pu,uu,du,yu,Au,Su;var k3=_(()=>{z3();ou=class ou extends se{name="NoSuchUpload";$fault="client";constructor(t){super({name:"NoSuchUpload",$fault:"client",...t});Object.setPrototypeOf(this,ou.prototype)}};nu=class nu extends se{name="ObjectNotInActiveTierError";$fault="client";constructor(t){super({name:"ObjectNotInActiveTierError",$fault:"client",...t});Object.setPrototypeOf(this,nu.prototype)}};su=class su extends se{name="BucketAlreadyExists";$fault="client";constructor(t){super({name:"BucketAlreadyExists",$fault:"client",...t});Object.setPrototypeOf(this,su.prototype)}};cu=class cu extends se{name="BucketAlreadyOwnedByYou";$fault="client";constructor(t){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...t});Object.setPrototypeOf(this,cu.prototype)}};iu=class iu extends se{name="NoSuchBucket";$fault="client";constructor(t){super({name:"NoSuchBucket",$fault:"client",...t});Object.setPrototypeOf(this,iu.prototype)}};fu=class fu extends se{name="InvalidObjectState";$fault="client";StorageClass;AccessTier;constructor(t){super({name:"InvalidObjectState",$fault:"client",...t});Object.setPrototypeOf(this,fu.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}};hu=class hu extends se{name="NoSuchKey";$fault="client";constructor(t){super({name:"NoSuchKey",$fault:"client",...t});Object.setPrototypeOf(this,hu.prototype)}};wu=class wu extends se{name="NotFound";$fault="client";constructor(t){super({name:"NotFound",$fault:"client",...t});Object.setPrototypeOf(this,wu.prototype)}};pu=class pu extends se{name="EncryptionTypeMismatch";$fault="client";constructor(t){super({name:"EncryptionTypeMismatch",$fault:"client",...t});Object.setPrototypeOf(this,pu.prototype)}};uu=class uu extends se{name="InvalidRequest";$fault="client";constructor(t){super({name:"InvalidRequest",$fault:"client",...t});Object.setPrototypeOf(this,uu.prototype)}};du=class du extends se{name="InvalidWriteOffset";$fault="client";constructor(t){super({name:"InvalidWriteOffset",$fault:"client",...t});Object.setPrototypeOf(this,du.prototype)}};yu=class yu extends se{name="TooManyParts";$fault="client";constructor(t){super({name:"TooManyParts",$fault:"client",...t});Object.setPrototypeOf(this,yu.prototype)}};Au=class Au extends se{name="IdempotencyParameterMismatch";$fault="client";constructor(t){super({name:"IdempotencyParameterMismatch",$fault:"client",...t});Object.setPrototypeOf(this,Au.prototype)}};Su=class Su extends se{name="ObjectAlreadyInActiveTierError";$fault="client";constructor(t){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...t});Object.setPrototypeOf(this,Su.prototype)}}});var ve,uM,pM,Do,As,Ie,Q0,dM,W1t,Z1t,B1t,X1t,yM,J1t,Y1t,W3,P1t,g1t,C1t,Q1t,K1t,E1t,x1t,q1t,D1t,V1t,j1t,tdt,rdt,edt,odt,ndt,sdt,cdt,idt,fdt,hdt,wdt,pdt,udt,ddt,ydt,Adt,Sdt,_dt,$dt,Odt,Rdt,Idt,Tdt,Ndt,mdt,adt,Udt,Hdt,bdt,ldt,Fdt,Ldt,Gdt,vdt,Mdt,zdt,kdt,Wdt,Zdt,Bdt,Xdt,Jdt,Ydt,Pdt,gdt,Cdt,Qdt,Kdt,Edt,xdt,qdt,Ddt,Vdt,jdt,t2t,r2t,e2t,Z3,AM,o2t,n2t,s2t,c2t,i2t,f2t,h2t,w2t,p2t,u2t,d2t,y2t,A2t,S2t,_2t,$2t,O2t,R2t,I2t,T2t,N2t,m2t,a2t,U2t,H2t,b2t,l2t,F2t,L2t,G2t,v2t,M2t,z2t,k2t,W2t,Z2t,B2t,X2t,J2t,Y2t,P2t,g2t,C2t,Q2t,K2t,E2t,x2t,q2t,D2t,V2t,j2t,tyt,ryt,eyt,oyt,nyt,syt,cyt,iyt,fyt,hyt,wyt,pyt,uyt,dyt,yyt,Ayt,Syt,_yt,$yt,Oyt,SM,Ryt,Iyt,Tyt,Nyt,myt,_M,$M,OM,ayt,B3,Uyt,Hyt,byt,lyt,X3,Fyt,Lyt,Gyt,vyt,Myt,zyt,kyt,Wyt,Zyt,Byt,Xyt,Jyt,Yyt,Pyt,gyt,Cyt,Qyt,Kyt,Eyt,xyt,qyt,Dyt,Vyt,jyt,tAt,rAt,eAt,oAt,nAt,sAt,cAt,iAt,fAt,hAt,wAt,pAt,uAt,dAt,yAt,AAt,SAt,RM,_At,$At,OAt,RAt,IAt,J3,TAt,NAt,Y3,mAt,aAt,UAt,HAt,bAt,lAt,FAt,IM,P3,LAt,GAt,vAt,TM,NM,mM,MAt,zAt,kAt,WAt,ZAt,aM,zn,UM,BAt,XAt,JAt,YAt,PAt,gAt,CAt,HM,QAt,KAt,EAt,xAt,qAt,DAt,VAt,jAt,tSt,rSt,eSt,oSt,nSt,sSt,cSt,iSt,fSt,hSt,wSt,pSt,uSt,dSt,ySt,ASt,SSt,_St,$St,OSt,RSt,ISt,TSt,NSt,mSt,aSt,g3,USt,HSt,bM,bSt,lSt,FSt,lM,LSt,GSt,vSt,MSt,FM,zSt,kSt,WSt,ZSt,BSt,LM,XSt,JSt,YSt,PSt,gSt,CSt,QSt,KSt,ESt,xSt,GM,qSt,DSt,VSt,jSt,t_t,r_t,e_t,o_t,n_t,s_t,c_t,Xi,C3,i_t,f_t,h_t,w_t,p_t,u_t,d_t,y_t,A_t,S_t,__t,$_t,O_t,R_t,I_t,Ft="unit",T_t,N_t,vM,_u,m_t,MM,a_t,U_t,H_t,b_t,l_t,$u,F_t,L_t,G_t,v_t,zM,M_t,z_t,k_t,W_t,kM,Z_t,B_t,X_t,J_t,Y_t,P_t,WM,g_t,kn,C_t,Q_t,K_t,E_t,x_t,q_t,D_t,V_t,ZM,BM,XM,JM,YM,PM,gM,CM,QM,KM,EM,xM,qM,DM,VM,jM,tz,rz,ez,oz,nz,sz,cz,iz,fz,hz,wz,pz,uz,dz,yz,Az,Sz,_z,$z,Oz,Rz,Iz,Tz,Nz,mz,az,Uz,Hz,bz,lz,Fz,Lz,Gz,vz,Mz,zz,kz,Wz,Zz,Bz,Xz,Jz,Yz,Pz,gz,Cz,Qz,Kz,Ez,xz,qz,Dz,Vz,jz,tk,rk,ek,ok,nk,sk,ck,ik,fk,hk,wk,pk,uk,dk,yk,Ak,Sk,_k,$k,Ok,Rk,Ik,Tk,Nk,mk,ak,Uk,Hk,bk,lk,Fk,Lk,Gk,vk,Mk,zk;var C=_(()=>{k3();z3();ve=O(so(),1),uM=[0,"com.amazonaws.s3","CopySourceSSECustomerKey",8,0],pM=[0,"com.amazonaws.s3","SessionCredentialValue",8,0],Do=[0,"com.amazonaws.s3","SSECustomerKey",8,0],As=[0,"com.amazonaws.s3","SSEKMSEncryptionContext",8,0],Ie=[0,"com.amazonaws.s3","SSEKMSKeyId",8,0],Q0=[0,"com.amazonaws.s3","StreamingBlob",{["streaming"]:1},42],dM=[3,"com.amazonaws.s3","AbacStatus",0,["Status"],[0]],W1t=[3,"com.amazonaws.s3","AbortIncompleteMultipartUpload",0,["DaysAfterInitiation"],[1]],Z1t=[3,"com.amazonaws.s3","AbortMultipartUploadOutput",0,["RequestCharged"],[[0,{["httpHeader"]:"x-amz-request-charged"}]]],B1t=[3,"com.amazonaws.s3","AbortMultipartUploadRequest",0,["Bucket","Key","UploadId","RequestPayer","ExpectedBucketOwner","IfMatchInitiatedTime"],[[0,1],[0,1],[0,{["httpQuery"]:"uploadId"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[6,{["httpHeader"]:"x-amz-if-match-initiated-time"}]],3],X1t=[3,"com.amazonaws.s3","AccelerateConfiguration",0,["Status"],[0]],yM=[3,"com.amazonaws.s3","AccessControlPolicy",0,["Grants","Owner"],[[()=>$u,{["xmlName"]:"AccessControlList"}],()=>zn]],J1t=[3,"com.amazonaws.s3","AccessControlTranslation",0,["Owner"],[0],1],Y1t=[3,"com.amazonaws.s3","AnalyticsAndOperator",0,["Prefix","Tags"],[0,[()=>kn,{["xmlFlattened"]:1,["xmlName"]:"Tag"}]]],W3=[3,"com.amazonaws.s3","AnalyticsConfiguration",0,["Id","StorageClassAnalysis","Filter"],[0,()=>s_t,[()=>q_t,0]],2],P1t=[3,"com.amazonaws.s3","AnalyticsExportDestination",0,["S3BucketDestination"],[()=>g1t],1],g1t=[3,"com.amazonaws.s3","AnalyticsS3BucketDestination",0,["Format","Bucket","BucketAccountId","Prefix"],[0,0,0,0],2],C1t=[3,"com.amazonaws.s3","BlockedEncryptionTypes",0,["EncryptionType"],[[()=>H_t,{["xmlFlattened"]:1}]]],Q1t=[3,"com.amazonaws.s3","Bucket",0,["Name","CreationDate","BucketRegion","BucketArn"],[0,4,0,0]],K1t=[-3,"com.amazonaws.s3","BucketAlreadyExists",{["error"]:"client",["httpError"]:409},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(K1t,su);E1t=[-3,"com.amazonaws.s3","BucketAlreadyOwnedByYou",{["error"]:"client",["httpError"]:409},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(E1t,cu);x1t=[3,"com.amazonaws.s3","BucketInfo",0,["DataRedundancy","Type"],[0,0]],q1t=[3,"com.amazonaws.s3","BucketLifecycleConfiguration",0,["Rules"],[[()=>zM,{["xmlFlattened"]:1,["xmlName"]:"Rule"}]],1],D1t=[3,"com.amazonaws.s3","BucketLoggingStatus",0,["LoggingEnabled"],[[()=>RM,0]]],V1t=[3,"com.amazonaws.s3","Checksum",0,["ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","ChecksumType"],[0,0,0,0,0,0]],j1t=[3,"com.amazonaws.s3","CommonPrefix",0,["Prefix"],[0]],tdt=[3,"com.amazonaws.s3","CompletedMultipartUpload",0,["Parts"],[[()=>m_t,{["xmlFlattened"]:1,["xmlName"]:"Part"}]]],rdt=[3,"com.amazonaws.s3","CompletedPart",0,["ETag","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","PartNumber"],[0,0,0,0,0,0,1]],edt=[3,"com.amazonaws.s3","CompleteMultipartUploadOutput",{["xmlName"]:"CompleteMultipartUploadResult"},["Location","Bucket","Key","Expiration","ETag","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","ChecksumType","ServerSideEncryption","VersionId","SSEKMSKeyId","BucketKeyEnabled","RequestCharged"],[0,0,0,[0,{["httpHeader"]:"x-amz-expiration"}],0,0,0,0,0,0,0,[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[0,{["httpHeader"]:"x-amz-version-id"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-request-charged"}]]],odt=[3,"com.amazonaws.s3","CompleteMultipartUploadRequest",0,["Bucket","Key","UploadId","MultipartUpload","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","ChecksumType","MpuObjectSize","RequestPayer","ExpectedBucketOwner","IfMatch","IfNoneMatch","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5"],[[0,1],[0,1],[0,{["httpQuery"]:"uploadId"}],[()=>tdt,{["httpPayload"]:1,["xmlName"]:"CompleteMultipartUpload"}],[0,{["httpHeader"]:"x-amz-checksum-crc32"}],[0,{["httpHeader"]:"x-amz-checksum-crc32c"}],[0,{["httpHeader"]:"x-amz-checksum-crc64nvme"}],[0,{["httpHeader"]:"x-amz-checksum-sha1"}],[0,{["httpHeader"]:"x-amz-checksum-sha256"}],[0,{["httpHeader"]:"x-amz-checksum-type"}],[1,{["httpHeader"]:"x-amz-mp-object-size"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"If-Match"}],[0,{["httpHeader"]:"If-None-Match"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}]],3],ndt=[3,"com.amazonaws.s3","Condition",0,["HttpErrorCodeReturnedEquals","KeyPrefixEquals"],[0,0]],sdt=[3,"com.amazonaws.s3","ContinuationEvent",0,[],[]],cdt=[3,"com.amazonaws.s3","CopyObjectOutput",0,["CopyObjectResult","Expiration","CopySourceVersionId","VersionId","ServerSideEncryption","SSECustomerAlgorithm","SSECustomerKeyMD5","SSEKMSKeyId","SSEKMSEncryptionContext","BucketKeyEnabled","RequestCharged"],[[()=>fdt,16],[0,{["httpHeader"]:"x-amz-expiration"}],[0,{["httpHeader"]:"x-amz-copy-source-version-id"}],[0,{["httpHeader"]:"x-amz-version-id"}],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[()=>As,{["httpHeader"]:"x-amz-server-side-encryption-context"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-request-charged"}]]],idt=[3,"com.amazonaws.s3","CopyObjectRequest",0,["Bucket","CopySource","Key","ACL","CacheControl","ChecksumAlgorithm","ContentDisposition","ContentEncoding","ContentLanguage","ContentType","CopySourceIfMatch","CopySourceIfModifiedSince","CopySourceIfNoneMatch","CopySourceIfUnmodifiedSince","Expires","GrantFullControl","GrantRead","GrantReadACP","GrantWriteACP","IfMatch","IfNoneMatch","Metadata","MetadataDirective","TaggingDirective","ServerSideEncryption","StorageClass","WebsiteRedirectLocation","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId","SSEKMSEncryptionContext","BucketKeyEnabled","CopySourceSSECustomerAlgorithm","CopySourceSSECustomerKey","CopySourceSSECustomerKeyMD5","RequestPayer","Tagging","ObjectLockMode","ObjectLockRetainUntilDate","ObjectLockLegalHoldStatus","ExpectedBucketOwner","ExpectedSourceBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-copy-source"}],[0,1],[0,{["httpHeader"]:"x-amz-acl"}],[0,{["httpHeader"]:"Cache-Control"}],[0,{["httpHeader"]:"x-amz-checksum-algorithm"}],[0,{["httpHeader"]:"Content-Disposition"}],[0,{["httpHeader"]:"Content-Encoding"}],[0,{["httpHeader"]:"Content-Language"}],[0,{["httpHeader"]:"Content-Type"}],[0,{["httpHeader"]:"x-amz-copy-source-if-match"}],[4,{["httpHeader"]:"x-amz-copy-source-if-modified-since"}],[0,{["httpHeader"]:"x-amz-copy-source-if-none-match"}],[4,{["httpHeader"]:"x-amz-copy-source-if-unmodified-since"}],[4,{["httpHeader"]:"Expires"}],[0,{["httpHeader"]:"x-amz-grant-full-control"}],[0,{["httpHeader"]:"x-amz-grant-read"}],[0,{["httpHeader"]:"x-amz-grant-read-acp"}],[0,{["httpHeader"]:"x-amz-grant-write-acp"}],[0,{["httpHeader"]:"If-Match"}],[0,{["httpHeader"]:"If-None-Match"}],[128,{["httpPrefixHeaders"]:"x-amz-meta-"}],[0,{["httpHeader"]:"x-amz-metadata-directive"}],[0,{["httpHeader"]:"x-amz-tagging-directive"}],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[0,{["httpHeader"]:"x-amz-storage-class"}],[0,{["httpHeader"]:"x-amz-website-redirect-location"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[()=>As,{["httpHeader"]:"x-amz-server-side-encryption-context"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-copy-source-server-side-encryption-customer-algorithm"}],[()=>uM,{["httpHeader"]:"x-amz-copy-source-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-copy-source-server-side-encryption-customer-key-MD5"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-tagging"}],[0,{["httpHeader"]:"x-amz-object-lock-mode"}],[5,{["httpHeader"]:"x-amz-object-lock-retain-until-date"}],[0,{["httpHeader"]:"x-amz-object-lock-legal-hold"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-source-expected-bucket-owner"}]],3],fdt=[3,"com.amazonaws.s3","CopyObjectResult",0,["ETag","LastModified","ChecksumType","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256"],[0,4,0,0,0,0,0,0]],hdt=[3,"com.amazonaws.s3","CopyPartResult",0,["ETag","LastModified","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256"],[0,4,0,0,0,0,0]],wdt=[3,"com.amazonaws.s3","CORSConfiguration",0,["CORSRules"],[[()=>MM,{["xmlFlattened"]:1,["xmlName"]:"CORSRule"}]],1],pdt=[3,"com.amazonaws.s3","CORSRule",0,["AllowedMethods","AllowedOrigins","ID","AllowedHeaders","ExposeHeaders","MaxAgeSeconds"],[[64,{["xmlFlattened"]:1,["xmlName"]:"AllowedMethod"}],[64,{["xmlFlattened"]:1,["xmlName"]:"AllowedOrigin"}],0,[64,{["xmlFlattened"]:1,["xmlName"]:"AllowedHeader"}],[64,{["xmlFlattened"]:1,["xmlName"]:"ExposeHeader"}],1],2],udt=[3,"com.amazonaws.s3","CreateBucketConfiguration",0,["LocationConstraint","Location","Bucket","Tags"],[0,()=>SAt,()=>x1t,[()=>kn,0]]],ddt=[3,"com.amazonaws.s3","CreateBucketMetadataConfigurationRequest",0,["Bucket","MetadataConfiguration","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>_At,{["httpPayload"]:1,["xmlName"]:"MetadataConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],ydt=[3,"com.amazonaws.s3","CreateBucketMetadataTableConfigurationRequest",0,["Bucket","MetadataTableConfiguration","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>RAt,{["httpPayload"]:1,["xmlName"]:"MetadataTableConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],Adt=[3,"com.amazonaws.s3","CreateBucketOutput",0,["Location","BucketArn"],[[0,{["httpHeader"]:"Location"}],[0,{["httpHeader"]:"x-amz-bucket-arn"}]]],Sdt=[3,"com.amazonaws.s3","CreateBucketRequest",0,["Bucket","ACL","CreateBucketConfiguration","GrantFullControl","GrantRead","GrantReadACP","GrantWrite","GrantWriteACP","ObjectLockEnabledForBucket","ObjectOwnership"],[[0,1],[0,{["httpHeader"]:"x-amz-acl"}],[()=>udt,{["httpPayload"]:1,["xmlName"]:"CreateBucketConfiguration"}],[0,{["httpHeader"]:"x-amz-grant-full-control"}],[0,{["httpHeader"]:"x-amz-grant-read"}],[0,{["httpHeader"]:"x-amz-grant-read-acp"}],[0,{["httpHeader"]:"x-amz-grant-write"}],[0,{["httpHeader"]:"x-amz-grant-write-acp"}],[2,{["httpHeader"]:"x-amz-bucket-object-lock-enabled"}],[0,{["httpHeader"]:"x-amz-object-ownership"}]],1],_dt=[3,"com.amazonaws.s3","CreateMultipartUploadOutput",{["xmlName"]:"InitiateMultipartUploadResult"},["AbortDate","AbortRuleId","Bucket","Key","UploadId","ServerSideEncryption","SSECustomerAlgorithm","SSECustomerKeyMD5","SSEKMSKeyId","SSEKMSEncryptionContext","BucketKeyEnabled","RequestCharged","ChecksumAlgorithm","ChecksumType"],[[4,{["httpHeader"]:"x-amz-abort-date"}],[0,{["httpHeader"]:"x-amz-abort-rule-id"}],[0,{["xmlName"]:"Bucket"}],0,0,[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[()=>As,{["httpHeader"]:"x-amz-server-side-encryption-context"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-request-charged"}],[0,{["httpHeader"]:"x-amz-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-checksum-type"}]]],$dt=[3,"com.amazonaws.s3","CreateMultipartUploadRequest",0,["Bucket","Key","ACL","CacheControl","ContentDisposition","ContentEncoding","ContentLanguage","ContentType","Expires","GrantFullControl","GrantRead","GrantReadACP","GrantWriteACP","Metadata","ServerSideEncryption","StorageClass","WebsiteRedirectLocation","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId","SSEKMSEncryptionContext","BucketKeyEnabled","RequestPayer","Tagging","ObjectLockMode","ObjectLockRetainUntilDate","ObjectLockLegalHoldStatus","ExpectedBucketOwner","ChecksumAlgorithm","ChecksumType"],[[0,1],[0,1],[0,{["httpHeader"]:"x-amz-acl"}],[0,{["httpHeader"]:"Cache-Control"}],[0,{["httpHeader"]:"Content-Disposition"}],[0,{["httpHeader"]:"Content-Encoding"}],[0,{["httpHeader"]:"Content-Language"}],[0,{["httpHeader"]:"Content-Type"}],[4,{["httpHeader"]:"Expires"}],[0,{["httpHeader"]:"x-amz-grant-full-control"}],[0,{["httpHeader"]:"x-amz-grant-read"}],[0,{["httpHeader"]:"x-amz-grant-read-acp"}],[0,{["httpHeader"]:"x-amz-grant-write-acp"}],[128,{["httpPrefixHeaders"]:"x-amz-meta-"}],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[0,{["httpHeader"]:"x-amz-storage-class"}],[0,{["httpHeader"]:"x-amz-website-redirect-location"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[()=>As,{["httpHeader"]:"x-amz-server-side-encryption-context"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-tagging"}],[0,{["httpHeader"]:"x-amz-object-lock-mode"}],[5,{["httpHeader"]:"x-amz-object-lock-retain-until-date"}],[0,{["httpHeader"]:"x-amz-object-lock-legal-hold"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-checksum-type"}]],2],Odt=[3,"com.amazonaws.s3","CreateSessionOutput",{["xmlName"]:"CreateSessionResult"},["Credentials","ServerSideEncryption","SSEKMSKeyId","SSEKMSEncryptionContext","BucketKeyEnabled"],[[()=>DSt,{["xmlName"]:"Credentials"}],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[()=>As,{["httpHeader"]:"x-amz-server-side-encryption-context"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}]],1],Rdt=[3,"com.amazonaws.s3","CreateSessionRequest",0,["Bucket","SessionMode","ServerSideEncryption","SSEKMSKeyId","SSEKMSEncryptionContext","BucketKeyEnabled"],[[0,1],[0,{["httpHeader"]:"x-amz-create-session-mode"}],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[()=>As,{["httpHeader"]:"x-amz-server-side-encryption-context"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}]],1],Idt=[3,"com.amazonaws.s3","CSVInput",0,["FileHeaderInfo","Comments","QuoteEscapeCharacter","RecordDelimiter","FieldDelimiter","QuoteCharacter","AllowQuotedRecordDelimiter"],[0,0,0,0,0,0,2]],Tdt=[3,"com.amazonaws.s3","CSVOutput",0,["QuoteFields","QuoteEscapeCharacter","RecordDelimiter","FieldDelimiter","QuoteCharacter"],[0,0,0,0,0]],Ndt=[3,"com.amazonaws.s3","DefaultRetention",0,["Mode","Days","Years"],[0,1,1]],mdt=[3,"com.amazonaws.s3","Delete",0,["Objects","Quiet"],[[()=>W_t,{["xmlFlattened"]:1,["xmlName"]:"Object"}],2],1],adt=[3,"com.amazonaws.s3","DeleteBucketAnalyticsConfigurationRequest",0,["Bucket","Id","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],Udt=[3,"com.amazonaws.s3","DeleteBucketCorsRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],Hdt=[3,"com.amazonaws.s3","DeleteBucketEncryptionRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],bdt=[3,"com.amazonaws.s3","DeleteBucketIntelligentTieringConfigurationRequest",0,["Bucket","Id","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],ldt=[3,"com.amazonaws.s3","DeleteBucketInventoryConfigurationRequest",0,["Bucket","Id","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],Fdt=[3,"com.amazonaws.s3","DeleteBucketLifecycleRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],Ldt=[3,"com.amazonaws.s3","DeleteBucketMetadataConfigurationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],Gdt=[3,"com.amazonaws.s3","DeleteBucketMetadataTableConfigurationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],vdt=[3,"com.amazonaws.s3","DeleteBucketMetricsConfigurationRequest",0,["Bucket","Id","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],Mdt=[3,"com.amazonaws.s3","DeleteBucketOwnershipControlsRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],zdt=[3,"com.amazonaws.s3","DeleteBucketPolicyRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],kdt=[3,"com.amazonaws.s3","DeleteBucketReplicationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],Wdt=[3,"com.amazonaws.s3","DeleteBucketRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],Zdt=[3,"com.amazonaws.s3","DeleteBucketTaggingRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],Bdt=[3,"com.amazonaws.s3","DeleteBucketWebsiteRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],Xdt=[3,"com.amazonaws.s3","DeletedObject",0,["Key","VersionId","DeleteMarker","DeleteMarkerVersionId"],[0,0,2,0]],Jdt=[3,"com.amazonaws.s3","DeleteMarkerEntry",0,["Owner","Key","VersionId","IsLatest","LastModified"],[()=>zn,0,0,2,4]],Ydt=[3,"com.amazonaws.s3","DeleteMarkerReplication",0,["Status"],[0]],Pdt=[3,"com.amazonaws.s3","DeleteObjectOutput",0,["DeleteMarker","VersionId","RequestCharged"],[[2,{["httpHeader"]:"x-amz-delete-marker"}],[0,{["httpHeader"]:"x-amz-version-id"}],[0,{["httpHeader"]:"x-amz-request-charged"}]]],gdt=[3,"com.amazonaws.s3","DeleteObjectRequest",0,["Bucket","Key","MFA","VersionId","RequestPayer","BypassGovernanceRetention","ExpectedBucketOwner","IfMatch","IfMatchLastModifiedTime","IfMatchSize"],[[0,1],[0,1],[0,{["httpHeader"]:"x-amz-mfa"}],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[2,{["httpHeader"]:"x-amz-bypass-governance-retention"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"If-Match"}],[6,{["httpHeader"]:"x-amz-if-match-last-modified-time"}],[1,{["httpHeader"]:"x-amz-if-match-size"}]],2],Cdt=[3,"com.amazonaws.s3","DeleteObjectsOutput",{["xmlName"]:"DeleteResult"},["Deleted","RequestCharged","Errors"],[[()=>a_t,{["xmlFlattened"]:1}],[0,{["httpHeader"]:"x-amz-request-charged"}],[()=>b_t,{["xmlFlattened"]:1,["xmlName"]:"Error"}]]],Qdt=[3,"com.amazonaws.s3","DeleteObjectsRequest",0,["Bucket","Delete","MFA","RequestPayer","BypassGovernanceRetention","ExpectedBucketOwner","ChecksumAlgorithm"],[[0,1],[()=>mdt,{["httpPayload"]:1,["xmlName"]:"Delete"}],[0,{["httpHeader"]:"x-amz-mfa"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[2,{["httpHeader"]:"x-amz-bypass-governance-retention"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}]],2],Kdt=[3,"com.amazonaws.s3","DeleteObjectTaggingOutput",0,["VersionId"],[[0,{["httpHeader"]:"x-amz-version-id"}]]],Edt=[3,"com.amazonaws.s3","DeleteObjectTaggingRequest",0,["Bucket","Key","VersionId","ExpectedBucketOwner"],[[0,1],[0,1],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],xdt=[3,"com.amazonaws.s3","DeletePublicAccessBlockRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],qdt=[3,"com.amazonaws.s3","Destination",0,["Bucket","Account","StorageClass","AccessControlTranslation","EncryptionConfiguration","ReplicationTime","Metrics"],[0,0,0,()=>J1t,()=>jdt,()=>MSt,()=>TAt],1],Ddt=[3,"com.amazonaws.s3","DestinationResult",0,["TableBucketType","TableBucketArn","TableNamespace"],[0,0,0]],Vdt=[3,"com.amazonaws.s3","Encryption",0,["EncryptionType","KMSKeyId","KMSContext"],[0,[()=>Ie,0],0],1],jdt=[3,"com.amazonaws.s3","EncryptionConfiguration",0,["ReplicaKmsKeyID"],[0]],t2t=[-3,"com.amazonaws.s3","EncryptionTypeMismatch",{["error"]:"client",["httpError"]:400},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(t2t,pu);r2t=[3,"com.amazonaws.s3","EndEvent",0,[],[]],e2t=[3,"com.amazonaws.s3","Error",0,["Key","VersionId","Code","Message"],[0,0,0,0]],Z3=[3,"com.amazonaws.s3","ErrorDetails",0,["ErrorCode","ErrorMessage"],[0,0]],AM=[3,"com.amazonaws.s3","ErrorDocument",0,["Key"],[0],1],o2t=[3,"com.amazonaws.s3","EventBridgeConfiguration",0,[],[]],n2t=[3,"com.amazonaws.s3","ExistingObjectReplication",0,["Status"],[0],1],s2t=[3,"com.amazonaws.s3","FilterRule",0,["Name","Value"],[0,0]],c2t=[3,"com.amazonaws.s3","GetBucketAbacOutput",0,["AbacStatus"],[[()=>dM,16]]],i2t=[3,"com.amazonaws.s3","GetBucketAbacRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],f2t=[3,"com.amazonaws.s3","GetBucketAccelerateConfigurationOutput",{["xmlName"]:"AccelerateConfiguration"},["Status","RequestCharged"],[0,[0,{["httpHeader"]:"x-amz-request-charged"}]]],h2t=[3,"com.amazonaws.s3","GetBucketAccelerateConfigurationRequest",0,["Bucket","ExpectedBucketOwner","RequestPayer"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-request-payer"}]],1],w2t=[3,"com.amazonaws.s3","GetBucketAclOutput",{["xmlName"]:"AccessControlPolicy"},["Owner","Grants"],[()=>zn,[()=>$u,{["xmlName"]:"AccessControlList"}]]],p2t=[3,"com.amazonaws.s3","GetBucketAclRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],u2t=[3,"com.amazonaws.s3","GetBucketAnalyticsConfigurationOutput",0,["AnalyticsConfiguration"],[[()=>W3,16]]],d2t=[3,"com.amazonaws.s3","GetBucketAnalyticsConfigurationRequest",0,["Bucket","Id","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],y2t=[3,"com.amazonaws.s3","GetBucketCorsOutput",{["xmlName"]:"CORSConfiguration"},["CORSRules"],[[()=>MM,{["xmlFlattened"]:1,["xmlName"]:"CORSRule"}]]],A2t=[3,"com.amazonaws.s3","GetBucketCorsRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],S2t=[3,"com.amazonaws.s3","GetBucketEncryptionOutput",0,["ServerSideEncryptionConfiguration"],[[()=>GM,16]]],_2t=[3,"com.amazonaws.s3","GetBucketEncryptionRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],$2t=[3,"com.amazonaws.s3","GetBucketIntelligentTieringConfigurationOutput",0,["IntelligentTieringConfiguration"],[[()=>B3,16]]],O2t=[3,"com.amazonaws.s3","GetBucketIntelligentTieringConfigurationRequest",0,["Bucket","Id","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],R2t=[3,"com.amazonaws.s3","GetBucketInventoryConfigurationOutput",0,["InventoryConfiguration"],[[()=>X3,16]]],I2t=[3,"com.amazonaws.s3","GetBucketInventoryConfigurationRequest",0,["Bucket","Id","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],T2t=[3,"com.amazonaws.s3","GetBucketLifecycleConfigurationOutput",{["xmlName"]:"LifecycleConfiguration"},["Rules","TransitionDefaultMinimumObjectSize"],[[()=>zM,{["xmlFlattened"]:1,["xmlName"]:"Rule"}],[0,{["httpHeader"]:"x-amz-transition-default-minimum-object-size"}]]],N2t=[3,"com.amazonaws.s3","GetBucketLifecycleConfigurationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],m2t=[3,"com.amazonaws.s3","GetBucketLocationOutput",{["xmlName"]:"LocationConstraint"},["LocationConstraint"],[0]],a2t=[3,"com.amazonaws.s3","GetBucketLocationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],U2t=[3,"com.amazonaws.s3","GetBucketLoggingOutput",{["xmlName"]:"BucketLoggingStatus"},["LoggingEnabled"],[[()=>RM,0]]],H2t=[3,"com.amazonaws.s3","GetBucketLoggingRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],b2t=[3,"com.amazonaws.s3","GetBucketMetadataConfigurationOutput",0,["GetBucketMetadataConfigurationResult"],[[()=>F2t,16]]],l2t=[3,"com.amazonaws.s3","GetBucketMetadataConfigurationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],F2t=[3,"com.amazonaws.s3","GetBucketMetadataConfigurationResult",0,["MetadataConfigurationResult"],[()=>$At],1],L2t=[3,"com.amazonaws.s3","GetBucketMetadataTableConfigurationOutput",0,["GetBucketMetadataTableConfigurationResult"],[[()=>v2t,16]]],G2t=[3,"com.amazonaws.s3","GetBucketMetadataTableConfigurationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],v2t=[3,"com.amazonaws.s3","GetBucketMetadataTableConfigurationResult",0,["MetadataTableConfigurationResult","Status","Error"],[()=>IAt,0,()=>Z3],2],M2t=[3,"com.amazonaws.s3","GetBucketMetricsConfigurationOutput",0,["MetricsConfiguration"],[[()=>Y3,16]]],z2t=[3,"com.amazonaws.s3","GetBucketMetricsConfigurationRequest",0,["Bucket","Id","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],k2t=[3,"com.amazonaws.s3","GetBucketNotificationConfigurationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],W2t=[3,"com.amazonaws.s3","GetBucketOwnershipControlsOutput",0,["OwnershipControls"],[[()=>UM,16]]],Z2t=[3,"com.amazonaws.s3","GetBucketOwnershipControlsRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],B2t=[3,"com.amazonaws.s3","GetBucketPolicyOutput",0,["Policy"],[[0,16]]],X2t=[3,"com.amazonaws.s3","GetBucketPolicyRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],J2t=[3,"com.amazonaws.s3","GetBucketPolicyStatusOutput",0,["PolicyStatus"],[[()=>PAt,16]]],Y2t=[3,"com.amazonaws.s3","GetBucketPolicyStatusRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],P2t=[3,"com.amazonaws.s3","GetBucketReplicationOutput",0,["ReplicationConfiguration"],[[()=>lM,16]]],g2t=[3,"com.amazonaws.s3","GetBucketReplicationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],C2t=[3,"com.amazonaws.s3","GetBucketRequestPaymentOutput",{["xmlName"]:"RequestPaymentConfiguration"},["Payer"],[0]],Q2t=[3,"com.amazonaws.s3","GetBucketRequestPaymentRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],K2t=[3,"com.amazonaws.s3","GetBucketTaggingOutput",{["xmlName"]:"Tagging"},["TagSet"],[[()=>kn,0]],1],E2t=[3,"com.amazonaws.s3","GetBucketTaggingRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],x2t=[3,"com.amazonaws.s3","GetBucketVersioningOutput",{["xmlName"]:"VersioningConfiguration"},["Status","MFADelete"],[0,[0,{["xmlName"]:"MfaDelete"}]]],q2t=[3,"com.amazonaws.s3","GetBucketVersioningRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],D2t=[3,"com.amazonaws.s3","GetBucketWebsiteOutput",{["xmlName"]:"WebsiteConfiguration"},["RedirectAllRequestsTo","IndexDocument","ErrorDocument","RoutingRules"],[()=>bM,()=>_M,()=>AM,[()=>WM,0]]],V2t=[3,"com.amazonaws.s3","GetBucketWebsiteRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],j2t=[3,"com.amazonaws.s3","GetObjectAclOutput",{["xmlName"]:"AccessControlPolicy"},["Owner","Grants","RequestCharged"],[()=>zn,[()=>$u,{["xmlName"]:"AccessControlList"}],[0,{["httpHeader"]:"x-amz-request-charged"}]]],tyt=[3,"com.amazonaws.s3","GetObjectAclRequest",0,["Bucket","Key","VersionId","RequestPayer","ExpectedBucketOwner"],[[0,1],[0,1],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],ryt=[3,"com.amazonaws.s3","GetObjectAttributesOutput",{["xmlName"]:"GetObjectAttributesResponse"},["DeleteMarker","LastModified","VersionId","RequestCharged","ETag","Checksum","ObjectParts","StorageClass","ObjectSize"],[[2,{["httpHeader"]:"x-amz-delete-marker"}],[4,{["httpHeader"]:"Last-Modified"}],[0,{["httpHeader"]:"x-amz-version-id"}],[0,{["httpHeader"]:"x-amz-request-charged"}],0,()=>V1t,[()=>eyt,0],0,1]],eyt=[3,"com.amazonaws.s3","GetObjectAttributesParts",0,["TotalPartsCount","PartNumberMarker","NextPartNumberMarker","MaxParts","IsTruncated","Parts"],[[1,{["xmlName"]:"PartsCount"}],0,0,1,2,[()=>J_t,{["xmlFlattened"]:1,["xmlName"]:"Part"}]]],oyt=[3,"com.amazonaws.s3","GetObjectAttributesRequest",0,["Bucket","Key","ObjectAttributes","VersionId","MaxParts","PartNumberMarker","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","RequestPayer","ExpectedBucketOwner"],[[0,1],[0,1],[64,{["httpHeader"]:"x-amz-object-attributes"}],[0,{["httpQuery"]:"versionId"}],[1,{["httpHeader"]:"x-amz-max-parts"}],[0,{["httpHeader"]:"x-amz-part-number-marker"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],3],nyt=[3,"com.amazonaws.s3","GetObjectLegalHoldOutput",0,["LegalHold"],[[()=>NM,{["httpPayload"]:1,["xmlName"]:"LegalHold"}]]],syt=[3,"com.amazonaws.s3","GetObjectLegalHoldRequest",0,["Bucket","Key","VersionId","RequestPayer","ExpectedBucketOwner"],[[0,1],[0,1],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],cyt=[3,"com.amazonaws.s3","GetObjectLockConfigurationOutput",0,["ObjectLockConfiguration"],[[()=>TM,16]]],iyt=[3,"com.amazonaws.s3","GetObjectLockConfigurationRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],fyt=[3,"com.amazonaws.s3","GetObjectOutput",0,["Body","DeleteMarker","AcceptRanges","Expiration","Restore","LastModified","ContentLength","ETag","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","ChecksumType","MissingMeta","VersionId","CacheControl","ContentDisposition","ContentEncoding","ContentLanguage","ContentRange","ContentType","Expires","ExpiresString","WebsiteRedirectLocation","ServerSideEncryption","Metadata","SSECustomerAlgorithm","SSECustomerKeyMD5","SSEKMSKeyId","BucketKeyEnabled","StorageClass","RequestCharged","ReplicationStatus","PartsCount","TagCount","ObjectLockMode","ObjectLockRetainUntilDate","ObjectLockLegalHoldStatus"],[[()=>Q0,16],[2,{["httpHeader"]:"x-amz-delete-marker"}],[0,{["httpHeader"]:"accept-ranges"}],[0,{["httpHeader"]:"x-amz-expiration"}],[0,{["httpHeader"]:"x-amz-restore"}],[4,{["httpHeader"]:"Last-Modified"}],[1,{["httpHeader"]:"Content-Length"}],[0,{["httpHeader"]:"ETag"}],[0,{["httpHeader"]:"x-amz-checksum-crc32"}],[0,{["httpHeader"]:"x-amz-checksum-crc32c"}],[0,{["httpHeader"]:"x-amz-checksum-crc64nvme"}],[0,{["httpHeader"]:"x-amz-checksum-sha1"}],[0,{["httpHeader"]:"x-amz-checksum-sha256"}],[0,{["httpHeader"]:"x-amz-checksum-type"}],[1,{["httpHeader"]:"x-amz-missing-meta"}],[0,{["httpHeader"]:"x-amz-version-id"}],[0,{["httpHeader"]:"Cache-Control"}],[0,{["httpHeader"]:"Content-Disposition"}],[0,{["httpHeader"]:"Content-Encoding"}],[0,{["httpHeader"]:"Content-Language"}],[0,{["httpHeader"]:"Content-Range"}],[0,{["httpHeader"]:"Content-Type"}],[4,{["httpHeader"]:"Expires"}],[0,{["httpHeader"]:"ExpiresString"}],[0,{["httpHeader"]:"x-amz-website-redirect-location"}],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[128,{["httpPrefixHeaders"]:"x-amz-meta-"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-storage-class"}],[0,{["httpHeader"]:"x-amz-request-charged"}],[0,{["httpHeader"]:"x-amz-replication-status"}],[1,{["httpHeader"]:"x-amz-mp-parts-count"}],[1,{["httpHeader"]:"x-amz-tagging-count"}],[0,{["httpHeader"]:"x-amz-object-lock-mode"}],[5,{["httpHeader"]:"x-amz-object-lock-retain-until-date"}],[0,{["httpHeader"]:"x-amz-object-lock-legal-hold"}]]],hyt=[3,"com.amazonaws.s3","GetObjectRequest",0,["Bucket","Key","IfMatch","IfModifiedSince","IfNoneMatch","IfUnmodifiedSince","Range","ResponseCacheControl","ResponseContentDisposition","ResponseContentEncoding","ResponseContentLanguage","ResponseContentType","ResponseExpires","VersionId","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","RequestPayer","PartNumber","ExpectedBucketOwner","ChecksumMode"],[[0,1],[0,1],[0,{["httpHeader"]:"If-Match"}],[4,{["httpHeader"]:"If-Modified-Since"}],[0,{["httpHeader"]:"If-None-Match"}],[4,{["httpHeader"]:"If-Unmodified-Since"}],[0,{["httpHeader"]:"Range"}],[0,{["httpQuery"]:"response-cache-control"}],[0,{["httpQuery"]:"response-content-disposition"}],[0,{["httpQuery"]:"response-content-encoding"}],[0,{["httpQuery"]:"response-content-language"}],[0,{["httpQuery"]:"response-content-type"}],[6,{["httpQuery"]:"response-expires"}],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[1,{["httpQuery"]:"partNumber"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-checksum-mode"}]],2],wyt=[3,"com.amazonaws.s3","GetObjectRetentionOutput",0,["Retention"],[[()=>mM,{["httpPayload"]:1,["xmlName"]:"Retention"}]]],pyt=[3,"com.amazonaws.s3","GetObjectRetentionRequest",0,["Bucket","Key","VersionId","RequestPayer","ExpectedBucketOwner"],[[0,1],[0,1],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],uyt=[3,"com.amazonaws.s3","GetObjectTaggingOutput",{["xmlName"]:"Tagging"},["TagSet","VersionId"],[[()=>kn,0],[0,{["httpHeader"]:"x-amz-version-id"}]],1],dyt=[3,"com.amazonaws.s3","GetObjectTaggingRequest",0,["Bucket","Key","VersionId","ExpectedBucketOwner","RequestPayer"],[[0,1],[0,1],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-request-payer"}]],2],yyt=[3,"com.amazonaws.s3","GetObjectTorrentOutput",0,["Body","RequestCharged"],[[()=>Q0,16],[0,{["httpHeader"]:"x-amz-request-charged"}]]],Ayt=[3,"com.amazonaws.s3","GetObjectTorrentRequest",0,["Bucket","Key","RequestPayer","ExpectedBucketOwner"],[[0,1],[0,1],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],Syt=[3,"com.amazonaws.s3","GetPublicAccessBlockOutput",0,["PublicAccessBlockConfiguration"],[[()=>HM,16]]],_yt=[3,"com.amazonaws.s3","GetPublicAccessBlockRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],$yt=[3,"com.amazonaws.s3","GlacierJobParameters",0,["Tier"],[0],1],Oyt=[3,"com.amazonaws.s3","Grant",0,["Grantee","Permission"],[[()=>SM,{["xmlNamespace"]:["xsi","http://www.w3.org/2001/XMLSchema-instance"]}],0]],SM=[3,"com.amazonaws.s3","Grantee",0,["Type","DisplayName","EmailAddress","ID","URI"],[[0,{["xmlAttribute"]:1,["xmlName"]:"xsi:type"}],0,0,0,0],1],Ryt=[3,"com.amazonaws.s3","HeadBucketOutput",0,["BucketArn","BucketLocationType","BucketLocationName","BucketRegion","AccessPointAlias"],[[0,{["httpHeader"]:"x-amz-bucket-arn"}],[0,{["httpHeader"]:"x-amz-bucket-location-type"}],[0,{["httpHeader"]:"x-amz-bucket-location-name"}],[0,{["httpHeader"]:"x-amz-bucket-region"}],[2,{["httpHeader"]:"x-amz-access-point-alias"}]]],Iyt=[3,"com.amazonaws.s3","HeadBucketRequest",0,["Bucket","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],Tyt=[3,"com.amazonaws.s3","HeadObjectOutput",0,["DeleteMarker","AcceptRanges","Expiration","Restore","ArchiveStatus","LastModified","ContentLength","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","ChecksumType","ETag","MissingMeta","VersionId","CacheControl","ContentDisposition","ContentEncoding","ContentLanguage","ContentType","ContentRange","Expires","ExpiresString","WebsiteRedirectLocation","ServerSideEncryption","Metadata","SSECustomerAlgorithm","SSECustomerKeyMD5","SSEKMSKeyId","BucketKeyEnabled","StorageClass","RequestCharged","ReplicationStatus","PartsCount","TagCount","ObjectLockMode","ObjectLockRetainUntilDate","ObjectLockLegalHoldStatus"],[[2,{["httpHeader"]:"x-amz-delete-marker"}],[0,{["httpHeader"]:"accept-ranges"}],[0,{["httpHeader"]:"x-amz-expiration"}],[0,{["httpHeader"]:"x-amz-restore"}],[0,{["httpHeader"]:"x-amz-archive-status"}],[4,{["httpHeader"]:"Last-Modified"}],[1,{["httpHeader"]:"Content-Length"}],[0,{["httpHeader"]:"x-amz-checksum-crc32"}],[0,{["httpHeader"]:"x-amz-checksum-crc32c"}],[0,{["httpHeader"]:"x-amz-checksum-crc64nvme"}],[0,{["httpHeader"]:"x-amz-checksum-sha1"}],[0,{["httpHeader"]:"x-amz-checksum-sha256"}],[0,{["httpHeader"]:"x-amz-checksum-type"}],[0,{["httpHeader"]:"ETag"}],[1,{["httpHeader"]:"x-amz-missing-meta"}],[0,{["httpHeader"]:"x-amz-version-id"}],[0,{["httpHeader"]:"Cache-Control"}],[0,{["httpHeader"]:"Content-Disposition"}],[0,{["httpHeader"]:"Content-Encoding"}],[0,{["httpHeader"]:"Content-Language"}],[0,{["httpHeader"]:"Content-Type"}],[0,{["httpHeader"]:"Content-Range"}],[4,{["httpHeader"]:"Expires"}],[0,{["httpHeader"]:"ExpiresString"}],[0,{["httpHeader"]:"x-amz-website-redirect-location"}],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[128,{["httpPrefixHeaders"]:"x-amz-meta-"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-storage-class"}],[0,{["httpHeader"]:"x-amz-request-charged"}],[0,{["httpHeader"]:"x-amz-replication-status"}],[1,{["httpHeader"]:"x-amz-mp-parts-count"}],[1,{["httpHeader"]:"x-amz-tagging-count"}],[0,{["httpHeader"]:"x-amz-object-lock-mode"}],[5,{["httpHeader"]:"x-amz-object-lock-retain-until-date"}],[0,{["httpHeader"]:"x-amz-object-lock-legal-hold"}]]],Nyt=[3,"com.amazonaws.s3","HeadObjectRequest",0,["Bucket","Key","IfMatch","IfModifiedSince","IfNoneMatch","IfUnmodifiedSince","Range","ResponseCacheControl","ResponseContentDisposition","ResponseContentEncoding","ResponseContentLanguage","ResponseContentType","ResponseExpires","VersionId","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","RequestPayer","PartNumber","ExpectedBucketOwner","ChecksumMode"],[[0,1],[0,1],[0,{["httpHeader"]:"If-Match"}],[4,{["httpHeader"]:"If-Modified-Since"}],[0,{["httpHeader"]:"If-None-Match"}],[4,{["httpHeader"]:"If-Unmodified-Since"}],[0,{["httpHeader"]:"Range"}],[0,{["httpQuery"]:"response-cache-control"}],[0,{["httpQuery"]:"response-content-disposition"}],[0,{["httpQuery"]:"response-content-encoding"}],[0,{["httpQuery"]:"response-content-language"}],[0,{["httpQuery"]:"response-content-type"}],[6,{["httpQuery"]:"response-expires"}],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[1,{["httpQuery"]:"partNumber"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-checksum-mode"}]],2],myt=[-3,"com.amazonaws.s3","IdempotencyParameterMismatch",{["error"]:"client",["httpError"]:400},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(myt,Au);_M=[3,"com.amazonaws.s3","IndexDocument",0,["Suffix"],[0],1],$M=[3,"com.amazonaws.s3","Initiator",0,["ID","DisplayName"],[0,0]],OM=[3,"com.amazonaws.s3","InputSerialization",0,["CSV","CompressionType","JSON","Parquet"],[()=>Idt,0,()=>Jyt,()=>XAt]],ayt=[3,"com.amazonaws.s3","IntelligentTieringAndOperator",0,["Prefix","Tags"],[0,[()=>kn,{["xmlFlattened"]:1,["xmlName"]:"Tag"}]]],B3=[3,"com.amazonaws.s3","IntelligentTieringConfiguration",0,["Id","Status","Tierings","Filter"],[0,0,[()=>Q_t,{["xmlFlattened"]:1,["xmlName"]:"Tiering"}],[()=>Uyt,0]],3],Uyt=[3,"com.amazonaws.s3","IntelligentTieringFilter",0,["Prefix","Tag","And"],[0,()=>Xi,[()=>ayt,0]]],Hyt=[-3,"com.amazonaws.s3","InvalidObjectState",{["error"]:"client",["httpError"]:403},["StorageClass","AccessTier"],[0,0]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(Hyt,fu);byt=[-3,"com.amazonaws.s3","InvalidRequest",{["error"]:"client",["httpError"]:400},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(byt,uu);lyt=[-3,"com.amazonaws.s3","InvalidWriteOffset",{["error"]:"client",["httpError"]:400},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(lyt,du);X3=[3,"com.amazonaws.s3","InventoryConfiguration",0,["Destination","IsEnabled","Id","IncludedObjectVersions","Schedule","Filter","OptionalFields"],[[()=>Fyt,0],2,0,0,()=>Myt,()=>Gyt,[()=>G_t,0]],5],Fyt=[3,"com.amazonaws.s3","InventoryDestination",0,["S3BucketDestination"],[[()=>vyt,0]],1],Lyt=[3,"com.amazonaws.s3","InventoryEncryption",0,["SSES3","SSEKMS"],[[()=>e_t,{["xmlName"]:"SSE-S3"}],[()=>t_t,{["xmlName"]:"SSE-KMS"}]]],Gyt=[3,"com.amazonaws.s3","InventoryFilter",0,["Prefix"],[0],1],vyt=[3,"com.amazonaws.s3","InventoryS3BucketDestination",0,["Bucket","Format","AccountId","Prefix","Encryption"],[0,0,0,0,[()=>Lyt,0]],2],Myt=[3,"com.amazonaws.s3","InventorySchedule",0,["Frequency"],[0],1],zyt=[3,"com.amazonaws.s3","InventoryTableConfiguration",0,["ConfigurationState","EncryptionConfiguration"],[0,()=>J3],1],kyt=[3,"com.amazonaws.s3","InventoryTableConfigurationResult",0,["ConfigurationState","TableStatus","Error","TableName","TableArn"],[0,0,()=>Z3,0,0],1],Wyt=[3,"com.amazonaws.s3","InventoryTableConfigurationUpdates",0,["ConfigurationState","EncryptionConfiguration"],[0,()=>J3],1],Zyt=[3,"com.amazonaws.s3","JournalTableConfiguration",0,["RecordExpiration","EncryptionConfiguration"],[()=>g3,()=>J3],1],Byt=[3,"com.amazonaws.s3","JournalTableConfigurationResult",0,["TableStatus","TableName","RecordExpiration","Error","TableArn"],[0,0,()=>g3,()=>Z3,0],3],Xyt=[3,"com.amazonaws.s3","JournalTableConfigurationUpdates",0,["RecordExpiration"],[()=>g3],1],Jyt=[3,"com.amazonaws.s3","JSONInput",0,["Type"],[0]],Yyt=[3,"com.amazonaws.s3","JSONOutput",0,["RecordDelimiter"],[0]],Pyt=[3,"com.amazonaws.s3","LambdaFunctionConfiguration",0,["LambdaFunctionArn","Events","Id","Filter"],[[0,{["xmlName"]:"CloudFunction"}],[64,{["xmlFlattened"]:1,["xmlName"]:"Event"}],0,[()=>P3,0]],2],gyt=[3,"com.amazonaws.s3","LifecycleExpiration",0,["Date","Days","ExpiredObjectDeleteMarker"],[5,1,2]],Cyt=[3,"com.amazonaws.s3","LifecycleRule",0,["Status","Expiration","ID","Prefix","Filter","Transitions","NoncurrentVersionTransitions","NoncurrentVersionExpiration","AbortIncompleteMultipartUpload"],[0,()=>gyt,0,0,[()=>Kyt,0],[()=>E_t,{["xmlFlattened"]:1,["xmlName"]:"Transition"}],[()=>k_t,{["xmlFlattened"]:1,["xmlName"]:"NoncurrentVersionTransition"}],()=>aAt,()=>W1t],1],Qyt=[3,"com.amazonaws.s3","LifecycleRuleAndOperator",0,["Prefix","Tags","ObjectSizeGreaterThan","ObjectSizeLessThan"],[0,[()=>kn,{["xmlFlattened"]:1,["xmlName"]:"Tag"}],1,1]],Kyt=[3,"com.amazonaws.s3","LifecycleRuleFilter",0,["Prefix","Tag","ObjectSizeGreaterThan","ObjectSizeLessThan","And"],[0,()=>Xi,1,1,[()=>Qyt,0]]],Eyt=[3,"com.amazonaws.s3","ListBucketAnalyticsConfigurationsOutput",{["xmlName"]:"ListBucketAnalyticsConfigurationResult"},["IsTruncated","ContinuationToken","NextContinuationToken","AnalyticsConfigurationList"],[2,0,0,[()=>N_t,{["xmlFlattened"]:1,["xmlName"]:"AnalyticsConfiguration"}]]],xyt=[3,"com.amazonaws.s3","ListBucketAnalyticsConfigurationsRequest",0,["Bucket","ContinuationToken","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"continuation-token"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],qyt=[3,"com.amazonaws.s3","ListBucketIntelligentTieringConfigurationsOutput",0,["IsTruncated","ContinuationToken","NextContinuationToken","IntelligentTieringConfigurationList"],[2,0,0,[()=>F_t,{["xmlFlattened"]:1,["xmlName"]:"IntelligentTieringConfiguration"}]]],Dyt=[3,"com.amazonaws.s3","ListBucketIntelligentTieringConfigurationsRequest",0,["Bucket","ContinuationToken","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"continuation-token"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],Vyt=[3,"com.amazonaws.s3","ListBucketInventoryConfigurationsOutput",{["xmlName"]:"ListInventoryConfigurationsResult"},["ContinuationToken","InventoryConfigurationList","IsTruncated","NextContinuationToken"],[0,[()=>L_t,{["xmlFlattened"]:1,["xmlName"]:"InventoryConfiguration"}],2,0]],jyt=[3,"com.amazonaws.s3","ListBucketInventoryConfigurationsRequest",0,["Bucket","ContinuationToken","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"continuation-token"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],tAt=[3,"com.amazonaws.s3","ListBucketMetricsConfigurationsOutput",{["xmlName"]:"ListMetricsConfigurationsResult"},["IsTruncated","ContinuationToken","NextContinuationToken","MetricsConfigurationList"],[2,0,0,[()=>M_t,{["xmlFlattened"]:1,["xmlName"]:"MetricsConfiguration"}]]],rAt=[3,"com.amazonaws.s3","ListBucketMetricsConfigurationsRequest",0,["Bucket","ContinuationToken","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"continuation-token"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],eAt=[3,"com.amazonaws.s3","ListBucketsOutput",{["xmlName"]:"ListAllMyBucketsResult"},["Buckets","Owner","ContinuationToken","Prefix"],[[()=>vM,0],()=>zn,0,0]],oAt=[3,"com.amazonaws.s3","ListBucketsRequest",0,["MaxBuckets","ContinuationToken","Prefix","BucketRegion"],[[1,{["httpQuery"]:"max-buckets"}],[0,{["httpQuery"]:"continuation-token"}],[0,{["httpQuery"]:"prefix"}],[0,{["httpQuery"]:"bucket-region"}]]],nAt=[3,"com.amazonaws.s3","ListDirectoryBucketsOutput",{["xmlName"]:"ListAllMyDirectoryBucketsResult"},["Buckets","ContinuationToken"],[[()=>vM,0],0]],sAt=[3,"com.amazonaws.s3","ListDirectoryBucketsRequest",0,["ContinuationToken","MaxDirectoryBuckets"],[[0,{["httpQuery"]:"continuation-token"}],[1,{["httpQuery"]:"max-directory-buckets"}]]],cAt=[3,"com.amazonaws.s3","ListMultipartUploadsOutput",{["xmlName"]:"ListMultipartUploadsResult"},["Bucket","KeyMarker","UploadIdMarker","NextKeyMarker","Prefix","Delimiter","NextUploadIdMarker","MaxUploads","IsTruncated","Uploads","CommonPrefixes","EncodingType","RequestCharged"],[0,0,0,0,0,0,0,1,2,[()=>z_t,{["xmlFlattened"]:1,["xmlName"]:"Upload"}],[()=>_u,{["xmlFlattened"]:1}],0,[0,{["httpHeader"]:"x-amz-request-charged"}]]],iAt=[3,"com.amazonaws.s3","ListMultipartUploadsRequest",0,["Bucket","Delimiter","EncodingType","KeyMarker","MaxUploads","Prefix","UploadIdMarker","ExpectedBucketOwner","RequestPayer"],[[0,1],[0,{["httpQuery"]:"delimiter"}],[0,{["httpQuery"]:"encoding-type"}],[0,{["httpQuery"]:"key-marker"}],[1,{["httpQuery"]:"max-uploads"}],[0,{["httpQuery"]:"prefix"}],[0,{["httpQuery"]:"upload-id-marker"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-request-payer"}]],1],fAt=[3,"com.amazonaws.s3","ListObjectsOutput",{["xmlName"]:"ListBucketResult"},["IsTruncated","Marker","NextMarker","Contents","Name","Prefix","Delimiter","MaxKeys","CommonPrefixes","EncodingType","RequestCharged"],[2,0,0,[()=>kM,{["xmlFlattened"]:1}],0,0,0,1,[()=>_u,{["xmlFlattened"]:1}],0,[0,{["httpHeader"]:"x-amz-request-charged"}]]],hAt=[3,"com.amazonaws.s3","ListObjectsRequest",0,["Bucket","Delimiter","EncodingType","Marker","MaxKeys","Prefix","RequestPayer","ExpectedBucketOwner","OptionalObjectAttributes"],[[0,1],[0,{["httpQuery"]:"delimiter"}],[0,{["httpQuery"]:"encoding-type"}],[0,{["httpQuery"]:"marker"}],[1,{["httpQuery"]:"max-keys"}],[0,{["httpQuery"]:"prefix"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[64,{["httpHeader"]:"x-amz-optional-object-attributes"}]],1],wAt=[3,"com.amazonaws.s3","ListObjectsV2Output",{["xmlName"]:"ListBucketResult"},["IsTruncated","Contents","Name","Prefix","Delimiter","MaxKeys","CommonPrefixes","EncodingType","KeyCount","ContinuationToken","NextContinuationToken","StartAfter","RequestCharged"],[2,[()=>kM,{["xmlFlattened"]:1}],0,0,0,1,[()=>_u,{["xmlFlattened"]:1}],0,1,0,0,0,[0,{["httpHeader"]:"x-amz-request-charged"}]]],pAt=[3,"com.amazonaws.s3","ListObjectsV2Request",0,["Bucket","Delimiter","EncodingType","MaxKeys","Prefix","ContinuationToken","FetchOwner","StartAfter","RequestPayer","ExpectedBucketOwner","OptionalObjectAttributes"],[[0,1],[0,{["httpQuery"]:"delimiter"}],[0,{["httpQuery"]:"encoding-type"}],[1,{["httpQuery"]:"max-keys"}],[0,{["httpQuery"]:"prefix"}],[0,{["httpQuery"]:"continuation-token"}],[2,{["httpQuery"]:"fetch-owner"}],[0,{["httpQuery"]:"start-after"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[64,{["httpHeader"]:"x-amz-optional-object-attributes"}]],1],uAt=[3,"com.amazonaws.s3","ListObjectVersionsOutput",{["xmlName"]:"ListVersionsResult"},["IsTruncated","KeyMarker","VersionIdMarker","NextKeyMarker","NextVersionIdMarker","Versions","DeleteMarkers","Name","Prefix","Delimiter","MaxKeys","CommonPrefixes","EncodingType","RequestCharged"],[2,0,0,0,0,[()=>Z_t,{["xmlFlattened"]:1,["xmlName"]:"Version"}],[()=>U_t,{["xmlFlattened"]:1,["xmlName"]:"DeleteMarker"}],0,0,0,1,[()=>_u,{["xmlFlattened"]:1}],0,[0,{["httpHeader"]:"x-amz-request-charged"}]]],dAt=[3,"com.amazonaws.s3","ListObjectVersionsRequest",0,["Bucket","Delimiter","EncodingType","KeyMarker","MaxKeys","Prefix","VersionIdMarker","ExpectedBucketOwner","RequestPayer","OptionalObjectAttributes"],[[0,1],[0,{["httpQuery"]:"delimiter"}],[0,{["httpQuery"]:"encoding-type"}],[0,{["httpQuery"]:"key-marker"}],[1,{["httpQuery"]:"max-keys"}],[0,{["httpQuery"]:"prefix"}],[0,{["httpQuery"]:"version-id-marker"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[64,{["httpHeader"]:"x-amz-optional-object-attributes"}]],1],yAt=[3,"com.amazonaws.s3","ListPartsOutput",{["xmlName"]:"ListPartsResult"},["AbortDate","AbortRuleId","Bucket","Key","UploadId","PartNumberMarker","NextPartNumberMarker","MaxParts","IsTruncated","Parts","Initiator","Owner","StorageClass","RequestCharged","ChecksumAlgorithm","ChecksumType"],[[4,{["httpHeader"]:"x-amz-abort-date"}],[0,{["httpHeader"]:"x-amz-abort-rule-id"}],0,0,0,0,0,1,2,[()=>X_t,{["xmlFlattened"]:1,["xmlName"]:"Part"}],()=>$M,()=>zn,0,[0,{["httpHeader"]:"x-amz-request-charged"}],0,0]],AAt=[3,"com.amazonaws.s3","ListPartsRequest",0,["Bucket","Key","UploadId","MaxParts","PartNumberMarker","RequestPayer","ExpectedBucketOwner","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5"],[[0,1],[0,1],[0,{["httpQuery"]:"uploadId"}],[1,{["httpQuery"]:"max-parts"}],[0,{["httpQuery"]:"part-number-marker"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}]],3],SAt=[3,"com.amazonaws.s3","LocationInfo",0,["Type","Name"],[0,0]],RM=[3,"com.amazonaws.s3","LoggingEnabled",0,["TargetBucket","TargetPrefix","TargetGrants","TargetObjectKeyFormat"],[0,0,[()=>C_t,0],[()=>f_t,0]],2],_At=[3,"com.amazonaws.s3","MetadataConfiguration",0,["JournalTableConfiguration","InventoryTableConfiguration"],[()=>Zyt,()=>zyt],1],$At=[3,"com.amazonaws.s3","MetadataConfigurationResult",0,["DestinationResult","JournalTableConfigurationResult","InventoryTableConfigurationResult"],[()=>Ddt,()=>Byt,()=>kyt],1],OAt=[3,"com.amazonaws.s3","MetadataEntry",0,["Name","Value"],[0,0]],RAt=[3,"com.amazonaws.s3","MetadataTableConfiguration",0,["S3TablesDestination"],[()=>PSt],1],IAt=[3,"com.amazonaws.s3","MetadataTableConfigurationResult",0,["S3TablesDestinationResult"],[()=>gSt],1],J3=[3,"com.amazonaws.s3","MetadataTableEncryptionConfiguration",0,["SseAlgorithm","KmsKeyArn"],[0,0],1],TAt=[3,"com.amazonaws.s3","Metrics",0,["Status","EventThreshold"],[0,()=>FM],1],NAt=[3,"com.amazonaws.s3","MetricsAndOperator",0,["Prefix","Tags","AccessPointArn"],[0,[()=>kn,{["xmlFlattened"]:1,["xmlName"]:"Tag"}],0]],Y3=[3,"com.amazonaws.s3","MetricsConfiguration",0,["Id","Filter"],[0,[()=>D_t,0]],1],mAt=[3,"com.amazonaws.s3","MultipartUpload",0,["UploadId","Key","Initiated","StorageClass","Owner","Initiator","ChecksumAlgorithm","ChecksumType"],[0,0,4,0,()=>zn,()=>$M,0,0]],aAt=[3,"com.amazonaws.s3","NoncurrentVersionExpiration",0,["NoncurrentDays","NewerNoncurrentVersions"],[1,1]],UAt=[3,"com.amazonaws.s3","NoncurrentVersionTransition",0,["NoncurrentDays","StorageClass","NewerNoncurrentVersions"],[1,0,1]],HAt=[-3,"com.amazonaws.s3","NoSuchBucket",{["error"]:"client",["httpError"]:404},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(HAt,iu);bAt=[-3,"com.amazonaws.s3","NoSuchKey",{["error"]:"client",["httpError"]:404},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(bAt,hu);lAt=[-3,"com.amazonaws.s3","NoSuchUpload",{["error"]:"client",["httpError"]:404},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(lAt,ou);FAt=[-3,"com.amazonaws.s3","NotFound",{["error"]:"client"},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(FAt,wu);IM=[3,"com.amazonaws.s3","NotificationConfiguration",0,["TopicConfigurations","QueueConfigurations","LambdaFunctionConfigurations","EventBridgeConfiguration"],[[()=>K_t,{["xmlFlattened"]:1,["xmlName"]:"TopicConfiguration"}],[()=>Y_t,{["xmlFlattened"]:1,["xmlName"]:"QueueConfiguration"}],[()=>v_t,{["xmlFlattened"]:1,["xmlName"]:"CloudFunctionConfiguration"}],()=>o2t]],P3=[3,"com.amazonaws.s3","NotificationConfigurationFilter",0,["Key"],[[()=>JSt,{["xmlName"]:"S3Key"}]]],LAt=[3,"com.amazonaws.s3","Object",0,["Key","LastModified","ETag","ChecksumAlgorithm","ChecksumType","Size","StorageClass","Owner","RestoreStatus"],[0,4,0,[64,{["xmlFlattened"]:1}],0,1,0,()=>zn,()=>LM]],GAt=[-3,"com.amazonaws.s3","ObjectAlreadyInActiveTierError",{["error"]:"client",["httpError"]:403},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(GAt,Su);vAt=[3,"com.amazonaws.s3","ObjectIdentifier",0,["Key","VersionId","ETag","LastModifiedTime","Size"],[0,0,0,6,1],1],TM=[3,"com.amazonaws.s3","ObjectLockConfiguration",0,["ObjectLockEnabled","Rule"],[0,()=>MAt]],NM=[3,"com.amazonaws.s3","ObjectLockLegalHold",0,["Status"],[0]],mM=[3,"com.amazonaws.s3","ObjectLockRetention",0,["Mode","RetainUntilDate"],[0,5]],MAt=[3,"com.amazonaws.s3","ObjectLockRule",0,["DefaultRetention"],[()=>Ndt]],zAt=[-3,"com.amazonaws.s3","ObjectNotInActiveTierError",{["error"]:"client",["httpError"]:403},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(zAt,nu);kAt=[3,"com.amazonaws.s3","ObjectPart",0,["PartNumber","Size","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256"],[1,1,0,0,0,0,0]],WAt=[3,"com.amazonaws.s3","ObjectVersion",0,["ETag","ChecksumAlgorithm","ChecksumType","Size","StorageClass","Key","VersionId","IsLatest","LastModified","Owner","RestoreStatus"],[0,[64,{["xmlFlattened"]:1}],0,1,0,0,0,2,4,()=>zn,()=>LM]],ZAt=[3,"com.amazonaws.s3","OutputLocation",0,["S3"],[[()=>YSt,0]]],aM=[3,"com.amazonaws.s3","OutputSerialization",0,["CSV","JSON"],[()=>Tdt,()=>Yyt]],zn=[3,"com.amazonaws.s3","Owner",0,["DisplayName","ID"],[0,0]],UM=[3,"com.amazonaws.s3","OwnershipControls",0,["Rules"],[[()=>B_t,{["xmlFlattened"]:1,["xmlName"]:"Rule"}]],1],BAt=[3,"com.amazonaws.s3","OwnershipControlsRule",0,["ObjectOwnership"],[0],1],XAt=[3,"com.amazonaws.s3","ParquetInput",0,[],[]],JAt=[3,"com.amazonaws.s3","Part",0,["PartNumber","LastModified","ETag","Size","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256"],[1,4,0,1,0,0,0,0,0]],YAt=[3,"com.amazonaws.s3","PartitionedPrefix",{["xmlName"]:"PartitionedPrefix"},["PartitionDateSource"],[0]],PAt=[3,"com.amazonaws.s3","PolicyStatus",0,["IsPublic"],[[2,{["xmlName"]:"IsPublic"}]]],gAt=[3,"com.amazonaws.s3","Progress",0,["BytesScanned","BytesProcessed","BytesReturned"],[1,1,1]],CAt=[3,"com.amazonaws.s3","ProgressEvent",0,["Details"],[[()=>gAt,{["eventPayload"]:1}]]],HM=[3,"com.amazonaws.s3","PublicAccessBlockConfiguration",0,["BlockPublicAcls","IgnorePublicAcls","BlockPublicPolicy","RestrictPublicBuckets"],[[2,{["xmlName"]:"BlockPublicAcls"}],[2,{["xmlName"]:"IgnorePublicAcls"}],[2,{["xmlName"]:"BlockPublicPolicy"}],[2,{["xmlName"]:"RestrictPublicBuckets"}]]],QAt=[3,"com.amazonaws.s3","PutBucketAbacRequest",0,["Bucket","AbacStatus","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>dM,{["httpPayload"]:1,["xmlName"]:"AbacStatus"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],KAt=[3,"com.amazonaws.s3","PutBucketAccelerateConfigurationRequest",0,["Bucket","AccelerateConfiguration","ExpectedBucketOwner","ChecksumAlgorithm"],[[0,1],[()=>X1t,{["httpPayload"]:1,["xmlName"]:"AccelerateConfiguration"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}]],2],EAt=[3,"com.amazonaws.s3","PutBucketAclRequest",0,["Bucket","ACL","AccessControlPolicy","ContentMD5","ChecksumAlgorithm","GrantFullControl","GrantRead","GrantReadACP","GrantWrite","GrantWriteACP","ExpectedBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-acl"}],[()=>yM,{["httpPayload"]:1,["xmlName"]:"AccessControlPolicy"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-grant-full-control"}],[0,{["httpHeader"]:"x-amz-grant-read"}],[0,{["httpHeader"]:"x-amz-grant-read-acp"}],[0,{["httpHeader"]:"x-amz-grant-write"}],[0,{["httpHeader"]:"x-amz-grant-write-acp"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],xAt=[3,"com.amazonaws.s3","PutBucketAnalyticsConfigurationRequest",0,["Bucket","Id","AnalyticsConfiguration","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[()=>W3,{["httpPayload"]:1,["xmlName"]:"AnalyticsConfiguration"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],3],qAt=[3,"com.amazonaws.s3","PutBucketCorsRequest",0,["Bucket","CORSConfiguration","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>wdt,{["httpPayload"]:1,["xmlName"]:"CORSConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],DAt=[3,"com.amazonaws.s3","PutBucketEncryptionRequest",0,["Bucket","ServerSideEncryptionConfiguration","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>GM,{["httpPayload"]:1,["xmlName"]:"ServerSideEncryptionConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],VAt=[3,"com.amazonaws.s3","PutBucketIntelligentTieringConfigurationRequest",0,["Bucket","Id","IntelligentTieringConfiguration","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[()=>B3,{["httpPayload"]:1,["xmlName"]:"IntelligentTieringConfiguration"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],3],jAt=[3,"com.amazonaws.s3","PutBucketInventoryConfigurationRequest",0,["Bucket","Id","InventoryConfiguration","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[()=>X3,{["httpPayload"]:1,["xmlName"]:"InventoryConfiguration"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],3],tSt=[3,"com.amazonaws.s3","PutBucketLifecycleConfigurationOutput",0,["TransitionDefaultMinimumObjectSize"],[[0,{["httpHeader"]:"x-amz-transition-default-minimum-object-size"}]]],rSt=[3,"com.amazonaws.s3","PutBucketLifecycleConfigurationRequest",0,["Bucket","ChecksumAlgorithm","LifecycleConfiguration","ExpectedBucketOwner","TransitionDefaultMinimumObjectSize"],[[0,1],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[()=>q1t,{["httpPayload"]:1,["xmlName"]:"LifecycleConfiguration"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-transition-default-minimum-object-size"}]],1],eSt=[3,"com.amazonaws.s3","PutBucketLoggingRequest",0,["Bucket","BucketLoggingStatus","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>D1t,{["httpPayload"]:1,["xmlName"]:"BucketLoggingStatus"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],oSt=[3,"com.amazonaws.s3","PutBucketMetricsConfigurationRequest",0,["Bucket","Id","MetricsConfiguration","ExpectedBucketOwner"],[[0,1],[0,{["httpQuery"]:"id"}],[()=>Y3,{["httpPayload"]:1,["xmlName"]:"MetricsConfiguration"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],3],nSt=[3,"com.amazonaws.s3","PutBucketNotificationConfigurationRequest",0,["Bucket","NotificationConfiguration","ExpectedBucketOwner","SkipDestinationValidation"],[[0,1],[()=>IM,{["httpPayload"]:1,["xmlName"]:"NotificationConfiguration"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[2,{["httpHeader"]:"x-amz-skip-destination-validation"}]],2],sSt=[3,"com.amazonaws.s3","PutBucketOwnershipControlsRequest",0,["Bucket","OwnershipControls","ContentMD5","ExpectedBucketOwner","ChecksumAlgorithm"],[[0,1],[()=>UM,{["httpPayload"]:1,["xmlName"]:"OwnershipControls"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}]],2],cSt=[3,"com.amazonaws.s3","PutBucketPolicyRequest",0,["Bucket","Policy","ContentMD5","ChecksumAlgorithm","ConfirmRemoveSelfBucketAccess","ExpectedBucketOwner"],[[0,1],[0,16],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[2,{["httpHeader"]:"x-amz-confirm-remove-self-bucket-access"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],iSt=[3,"com.amazonaws.s3","PutBucketReplicationRequest",0,["Bucket","ReplicationConfiguration","ContentMD5","ChecksumAlgorithm","Token","ExpectedBucketOwner"],[[0,1],[()=>lM,{["httpPayload"]:1,["xmlName"]:"ReplicationConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-bucket-object-lock-token"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],fSt=[3,"com.amazonaws.s3","PutBucketRequestPaymentRequest",0,["Bucket","RequestPaymentConfiguration","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>zSt,{["httpPayload"]:1,["xmlName"]:"RequestPaymentConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],hSt=[3,"com.amazonaws.s3","PutBucketTaggingRequest",0,["Bucket","Tagging","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>C3,{["httpPayload"]:1,["xmlName"]:"Tagging"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],wSt=[3,"com.amazonaws.s3","PutBucketVersioningRequest",0,["Bucket","VersioningConfiguration","ContentMD5","ChecksumAlgorithm","MFA","ExpectedBucketOwner"],[[0,1],[()=>O_t,{["httpPayload"]:1,["xmlName"]:"VersioningConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-mfa"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],pSt=[3,"com.amazonaws.s3","PutBucketWebsiteRequest",0,["Bucket","WebsiteConfiguration","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>R_t,{["httpPayload"]:1,["xmlName"]:"WebsiteConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],uSt=[3,"com.amazonaws.s3","PutObjectAclOutput",0,["RequestCharged"],[[0,{["httpHeader"]:"x-amz-request-charged"}]]],dSt=[3,"com.amazonaws.s3","PutObjectAclRequest",0,["Bucket","Key","ACL","AccessControlPolicy","ContentMD5","ChecksumAlgorithm","GrantFullControl","GrantRead","GrantReadACP","GrantWrite","GrantWriteACP","RequestPayer","VersionId","ExpectedBucketOwner"],[[0,1],[0,1],[0,{["httpHeader"]:"x-amz-acl"}],[()=>yM,{["httpPayload"]:1,["xmlName"]:"AccessControlPolicy"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-grant-full-control"}],[0,{["httpHeader"]:"x-amz-grant-read"}],[0,{["httpHeader"]:"x-amz-grant-read-acp"}],[0,{["httpHeader"]:"x-amz-grant-write"}],[0,{["httpHeader"]:"x-amz-grant-write-acp"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],ySt=[3,"com.amazonaws.s3","PutObjectLegalHoldOutput",0,["RequestCharged"],[[0,{["httpHeader"]:"x-amz-request-charged"}]]],ASt=[3,"com.amazonaws.s3","PutObjectLegalHoldRequest",0,["Bucket","Key","LegalHold","RequestPayer","VersionId","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[0,1],[()=>NM,{["httpPayload"]:1,["xmlName"]:"LegalHold"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],SSt=[3,"com.amazonaws.s3","PutObjectLockConfigurationOutput",0,["RequestCharged"],[[0,{["httpHeader"]:"x-amz-request-charged"}]]],_St=[3,"com.amazonaws.s3","PutObjectLockConfigurationRequest",0,["Bucket","ObjectLockConfiguration","RequestPayer","Token","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>TM,{["httpPayload"]:1,["xmlName"]:"ObjectLockConfiguration"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-bucket-object-lock-token"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],1],$St=[3,"com.amazonaws.s3","PutObjectOutput",0,["Expiration","ETag","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","ChecksumType","ServerSideEncryption","VersionId","SSECustomerAlgorithm","SSECustomerKeyMD5","SSEKMSKeyId","SSEKMSEncryptionContext","BucketKeyEnabled","Size","RequestCharged"],[[0,{["httpHeader"]:"x-amz-expiration"}],[0,{["httpHeader"]:"ETag"}],[0,{["httpHeader"]:"x-amz-checksum-crc32"}],[0,{["httpHeader"]:"x-amz-checksum-crc32c"}],[0,{["httpHeader"]:"x-amz-checksum-crc64nvme"}],[0,{["httpHeader"]:"x-amz-checksum-sha1"}],[0,{["httpHeader"]:"x-amz-checksum-sha256"}],[0,{["httpHeader"]:"x-amz-checksum-type"}],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[0,{["httpHeader"]:"x-amz-version-id"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[()=>As,{["httpHeader"]:"x-amz-server-side-encryption-context"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[1,{["httpHeader"]:"x-amz-object-size"}],[0,{["httpHeader"]:"x-amz-request-charged"}]]],OSt=[3,"com.amazonaws.s3","PutObjectRequest",0,["Bucket","Key","ACL","Body","CacheControl","ContentDisposition","ContentEncoding","ContentLanguage","ContentLength","ContentMD5","ContentType","ChecksumAlgorithm","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","Expires","IfMatch","IfNoneMatch","GrantFullControl","GrantRead","GrantReadACP","GrantWriteACP","WriteOffsetBytes","Metadata","ServerSideEncryption","StorageClass","WebsiteRedirectLocation","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId","SSEKMSEncryptionContext","BucketKeyEnabled","RequestPayer","Tagging","ObjectLockMode","ObjectLockRetainUntilDate","ObjectLockLegalHoldStatus","ExpectedBucketOwner"],[[0,1],[0,1],[0,{["httpHeader"]:"x-amz-acl"}],[()=>Q0,16],[0,{["httpHeader"]:"Cache-Control"}],[0,{["httpHeader"]:"Content-Disposition"}],[0,{["httpHeader"]:"Content-Encoding"}],[0,{["httpHeader"]:"Content-Language"}],[1,{["httpHeader"]:"Content-Length"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"Content-Type"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-checksum-crc32"}],[0,{["httpHeader"]:"x-amz-checksum-crc32c"}],[0,{["httpHeader"]:"x-amz-checksum-crc64nvme"}],[0,{["httpHeader"]:"x-amz-checksum-sha1"}],[0,{["httpHeader"]:"x-amz-checksum-sha256"}],[4,{["httpHeader"]:"Expires"}],[0,{["httpHeader"]:"If-Match"}],[0,{["httpHeader"]:"If-None-Match"}],[0,{["httpHeader"]:"x-amz-grant-full-control"}],[0,{["httpHeader"]:"x-amz-grant-read"}],[0,{["httpHeader"]:"x-amz-grant-read-acp"}],[0,{["httpHeader"]:"x-amz-grant-write-acp"}],[1,{["httpHeader"]:"x-amz-write-offset-bytes"}],[128,{["httpPrefixHeaders"]:"x-amz-meta-"}],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[0,{["httpHeader"]:"x-amz-storage-class"}],[0,{["httpHeader"]:"x-amz-website-redirect-location"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[()=>As,{["httpHeader"]:"x-amz-server-side-encryption-context"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-tagging"}],[0,{["httpHeader"]:"x-amz-object-lock-mode"}],[5,{["httpHeader"]:"x-amz-object-lock-retain-until-date"}],[0,{["httpHeader"]:"x-amz-object-lock-legal-hold"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],RSt=[3,"com.amazonaws.s3","PutObjectRetentionOutput",0,["RequestCharged"],[[0,{["httpHeader"]:"x-amz-request-charged"}]]],ISt=[3,"com.amazonaws.s3","PutObjectRetentionRequest",0,["Bucket","Key","Retention","RequestPayer","VersionId","BypassGovernanceRetention","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[0,1],[()=>mM,{["httpPayload"]:1,["xmlName"]:"Retention"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpQuery"]:"versionId"}],[2,{["httpHeader"]:"x-amz-bypass-governance-retention"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],TSt=[3,"com.amazonaws.s3","PutObjectTaggingOutput",0,["VersionId"],[[0,{["httpHeader"]:"x-amz-version-id"}]]],NSt=[3,"com.amazonaws.s3","PutObjectTaggingRequest",0,["Bucket","Key","Tagging","VersionId","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner","RequestPayer"],[[0,1],[0,1],[()=>C3,{["httpPayload"]:1,["xmlName"]:"Tagging"}],[0,{["httpQuery"]:"versionId"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-request-payer"}]],3],mSt=[3,"com.amazonaws.s3","PutPublicAccessBlockRequest",0,["Bucket","PublicAccessBlockConfiguration","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>HM,{["httpPayload"]:1,["xmlName"]:"PublicAccessBlockConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],aSt=[3,"com.amazonaws.s3","QueueConfiguration",0,["QueueArn","Events","Id","Filter"],[[0,{["xmlName"]:"Queue"}],[64,{["xmlFlattened"]:1,["xmlName"]:"Event"}],0,[()=>P3,0]],2],g3=[3,"com.amazonaws.s3","RecordExpiration",0,["Expiration","Days"],[0,1],1],USt=[3,"com.amazonaws.s3","RecordsEvent",0,["Payload"],[[21,{["eventPayload"]:1}]]],HSt=[3,"com.amazonaws.s3","Redirect",0,["HostName","HttpRedirectCode","Protocol","ReplaceKeyPrefixWith","ReplaceKeyWith"],[0,0,0,0,0]],bM=[3,"com.amazonaws.s3","RedirectAllRequestsTo",0,["HostName","Protocol"],[0,0],1],bSt=[3,"com.amazonaws.s3","RenameObjectOutput",0,[],[]],lSt=[3,"com.amazonaws.s3","RenameObjectRequest",0,["Bucket","Key","RenameSource","DestinationIfMatch","DestinationIfNoneMatch","DestinationIfModifiedSince","DestinationIfUnmodifiedSince","SourceIfMatch","SourceIfNoneMatch","SourceIfModifiedSince","SourceIfUnmodifiedSince","ClientToken"],[[0,1],[0,1],[0,{["httpHeader"]:"x-amz-rename-source"}],[0,{["httpHeader"]:"If-Match"}],[0,{["httpHeader"]:"If-None-Match"}],[4,{["httpHeader"]:"If-Modified-Since"}],[4,{["httpHeader"]:"If-Unmodified-Since"}],[0,{["httpHeader"]:"x-amz-rename-source-if-match"}],[0,{["httpHeader"]:"x-amz-rename-source-if-none-match"}],[6,{["httpHeader"]:"x-amz-rename-source-if-modified-since"}],[6,{["httpHeader"]:"x-amz-rename-source-if-unmodified-since"}],[0,{["httpHeader"]:"x-amz-client-token",["idempotencyToken"]:1}]],3],FSt=[3,"com.amazonaws.s3","ReplicaModifications",0,["Status"],[0],1],lM=[3,"com.amazonaws.s3","ReplicationConfiguration",0,["Role","Rules"],[0,[()=>P_t,{["xmlFlattened"]:1,["xmlName"]:"Rule"}]],2],LSt=[3,"com.amazonaws.s3","ReplicationRule",0,["Status","Destination","ID","Priority","Prefix","Filter","SourceSelectionCriteria","ExistingObjectReplication","DeleteMarkerReplication"],[0,()=>qdt,0,1,0,[()=>vSt,0],()=>jSt,()=>n2t,()=>Ydt],2],GSt=[3,"com.amazonaws.s3","ReplicationRuleAndOperator",0,["Prefix","Tags"],[0,[()=>kn,{["xmlFlattened"]:1,["xmlName"]:"Tag"}]]],vSt=[3,"com.amazonaws.s3","ReplicationRuleFilter",0,["Prefix","Tag","And"],[0,()=>Xi,[()=>GSt,0]]],MSt=[3,"com.amazonaws.s3","ReplicationTime",0,["Status","Time"],[0,()=>FM],2],FM=[3,"com.amazonaws.s3","ReplicationTimeValue",0,["Minutes"],[1]],zSt=[3,"com.amazonaws.s3","RequestPaymentConfiguration",0,["Payer"],[0],1],kSt=[3,"com.amazonaws.s3","RequestProgress",0,["Enabled"],[2]],WSt=[3,"com.amazonaws.s3","RestoreObjectOutput",0,["RequestCharged","RestoreOutputPath"],[[0,{["httpHeader"]:"x-amz-request-charged"}],[0,{["httpHeader"]:"x-amz-restore-output-path"}]]],ZSt=[3,"com.amazonaws.s3","RestoreObjectRequest",0,["Bucket","Key","VersionId","RestoreRequest","RequestPayer","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[0,1],[0,{["httpQuery"]:"versionId"}],[()=>BSt,{["httpPayload"]:1,["xmlName"]:"RestoreRequest"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],BSt=[3,"com.amazonaws.s3","RestoreRequest",0,["Days","GlacierJobParameters","Type","Tier","Description","SelectParameters","OutputLocation"],[1,()=>$yt,0,0,0,()=>ESt,[()=>ZAt,0]]],LM=[3,"com.amazonaws.s3","RestoreStatus",0,["IsRestoreInProgress","RestoreExpiryDate"],[2,4]],XSt=[3,"com.amazonaws.s3","RoutingRule",0,["Redirect","Condition"],[()=>HSt,()=>ndt],1],JSt=[3,"com.amazonaws.s3","S3KeyFilter",0,["FilterRules"],[[()=>l_t,{["xmlFlattened"]:1,["xmlName"]:"FilterRule"}]]],YSt=[3,"com.amazonaws.s3","S3Location",0,["BucketName","Prefix","Encryption","CannedACL","AccessControlList","Tagging","UserMetadata","StorageClass"],[0,0,[()=>Vdt,0],0,[()=>$u,0],[()=>C3,0],[()=>x_t,0],0],2],PSt=[3,"com.amazonaws.s3","S3TablesDestination",0,["TableBucketArn","TableName"],[0,0],2],gSt=[3,"com.amazonaws.s3","S3TablesDestinationResult",0,["TableBucketArn","TableName","TableArn","TableNamespace"],[0,0,0,0],4],CSt=[3,"com.amazonaws.s3","ScanRange",0,["Start","End"],[1,1]],QSt=[3,"com.amazonaws.s3","SelectObjectContentOutput",0,["Payload"],[[()=>V_t,16]]],KSt=[3,"com.amazonaws.s3","SelectObjectContentRequest",0,["Bucket","Key","Expression","ExpressionType","InputSerialization","OutputSerialization","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","RequestProgress","ScanRange","ExpectedBucketOwner"],[[0,1],[0,1],0,0,()=>OM,()=>aM,[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],()=>kSt,()=>CSt,[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],6],ESt=[3,"com.amazonaws.s3","SelectParameters",0,["InputSerialization","ExpressionType","Expression","OutputSerialization"],[()=>OM,0,0,()=>aM],4],xSt=[3,"com.amazonaws.s3","ServerSideEncryptionByDefault",0,["SSEAlgorithm","KMSMasterKeyID"],[0,[()=>Ie,0]],1],GM=[3,"com.amazonaws.s3","ServerSideEncryptionConfiguration",0,["Rules"],[[()=>g_t,{["xmlFlattened"]:1,["xmlName"]:"Rule"}]],1],qSt=[3,"com.amazonaws.s3","ServerSideEncryptionRule",0,["ApplyServerSideEncryptionByDefault","BucketKeyEnabled","BlockedEncryptionTypes"],[[()=>xSt,0],2,[()=>C1t,0]]],DSt=[3,"com.amazonaws.s3","SessionCredentials",0,["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],[[0,{["xmlName"]:"AccessKeyId"}],[()=>pM,{["xmlName"]:"SecretAccessKey"}],[()=>pM,{["xmlName"]:"SessionToken"}],[4,{["xmlName"]:"Expiration"}]],4],VSt=[3,"com.amazonaws.s3","SimplePrefix",{["xmlName"]:"SimplePrefix"},[],[]],jSt=[3,"com.amazonaws.s3","SourceSelectionCriteria",0,["SseKmsEncryptedObjects","ReplicaModifications"],[()=>r_t,()=>FSt]],t_t=[3,"com.amazonaws.s3","SSEKMS",{["xmlName"]:"SSE-KMS"},["KeyId"],[[()=>Ie,0]],1],r_t=[3,"com.amazonaws.s3","SseKmsEncryptedObjects",0,["Status"],[0],1],e_t=[3,"com.amazonaws.s3","SSES3",{["xmlName"]:"SSE-S3"},[],[]],o_t=[3,"com.amazonaws.s3","Stats",0,["BytesScanned","BytesProcessed","BytesReturned"],[1,1,1]],n_t=[3,"com.amazonaws.s3","StatsEvent",0,["Details"],[[()=>o_t,{["eventPayload"]:1}]]],s_t=[3,"com.amazonaws.s3","StorageClassAnalysis",0,["DataExport"],[()=>c_t]],c_t=[3,"com.amazonaws.s3","StorageClassAnalysisDataExport",0,["OutputSchemaVersion","Destination"],[0,()=>P1t],2],Xi=[3,"com.amazonaws.s3","Tag",0,["Key","Value"],[0,0],2],C3=[3,"com.amazonaws.s3","Tagging",0,["TagSet"],[[()=>kn,0]],1],i_t=[3,"com.amazonaws.s3","TargetGrant",0,["Grantee","Permission"],[[()=>SM,{["xmlNamespace"]:["xsi","http://www.w3.org/2001/XMLSchema-instance"]}],0]],f_t=[3,"com.amazonaws.s3","TargetObjectKeyFormat",0,["SimplePrefix","PartitionedPrefix"],[[()=>VSt,{["xmlName"]:"SimplePrefix"}],[()=>YAt,{["xmlName"]:"PartitionedPrefix"}]]],h_t=[3,"com.amazonaws.s3","Tiering",0,["Days","AccessTier"],[1,0],2],w_t=[-3,"com.amazonaws.s3","TooManyParts",{["error"]:"client",["httpError"]:400},[],[]];ve.TypeRegistry.for("com.amazonaws.s3").registerError(w_t,yu);p_t=[3,"com.amazonaws.s3","TopicConfiguration",0,["TopicArn","Events","Id","Filter"],[[0,{["xmlName"]:"Topic"}],[64,{["xmlFlattened"]:1,["xmlName"]:"Event"}],0,[()=>P3,0]],2],u_t=[3,"com.amazonaws.s3","Transition",0,["Date","Days","StorageClass"],[5,1,0]],d_t=[3,"com.amazonaws.s3","UpdateBucketMetadataInventoryTableConfigurationRequest",0,["Bucket","InventoryTableConfiguration","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>Wyt,{["httpPayload"]:1,["xmlName"]:"InventoryTableConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],y_t=[3,"com.amazonaws.s3","UpdateBucketMetadataJournalTableConfigurationRequest",0,["Bucket","JournalTableConfiguration","ContentMD5","ChecksumAlgorithm","ExpectedBucketOwner"],[[0,1],[()=>Xyt,{["httpPayload"]:1,["xmlName"]:"JournalTableConfiguration"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],2],A_t=[3,"com.amazonaws.s3","UploadPartCopyOutput",0,["CopySourceVersionId","CopyPartResult","ServerSideEncryption","SSECustomerAlgorithm","SSECustomerKeyMD5","SSEKMSKeyId","BucketKeyEnabled","RequestCharged"],[[0,{["httpHeader"]:"x-amz-copy-source-version-id"}],[()=>hdt,16],[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-request-charged"}]]],S_t=[3,"com.amazonaws.s3","UploadPartCopyRequest",0,["Bucket","CopySource","Key","PartNumber","UploadId","CopySourceIfMatch","CopySourceIfModifiedSince","CopySourceIfNoneMatch","CopySourceIfUnmodifiedSince","CopySourceRange","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","CopySourceSSECustomerAlgorithm","CopySourceSSECustomerKey","CopySourceSSECustomerKeyMD5","RequestPayer","ExpectedBucketOwner","ExpectedSourceBucketOwner"],[[0,1],[0,{["httpHeader"]:"x-amz-copy-source"}],[0,1],[1,{["httpQuery"]:"partNumber"}],[0,{["httpQuery"]:"uploadId"}],[0,{["httpHeader"]:"x-amz-copy-source-if-match"}],[4,{["httpHeader"]:"x-amz-copy-source-if-modified-since"}],[0,{["httpHeader"]:"x-amz-copy-source-if-none-match"}],[4,{["httpHeader"]:"x-amz-copy-source-if-unmodified-since"}],[0,{["httpHeader"]:"x-amz-copy-source-range"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[0,{["httpHeader"]:"x-amz-copy-source-server-side-encryption-customer-algorithm"}],[()=>uM,{["httpHeader"]:"x-amz-copy-source-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-copy-source-server-side-encryption-customer-key-MD5"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}],[0,{["httpHeader"]:"x-amz-source-expected-bucket-owner"}]],5],__t=[3,"com.amazonaws.s3","UploadPartOutput",0,["ServerSideEncryption","ETag","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","SSECustomerAlgorithm","SSECustomerKeyMD5","SSEKMSKeyId","BucketKeyEnabled","RequestCharged"],[[0,{["httpHeader"]:"x-amz-server-side-encryption"}],[0,{["httpHeader"]:"ETag"}],[0,{["httpHeader"]:"x-amz-checksum-crc32"}],[0,{["httpHeader"]:"x-amz-checksum-crc32c"}],[0,{["httpHeader"]:"x-amz-checksum-crc64nvme"}],[0,{["httpHeader"]:"x-amz-checksum-sha1"}],[0,{["httpHeader"]:"x-amz-checksum-sha256"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[()=>Ie,{["httpHeader"]:"x-amz-server-side-encryption-aws-kms-key-id"}],[2,{["httpHeader"]:"x-amz-server-side-encryption-bucket-key-enabled"}],[0,{["httpHeader"]:"x-amz-request-charged"}]]],$_t=[3,"com.amazonaws.s3","UploadPartRequest",0,["Bucket","Key","PartNumber","UploadId","Body","ContentLength","ContentMD5","ChecksumAlgorithm","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","RequestPayer","ExpectedBucketOwner"],[[0,1],[0,1],[1,{["httpQuery"]:"partNumber"}],[0,{["httpQuery"]:"uploadId"}],[()=>Q0,16],[1,{["httpHeader"]:"Content-Length"}],[0,{["httpHeader"]:"Content-MD5"}],[0,{["httpHeader"]:"x-amz-sdk-checksum-algorithm"}],[0,{["httpHeader"]:"x-amz-checksum-crc32"}],[0,{["httpHeader"]:"x-amz-checksum-crc32c"}],[0,{["httpHeader"]:"x-amz-checksum-crc64nvme"}],[0,{["httpHeader"]:"x-amz-checksum-sha1"}],[0,{["httpHeader"]:"x-amz-checksum-sha256"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-algorithm"}],[()=>Do,{["httpHeader"]:"x-amz-server-side-encryption-customer-key"}],[0,{["httpHeader"]:"x-amz-server-side-encryption-customer-key-MD5"}],[0,{["httpHeader"]:"x-amz-request-payer"}],[0,{["httpHeader"]:"x-amz-expected-bucket-owner"}]],4],O_t=[3,"com.amazonaws.s3","VersioningConfiguration",0,["MFADelete","Status"],[[0,{["xmlName"]:"MfaDelete"}],0]],R_t=[3,"com.amazonaws.s3","WebsiteConfiguration",0,["ErrorDocument","IndexDocument","RedirectAllRequestsTo","RoutingRules"],[()=>AM,()=>_M,()=>bM,[()=>WM,0]]],I_t=[3,"com.amazonaws.s3","WriteGetObjectResponseRequest",0,["RequestRoute","RequestToken","Body","StatusCode","ErrorCode","ErrorMessage","AcceptRanges","CacheControl","ContentDisposition","ContentEncoding","ContentLanguage","ContentLength","ContentRange","ContentType","ChecksumCRC32","ChecksumCRC32C","ChecksumCRC64NVME","ChecksumSHA1","ChecksumSHA256","DeleteMarker","ETag","Expires","Expiration","LastModified","MissingMeta","Metadata","ObjectLockMode","ObjectLockLegalHoldStatus","ObjectLockRetainUntilDate","PartsCount","ReplicationStatus","RequestCharged","Restore","ServerSideEncryption","SSECustomerAlgorithm","SSEKMSKeyId","SSECustomerKeyMD5","StorageClass","TagCount","VersionId","BucketKeyEnabled"],[[0,{["hostLabel"]:1,["httpHeader"]:"x-amz-request-route"}],[0,{["httpHeader"]:"x-amz-request-token"}],[()=>Q0,16],[1,{["httpHeader"]:"x-amz-fwd-status"}],[0,{["httpHeader"]:"x-amz-fwd-error-code"}],[0,{["httpHeader"]:"x-amz-fwd-error-message"}],[0,{["httpHeader"]:"x-amz-fwd-header-accept-ranges"}],[0,{["httpHeader"]:"x-amz-fwd-header-Cache-Control"}],[0,{["httpHeader"]:"x-amz-fwd-header-Content-Disposition"}],[0,{["httpHeader"]:"x-amz-fwd-header-Content-Encoding"}],[0,{["httpHeader"]:"x-amz-fwd-header-Content-Language"}],[1,{["httpHeader"]:"Content-Length"}],[0,{["httpHeader"]:"x-amz-fwd-header-Content-Range"}],[0,{["httpHeader"]:"x-amz-fwd-header-Content-Type"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-checksum-crc32"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-checksum-crc32c"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-checksum-crc64nvme"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-checksum-sha1"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-checksum-sha256"}],[2,{["httpHeader"]:"x-amz-fwd-header-x-amz-delete-marker"}],[0,{["httpHeader"]:"x-amz-fwd-header-ETag"}],[4,{["httpHeader"]:"x-amz-fwd-header-Expires"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-expiration"}],[4,{["httpHeader"]:"x-amz-fwd-header-Last-Modified"}],[1,{["httpHeader"]:"x-amz-fwd-header-x-amz-missing-meta"}],[128,{["httpPrefixHeaders"]:"x-amz-meta-"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-object-lock-mode"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-object-lock-legal-hold"}],[5,{["httpHeader"]:"x-amz-fwd-header-x-amz-object-lock-retain-until-date"}],[1,{["httpHeader"]:"x-amz-fwd-header-x-amz-mp-parts-count"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-replication-status"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-request-charged"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-restore"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-server-side-encryption"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-server-side-encryption-customer-algorithm"}],[()=>Ie,{["httpHeader"]:"x-amz-fwd-header-x-amz-server-side-encryption-aws-kms-key-id"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-server-side-encryption-customer-key-MD5"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-storage-class"}],[1,{["httpHeader"]:"x-amz-fwd-header-x-amz-tagging-count"}],[0,{["httpHeader"]:"x-amz-fwd-header-x-amz-version-id"}],[2,{["httpHeader"]:"x-amz-fwd-header-x-amz-server-side-encryption-bucket-key-enabled"}]],2],T_t=[-3,"smithy.ts.sdk.synthetic.com.amazonaws.s3","S3ServiceException",0,[],[]];ve.TypeRegistry.for("smithy.ts.sdk.synthetic.com.amazonaws.s3").registerError(T_t,se);N_t=[1,"com.amazonaws.s3","AnalyticsConfigurationList",0,[()=>W3,0]],vM=[1,"com.amazonaws.s3","Buckets",0,[()=>Q1t,{["xmlName"]:"Bucket"}]],_u=[1,"com.amazonaws.s3","CommonPrefixList",0,()=>j1t],m_t=[1,"com.amazonaws.s3","CompletedPartList",0,()=>rdt],MM=[1,"com.amazonaws.s3","CORSRules",0,[()=>pdt,0]],a_t=[1,"com.amazonaws.s3","DeletedObjects",0,()=>Xdt],U_t=[1,"com.amazonaws.s3","DeleteMarkers",0,()=>Jdt],H_t=[1,"com.amazonaws.s3","EncryptionTypeList",0,[0,{["xmlName"]:"EncryptionType"}]],b_t=[1,"com.amazonaws.s3","Errors",0,()=>e2t],l_t=[1,"com.amazonaws.s3","FilterRuleList",0,()=>s2t],$u=[1,"com.amazonaws.s3","Grants",0,[()=>Oyt,{["xmlName"]:"Grant"}]],F_t=[1,"com.amazonaws.s3","IntelligentTieringConfigurationList",0,[()=>B3,0]],L_t=[1,"com.amazonaws.s3","InventoryConfigurationList",0,[()=>X3,0]],G_t=[1,"com.amazonaws.s3","InventoryOptionalFields",0,[0,{["xmlName"]:"Field"}]],v_t=[1,"com.amazonaws.s3","LambdaFunctionConfigurationList",0,[()=>Pyt,0]],zM=[1,"com.amazonaws.s3","LifecycleRules",0,[()=>Cyt,0]],M_t=[1,"com.amazonaws.s3","MetricsConfigurationList",0,[()=>Y3,0]],z_t=[1,"com.amazonaws.s3","MultipartUploadList",0,()=>mAt],k_t=[1,"com.amazonaws.s3","NoncurrentVersionTransitionList",0,()=>UAt],W_t=[1,"com.amazonaws.s3","ObjectIdentifierList",0,()=>vAt],kM=[1,"com.amazonaws.s3","ObjectList",0,[()=>LAt,0]],Z_t=[1,"com.amazonaws.s3","ObjectVersionList",0,[()=>WAt,0]],B_t=[1,"com.amazonaws.s3","OwnershipControlsRules",0,()=>BAt],X_t=[1,"com.amazonaws.s3","Parts",0,()=>JAt],J_t=[1,"com.amazonaws.s3","PartsList",0,()=>kAt],Y_t=[1,"com.amazonaws.s3","QueueConfigurationList",0,[()=>aSt,0]],P_t=[1,"com.amazonaws.s3","ReplicationRules",0,[()=>LSt,0]],WM=[1,"com.amazonaws.s3","RoutingRules",0,[()=>XSt,{["xmlName"]:"RoutingRule"}]],g_t=[1,"com.amazonaws.s3","ServerSideEncryptionRules",0,[()=>qSt,0]],kn=[1,"com.amazonaws.s3","TagSet",0,[()=>Xi,{["xmlName"]:"Tag"}]],C_t=[1,"com.amazonaws.s3","TargetGrants",0,[()=>i_t,{["xmlName"]:"Grant"}]],Q_t=[1,"com.amazonaws.s3","TieringList",0,()=>h_t],K_t=[1,"com.amazonaws.s3","TopicConfigurationList",0,[()=>p_t,0]],E_t=[1,"com.amazonaws.s3","TransitionList",0,()=>u_t],x_t=[1,"com.amazonaws.s3","UserMetadata",0,[()=>OAt,{["xmlName"]:"MetadataEntry"}]],q_t=[4,"com.amazonaws.s3","AnalyticsFilter",0,["Prefix","Tag","And"],[0,()=>Xi,[()=>Y1t,0]]],D_t=[4,"com.amazonaws.s3","MetricsFilter",0,["Prefix","Tag","AccessPointArn","And"],[0,()=>Xi,0,[()=>NAt,0]]],V_t=[4,"com.amazonaws.s3","SelectObjectContentEventStream",{["streaming"]:1},["Records","Stats","Progress","Cont","End"],[[()=>USt,0],[()=>n_t,0],[()=>CAt,0],()=>sdt,()=>r2t]],ZM=[9,"com.amazonaws.s3","AbortMultipartUpload",{["http"]:["DELETE","/{Key+}?x-id=AbortMultipartUpload",204]},()=>B1t,()=>Z1t],BM=[9,"com.amazonaws.s3","CompleteMultipartUpload",{["http"]:["POST","/{Key+}",200]},()=>odt,()=>edt],XM=[9,"com.amazonaws.s3","CopyObject",{["http"]:["PUT","/{Key+}?x-id=CopyObject",200]},()=>idt,()=>cdt],JM=[9,"com.amazonaws.s3","CreateBucket",{["http"]:["PUT","/",200]},()=>Sdt,()=>Adt],YM=[9,"com.amazonaws.s3","CreateBucketMetadataConfiguration",{["httpChecksum"]:"-",["http"]:["POST","/?metadataConfiguration",200]},()=>ddt,()=>Ft],PM=[9,"com.amazonaws.s3","CreateBucketMetadataTableConfiguration",{["httpChecksum"]:"-",["http"]:["POST","/?metadataTable",200]},()=>ydt,()=>Ft],gM=[9,"com.amazonaws.s3","CreateMultipartUpload",{["http"]:["POST","/{Key+}?uploads",200]},()=>$dt,()=>_dt],CM=[9,"com.amazonaws.s3","CreateSession",{["http"]:["GET","/?session",200]},()=>Rdt,()=>Odt],QM=[9,"com.amazonaws.s3","DeleteBucket",{["http"]:["DELETE","/",204]},()=>Wdt,()=>Ft],KM=[9,"com.amazonaws.s3","DeleteBucketAnalyticsConfiguration",{["http"]:["DELETE","/?analytics",204]},()=>adt,()=>Ft],EM=[9,"com.amazonaws.s3","DeleteBucketCors",{["http"]:["DELETE","/?cors",204]},()=>Udt,()=>Ft],xM=[9,"com.amazonaws.s3","DeleteBucketEncryption",{["http"]:["DELETE","/?encryption",204]},()=>Hdt,()=>Ft],qM=[9,"com.amazonaws.s3","DeleteBucketIntelligentTieringConfiguration",{["http"]:["DELETE","/?intelligent-tiering",204]},()=>bdt,()=>Ft],DM=[9,"com.amazonaws.s3","DeleteBucketInventoryConfiguration",{["http"]:["DELETE","/?inventory",204]},()=>ldt,()=>Ft],VM=[9,"com.amazonaws.s3","DeleteBucketLifecycle",{["http"]:["DELETE","/?lifecycle",204]},()=>Fdt,()=>Ft],jM=[9,"com.amazonaws.s3","DeleteBucketMetadataConfiguration",{["http"]:["DELETE","/?metadataConfiguration",204]},()=>Ldt,()=>Ft],tz=[9,"com.amazonaws.s3","DeleteBucketMetadataTableConfiguration",{["http"]:["DELETE","/?metadataTable",204]},()=>Gdt,()=>Ft],rz=[9,"com.amazonaws.s3","DeleteBucketMetricsConfiguration",{["http"]:["DELETE","/?metrics",204]},()=>vdt,()=>Ft],ez=[9,"com.amazonaws.s3","DeleteBucketOwnershipControls",{["http"]:["DELETE","/?ownershipControls",204]},()=>Mdt,()=>Ft],oz=[9,"com.amazonaws.s3","DeleteBucketPolicy",{["http"]:["DELETE","/?policy",204]},()=>zdt,()=>Ft],nz=[9,"com.amazonaws.s3","DeleteBucketReplication",{["http"]:["DELETE","/?replication",204]},()=>kdt,()=>Ft],sz=[9,"com.amazonaws.s3","DeleteBucketTagging",{["http"]:["DELETE","/?tagging",204]},()=>Zdt,()=>Ft],cz=[9,"com.amazonaws.s3","DeleteBucketWebsite",{["http"]:["DELETE","/?website",204]},()=>Bdt,()=>Ft],iz=[9,"com.amazonaws.s3","DeleteObject",{["http"]:["DELETE","/{Key+}?x-id=DeleteObject",204]},()=>gdt,()=>Pdt],fz=[9,"com.amazonaws.s3","DeleteObjects",{["httpChecksum"]:"-",["http"]:["POST","/?delete",200]},()=>Qdt,()=>Cdt],hz=[9,"com.amazonaws.s3","DeleteObjectTagging",{["http"]:["DELETE","/{Key+}?tagging",204]},()=>Edt,()=>Kdt],wz=[9,"com.amazonaws.s3","DeletePublicAccessBlock",{["http"]:["DELETE","/?publicAccessBlock",204]},()=>xdt,()=>Ft],pz=[9,"com.amazonaws.s3","GetBucketAbac",{["http"]:["GET","/?abac",200]},()=>i2t,()=>c2t],uz=[9,"com.amazonaws.s3","GetBucketAccelerateConfiguration",{["http"]:["GET","/?accelerate",200]},()=>h2t,()=>f2t],dz=[9,"com.amazonaws.s3","GetBucketAcl",{["http"]:["GET","/?acl",200]},()=>p2t,()=>w2t],yz=[9,"com.amazonaws.s3","GetBucketAnalyticsConfiguration",{["http"]:["GET","/?analytics&x-id=GetBucketAnalyticsConfiguration",200]},()=>d2t,()=>u2t],Az=[9,"com.amazonaws.s3","GetBucketCors",{["http"]:["GET","/?cors",200]},()=>A2t,()=>y2t],Sz=[9,"com.amazonaws.s3","GetBucketEncryption",{["http"]:["GET","/?encryption",200]},()=>_2t,()=>S2t],_z=[9,"com.amazonaws.s3","GetBucketIntelligentTieringConfiguration",{["http"]:["GET","/?intelligent-tiering&x-id=GetBucketIntelligentTieringConfiguration",200]},()=>O2t,()=>$2t],$z=[9,"com.amazonaws.s3","GetBucketInventoryConfiguration",{["http"]:["GET","/?inventory&x-id=GetBucketInventoryConfiguration",200]},()=>I2t,()=>R2t],Oz=[9,"com.amazonaws.s3","GetBucketLifecycleConfiguration",{["http"]:["GET","/?lifecycle",200]},()=>N2t,()=>T2t],Rz=[9,"com.amazonaws.s3","GetBucketLocation",{["http"]:["GET","/?location",200]},()=>a2t,()=>m2t],Iz=[9,"com.amazonaws.s3","GetBucketLogging",{["http"]:["GET","/?logging",200]},()=>H2t,()=>U2t],Tz=[9,"com.amazonaws.s3","GetBucketMetadataConfiguration",{["http"]:["GET","/?metadataConfiguration",200]},()=>l2t,()=>b2t],Nz=[9,"com.amazonaws.s3","GetBucketMetadataTableConfiguration",{["http"]:["GET","/?metadataTable",200]},()=>G2t,()=>L2t],mz=[9,"com.amazonaws.s3","GetBucketMetricsConfiguration",{["http"]:["GET","/?metrics&x-id=GetBucketMetricsConfiguration",200]},()=>z2t,()=>M2t],az=[9,"com.amazonaws.s3","GetBucketNotificationConfiguration",{["http"]:["GET","/?notification",200]},()=>k2t,()=>IM],Uz=[9,"com.amazonaws.s3","GetBucketOwnershipControls",{["http"]:["GET","/?ownershipControls",200]},()=>Z2t,()=>W2t],Hz=[9,"com.amazonaws.s3","GetBucketPolicy",{["http"]:["GET","/?policy",200]},()=>X2t,()=>B2t],bz=[9,"com.amazonaws.s3","GetBucketPolicyStatus",{["http"]:["GET","/?policyStatus",200]},()=>Y2t,()=>J2t],lz=[9,"com.amazonaws.s3","GetBucketReplication",{["http"]:["GET","/?replication",200]},()=>g2t,()=>P2t],Fz=[9,"com.amazonaws.s3","GetBucketRequestPayment",{["http"]:["GET","/?requestPayment",200]},()=>Q2t,()=>C2t],Lz=[9,"com.amazonaws.s3","GetBucketTagging",{["http"]:["GET","/?tagging",200]},()=>E2t,()=>K2t],Gz=[9,"com.amazonaws.s3","GetBucketVersioning",{["http"]:["GET","/?versioning",200]},()=>q2t,()=>x2t],vz=[9,"com.amazonaws.s3","GetBucketWebsite",{["http"]:["GET","/?website",200]},()=>V2t,()=>D2t],Mz=[9,"com.amazonaws.s3","GetObject",{["httpChecksum"]:"-",["http"]:["GET","/{Key+}?x-id=GetObject",200]},()=>hyt,()=>fyt],zz=[9,"com.amazonaws.s3","GetObjectAcl",{["http"]:["GET","/{Key+}?acl",200]},()=>tyt,()=>j2t],kz=[9,"com.amazonaws.s3","GetObjectAttributes",{["http"]:["GET","/{Key+}?attributes",200]},()=>oyt,()=>ryt],Wz=[9,"com.amazonaws.s3","GetObjectLegalHold",{["http"]:["GET","/{Key+}?legal-hold",200]},()=>syt,()=>nyt],Zz=[9,"com.amazonaws.s3","GetObjectLockConfiguration",{["http"]:["GET","/?object-lock",200]},()=>iyt,()=>cyt],Bz=[9,"com.amazonaws.s3","GetObjectRetention",{["http"]:["GET","/{Key+}?retention",200]},()=>pyt,()=>wyt],Xz=[9,"com.amazonaws.s3","GetObjectTagging",{["http"]:["GET","/{Key+}?tagging",200]},()=>dyt,()=>uyt],Jz=[9,"com.amazonaws.s3","GetObjectTorrent",{["http"]:["GET","/{Key+}?torrent",200]},()=>Ayt,()=>yyt],Yz=[9,"com.amazonaws.s3","GetPublicAccessBlock",{["http"]:["GET","/?publicAccessBlock",200]},()=>_yt,()=>Syt],Pz=[9,"com.amazonaws.s3","HeadBucket",{["http"]:["HEAD","/",200]},()=>Iyt,()=>Ryt],gz=[9,"com.amazonaws.s3","HeadObject",{["http"]:["HEAD","/{Key+}",200]},()=>Nyt,()=>Tyt],Cz=[9,"com.amazonaws.s3","ListBucketAnalyticsConfigurations",{["http"]:["GET","/?analytics&x-id=ListBucketAnalyticsConfigurations",200]},()=>xyt,()=>Eyt],Qz=[9,"com.amazonaws.s3","ListBucketIntelligentTieringConfigurations",{["http"]:["GET","/?intelligent-tiering&x-id=ListBucketIntelligentTieringConfigurations",200]},()=>Dyt,()=>qyt],Kz=[9,"com.amazonaws.s3","ListBucketInventoryConfigurations",{["http"]:["GET","/?inventory&x-id=ListBucketInventoryConfigurations",200]},()=>jyt,()=>Vyt],Ez=[9,"com.amazonaws.s3","ListBucketMetricsConfigurations",{["http"]:["GET","/?metrics&x-id=ListBucketMetricsConfigurations",200]},()=>rAt,()=>tAt],xz=[9,"com.amazonaws.s3","ListBuckets",{["http"]:["GET","/?x-id=ListBuckets",200]},()=>oAt,()=>eAt],qz=[9,"com.amazonaws.s3","ListDirectoryBuckets",{["http"]:["GET","/?x-id=ListDirectoryBuckets",200]},()=>sAt,()=>nAt],Dz=[9,"com.amazonaws.s3","ListMultipartUploads",{["http"]:["GET","/?uploads",200]},()=>iAt,()=>cAt],Vz=[9,"com.amazonaws.s3","ListObjects",{["http"]:["GET","/",200]},()=>hAt,()=>fAt],jz=[9,"com.amazonaws.s3","ListObjectsV2",{["http"]:["GET","/?list-type=2",200]},()=>pAt,()=>wAt],tk=[9,"com.amazonaws.s3","ListObjectVersions",{["http"]:["GET","/?versions",200]},()=>dAt,()=>uAt],rk=[9,"com.amazonaws.s3","ListParts",{["http"]:["GET","/{Key+}?x-id=ListParts",200]},()=>AAt,()=>yAt],ek=[9,"com.amazonaws.s3","PutBucketAbac",{["httpChecksum"]:"-",["http"]:["PUT","/?abac",200]},()=>QAt,()=>Ft],ok=[9,"com.amazonaws.s3","PutBucketAccelerateConfiguration",{["httpChecksum"]:"-",["http"]:["PUT","/?accelerate",200]},()=>KAt,()=>Ft],nk=[9,"com.amazonaws.s3","PutBucketAcl",{["httpChecksum"]:"-",["http"]:["PUT","/?acl",200]},()=>EAt,()=>Ft],sk=[9,"com.amazonaws.s3","PutBucketAnalyticsConfiguration",{["http"]:["PUT","/?analytics",200]},()=>xAt,()=>Ft],ck=[9,"com.amazonaws.s3","PutBucketCors",{["httpChecksum"]:"-",["http"]:["PUT","/?cors",200]},()=>qAt,()=>Ft],ik=[9,"com.amazonaws.s3","PutBucketEncryption",{["httpChecksum"]:"-",["http"]:["PUT","/?encryption",200]},()=>DAt,()=>Ft],fk=[9,"com.amazonaws.s3","PutBucketIntelligentTieringConfiguration",{["http"]:["PUT","/?intelligent-tiering",200]},()=>VAt,()=>Ft],hk=[9,"com.amazonaws.s3","PutBucketInventoryConfiguration",{["http"]:["PUT","/?inventory",200]},()=>jAt,()=>Ft],wk=[9,"com.amazonaws.s3","PutBucketLifecycleConfiguration",{["httpChecksum"]:"-",["http"]:["PUT","/?lifecycle",200]},()=>rSt,()=>tSt],pk=[9,"com.amazonaws.s3","PutBucketLogging",{["httpChecksum"]:"-",["http"]:["PUT","/?logging",200]},()=>eSt,()=>Ft],uk=[9,"com.amazonaws.s3","PutBucketMetricsConfiguration",{["http"]:["PUT","/?metrics",200]},()=>oSt,()=>Ft],dk=[9,"com.amazonaws.s3","PutBucketNotificationConfiguration",{["http"]:["PUT","/?notification",200]},()=>nSt,()=>Ft],yk=[9,"com.amazonaws.s3","PutBucketOwnershipControls",{["httpChecksum"]:"-",["http"]:["PUT","/?ownershipControls",200]},()=>sSt,()=>Ft],Ak=[9,"com.amazonaws.s3","PutBucketPolicy",{["httpChecksum"]:"-",["http"]:["PUT","/?policy",200]},()=>cSt,()=>Ft],Sk=[9,"com.amazonaws.s3","PutBucketReplication",{["httpChecksum"]:"-",["http"]:["PUT","/?replication",200]},()=>iSt,()=>Ft],_k=[9,"com.amazonaws.s3","PutBucketRequestPayment",{["httpChecksum"]:"-",["http"]:["PUT","/?requestPayment",200]},()=>fSt,()=>Ft],$k=[9,"com.amazonaws.s3","PutBucketTagging",{["httpChecksum"]:"-",["http"]:["PUT","/?tagging",200]},()=>hSt,()=>Ft],Ok=[9,"com.amazonaws.s3","PutBucketVersioning",{["httpChecksum"]:"-",["http"]:["PUT","/?versioning",200]},()=>wSt,()=>Ft],Rk=[9,"com.amazonaws.s3","PutBucketWebsite",{["httpChecksum"]:"-",["http"]:["PUT","/?website",200]},()=>pSt,()=>Ft],Ik=[9,"com.amazonaws.s3","PutObject",{["httpChecksum"]:"-",["http"]:["PUT","/{Key+}?x-id=PutObject",200]},()=>OSt,()=>$St],Tk=[9,"com.amazonaws.s3","PutObjectAcl",{["httpChecksum"]:"-",["http"]:["PUT","/{Key+}?acl",200]},()=>dSt,()=>uSt],Nk=[9,"com.amazonaws.s3","PutObjectLegalHold",{["httpChecksum"]:"-",["http"]:["PUT","/{Key+}?legal-hold",200]},()=>ASt,()=>ySt],mk=[9,"com.amazonaws.s3","PutObjectLockConfiguration",{["httpChecksum"]:"-",["http"]:["PUT","/?object-lock",200]},()=>_St,()=>SSt],ak=[9,"com.amazonaws.s3","PutObjectRetention",{["httpChecksum"]:"-",["http"]:["PUT","/{Key+}?retention",200]},()=>ISt,()=>RSt],Uk=[9,"com.amazonaws.s3","PutObjectTagging",{["httpChecksum"]:"-",["http"]:["PUT","/{Key+}?tagging",200]},()=>NSt,()=>TSt],Hk=[9,"com.amazonaws.s3","PutPublicAccessBlock",{["httpChecksum"]:"-",["http"]:["PUT","/?publicAccessBlock",200]},()=>mSt,()=>Ft],bk=[9,"com.amazonaws.s3","RenameObject",{["http"]:["PUT","/{Key+}?renameObject",200]},()=>lSt,()=>bSt],lk=[9,"com.amazonaws.s3","RestoreObject",{["httpChecksum"]:"-",["http"]:["POST","/{Key+}?restore",200]},()=>ZSt,()=>WSt],Fk=[9,"com.amazonaws.s3","SelectObjectContent",{["http"]:["POST","/{Key+}?select&select-type=2",200]},()=>KSt,()=>QSt],Lk=[9,"com.amazonaws.s3","UpdateBucketMetadataInventoryTableConfiguration",{["httpChecksum"]:"-",["http"]:["PUT","/?metadataInventoryTable",200]},()=>d_t,()=>Ft],Gk=[9,"com.amazonaws.s3","UpdateBucketMetadataJournalTableConfiguration",{["httpChecksum"]:"-",["http"]:["PUT","/?metadataJournalTable",200]},()=>y_t,()=>Ft],vk=[9,"com.amazonaws.s3","UploadPart",{["httpChecksum"]:"-",["http"]:["PUT","/{Key+}?x-id=UploadPart",200]},()=>$_t,()=>__t],Mk=[9,"com.amazonaws.s3","UploadPartCopy",{["http"]:["PUT","/{Key+}?x-id=UploadPartCopy",200]},()=>S_t,()=>A_t],zk=[9,"com.amazonaws.s3","WriteGetObjectResponse",{["endpoint"]:["{RequestRoute}."],["http"]:["POST","/WriteGetObjectResponse",200]},()=>I_t,()=>Ft]});var kk,Wk,K0;var Ou=_(()=>{st();g();C();kk=O(X(),1),Wk=O(z(),1);K0=class K0 extends Wk.Command.classBuilder().ep({...H,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[kk.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").sc(CM).build(){}});var Bk;var Zk=_(()=>{Bk={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.971.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn g:vitest run","test:browser":"node ./test/browser-build/esbuild && yarn g:vitest run -c vitest.config.browser.mts","test:browser:watch":"node ./test/browser-build/esbuild && yarn g:vitest watch -c vitest.config.browser.mts","test:e2e":"yarn g:vitest run -c vitest.config.e2e.mts && yarn test:browser","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.mts","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs","test:integration":"yarn g:vitest run -c vitest.config.integ.mts","test:integration:watch":"yarn g:vitest watch -c vitest.config.integ.mts","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.970.0","@aws-sdk/credential-provider-node":"3.971.0","@aws-sdk/middleware-bucket-endpoint":"3.969.0","@aws-sdk/middleware-expect-continue":"3.969.0","@aws-sdk/middleware-flexible-checksums":"3.971.0","@aws-sdk/middleware-host-header":"3.969.0","@aws-sdk/middleware-location-constraint":"3.969.0","@aws-sdk/middleware-logger":"3.969.0","@aws-sdk/middleware-recursion-detection":"3.969.0","@aws-sdk/middleware-sdk-s3":"3.970.0","@aws-sdk/middleware-ssec":"3.971.0","@aws-sdk/middleware-user-agent":"3.970.0","@aws-sdk/region-config-resolver":"3.969.0","@aws-sdk/signature-v4-multi-region":"3.970.0","@aws-sdk/types":"3.969.0","@aws-sdk/util-endpoints":"3.970.0","@aws-sdk/util-user-agent-browser":"3.969.0","@aws-sdk/util-user-agent-node":"3.971.0","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.20.6","@smithy/eventstream-serde-browser":"^4.2.8","@smithy/eventstream-serde-config-resolver":"^4.3.8","@smithy/eventstream-serde-node":"^4.2.8","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-blob-browser":"^4.2.9","@smithy/hash-node":"^4.2.8","@smithy/hash-stream-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/md5-js":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.7","@smithy/middleware-retry":"^4.4.23","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.8","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.22","@smithy/util-defaults-mode-node":"^4.2.25","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-stream":"^4.5.10","@smithy/util-utf8":"^4.2.0","@smithy/util-waiter":"^4.2.8",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.971.0","@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"5.0.10",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}}});var Xk,Jk,Ru="AWS_ACCESS_KEY_ID",Iu="AWS_SECRET_ACCESS_KEY",Yk="AWS_SESSION_TOKEN",Pk="AWS_CREDENTIAL_EXPIRATION",gk="AWS_CREDENTIAL_SCOPE",Ck="AWS_ACCOUNT_ID",Q3=(t)=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let r=process.env[Ru],e=process.env[Iu],o=process.env[Yk],n=process.env[Pk],c=process.env[gk],i=process.env[Ck];if(r&&e){let f={accessKeyId:r,secretAccessKey:e,...o&&{sessionToken:o},...n&&{expiration:new Date(n)},...c&&{credentialScope:c},...i&&{accountId:i}};return Xk.setCredentialFeature(f,"CREDENTIALS_ENV_VARS","g"),f}throw new Jk.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};var Qk=_(()=>{Xk=O(Ge(),1),Jk=O(_r(),1)});var Kk={};wo(Kk,{fromEnv:()=>Q3,ENV_SESSION:()=>Yk,ENV_SECRET:()=>Iu,ENV_KEY:()=>Ru,ENV_EXPIRATION:()=>Pk,ENV_CREDENTIAL_SCOPE:()=>gk,ENV_ACCOUNT_ID:()=>Ck});var K3=_(()=>{Qk()});import{Buffer as t3t}from"buffer";import{request as r3t}from"http";function Ss(t){return new Promise((r,e)=>{let o=r3t({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});o.on("error",(n)=>{e(Object.assign(new Tu.ProviderError("Unable to connect to instance metadata service"),n)),o.destroy()}),o.on("timeout",()=>{e(new Tu.ProviderError("TimeoutError from instance metadata service")),o.destroy()}),o.on("response",(n)=>{let{statusCode:c=400}=n;if(c<200||300<=c)e(Object.assign(new Tu.ProviderError("Error response received from instance metadata service"),{statusCode:c})),o.destroy();let i=[];n.on("data",(f)=>{i.push(f)}),n.on("end",()=>{r(t3t.concat(i)),o.destroy()})}),o.end()})}var Tu;var Nu=_(()=>{Tu=O(_r(),1)});var mu=(t)=>Boolean(t)&&typeof t==="object"&&typeof t.AccessKeyId==="string"&&typeof t.SecretAccessKey==="string"&&typeof t.Token==="string"&&typeof t.Expiration==="string",au=(t)=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}});var e3t=1000,o3t=0,E0=({maxRetries:t=0,timeout:r=1000})=>({maxRetries:t,timeout:r});var x0=(t,r)=>{let e=t();for(let o=0;o<r;o++)e=e.catch(t);return e};import{parse as n3t}from"url";var q0,Uu="AWS_CONTAINER_CREDENTIALS_FULL_URI",Hu="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",E3="AWS_CONTAINER_AUTHORIZATION_TOKEN",s3t=(t={})=>{let{timeout:r,maxRetries:e}=E0(t);return()=>x0(async()=>{let o=await w3t({logger:t.logger}),n=JSON.parse(await c3t(r,o));if(!mu(n))throw new q0.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return au(n)},e)},c3t=async(t,r)=>{if(process.env[E3])r.headers={...r.headers,Authorization:process.env[E3]};return(await Ss({...r,timeout:t})).toString()},i3t="169.254.170.2",f3t,h3t,w3t=async({logger:t})=>{if(process.env[Hu])return{hostname:i3t,path:process.env[Hu]};if(process.env[Uu]){let r=n3t(process.env[Uu]);if(!r.hostname||!(r.hostname in f3t))throw new q0.CredentialsProviderError(`${r.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!r.protocol||!(r.protocol in h3t))throw new q0.CredentialsProviderError(`${r.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...r,port:r.port?parseInt(r.port,10):void 0}}throw new q0.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Hu} or ${Uu} environment variable is set`,{tryNextLink:!1,logger:t})};var Ek=_(()=>{Nu();q0=O(_r(),1),f3t={localhost:!0,"127.0.0.1":!0},h3t={"http:":!0,"https:":!0}});var xk,bu;var qk=_(()=>{xk=O(_r(),1);bu=class bu extends xk.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r);this.tryNextLink=r,Object.setPrototypeOf(this,bu.prototype)}}});var Ac;var x3=_(()=>{(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(Ac||(Ac={}))});var Dk;var Vk=_(()=>{Dk={environmentVariableSelector:(t)=>t.AWS_EC2_METADATA_SERVICE_ENDPOINT,configFileSelector:(t)=>t.ec2_metadata_service_endpoint,default:void 0}});var _s;var q3=_(()=>{(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(_s||(_s={}))});var p3t="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",u3t="ec2_metadata_service_endpoint_mode",jk;var t9=_(()=>{q3();jk={environmentVariableSelector:(t)=>t[p3t],configFileSelector:(t)=>t[u3t],default:_s.IPv4}});var D3,r9,lu=async()=>r9.parseUrl(await d3t()||await y3t()),d3t=async()=>D3.loadConfig(Dk)(),y3t=async()=>{let t=await D3.loadConfig(jk)();switch(t){case _s.IPv4:return Ac.IPv4;case _s.IPv6:return Ac.IPv6;default:throw Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(_s)}`)}};var V3=_(()=>{x3();Vk();q3();t9();D3=O(xo(),1),r9=O(Mn(),1)});var j3=(t,r)=>{let e=300+Math.floor(Math.random()*300),o=new Date(Date.now()+e*1000);r.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(o)}.
For more information, please visit: https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html`);let n=t.originalExpiration??t.expiration;return{...t,...n?{originalExpiration:n}:{},expiration:o}};var e9=(t,r={})=>{let e=r?.logger||console,o;return async()=>{let n;try{if(n=await t(),n.expiration&&n.expiration.getTime()<Date.now())n=j3(n,e)}catch(c){if(o)e.warn("Credential renew failed: ",c),n=j3(o,e);else throw c}return o=n,n}};var o9=()=>{};var c9,r$,i9="/latest/meta-data/iam/security-credentials/",A3t="/latest/api/token",t$="AWS_EC2_METADATA_V1_DISABLED",n9="ec2_metadata_v1_disabled",s9="x-aws-ec2-metadata-token",S3t=(t={})=>e9(_3t(t),{logger:t.logger}),_3t=(t={})=>{let r=!1,{logger:e,profile:o}=t,{timeout:n,maxRetries:c}=E0(t),i=async(f,h)=>{if(r||h.headers?.[s9]==null){let u=!1,d=!1,y=await c9.loadConfig({environmentVariableSelector:(R)=>{let S=R[t$];if(d=!!S&&S!=="false",S===void 0)throw new r$.CredentialsProviderError(`${t$} not set in env, checking config file next.`,{logger:t.logger});return d},configFileSelector:(R)=>{let S=R[n9];return u=!!S&&S!=="false",u},default:!1},{profile:o})();if(t.ec2MetadataV1Disabled||y){let R=[];if(t.ec2MetadataV1Disabled)R.push("credential provider initialization (runtime option ec2MetadataV1Disabled)");if(u)R.push(`config file profile (${n9})`);if(d)R.push(`process environment variable (${t$})`);throw new bu(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${R.join(", ")}].`)}}let p=(await x0(async()=>{let u;try{u=await O3t(h)}catch(d){if(d.statusCode===401)r=!1;throw d}return u},f)).trim();return x0(async()=>{let u;try{u=await R3t(p,h,t)}catch(d){if(d.statusCode===401)r=!1;throw d}return u},f)};return async()=>{let f=await lu();if(r)return e?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(c,{...f,timeout:n});else{let h;try{h=(await $3t({...f,timeout:n})).toString()}catch(w){if(w?.statusCode===400)throw Object.assign(w,{message:"EC2 Metadata token request returned error"});else if(w.message==="TimeoutError"||[403,404,405].includes(w.statusCode))r=!0;return e?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(c,{...f,timeout:n})}return i(c,{...f,headers:{[s9]:h},timeout:n})}}},$3t=async(t)=>Ss({...t,path:A3t,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),O3t=async(t)=>(await Ss({...t,path:i9})).toString(),R3t=async(t,r,e)=>{let o=JSON.parse((await Ss({...r,path:i9+t})).toString());if(!mu(o))throw new r$.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return au(o)};var f9=_(()=>{qk();Nu();V3();o9();c9=O(xo(),1),r$=O(_r(),1)});var h9=()=>{};var D0={};wo(D0,{providerConfigFromInit:()=>E0,httpRequest:()=>Ss,getInstanceMetadataEndpoint:()=>lu,fromInstanceMetadata:()=>S3t,fromContainerMetadata:()=>s3t,Endpoint:()=>Ac,ENV_CMDS_RELATIVE_URI:()=>Hu,ENV_CMDS_FULL_URI:()=>Uu,ENV_CMDS_AUTH_TOKEN:()=>E3,DEFAULT_TIMEOUT:()=>e3t,DEFAULT_MAX_RETRIES:()=>o3t});var V0=_(()=>{Nu();V3();x3();Ek();f9();h9()});var w9,I3t="169.254.170.2",T3t="169.254.170.23",N3t="[fd00:ec2::23]",p9=(t,r)=>{if(t.protocol==="https:")return;if(t.hostname===I3t||t.hostname===T3t||t.hostname===N3t)return;if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let e=t.hostname.split("."),o=(n)=>{let c=parseInt(n,10);return 0<=c&&c<=255};if(e[0]==="127"&&o(e[1])&&o(e[2])&&o(e[3])&&e.length===4)return}throw new w9.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:r})};var u9=_(()=>{w9=O(_r(),1)});function S9(t){return new d9.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((r,[e,o])=>{return r[e]=o,r},{}),fragment:t.hash})}async function _9(t,r){let o=await A9.sdkStreamMixin(t.body).transformToString();if(t.statusCode===200){let n=JSON.parse(o);if(typeof n.AccessKeyId!=="string"||typeof n.SecretAccessKey!=="string"||typeof n.Token!=="string"||typeof n.Expiration!=="string")throw new Fu.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:r});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:y9.parseRfc3339DateTime(n.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let n={};try{n=JSON.parse(o)}catch(c){}throw Object.assign(new Fu.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:r}),{Code:n.Code,Message:n.Message})}throw new Fu.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:r})}var Fu,d9,y9,A9;var $9=_(()=>{Fu=O(_r(),1),d9=O(tr(),1),y9=O(z(),1),A9=O(js(),1)});var O9=(t,r,e)=>{return async()=>{for(let o=0;o<r;++o)try{return await t()}catch(n){await new Promise((c)=>setTimeout(c,e))}return await t()}};import m3t from"fs/promises";var R9,I9,e$,a3t="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",U3t="http://169.254.170.2",H3t="AWS_CONTAINER_CREDENTIALS_FULL_URI",b3t="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",l3t="AWS_CONTAINER_AUTHORIZATION_TOKEN",T9=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let r,e=t.awsContainerCredentialsRelativeUri??process.env[a3t],o=t.awsContainerCredentialsFullUri??process.env[H3t],n=t.awsContainerAuthorizationToken??process.env[l3t],c=t.awsContainerAuthorizationTokenFile??process.env[b3t],i=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(e&&o)i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.");if(n&&c)i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.");if(o)r=o;else if(e)r=`${U3t}${e}`;else throw new e$.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let f=new URL(r);p9(f,t.logger);let h=I9.NodeHttpHandler.create({requestTimeout:t.timeout??1000,connectionTimeout:t.timeout??1000});return O9(async()=>{let w=S9(f);if(n)w.headers.Authorization=n;else if(c)w.headers.Authorization=(await m3t.readFile(c)).toString();try{let p=await h.handle(w);return _9(p.response).then((u)=>R9.setCredentialFeature(u,"CREDENTIALS_HTTP","z"))}catch(p){throw new e$.CredentialsProviderError(String(p),{logger:t.logger})}},t.maxRetries??3,t.timeout??1000)};var N9=_(()=>{u9();$9();R9=O(Ge(),1),I9=O(os(),1),e$=O(_r(),1)});var o$={};wo(o$,{fromHttp:()=>T9});var n$=_(()=>{N9()});var Lu,m9="AWS_EC2_METADATA_DISABLED",a9=async(t)=>{let{ENV_CMDS_FULL_URI:r,ENV_CMDS_RELATIVE_URI:e,fromContainerMetadata:o,fromInstanceMetadata:n}=await Promise.resolve().then(() => (V0(),D0));if(process.env[e]||process.env[r]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:c}=await Promise.resolve().then(() => (n$(),o$));return Lu.chain(c(t),o(t))}if(process.env[m9]&&process.env[m9]!=="false")return async()=>{throw new Lu.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})};return t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),n(t)};var U9=_(()=>{Lu=O(_r(),1)});function H9(t,r){let e=F3t(t),o,n,c,i=async(f)=>{if(f?.forceRefresh)return await e(f);if(c?.expiration){if(c?.expiration?.getTime()<Date.now())c=void 0}if(o)await o;else if(!c||r?.(c))if(c){if(!n)n=e(f).then((h)=>{c=h,n=void 0})}else return o=e(f).then((h)=>{c=h,o=void 0}),i(f);return c};return i}var F3t=(t)=>async(r)=>{let e;for(let o of t)try{return await o(r)}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e};var s$=(t)=>t&&(typeof t.sso_start_url==="string"||typeof t.sso_account_id==="string"||typeof t.sso_session==="string"||typeof t.sso_region==="string"||typeof t.sso_role_name==="string");var b9=()=>{};var l9=300000,Ji="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var i$=Q((F9)=>{Object.defineProperty(F9,"__esModule",{value:!0});F9.resolveHttpAuthSchemeConfig=F9.defaultSSOOIDCHttpAuthSchemeProvider=F9.defaultSSOOIDCHttpAuthSchemeParametersProvider=void 0;var L3t=Vr(),c$=Qe(),G3t=async(t,r,e)=>{return{operation:(0,c$.getSmithyContext)(r).operation,region:await(0,c$.normalizeProvider)(t.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};F9.defaultSSOOIDCHttpAuthSchemeParametersProvider=G3t;function v3t(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(r,e)=>({signingProperties:{config:r,context:e}})}}function M3t(t){return{schemeId:"smithy.api#noAuth"}}var z3t=(t)=>{let r=[];switch(t.operation){case"CreateToken":{r.push(M3t(t));break}default:r.push(v3t(t))}return r};F9.defaultSSOOIDCHttpAuthSchemeProvider=z3t;var k3t=(t)=>{let r=(0,L3t.resolveAwsSdkSigV4Config)(t);return Object.assign(r,{authSchemePreference:(0,c$.normalizeProvider)(t.authSchemePreference??[])})};F9.resolveHttpAuthSchemeConfig=k3t});var Gu=Q((h7t,B3t)=>{B3t.exports={name:"@aws-sdk/nested-clients",version:"3.971.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=20.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.970.0","@aws-sdk/middleware-host-header":"3.969.0","@aws-sdk/middleware-logger":"3.969.0","@aws-sdk/middleware-recursion-detection":"3.969.0","@aws-sdk/middleware-user-agent":"3.970.0","@aws-sdk/region-config-resolver":"3.969.0","@aws-sdk/types":"3.969.0","@aws-sdk/util-endpoints":"3.970.0","@aws-sdk/util-user-agent-browser":"3.969.0","@aws-sdk/util-user-agent-node":"3.971.0","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.20.6","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.7","@smithy/middleware-retry":"^4.4.23","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.8","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.22","@smithy/util-defaults-mode-node":"^4.2.25","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"5.0.10",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./signin.d.ts","./signin.js","./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/signin/runtimeConfig":"./dist-es/submodules/signin/runtimeConfig.browser","./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./package.json":"./package.json","./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"},"./signin":{types:"./dist-types/submodules/signin/index.d.ts",module:"./dist-es/submodules/signin/index.js",node:"./dist-cjs/submodules/signin/index.js",import:"./dist-es/submodules/signin/index.js",require:"./dist-cjs/submodules/signin/index.js"}}}});var Yi=Q((C3t)=>{var G9=Rr("os"),f$=Rr("process"),X3t=wc(),v9={isCrtAvailable:!1},J3t=()=>{if(v9.isCrtAvailable)return["md/crt-avail"];return null},M9=({serviceId:t,clientVersion:r})=>{return async(e)=>{let o=[["aws-sdk-js",r],["ua","2.1"],[`os/${G9.platform()}`,G9.release()],["lang/js"],["md/nodejs",`${f$.versions.node}`]],n=J3t();if(n)o.push(n);if(t)o.push([`api/${t}`,r]);if(f$.env.AWS_EXECUTION_ENV)o.push([`exec-env/${f$.env.AWS_EXECUTION_ENV}`]);let c=await e?.userAgentAppId?.();return c?[...o,[`app/${c}`]]:[...o]}},Y3t=M9,z9="AWS_SDK_UA_APP_ID",k9="sdk_ua_app_id",P3t="sdk-ua-app-id",g3t={environmentVariableSelector:(t)=>t[z9],configFileSelector:(t)=>t[k9]??t[P3t],default:X3t.DEFAULT_UA_APP_ID};C3t.NODE_APP_ID_CONFIG_OPTIONS=g3t;C3t.UA_APP_ID_ENV_NAME=z9;C3t.UA_APP_ID_INI_NAME=k9;C3t.createDefaultUserAgentProvider=M9;C3t.crtAvailability=v9;C3t.defaultUserAgent=Y3t});var Pi=Q((t$t)=>{var h$=ni(),V3t=ue(),j3t=Rr("buffer"),W9=Rr("crypto");class B9{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(V3t.toUint8Array(Z9(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?W9.createHmac(this.algorithmIdentifier,Z9(this.secret)):W9.createHash(this.algorithmIdentifier)}}function Z9(t,r){if(j3t.Buffer.isBuffer(t))return t;if(typeof t==="string")return h$.fromString(t,r);if(ArrayBuffer.isView(t))return h$.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength);return h$.fromArrayBuffer(t)}t$t.Hash=B9});var gi=Q((o$t)=>{var w$=Rr("fs"),e$t=(t)=>{if(!t)return 0;if(typeof t==="string")return Buffer.byteLength(t);else if(typeof t.byteLength==="number")return t.byteLength;else if(typeof t.size==="number")return t.size;else if(typeof t.start==="number"&&typeof t.end==="number")return t.end+1-t.start;else if(t instanceof w$.ReadStream){if(t.path!=null)return w$.lstatSync(t.path).size;else if(typeof t.fd==="number")return w$.fstatSync(t.fd).size}throw Error(`Body Length computation failed for ${t}`)};o$t.calculateBodyLength=e$t});var Ci=Q((_$t)=>{var s$t=co(),X9=xo(),c$t=_r(),i$t="AWS_EXECUTION_ENV",J9="AWS_REGION",Y9="AWS_DEFAULT_REGION",f$t="AWS_EC2_METADATA_DISABLED",h$t=["in-region","cross-region","mobile","standard","legacy"],w$t="/latest/meta-data/placement/region",p$t="AWS_DEFAULTS_MODE",u$t="defaults_mode",d$t={environmentVariableSelector:(t)=>{return t[p$t]},configFileSelector:(t)=>{return t[u$t]},default:"legacy"},y$t=({region:t=X9.loadConfig(s$t.NODE_REGION_CONFIG_OPTIONS),defaultsMode:r=X9.loadConfig(d$t)}={})=>c$t.memoize(async()=>{let e=typeof r==="function"?await r():r;switch(e?.toLowerCase()){case"auto":return A$t(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw Error(`Invalid parameter for "defaultsMode", expect ${h$t.join(", ")}, got ${e}`)}}),A$t=async(t)=>{if(t){let r=typeof t==="function"?await t():t,e=await S$t();if(!e)return"standard";if(r===e)return"in-region";else return"cross-region"}return"standard"},S$t=async()=>{if(process.env[i$t]&&(process.env[J9]||process.env[Y9]))return process.env[J9]??process.env[Y9];if(!process.env[f$t])try{let{getInstanceMetadataEndpoint:t,httpRequest:r}=await Promise.resolve().then(() => (V0(),D0)),e=await t();return(await r({...e,path:w$t})).toString()}catch(t){}};_$t.resolveDefaultsModeConfig=y$t});var Ei=Q((H$t)=>{var P9=FS(),er=so(),Wn=z(),Te=di(),ce=pi(),Qi=Ke(),C9=ue(),je=XS();class Ki{queryCompat;constructor(t=!1){this.queryCompat=t}resolveRestContentType(t,r){let e=r.getMemberSchemas(),o=Object.values(e).find((n)=>{return!!n.getMergedTraits().httpPayload});if(o){let n=o.getMergedTraits().mediaType;if(n)return n;else if(o.isStringSchema())return"text/plain";else if(o.isBlobSchema())return"application/octet-stream";else return t}else if(!r.isUnitSchema()){if(Object.values(e).find((c)=>{let{httpQuery:i,httpQueryParams:f,httpHeader:h,httpLabel:w,httpPrefixHeaders:p}=c.getMergedTraits();return!i&&!f&&!h&&!w&&p===void 0}))return t}}async getErrorSchemaOrThrowBaseException(t,r,e,o,n,c){let i=r,f=t;if(t.includes("#"))[i,f]=t.split("#");let h={$metadata:n,$fault:e.statusCode<500?"client":"server"},w=er.TypeRegistry.for(i);try{return{errorSchema:c?.(w,f)??w.getSchema(t),errorMetadata:h}}catch(p){o.message=o.message??o.Message??"UnknownError";let u=er.TypeRegistry.for("smithy.ts.sdk.synthetic."+i),d=u.getBaseException();if(d){let y=u.getErrorCtor(d)??Error;throw this.decorateServiceException(Object.assign(new y({name:f}),h),o)}throw this.decorateServiceException(Object.assign(Error(f),h),o)}}decorateServiceException(t,r={}){if(this.queryCompat){let e=t.Message??r.Message,o=Wn.decorateServiceException(t,r);if(e)o.message=e;o.Error={...o.Error,Type:o.Error.Type,Code:o.Error.Code,Message:o.Error.message??o.Error.Message??e};let n=o.$metadata.requestId;if(n)o.RequestId=n;return o}return Wn.decorateServiceException(t,r)}setQueryCompatError(t,r){let e=r.headers?.["x-amzn-query-error"];if(t!==void 0&&e!=null){let[o,n]=e.split(";"),c=Object.entries(t),i={Code:o,Type:n};Object.assign(t,i);for(let[f,h]of c)i[f==="message"?"Message":f]=h;delete i.__type,t.Error=i}}queryCompatOutput(t,r){if(t.Error)r.Error=t.Error;if(t.Type)r.Type=t.Type;if(t.Code)r.Code=t.Code}findQueryCompatibleError(t,r){try{return t.getSchema(r)}catch(e){return t.find((o)=>er.NormalizedSchema.of(o).getMergedTraits().awsQueryError?.[0]===r)}}}class Q9 extends P9.SmithyRpcV2CborProtocol{awsQueryCompatible;mixin;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t});this.awsQueryCompatible=!!r,this.mixin=new Ki(this.awsQueryCompatible)}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e);if(this.awsQueryCompatible)o.headers["x-amzn-query-mode"]="true";return o}async handleError(t,r,e,o,n){if(this.awsQueryCompatible)this.mixin.setQueryCompatError(o,e);let c=(()=>{let y=e.headers["x-amzn-query-error"];if(y&&this.awsQueryCompatible)return y.split(";")[0];return P9.loadSmithyRpcV2CborErrorCode(e,o)??"Unknown"})(),{errorSchema:i,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,o,n,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),h=er.NormalizedSchema.of(i),w=o.message??o.Message??"Unknown",u=new(er.TypeRegistry.for(i[1]).getErrorCtor(i)??Error)(w),d={};for(let[y,R]of h.structIterator())if(o[y]!=null)d[y]=this.deserializer.readValue(R,o[y]);if(this.awsQueryCompatible)this.mixin.queryCompatOutput(o,d);throw this.mixin.decorateServiceException(Object.assign(u,f,{$fault:h.getMergedTraits().error,message:w},d),o)}}var O$t=(t)=>{if(t==null)return t;if(typeof t==="number"||typeof t==="bigint"){let r=Error(`Received number ${t} where a string was expected.`);return r.name="Warning",console.warn(r),String(t)}if(typeof t==="boolean"){let r=Error(`Received boolean ${t} where a string was expected.`);return r.name="Warning",console.warn(r),String(t)}return t},R$t=(t)=>{if(t==null)return t;if(typeof t==="string"){let r=t.toLowerCase();if(t!==""&&r!=="false"&&r!=="true"){let e=Error(`Received string "${t}" where a boolean was expected.`);e.name="Warning",console.warn(e)}return t!==""&&r!=="false"}return t},I$t=(t)=>{if(t==null)return t;if(typeof t==="string"){let r=Number(t);if(r.toString()!==t){let e=Error(`Received string "${t}" where a number was expected.`);return e.name="Warning",console.warn(e),t}return r}return t};class $s{serdeContext;setSerdeContext(t){this.serdeContext=t}}function*p$(t,r){if(t.isUnitSchema())return;let e=t.getSchema();for(let o=0;o<e[4].length;++o){let n=e[4][o],c=e[5][o],i=new er.NormalizedSchema([c,0],n);if(!(n in r)&&!i.isIdempotencyToken())continue;yield[n,i]}}function*T$t(t,r,e){if(t.isUnitSchema())return;let o=t.getSchema(),n=Object.keys(r).filter((c)=>c!=="__type").length;for(let c=0;c<o[4].length;++c){if(n===0)break;let i=o[4][c],f=o[5][c],h=new er.NormalizedSchema([f,0],i),w=i;if(e)w=h.getMergedTraits()[e]??i;if(!(w in r))continue;yield[i,h],n-=1}}class u${from;to;keys;constructor(t,r){this.from=t,this.to=r,this.keys=new Set(Object.keys(this.from).filter((e)=>e!=="__type"))}mark(t){this.keys.delete(t)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){let t=this.keys.values().next().value,r=this.from[t];this.to.$unknown=[t,r]}}}function N$t(t,r,e){if(e?.source){let o=e.source;if(typeof r==="number"){if(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER||o!==String(r))if(o.includes("."))return new ce.NumericValue(o,"bigDecimal");else return BigInt(o)}}return r}var K9=(t,r)=>Wn.collectBody(t,r).then((e)=>(r?.utf8Encoder??C9.toUtf8)(e)),d$=(t,r)=>K9(t,r).then((e)=>{if(e.length)try{return JSON.parse(e)}catch(o){if(o?.name==="SyntaxError")Object.defineProperty(o,"$responseBodyText",{value:e});throw o}return{}}),m$t=async(t,r)=>{let e=await d$(t,r);return e.message=e.message??e.Message,e},y$=(t,r)=>{let e=(c,i)=>Object.keys(c).find((f)=>f.toLowerCase()===i.toLowerCase()),o=(c)=>{let i=c;if(typeof i==="number")i=i.toString();if(i.indexOf(",")>=0)i=i.split(",")[0];if(i.indexOf(":")>=0)i=i.split(":")[0];if(i.indexOf("#")>=0)i=i.split("#")[1];return i},n=e(t.headers,"x-amzn-errortype");if(n!==void 0)return o(t.headers[n]);if(r&&typeof r==="object"){let c=e(r,"code");if(c&&r[c]!==void 0)return o(r[c]);if(r.__type!==void 0)return o(r.__type)}};class A$ extends $s{settings;constructor(t){super();this.settings=t}async read(t,r){return this._read(t,typeof r==="string"?JSON.parse(r,N$t):await d$(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let e=r!==null&&typeof r==="object",o=er.NormalizedSchema.of(t);if(e){if(o.isStructSchema()){let c=r,i=o.isUnionSchema(),f={},h=void 0,{jsonName:w}=this.settings;if(w)h={};let p;if(i)p=new u$(c,f);for(let[u,d]of T$t(o,c,w?"jsonName":!1)){let y=u;if(w)y=d.getMergedTraits().jsonName??y,h[y]=u;if(i)p.mark(y);if(c[y]!=null)f[u]=this._read(d,c[y])}if(i)p.writeUnknown();else if(typeof c.__type==="string")for(let[u,d]of Object.entries(c)){let y=w?h[u]??u:u;if(!(y in f))f[y]=d}return f}if(Array.isArray(r)&&o.isListSchema()){let c=o.getValueSchema(),i=[],f=!!o.getMergedTraits().sparse;for(let h of r)if(f||h!=null)i.push(this._read(c,h));return i}if(o.isMapSchema()){let c=o.getValueSchema(),i={},f=!!o.getMergedTraits().sparse;for(let[h,w]of Object.entries(r))if(f||w!=null)i[h]=this._read(c,w);return i}}if(o.isBlobSchema()&&typeof r==="string")return Qi.fromBase64(r);let n=o.getMergedTraits().mediaType;if(o.isStringSchema()&&typeof r==="string"&&n){if(n==="application/json"||n.endsWith("+json"))return ce.LazyJsonString.from(r);return r}if(o.isTimestampSchema()&&r!=null)switch(Te.determineTimestampFormat(o,this.settings)){case 5:return ce.parseRfc3339DateTimeWithOffset(r);case 6:return ce.parseRfc7231DateTime(r);case 7:return ce.parseEpochTimestamp(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(o.isBigIntegerSchema()&&(typeof r==="number"||typeof r==="string"))return BigInt(r);if(o.isBigDecimalSchema()&&r!=null){if(r instanceof ce.NumericValue)return r;let c=r;if(c.type==="bigDecimal"&&"string"in c)return new ce.NumericValue(c.string,c.type);return new ce.NumericValue(String(r),"bigDecimal")}if(o.isNumericSchema()&&typeof r==="string"){switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return r}if(o.isDocumentSchema())if(e){let c=Array.isArray(r)?[]:{};for(let[i,f]of Object.entries(r))if(f instanceof ce.NumericValue)c[i]=f;else c[i]=this._read(o,f);return c}else return structuredClone(r);return r}}var g9=String.fromCharCode(925);class E9{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof ce.NumericValue){let e=`${g9+"nv"+this.counter++}_`+r.string;return this.values.set(`"${e}"`,r.string),e}if(typeof r==="bigint"){let e=r.toString(),o=`${g9+"b"+this.counter++}_`+e;return this.values.set(`"${o}"`,e),o}return r}}replaceInJson(t){if(this.stage===0)throw Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,e]of this.values)t=t.replace(r,e);return t}}class S$ extends $s{settings;buffer;useReplacer=!1;rootSchema;constructor(t){super();this.settings=t}write(t,r){this.rootSchema=er.NormalizedSchema.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){if(this.write(t,r),typeof this.buffer==="object")this.buffer.__type=er.NormalizedSchema.of(t).getName(!0)}flush(){let{rootSchema:t,useReplacer:r}=this;if(this.rootSchema=void 0,this.useReplacer=!1,t?.isStructSchema()||t?.isDocumentSchema()){if(!r)return JSON.stringify(this.buffer);let e=new E9;return e.replaceInJson(JSON.stringify(this.buffer,e.createReplacer(),0))}return this.buffer}_write(t,r,e){let o=r!==null&&typeof r==="object",n=er.NormalizedSchema.of(t);if(o){if(n.isStructSchema()){let c=r,i={},{jsonName:f}=this.settings,h=void 0;if(f)h={};for(let[w,p]of p$(n,c)){let u=this._write(p,c[w],n);if(u!==void 0){let d=w;if(f)d=p.getMergedTraits().jsonName??w,h[w]=d;i[d]=u}}if(n.isUnionSchema()&&Object.keys(i).length===0){let{$unknown:w}=c;if(Array.isArray(w)){let[p,u]=w;i[p]=this._write(15,u)}}else if(typeof c.__type==="string")for(let[w,p]of Object.entries(c)){let u=f?h[w]??w:w;if(!(u in i))i[u]=this._write(15,p)}return i}if(Array.isArray(r)&&n.isListSchema()){let c=n.getValueSchema(),i=[],f=!!n.getMergedTraits().sparse;for(let h of r)if(f||h!=null)i.push(this._write(c,h));return i}if(n.isMapSchema()){let c=n.getValueSchema(),i={},f=!!n.getMergedTraits().sparse;for(let[h,w]of Object.entries(r))if(f||w!=null)i[h]=this._write(c,w);return i}if(r instanceof Uint8Array&&(n.isBlobSchema()||n.isDocumentSchema())){if(n===this.rootSchema)return r;return(this.serdeContext?.base64Encoder??Qi.toBase64)(r)}if(r instanceof Date&&(n.isTimestampSchema()||n.isDocumentSchema()))switch(Te.determineTimestampFormat(n,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return ce.dateToUtcString(r);case 7:return r.getTime()/1000;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1000}if(r instanceof ce.NumericValue)this.useReplacer=!0}if(r===null&&e?.isStructSchema())return;if(n.isStringSchema()){if(typeof r>"u"&&n.isIdempotencyToken())return ce.generateIdempotencyToken();let c=n.getMergedTraits().mediaType;if(r!=null&&c){if(c==="application/json"||c.endsWith("+json"))return ce.LazyJsonString.from(r)}return r}if(typeof r==="number"&&n.isNumericSchema()){if(Math.abs(r)===1/0||isNaN(r))return String(r);return r}if(typeof r==="string"&&n.isBlobSchema()){if(n===this.rootSchema)return r;return(this.serdeContext?.base64Encoder??Qi.toBase64)(r)}if(typeof r==="bigint")this.useReplacer=!0;if(n.isDocumentSchema())if(o){let c=Array.isArray(r)?[]:{};for(let[i,f]of Object.entries(r))if(f instanceof ce.NumericValue)this.useReplacer=!0,c[i]=f;else c[i]=this._write(n,f);return c}else return structuredClone(r);return r}}class vu extends $s{settings;constructor(t){super();this.settings=t}createSerializer(){let t=new S$(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new A$(this.settings);return t.setSerdeContext(this.serdeContext),t}}class Mu extends Te.RpcProtocol{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o}){super({defaultNamespace:t});this.serviceTarget=r,this.codec=o??new vu({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!e,this.mixin=new Ki(this.awsQueryCompatible)}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e);if(!o.path.endsWith("/"))o.path+="/";if(Object.assign(o.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible)o.headers["x-amzn-query-mode"]="true";if(er.deref(t.input)==="unit"||!o.body)o.body="{}";return o}getPayloadCodec(){return this.codec}async handleError(t,r,e,o,n){if(this.awsQueryCompatible)this.mixin.setQueryCompatError(o,e);let c=y$(e,o)??"Unknown",{errorSchema:i,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,o,n,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),h=er.NormalizedSchema.of(i),w=o.message??o.Message??"Unknown",u=new(er.TypeRegistry.for(i[1]).getErrorCtor(i)??Error)(w),d={};for(let[y,R]of h.structIterator())if(o[y]!=null)d[y]=this.codec.createDeserializer().readObject(R,o[y]);if(this.awsQueryCompatible)this.mixin.queryCompatOutput(o,d);throw this.mixin.decorateServiceException(Object.assign(u,f,{$fault:h.getMergedTraits().error,message:w},d),o)}}class x9 extends Mu{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}class q9 extends Mu{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:e,jsonCodec:o})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}class D9 extends Te.HttpBindingProtocol{serializer;deserializer;codec;mixin=new Ki;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new vu(r),this.serializer=new Te.HttpInterceptingShapeSerializer(this.codec.createSerializer(),r),this.deserializer=new Te.HttpInterceptingShapeDeserializer(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e),n=er.NormalizedSchema.of(t.input);if(!o.headers["content-type"]){let c=this.mixin.resolveRestContentType(this.getDefaultContentType(),n);if(c)o.headers["content-type"]=c}if(o.body==null&&o.headers["content-type"]===this.getDefaultContentType())o.body="{}";return o}async deserializeResponse(t,r,e){let o=await super.deserializeResponse(t,r,e),n=er.NormalizedSchema.of(t.output);for(let[c,i]of n.structIterator())if(i.getMemberTraits().httpPayload&&!(c in o))o[c]=null;return o}async handleError(t,r,e,o,n){let c=y$(e,o)??"Unknown",{errorSchema:i,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,o,n),h=er.NormalizedSchema.of(i),w=o.message??o.Message??"Unknown",u=new(er.TypeRegistry.for(i[1]).getErrorCtor(i)??Error)(w);await this.deserializeHttpMessage(i,r,e,o);let d={};for(let[y,R]of h.structIterator()){let S=R.getMergedTraits().jsonName??y;d[y]=this.codec.createDeserializer().readObject(R,o[S])}throw this.mixin.decorateServiceException(Object.assign(u,f,{$fault:h.getMergedTraits().error,message:w},d),o)}getDefaultContentType(){return"application/json"}}var a$t=(t)=>{if(t==null)return;if(typeof t==="object"&&"__type"in t)delete t.__type;return Wn.expectUnion(t)};class zu extends $s{settings;stringDeserializer;constructor(t){super();this.settings=t,this.stringDeserializer=new Te.FromStringShapeDeserializer(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,e){let o=er.NormalizedSchema.of(t),n=o.getMemberSchemas();if(o.isStructSchema()&&o.isMemberSchema()&&!!Object.values(n).find((h)=>{return!!h.getMemberTraits().eventPayload})){let h={},w=Object.keys(n)[0];if(n[w].isBlobSchema())h[w]=r;else h[w]=this.read(n[w],r);return h}let i=(this.serdeContext?.utf8Encoder??C9.toUtf8)(r),f=this.parseXml(i);return this.readSchema(t,e?f[e]:f)}readSchema(t,r){let e=er.NormalizedSchema.of(t);if(e.isUnitSchema())return;let o=e.getMergedTraits();if(e.isListSchema()&&!Array.isArray(r))return this.readSchema(e,[r]);if(r==null)return r;if(typeof r==="object"){let n=!!o.sparse,c=!!o.xmlFlattened;if(e.isListSchema()){let f=e.getValueSchema(),h=[],w=f.getMergedTraits().xmlName??"member",p=c?r:(r[0]??r)[w],u=Array.isArray(p)?p:[p];for(let d of u)if(d!=null||n)h.push(this.readSchema(f,d));return h}let i={};if(e.isMapSchema()){let f=e.getKeySchema(),h=e.getValueSchema(),w;if(c)w=Array.isArray(r)?r:[r];else w=Array.isArray(r.entry)?r.entry:[r.entry];let p=f.getMergedTraits().xmlName??"key",u=h.getMergedTraits().xmlName??"value";for(let d of w){let y=d[p],R=d[u];if(R!=null||n)i[y]=this.readSchema(h,R)}return i}if(e.isStructSchema()){let f=e.isUnionSchema(),h;if(f)h=new u$(r,i);for(let[w,p]of e.structIterator()){let u=p.getMergedTraits(),d=!u.httpPayload?p.getMemberTraits().xmlName??w:u.xmlName??p.getName();if(f)h.mark(d);if(r[d]!=null)i[w]=this.readSchema(p,r[d])}if(f)h.writeUnknown();return i}if(e.isDocumentSchema())return r;throw Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${e.getName(!0)}`)}if(e.isListSchema())return[];if(e.isMapSchema()||e.isStructSchema())return{};return this.stringDeserializer.read(e,r)}parseXml(t){if(t.length){let r;try{r=je.parseXML(t)}catch(c){if(c&&typeof c==="object")Object.defineProperty(c,"$responseBodyText",{value:t});throw c}let e="#text",o=Object.keys(r)[0],n=r[o];if(n[e])n[o]=n[e],delete n[e];return Wn.getValueFromTextNode(n)}return{}}}class V9 extends $s{settings;buffer;constructor(t){super();this.settings=t}write(t,r,e=""){if(this.buffer===void 0)this.buffer="";let o=er.NormalizedSchema.of(t);if(e&&!e.endsWith("."))e+=".";if(o.isBlobSchema()){if(typeof r==="string"||r instanceof Uint8Array)this.writeKey(e),this.writeValue((this.serdeContext?.base64Encoder??Qi.toBase64)(r))}else if(o.isBooleanSchema()||o.isNumericSchema()||o.isStringSchema()){if(r!=null)this.writeKey(e),this.writeValue(String(r));else if(o.isIdempotencyToken())this.writeKey(e),this.writeValue(ce.generateIdempotencyToken())}else if(o.isBigIntegerSchema()){if(r!=null)this.writeKey(e),this.writeValue(String(r))}else if(o.isBigDecimalSchema()){if(r!=null)this.writeKey(e),this.writeValue(r instanceof ce.NumericValue?r.string:String(r))}else if(o.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(e),Te.determineTimestampFormat(o,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue(Wn.dateToUtcString(r));break;case 7:this.writeValue(String(r.getTime()/1000));break}}else if(o.isDocumentSchema())if(Array.isArray(r))this.write(79,r,e);else if(r instanceof Date)this.write(4,r,e);else if(r instanceof Uint8Array)this.write(21,r,e);else if(r&&typeof r==="object")this.write(143,r,e);else this.writeKey(e),this.writeValue(String(r));else if(o.isListSchema()){if(Array.isArray(r))if(r.length===0){if(this.settings.serializeEmptyLists)this.writeKey(e),this.writeValue("")}else{let n=o.getValueSchema(),c=this.settings.flattenLists||o.getMergedTraits().xmlFlattened,i=1;for(let f of r){if(f==null)continue;let h=this.getKey("member",n.getMergedTraits().xmlName),w=c?`${e}${i}`:`${e}${h}.${i}`;this.write(n,f,w),++i}}}else if(o.isMapSchema()){if(r&&typeof r==="object"){let n=o.getKeySchema(),c=o.getValueSchema(),i=o.getMergedTraits().xmlFlattened,f=1;for(let[h,w]of Object.entries(r)){if(w==null)continue;let p=this.getKey("key",n.getMergedTraits().xmlName),u=i?`${e}${f}.${p}`:`${e}entry.${f}.${p}`,d=this.getKey("value",c.getMergedTraits().xmlName),y=i?`${e}${f}.${d}`:`${e}entry.${f}.${d}`;this.write(n,h,u),this.write(c,w,y),++f}}}else if(o.isStructSchema()){if(r&&typeof r==="object"){let n=!1;for(let[c,i]of p$(o,r)){if(r[c]==null&&!i.isIdempotencyToken())continue;let f=this.getKey(c,i.getMergedTraits().xmlName),h=`${e}${f}`;this.write(i,r[c],h),n=!0}if(!n&&o.isUnionSchema()){let{$unknown:c}=r;if(Array.isArray(c)){let[i,f]=c,h=`${e}${i}`;this.write(15,f,h)}}}}else if(o.isUnitSchema());else throw Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${o.getName(!0)}`)}flush(){if(this.buffer===void 0)throw Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let e=r??t;if(this.settings.capitalizeKeys)return e[0].toUpperCase()+e.slice(1);return e}writeKey(t){if(t.endsWith("."))t=t.slice(0,t.length-1);this.buffer+=`&${Te.extendedEncodeURIComponent(t)}=`}writeValue(t){this.buffer+=Te.extendedEncodeURIComponent(t)}}class _$ extends Te.RpcProtocol{options;serializer;deserializer;mixin=new Ki;constructor(t){super({defaultNamespace:t.defaultNamespace});this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new V9(r),this.deserializer=new zu(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e);if(!o.path.endsWith("/"))o.path+="/";if(Object.assign(o.headers,{"content-type":"application/x-www-form-urlencoded"}),er.deref(t.input)==="unit"||!o.body)o.body="";let n=t.name.split("#")[1]??t.name;if(o.body=`Action=${n}&Version=${this.options.version}`+o.body,o.body.endsWith("&"))o.body=o.body.slice(-1);return o}async deserializeResponse(t,r,e){let o=this.deserializer,n=er.NormalizedSchema.of(t.output),c={};if(e.statusCode>=300){let p=await Te.collectBody(e.body,r);if(p.byteLength>0)Object.assign(c,await o.read(15,p));await this.handleError(t,r,e,c,this.deserializeMetadata(e))}for(let p in e.headers){let u=e.headers[p];delete e.headers[p],e.headers[p.toLowerCase()]=u}let i=t.name.split("#")[1]??t.name,f=n.isStructSchema()&&this.useNestedResult()?i+"Result":void 0,h=await Te.collectBody(e.body,r);if(h.byteLength>0)Object.assign(c,await o.read(n,h,f));return{$metadata:this.deserializeMetadata(e),...c}}useNestedResult(){return!0}async handleError(t,r,e,o,n){let c=this.loadQueryErrorCode(e,o)??"Unknown",i=this.loadQueryError(o),f=this.loadQueryErrorMessage(o);i.message=f,i.Error={Type:i.Type,Code:i.Code,Message:f};let{errorSchema:h,errorMetadata:w}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,i,n,this.mixin.findQueryCompatibleError),p=er.NormalizedSchema.of(h),d=new(er.TypeRegistry.for(h[1]).getErrorCtor(h)??Error)(f),y={Type:i.Error.Type,Code:i.Error.Code,Error:i.Error};for(let[R,S]of p.structIterator()){let T=S.getMergedTraits().xmlName??R,N=i[T]??o[T];y[R]=this.deserializer.readSchema(S,N)}throw this.mixin.decorateServiceException(Object.assign(d,w,{$fault:p.getMergedTraits().error,message:f},y),o)}loadQueryErrorCode(t,r){let e=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(e!==void 0)return e;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}class j9 extends _${options;constructor(t){super(t);this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}var tW=(t,r)=>K9(t,r).then((e)=>{if(e.length){let o;try{o=je.parseXML(e)}catch(f){if(f&&typeof f==="object")Object.defineProperty(f,"$responseBodyText",{value:e});throw f}let n="#text",c=Object.keys(o)[0],i=o[c];if(i[n])i[c]=i[n],delete i[n];return Wn.getValueFromTextNode(i)}return{}}),U$t=async(t,r)=>{let e=await tW(t,r);if(e.Error)e.Error.message=e.Error.message??e.Error.Message;return e},rW=(t,r)=>{if(r?.Error?.Code!==void 0)return r.Error.Code;if(r?.Code!==void 0)return r.Code;if(t.statusCode==404)return"NotFound"};class $$ extends $s{settings;stringBuffer;byteBuffer;buffer;constructor(t){super();this.settings=t}write(t,r){let e=er.NormalizedSchema.of(t);if(e.isStringSchema()&&typeof r==="string")this.stringBuffer=r;else if(e.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Qi.fromBase64)(r);else{this.buffer=this.writeStruct(e,r,void 0);let o=e.getMergedTraits();if(o.httpPayload&&!o.xmlName)this.buffer.withName(e.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;if(this.settings.xmlNamespace){if(!t?.attributes?.xmlns)t.addAttribute("xmlns",this.settings.xmlNamespace)}return delete this.buffer,t.toString()}writeStruct(t,r,e){let o=t.getMergedTraits(),n=t.isMemberSchema()&&!o.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():o.xmlName??t.getName();if(!n||!t.isStructSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let c=je.XmlNode.of(n),[i,f]=this.getXmlnsAttribute(t,e);for(let[w,p]of p$(t,r)){let u=r[w];if(u!=null||p.isIdempotencyToken()){if(p.getMergedTraits().xmlAttribute){c.addAttribute(p.getMergedTraits().xmlName??w,this.writeSimple(p,u));continue}if(p.isListSchema())this.writeList(p,u,c,f);else if(p.isMapSchema())this.writeMap(p,u,c,f);else if(p.isStructSchema())c.addChildNode(this.writeStruct(p,u,f));else{let d=je.XmlNode.of(p.getMergedTraits().xmlName??p.getMemberName());this.writeSimpleInto(p,u,d,f),c.addChildNode(d)}}}let{$unknown:h}=r;if(h&&t.isUnionSchema()&&Array.isArray(h)&&Object.keys(r).length===1){let[w,p]=h,u=je.XmlNode.of(w);if(typeof p!=="string")if(r instanceof je.XmlNode||r instanceof je.XmlText)c.addChildNode(r);else throw Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,p,u,f),c.addChildNode(u)}if(f)c.addAttribute(i,f);return c}writeList(t,r,e,o){if(!t.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let n=t.getMergedTraits(),c=t.getValueSchema(),i=c.getMergedTraits(),f=!!i.sparse,h=!!n.xmlFlattened,[w,p]=this.getXmlnsAttribute(t,o),u=(d,y)=>{if(c.isListSchema())this.writeList(c,Array.isArray(y)?y:[y],d,p);else if(c.isMapSchema())this.writeMap(c,y,d,p);else if(c.isStructSchema()){let R=this.writeStruct(c,y,p);d.addChildNode(R.withName(h?n.xmlName??t.getMemberName():i.xmlName??"member"))}else{let R=je.XmlNode.of(h?n.xmlName??t.getMemberName():i.xmlName??"member");this.writeSimpleInto(c,y,R,p),d.addChildNode(R)}};if(h){for(let d of r)if(f||d!=null)u(e,d)}else{let d=je.XmlNode.of(n.xmlName??t.getMemberName());if(p)d.addAttribute(w,p);for(let y of r)if(f||y!=null)u(d,y);e.addChildNode(d)}}writeMap(t,r,e,o,n=!1){if(!t.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let c=t.getMergedTraits(),i=t.getKeySchema(),h=i.getMergedTraits().xmlName??"key",w=t.getValueSchema(),p=w.getMergedTraits(),u=p.xmlName??"value",d=!!p.sparse,y=!!c.xmlFlattened,[R,S]=this.getXmlnsAttribute(t,o),T=(N,G,v)=>{let J=je.XmlNode.of(h,G),[K,D]=this.getXmlnsAttribute(i,S);if(D)J.addAttribute(K,D);N.addChildNode(J);let E=je.XmlNode.of(u);if(w.isListSchema())this.writeList(w,v,E,S);else if(w.isMapSchema())this.writeMap(w,v,E,S,!0);else if(w.isStructSchema())E=this.writeStruct(w,v,S);else this.writeSimpleInto(w,v,E,S);N.addChildNode(E)};if(y){for(let[N,G]of Object.entries(r))if(d||G!=null){let v=je.XmlNode.of(c.xmlName??t.getMemberName());T(v,N,G),e.addChildNode(v)}}else{let N;if(!n){if(N=je.XmlNode.of(c.xmlName??t.getMemberName()),S)N.addAttribute(R,S);e.addChildNode(N)}for(let[G,v]of Object.entries(r))if(d||v!=null){let J=je.XmlNode.of("entry");T(J,G,v),(n?e:N).addChildNode(J)}}}writeSimple(t,r){if(r===null)throw Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let e=er.NormalizedSchema.of(t),o=null;if(r&&typeof r==="object")if(e.isBlobSchema())o=(this.serdeContext?.base64Encoder??Qi.toBase64)(r);else if(e.isTimestampSchema()&&r instanceof Date)switch(Te.determineTimestampFormat(e,this.settings)){case 5:o=r.toISOString().replace(".000Z","Z");break;case 6:o=Wn.dateToUtcString(r);break;case 7:o=String(r.getTime()/1000);break;default:console.warn("Missing timestamp format, using http date",r),o=Wn.dateToUtcString(r);break}else if(e.isBigDecimalSchema()&&r){if(r instanceof ce.NumericValue)return r.string;return String(r)}else if(e.isMapSchema()||e.isListSchema())throw Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead.");else throw Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${e.getName(!0)}`);if(e.isBooleanSchema()||e.isNumericSchema()||e.isBigIntegerSchema()||e.isBigDecimalSchema())o=String(r);if(e.isStringSchema())if(r===void 0&&e.isIdempotencyToken())o=ce.generateIdempotencyToken();else o=String(r);if(o===null)throw Error(`Unhandled schema-value pair ${e.getName(!0)}=${r}`);return o}writeSimpleInto(t,r,e,o){let n=this.writeSimple(t,r),c=er.NormalizedSchema.of(t),i=new je.XmlText(n),[f,h]=this.getXmlnsAttribute(c,o);if(h)e.addAttribute(f,h);e.addChildNode(i)}getXmlnsAttribute(t,r){let e=t.getMergedTraits(),[o,n]=e.xmlNamespace??[];if(n&&n!==r)return[o?`xmlns:${o}`:"xmlns",n];return[void 0,void 0]}}class O$ extends $s{settings;constructor(t){super();this.settings=t}createSerializer(){let t=new $$(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new zu(this.settings);return t.setSerdeContext(this.serdeContext),t}}class eW extends Te.HttpBindingProtocol{codec;serializer;deserializer;mixin=new Ki;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new O$(r),this.serializer=new Te.HttpInterceptingShapeSerializer(this.codec.createSerializer(),r),this.deserializer=new Te.HttpInterceptingShapeDeserializer(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,e){let o=await super.serializeRequest(t,r,e),n=er.NormalizedSchema.of(t.input);if(!o.headers["content-type"]){let c=this.mixin.resolveRestContentType(this.getDefaultContentType(),n);if(c)o.headers["content-type"]=c}if(typeof o.body==="string"&&o.headers["content-type"]===this.getDefaultContentType()&&!o.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(n))o.body='<?xml version="1.0" encoding="UTF-8"?>'+o.body;return o}async deserializeResponse(t,r,e){return super.deserializeResponse(t,r,e)}async handleError(t,r,e,o,n){let c=rW(e,o)??"Unknown",{errorSchema:i,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,e,o,n),h=er.NormalizedSchema.of(i),w=o.Error?.message??o.Error?.Message??o.message??o.Message??"Unknown",u=new(er.TypeRegistry.for(i[1]).getErrorCtor(i)??Error)(w);await this.deserializeHttpMessage(i,r,e,o);let d={};for(let[y,R]of h.structIterator()){let S=R.getMergedTraits().xmlName??y,T=o.Error?.[S]??o[S];d[y]=this.codec.createDeserializer().readSchema(R,T)}throw this.mixin.decorateServiceException(Object.assign(u,f,{$fault:h.getMergedTraits().error,message:w},d),o)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(t){for(let[,r]of t.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}H$t.AwsEc2QueryProtocol=j9;H$t.AwsJson1_0Protocol=x9;H$t.AwsJson1_1Protocol=q9;H$t.AwsJsonRpcProtocol=Mu;H$t.AwsQueryProtocol=_$;H$t.AwsRestJsonProtocol=D9;H$t.AwsRestXmlProtocol=eW;H$t.AwsSmithyRpcV2CborProtocol=Q9;H$t.JsonCodec=vu;H$t.JsonShapeDeserializer=A$;H$t.JsonShapeSerializer=S$;H$t.XmlCodec=O$;H$t.XmlShapeDeserializer=zu;H$t.XmlShapeSerializer=$$;H$t._toBool=R$t;H$t._toNum=I$t;H$t._toStr=O$t;H$t.awsExpectUnion=a$t;H$t.loadRestJsonErrorCode=y$;H$t.loadRestXmlErrorCode=rW;H$t.parseJsonBody=d$;H$t.parseJsonErrorBody=m$t;H$t.parseXmlBody=tW;H$t.parseXmlErrorBody=U$t});var OW=Q((_W)=>{Object.defineProperty(_W,"__esModule",{value:!0});_W.ruleSet=void 0;var dW="required",ko="fn",Wo="argv",Di="ref",oW=!0,nW="isSet",j0="booleanEquals",xi="error",qi="endpoint",Zn="tree",R$="PartitionResult",I$="getAttr",sW={[dW]:!1,type:"string"},cW={[dW]:!0,default:!1,type:"boolean"},iW={[Di]:"Endpoint"},yW={[ko]:j0,[Wo]:[{[Di]:"UseFIPS"},!0]},AW={[ko]:j0,[Wo]:[{[Di]:"UseDualStack"},!0]},zo={},fW={[ko]:I$,[Wo]:[{[Di]:R$},"supportsFIPS"]},SW={[Di]:R$},hW={[ko]:j0,[Wo]:[!0,{[ko]:I$,[Wo]:[SW,"supportsDualStack"]}]},wW=[yW],pW=[AW],uW=[{[Di]:"Region"}],V$t={version:"1.0",parameters:{Region:sW,UseDualStack:cW,UseFIPS:cW,Endpoint:sW},rules:[{conditions:[{[ko]:nW,[Wo]:[iW]}],rules:[{conditions:wW,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:xi},{conditions:pW,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:xi},{endpoint:{url:iW,properties:zo,headers:zo},type:qi}],type:Zn},{conditions:[{[ko]:nW,[Wo]:uW}],rules:[{conditions:[{[ko]:"aws.partition",[Wo]:uW,assign:R$}],rules:[{conditions:[yW,AW],rules:[{conditions:[{[ko]:j0,[Wo]:[oW,fW]},hW],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zo,headers:zo},type:qi}],type:Zn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:xi}],type:Zn},{conditions:wW,rules:[{conditions:[{[ko]:j0,[Wo]:[fW,oW]}],rules:[{conditions:[{[ko]:"stringEquals",[Wo]:[{[ko]:I$,[Wo]:[SW,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:zo,headers:zo},type:qi},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:zo,headers:zo},type:qi}],type:Zn},{error:"FIPS is enabled but this partition does not support FIPS",type:xi}],type:Zn},{conditions:pW,rules:[{conditions:[hW],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:zo,headers:zo},type:qi}],type:Zn},{error:"DualStack is enabled but this partition does not support DualStack",type:xi}],type:Zn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:zo,headers:zo},type:qi}],type:Zn}],type:Zn},{error:"Invalid Configuration: Missing Region",type:xi}]};_W.ruleSet=V$t});var TW=Q((RW)=>{Object.defineProperty(RW,"__esModule",{value:!0});RW.defaultEndpointResolver=void 0;var j$t=hc(),T$=ps(),tOt=OW(),rOt=new T$.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),eOt=(t,r={})=>{return rOt.get(t,()=>(0,T$.resolveEndpoint)(tOt.ruleSet,{endpointParams:t,logger:r.logger}))};RW.defaultEndpointResolver=eOt;T$.customEndpointFunctions.aws=j$t.awsEndpointFunctions});var HW=Q((aW)=>{Object.defineProperty(aW,"__esModule",{value:!0});aW.getRuntimeConfig=void 0;var oOt=Vr(),nOt=Ei(),sOt=Kr(),cOt=z(),iOt=Mn(),NW=Ke(),mW=ue(),fOt=i$(),hOt=TW(),wOt=(t)=>{return{apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??NW.fromBase64,base64Encoder:t?.base64Encoder??NW.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??hOt.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??fOt.defaultSSOOIDCHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(r)=>r.getIdentityProvider("aws.auth#sigv4"),signer:new oOt.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(r)=>r.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new sOt.NoAuthSigner}],logger:t?.logger??new cOt.NoOpLogger,protocol:t?.protocol??nOt.AwsRestJsonProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.ssooidc",version:"2019-06-10",serviceTarget:"AWSSSOOIDCService"},serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??iOt.parseUrl,utf8Decoder:t?.utf8Decoder??mW.fromUtf8,utf8Encoder:t?.utf8Encoder??mW.toUtf8}};aW.getRuntimeConfig=wOt});var zW=Q((vW)=>{Object.defineProperty(vW,"__esModule",{value:!0});vW.getRuntimeConfig=void 0;var pOt=ii(),uOt=pOt.__importDefault(Gu()),bW=Vr(),lW=Yi(),ku=co(),dOt=Pi(),FW=qo(),Sc=xo(),LW=os(),GW=z(),yOt=gi(),AOt=Ci(),SOt=dc(),_Ot=HW(),$Ot=(t)=>{(0,GW.emitWarningIfUnsupportedVersion)(process.version);let r=(0,AOt.resolveDefaultsModeConfig)(t),e=()=>r().then(GW.loadConfigsForDefaultMode),o=(0,_Ot.getRuntimeConfig)(t);(0,bW.emitWarningIfUnsupportedVersion)(process.version);let n={profile:t?.profile,logger:o.logger};return{...o,...t,runtime:"node",defaultsMode:r,authSchemePreference:t?.authSchemePreference??(0,Sc.loadConfig)(bW.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:t?.bodyLengthChecker??yOt.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,lW.createDefaultUserAgentProvider)({serviceId:o.serviceId,clientVersion:uOt.default.version}),maxAttempts:t?.maxAttempts??(0,Sc.loadConfig)(FW.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Sc.loadConfig)(ku.NODE_REGION_CONFIG_OPTIONS,{...ku.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:LW.NodeHttpHandler.create(t?.requestHandler??e),retryMode:t?.retryMode??(0,Sc.loadConfig)({...FW.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await e()).retryMode||SOt.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??dOt.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??LW.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Sc.loadConfig)(ku.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??(0,Sc.loadConfig)(ku.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??(0,Sc.loadConfig)(lW.NODE_APP_ID_CONFIG_OPTIONS,n)}};vW.getRuntimeConfig=$Ot});var ZW=Q((WW)=>{Object.defineProperty(WW,"__esModule",{value:!0});WW.warning=void 0;WW.stsRegionDefaultResolver=ROt;var kW=co(),OOt=xo();function ROt(t={}){return(0,OOt.loadConfig)({...kW.NODE_REGION_CONFIG_OPTIONS,async default(){if(!WW.warning.silence)console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly.");return"us-east-1"}},{...kW.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}WW.warning={silence:!1}});var _c=Q((Os)=>{var BW=ZW(),th=co(),TOt=(t)=>{return{setRegion(r){t.region=r},region(){return t.region}}},NOt=(t)=>{return{region:t.region()}};Object.defineProperty(Os,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return th.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Os,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return th.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Os,"REGION_ENV_NAME",{enumerable:!0,get:function(){return th.REGION_ENV_NAME}});Object.defineProperty(Os,"REGION_INI_NAME",{enumerable:!0,get:function(){return th.REGION_INI_NAME}});Object.defineProperty(Os,"resolveRegionConfig",{enumerable:!0,get:function(){return th.resolveRegionConfig}});Os.getAwsRegionExtensionConfiguration=TOt;Os.resolveAwsRegionExtensionConfiguration=NOt;Object.keys(BW).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(Os,t))Object.defineProperty(Os,t,{enumerable:!0,get:function(){return BW[t]}})})});var l$=Q((b$)=>{var XW=Ui(),UOt=Hi(),HOt=bi(),JW=wc(),bOt=co(),m$=Kr(),Oo=so(),lOt=Li(),QW=X(),YW=qo(),Rs=z(),PW=i$(),FOt=zW(),gW=_c(),CW=tr(),LOt=(t)=>{return Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"})},GOt={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},vOt=(t)=>{let{httpAuthSchemes:r,httpAuthSchemeProvider:e,credentials:o}=t;return{setHttpAuthScheme(n){let c=r.findIndex((i)=>i.schemeId===n.schemeId);if(c===-1)r.push(n);else r.splice(c,1,n)},httpAuthSchemes(){return r},setHttpAuthSchemeProvider(n){e=n},httpAuthSchemeProvider(){return e},setCredentials(n){o=n},credentials(){return o}}},MOt=(t)=>{return{httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}},zOt=(t,r)=>{let e=Object.assign(gW.getAwsRegionExtensionConfiguration(t),Rs.getDefaultExtensionConfiguration(t),CW.getHttpHandlerExtensionConfiguration(t),vOt(t));return r.forEach((o)=>o.configure(e)),Object.assign(t,gW.resolveAwsRegionExtensionConfiguration(e),Rs.resolveDefaultRuntimeConfig(e),CW.resolveHttpHandlerRuntimeConfig(e),MOt(e))};class a$ extends Rs.Client{config;constructor(...[t]){let r=FOt.getRuntimeConfig(t||{});super(r);this.initConfig=r;let e=LOt(r),o=JW.resolveUserAgentConfig(e),n=YW.resolveRetryConfig(o),c=bOt.resolveRegionConfig(n),i=XW.resolveHostHeaderConfig(c),f=QW.resolveEndpointConfig(i),h=PW.resolveHttpAuthSchemeConfig(f),w=zOt(h,t?.extensions||[]);this.config=w,this.middlewareStack.use(Oo.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(JW.getUserAgentPlugin(this.config)),this.middlewareStack.use(YW.getRetryPlugin(this.config)),this.middlewareStack.use(lOt.getContentLengthPlugin(this.config)),this.middlewareStack.use(XW.getHostHeaderPlugin(this.config)),this.middlewareStack.use(UOt.getLoggerPlugin(this.config)),this.middlewareStack.use(HOt.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(m$.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:PW.defaultSSOOIDCHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(p)=>new m$.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(m$.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}class to extends Rs.ServiceException{constructor(t){super(t);Object.setPrototypeOf(this,to.prototype)}}class Wu extends to{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t});Object.setPrototypeOf(this,Wu.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}}class Zu extends to{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t});Object.setPrototypeOf(this,Zu.prototype),this.error=t.error,this.error_description=t.error_description}}class Bu extends to{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});Object.setPrototypeOf(this,Bu.prototype),this.error=t.error,this.error_description=t.error_description}}class Xu extends to{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t});Object.setPrototypeOf(this,Xu.prototype),this.error=t.error,this.error_description=t.error_description}}class Ju extends to{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t});Object.setPrototypeOf(this,Ju.prototype),this.error=t.error,this.error_description=t.error_description}}class Yu extends to{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t});Object.setPrototypeOf(this,Yu.prototype),this.error=t.error,this.error_description=t.error_description}}class Pu extends to{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t});Object.setPrototypeOf(this,Pu.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}}class gu extends to{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t});Object.setPrototypeOf(this,gu.prototype),this.error=t.error,this.error_description=t.error_description}}class Cu extends to{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t});Object.setPrototypeOf(this,Cu.prototype),this.error=t.error,this.error_description=t.error_description}}class Qu extends to{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t});Object.setPrototypeOf(this,Qu.prototype),this.error=t.error,this.error_description=t.error_description}}class Ku extends to{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t});Object.setPrototypeOf(this,Ku.prototype),this.error=t.error,this.error_description=t.error_description}}var kOt="AccessDeniedException",WOt="AuthorizationPendingException",ZOt="AccessToken",BOt="ClientSecret",XOt="CreateToken",JOt="CreateTokenRequest",YOt="CreateTokenResponse",POt="CodeVerifier",gOt="ExpiredTokenException",COt="InvalidClientException",QOt="InvalidGrantException",KOt="InvalidRequestException",EOt="InternalServerException",xOt="InvalidScopeException",qOt="IdToken",DOt="RefreshToken",VOt="SlowDownException",jOt="UnauthorizedClientException",t4t="UnsupportedGrantTypeException",r4t="accessToken",yn="client",e4t="clientId",o4t="clientSecret",n4t="codeVerifier",s4t="code",c4t="deviceCode",Jr="error",i4t="expiresIn",Vo="error_description",f4t="grantType",h4t="http",jo="httpError",w4t="idToken",KW="reason",EW="refreshToken",p4t="redirectUri",u4t="scope",d4t="server",xW="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",y4t="tokenType",nr="com.amazonaws.ssooidc",A4t=[0,nr,ZOt,8,0],S4t=[0,nr,BOt,8,0],_4t=[0,nr,POt,8,0],$4t=[0,nr,qOt,8,0],qW=[0,nr,DOt,8,0],DW=[-3,nr,kOt,{[Jr]:yn,[jo]:400},[Jr,KW,Vo],[0,0,0]];Oo.TypeRegistry.for(nr).registerError(DW,Wu);var VW=[-3,nr,WOt,{[Jr]:yn,[jo]:400},[Jr,Vo],[0,0]];Oo.TypeRegistry.for(nr).registerError(VW,Zu);var jW=[3,nr,JOt,0,[e4t,o4t,f4t,c4t,s4t,EW,u4t,p4t,n4t],[0,[()=>S4t,0],0,0,0,[()=>qW,0],64,0,[()=>_4t,0]],3],tZ=[3,nr,YOt,0,[r4t,y4t,i4t,EW,w4t],[[()=>A4t,0],0,1,[()=>qW,0],[()=>$4t,0]]],rZ=[-3,nr,gOt,{[Jr]:yn,[jo]:400},[Jr,Vo],[0,0]];Oo.TypeRegistry.for(nr).registerError(rZ,Bu);var eZ=[-3,nr,EOt,{[Jr]:d4t,[jo]:500},[Jr,Vo],[0,0]];Oo.TypeRegistry.for(nr).registerError(eZ,Xu);var oZ=[-3,nr,COt,{[Jr]:yn,[jo]:401},[Jr,Vo],[0,0]];Oo.TypeRegistry.for(nr).registerError(oZ,Ju);var nZ=[-3,nr,QOt,{[Jr]:yn,[jo]:400},[Jr,Vo],[0,0]];Oo.TypeRegistry.for(nr).registerError(nZ,Yu);var sZ=[-3,nr,KOt,{[Jr]:yn,[jo]:400},[Jr,KW,Vo],[0,0,0]];Oo.TypeRegistry.for(nr).registerError(sZ,Pu);var cZ=[-3,nr,xOt,{[Jr]:yn,[jo]:400},[Jr,Vo],[0,0]];Oo.TypeRegistry.for(nr).registerError(cZ,gu);var iZ=[-3,nr,VOt,{[Jr]:yn,[jo]:400},[Jr,Vo],[0,0]];Oo.TypeRegistry.for(nr).registerError(iZ,Cu);var fZ=[-3,nr,jOt,{[Jr]:yn,[jo]:400},[Jr,Vo],[0,0]];Oo.TypeRegistry.for(nr).registerError(fZ,Qu);var hZ=[-3,nr,t4t,{[Jr]:yn,[jo]:400},[Jr,Vo],[0,0]];Oo.TypeRegistry.for(nr).registerError(hZ,Ku);var wZ=[-3,xW,"SSOOIDCServiceException",0,[],[]];Oo.TypeRegistry.for(xW).registerError(wZ,to);var pZ=[9,nr,XOt,{[h4t]:["POST","/token",200]},()=>jW,()=>tZ];class U$ extends Rs.Command.classBuilder().ep(GOt).m(function(t,r,e,o){return[QW.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(pZ).build(){}var O4t={CreateTokenCommand:U$};class H$ extends a${}Rs.createAggregatedClient(O4t,H$);var R4t={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},I4t={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"};Object.defineProperty(b$,"$Command",{enumerable:!0,get:function(){return Rs.Command}});Object.defineProperty(b$,"__Client",{enumerable:!0,get:function(){return Rs.Client}});b$.AccessDeniedException=Wu;b$.AccessDeniedException$=DW;b$.AccessDeniedExceptionReason=R4t;b$.AuthorizationPendingException=Zu;b$.AuthorizationPendingException$=VW;b$.CreateToken$=pZ;b$.CreateTokenCommand=U$;b$.CreateTokenRequest$=jW;b$.CreateTokenResponse$=tZ;b$.ExpiredTokenException=Bu;b$.ExpiredTokenException$=rZ;b$.InternalServerException=Xu;b$.InternalServerException$=eZ;b$.InvalidClientException=Ju;b$.InvalidClientException$=oZ;b$.InvalidGrantException=Yu;b$.InvalidGrantException$=nZ;b$.InvalidRequestException=Pu;b$.InvalidRequestException$=sZ;b$.InvalidRequestExceptionReason=I4t;b$.InvalidScopeException=gu;b$.InvalidScopeException$=cZ;b$.SSOOIDC=H$;b$.SSOOIDCClient=a$;b$.SSOOIDCServiceException=to;b$.SSOOIDCServiceException$=wZ;b$.SlowDownException=Cu;b$.SlowDownException$=iZ;b$.UnauthorizedClientException=Qu;b$.UnauthorizedClientException$=fZ;b$.UnsupportedGrantTypeException=Ku;b$.UnsupportedGrantTypeException$=hZ});var uZ=async(t,r={},e)=>{let{SSOOIDCClient:o}=await Promise.resolve().then(() => O(l$(),1)),n=(i)=>r.clientConfig?.[i]??r.parentClientConfig?.[i]??e?.[i];return new o(Object.assign({},r.clientConfig??{},{region:t??r.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))};var dZ=async(t,r,e={},o)=>{let{CreateTokenCommand:n}=await Promise.resolve().then(() => O(l$(),1));return(await uZ(r,e,o)).send(new n({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))};var yZ=()=>{};var AZ,F$=(t)=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new AZ.TokenProviderError(`Token is expired. ${Ji}`,!1)};var SZ=_(()=>{AZ=O(_r(),1)});var _Z,Is=(t,r,e=!1)=>{if(typeof r>"u")throw new _Z.TokenProviderError(`Value not present for '${t}' in SSO Token${e?". Cannot refresh":""}. ${Ji}`,!1)};var $Z=_(()=>{_Z=O(_r(),1)});import{promises as tRt}from"fs";var OZ,rRt,RZ=(t,r)=>{let e=OZ.getSSOTokenFilepath(t),o=JSON.stringify(r,null,2);return rRt(e,o)};var IZ=_(()=>{OZ=O(De(),1),{writeFile:rRt}=tRt});var Vi,Ts,TZ,NZ=(t={})=>async({callerClientConfig:r}={})=>{t.logger?.debug("@aws-sdk/token-providers - fromSso");let e=await Ts.parseKnownFiles(t),o=Ts.getProfileName({profile:t.profile??r?.profile}),n=e[o];if(!n)throw new Vi.TokenProviderError(`Profile '${o}' could not be found in shared credentials file.`,!1);else if(!n.sso_session)throw new Vi.TokenProviderError(`Profile '${o}' is missing required property 'sso_session'.`);let c=n.sso_session,f=(await Ts.loadSsoSessionData(t))[c];if(!f)throw new Vi.TokenProviderError(`Sso session '${c}' could not be found in shared credentials file.`,!1);for(let R of["sso_start_url","sso_region"])if(!f[R])throw new Vi.TokenProviderError(`Sso session '${c}' is missing required property '${R}'.`,!1);let{sso_start_url:h,sso_region:w}=f,p;try{p=await Ts.getSSOTokenFromFile(c)}catch(R){throw new Vi.TokenProviderError(`The SSO session token associated with profile=${o} was not found or is invalid. ${Ji}`,!1)}Is("accessToken",p.accessToken),Is("expiresAt",p.expiresAt);let{accessToken:u,expiresAt:d}=p,y={token:u,expiration:new Date(d)};if(y.expiration.getTime()-Date.now()>l9)return y;if(Date.now()-TZ.getTime()<30000)return F$(y),y;Is("clientId",p.clientId,!0),Is("clientSecret",p.clientSecret,!0),Is("refreshToken",p.refreshToken,!0);try{TZ.setTime(Date.now());let R=await dZ(p,w,t,r);Is("accessToken",R.accessToken),Is("expiresIn",R.expiresIn);let S=new Date(Date.now()+R.expiresIn*1000);try{await RZ(c,{...p,accessToken:R.accessToken,expiresAt:S.toISOString(),refreshToken:R.refreshToken})}catch(T){}return{token:R.accessToken,expiration:S}}catch(R){return F$(y),y}};var mZ=_(()=>{yZ();SZ();$Z();IZ();Vi=O(_r(),1),Ts=O(De(),1),TZ=new Date(0)});var aZ=()=>{};var UZ=()=>{};var HZ=_(()=>{b9();mZ();aZ();UZ()});function eRt(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(r,e)=>({signingProperties:{config:r,context:e}})}}function Eu(t){return{schemeId:"smithy.api#noAuth"}}var bZ,rh,lZ=async(t,r,e)=>{return{operation:rh.getSmithyContext(r).operation,region:await rh.normalizeProvider(t.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}},FZ=(t)=>{let r=[];switch(t.operation){case"GetRoleCredentials":{r.push(Eu(t));break}case"ListAccountRoles":{r.push(Eu(t));break}case"ListAccounts":{r.push(Eu(t));break}case"Logout":{r.push(Eu(t));break}default:r.push(eRt(t))}return r},LZ=(t)=>{let r=bZ.resolveAwsSdkSigV4Config(t);return Object.assign(r,{authSchemePreference:rh.normalizeProvider(t.authSchemePreference??[])})};var L$=_(()=>{bZ=O(Vr(),1),rh=O(Qe(),1)});var GZ=(t)=>{return Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"})},Ns;var ji=_(()=>{Ns={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var MZ;var vZ=_(()=>{MZ={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.971.0",scripts:{build:"concurrently 'yarn:build:types' 'yarn:build:es' && yarn build:cjs","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":'yarn g:turbo run build -F="$npm_package_name"',"build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso","test:index":"tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.970.0","@aws-sdk/middleware-host-header":"3.969.0","@aws-sdk/middleware-logger":"3.969.0","@aws-sdk/middleware-recursion-detection":"3.969.0","@aws-sdk/middleware-user-agent":"3.970.0","@aws-sdk/region-config-resolver":"3.969.0","@aws-sdk/types":"3.969.0","@aws-sdk/util-endpoints":"3.970.0","@aws-sdk/util-user-agent-browser":"3.969.0","@aws-sdk/util-user-agent-node":"3.971.0","@smithy/config-resolver":"^4.4.6","@smithy/core":"^3.20.6","@smithy/fetch-http-handler":"^5.3.9","@smithy/hash-node":"^4.2.8","@smithy/invalid-dependency":"^4.2.8","@smithy/middleware-content-length":"^4.2.8","@smithy/middleware-endpoint":"^4.4.7","@smithy/middleware-retry":"^4.4.23","@smithy/middleware-serde":"^4.2.9","@smithy/middleware-stack":"^4.2.8","@smithy/node-config-provider":"^4.3.8","@smithy/node-http-handler":"^4.4.8","@smithy/protocol-http":"^5.3.8","@smithy/smithy-client":"^4.10.8","@smithy/types":"^4.12.0","@smithy/url-parser":"^4.2.8","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.22","@smithy/util-defaults-mode-node":"^4.2.25","@smithy/util-endpoints":"^3.2.8","@smithy/util-middleware":"^4.2.8","@smithy/util-retry":"^4.2.8","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node20":"20.1.8","@types/node":"^20.14.8",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"5.0.10",typescript:"~5.8.3"},engines:{node:">=20.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var zZ,kZ,WZ,PZ,gZ,Zo,ZZ,CZ,BZ,XZ,JZ,YZ,nRt,QZ;var KZ=_(()=>{zZ={["required"]:!1,type:"string"},kZ={["required"]:!0,default:!1,type:"boolean"},WZ={["ref"]:"Endpoint"},PZ={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseFIPS"},!0]},gZ={["fn"]:"booleanEquals",["argv"]:[{["ref"]:"UseDualStack"},!0]},Zo={},ZZ={["fn"]:"getAttr",["argv"]:[{["ref"]:"PartitionResult"},"supportsFIPS"]},CZ={["ref"]:"PartitionResult"},BZ={["fn"]:"booleanEquals",["argv"]:[!0,{["fn"]:"getAttr",["argv"]:[CZ,"supportsDualStack"]}]},XZ=[PZ],JZ=[gZ],YZ=[{["ref"]:"Region"}],nRt={version:"1.0",parameters:{Region:zZ,UseDualStack:kZ,UseFIPS:kZ,Endpoint:zZ},rules:[{conditions:[{["fn"]:"isSet",["argv"]:[WZ]}],rules:[{conditions:XZ,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:"error"},{conditions:JZ,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:"error"},{endpoint:{url:WZ,properties:Zo,headers:Zo},type:"endpoint"}],type:"tree"},{conditions:[{["fn"]:"isSet",["argv"]:YZ}],rules:[{conditions:[{["fn"]:"aws.partition",["argv"]:YZ,assign:"PartitionResult"}],rules:[{conditions:[PZ,gZ],rules:[{conditions:[{["fn"]:"booleanEquals",["argv"]:[!0,ZZ]},BZ],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Zo,headers:Zo},type:"endpoint"}],type:"tree"},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:"error"}],type:"tree"},{conditions:XZ,rules:[{conditions:[{["fn"]:"booleanEquals",["argv"]:[ZZ,!0]}],rules:[{conditions:[{["fn"]:"stringEquals",["argv"]:[{["fn"]:"getAttr",["argv"]:[CZ,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Zo,headers:Zo},type:"endpoint"},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Zo,headers:Zo},type:"endpoint"}],type:"tree"},{error:"FIPS is enabled but this partition does not support FIPS",type:"error"}],type:"tree"},{conditions:JZ,rules:[{conditions:[BZ],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Zo,headers:Zo},type:"endpoint"}],type:"tree"},{error:"DualStack is enabled but this partition does not support DualStack",type:"error"}],type:"tree"},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Zo,headers:Zo},type:"endpoint"}],type:"tree"}],type:"tree"},{error:"Invalid Configuration: Missing Region",type:"error"}]},QZ=nRt});var EZ,tf,sRt,xZ=(t,r={})=>{return sRt.get(t,()=>tf.resolveEndpoint(QZ,{endpointParams:t,logger:r.logger}))};var qZ=_(()=>{KZ();EZ=O(hc(),1),tf=O(ps(),1),sRt=new tf.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]});tf.customEndpointFunctions.aws=EZ.awsEndpointFunctions});var DZ,VZ,jZ,tB,rB,xu,qu,eB=(t)=>{return{apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??xu.fromBase64,base64Encoder:t?.base64Encoder??xu.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??xZ,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??FZ,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(r)=>r.getIdentityProvider("aws.auth#sigv4"),signer:new DZ.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(r)=>r.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new jZ.NoAuthSigner}],logger:t?.logger??new tB.NoOpLogger,protocol:t?.protocol??VZ.AwsRestJsonProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sso",version:"2019-06-10",serviceTarget:"SWBPortalService"},serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??rB.parseUrl,utf8Decoder:t?.utf8Decoder??qu.fromUtf8,utf8Encoder:t?.utf8Encoder??qu.toUtf8}};var oB=_(()=>{L$();qZ();DZ=O(Vr(),1),VZ=O(Ei(),1),jZ=O(Kr(),1),tB=O(z(),1),rB=O(Mn(),1),xu=O(Ke(),1),qu=O(ue(),1)});var Du,Vu,as,nB,ju,ms,t1,r1,sB,cB,iB,fB=(t)=>{r1.emitWarningIfUnsupportedVersion(process.version);let r=cB.resolveDefaultsModeConfig(t),e=()=>r().then(r1.loadConfigsForDefaultMode),o=eB(t);Du.emitWarningIfUnsupportedVersion(process.version);let n={profile:t?.profile,logger:o.logger};return{...o,...t,runtime:"node",defaultsMode:r,authSchemePreference:t?.authSchemePreference??ms.loadConfig(Du.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:t?.bodyLengthChecker??sB.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??Vu.createDefaultUserAgentProvider({serviceId:o.serviceId,clientVersion:MZ.version}),maxAttempts:t?.maxAttempts??ms.loadConfig(ju.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??ms.loadConfig(as.NODE_REGION_CONFIG_OPTIONS,{...as.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:t1.NodeHttpHandler.create(t?.requestHandler??e),retryMode:t?.retryMode??ms.loadConfig({...ju.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await e()).retryMode||iB.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??nB.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??t1.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??ms.loadConfig(as.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??ms.loadConfig(as.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??ms.loadConfig(Vu.NODE_APP_ID_CONFIG_OPTIONS,n)}};var hB=_(()=>{vZ();oB();Du=O(Vr(),1),Vu=O(Yi(),1),as=O(co(),1),nB=O(Pi(),1),ju=O(qo(),1),ms=O(xo(),1),t1=O(os(),1),r1=O(z(),1),sB=O(gi(),1),cB=O(Ci(),1),iB=O(dc(),1)});var wB=(t)=>{let{httpAuthSchemes:r,httpAuthSchemeProvider:e,credentials:o}=t;return{setHttpAuthScheme(n){let c=r.findIndex((i)=>i.schemeId===n.schemeId);if(c===-1)r.push(n);else r.splice(c,1,n)},httpAuthSchemes(){return r},setHttpAuthSchemeProvider(n){e=n},httpAuthSchemeProvider(){return e},setCredentials(n){o=n},credentials(){return o}}},pB=(t)=>{return{httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}};var e1,o1,n1,uB=(t,r)=>{let e=Object.assign(e1.getAwsRegionExtensionConfiguration(t),n1.getDefaultExtensionConfiguration(t),o1.getHttpHandlerExtensionConfiguration(t),wB(t));return r.forEach((o)=>o.configure(e)),Object.assign(t,e1.resolveAwsRegionExtensionConfiguration(e),n1.resolveDefaultRuntimeConfig(e),o1.resolveHttpHandlerRuntimeConfig(e),pB(e))};var dB=_(()=>{e1=O(_c(),1),o1=O(tr(),1),n1=O(z(),1)});var s1,yB,AB,c1,SB,rf,_B,$B,OB,i1,RB,Bn;var eh=_(()=>{L$();ji();hB();dB();s1=O(Ui(),1),yB=O(Hi(),1),AB=O(bi(),1),c1=O(wc(),1),SB=O(co(),1),rf=O(Kr(),1),_B=O(so(),1),$B=O(Li(),1),OB=O(X(),1),i1=O(qo(),1),RB=O(z(),1);Bn=class Bn extends RB.Client{config;constructor(...[t]){let r=fB(t||{});super(r);this.initConfig=r;let e=GZ(r),o=c1.resolveUserAgentConfig(e),n=i1.resolveRetryConfig(o),c=SB.resolveRegionConfig(n),i=s1.resolveHostHeaderConfig(c),f=OB.resolveEndpointConfig(i),h=LZ(f),w=uB(h,t?.extensions||[]);this.config=w,this.middlewareStack.use(_B.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(c1.getUserAgentPlugin(this.config)),this.middlewareStack.use(i1.getRetryPlugin(this.config)),this.middlewareStack.use($B.getContentLengthPlugin(this.config)),this.middlewareStack.use(s1.getHostHeaderPlugin(this.config)),this.middlewareStack.use(yB.getLoggerPlugin(this.config)),this.middlewareStack.use(AB.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(rf.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:lZ,identityProviderConfigProvider:async(p)=>new rf.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(rf.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}});var IB,Xn;var G$=_(()=>{IB=O(z(),1);Xn=class Xn extends IB.ServiceException{constructor(t){super(t);Object.setPrototypeOf(this,Xn.prototype)}}});var f1,h1,w1,p1;var v$=_(()=>{G$();f1=class f1 extends Xn{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t});Object.setPrototypeOf(this,f1.prototype)}};h1=class h1 extends Xn{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});Object.setPrototypeOf(this,h1.prototype)}};w1=class w1 extends Xn{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});Object.setPrototypeOf(this,w1.prototype)}};p1=class p1 extends Xn{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t});Object.setPrototypeOf(this,p1.prototype)}}});var ef,u1,cRt,iRt,fRt,hRt,wRt,pRt,uRt,dRt,yRt,ARt,SRt,_Rt,$Rt,ORt,RRt,IRt,TRt="unit",NRt,mRt,aRt,TB,NB,mB,aB;var of=_(()=>{v$();G$();ef=O(so(),1),u1=[0,"com.amazonaws.sso","AccessTokenType",8,0],cRt=[0,"com.amazonaws.sso","SecretAccessKeyType",8,0],iRt=[0,"com.amazonaws.sso","SessionTokenType",8,0],fRt=[3,"com.amazonaws.sso","AccountInfo",0,["accountId","accountName","emailAddress"],[0,0,0]],hRt=[3,"com.amazonaws.sso","GetRoleCredentialsRequest",0,["roleName","accountId","accessToken"],[[0,{["httpQuery"]:"role_name"}],[0,{["httpQuery"]:"account_id"}],[()=>u1,{["httpHeader"]:"x-amz-sso_bearer_token"}]],3],wRt=[3,"com.amazonaws.sso","GetRoleCredentialsResponse",0,["roleCredentials"],[[()=>$Rt,0]]],pRt=[-3,"com.amazonaws.sso","InvalidRequestException",{["error"]:"client",["httpError"]:400},["message"],[0]];ef.TypeRegistry.for("com.amazonaws.sso").registerError(pRt,f1);uRt=[3,"com.amazonaws.sso","ListAccountRolesRequest",0,["accessToken","accountId","nextToken","maxResults"],[[()=>u1,{["httpHeader"]:"x-amz-sso_bearer_token"}],[0,{["httpQuery"]:"account_id"}],[0,{["httpQuery"]:"next_token"}],[1,{["httpQuery"]:"max_result"}]],2],dRt=[3,"com.amazonaws.sso","ListAccountRolesResponse",0,["nextToken","roleList"],[0,()=>aRt]],yRt=[3,"com.amazonaws.sso","ListAccountsRequest",0,["accessToken","nextToken","maxResults"],[[()=>u1,{["httpHeader"]:"x-amz-sso_bearer_token"}],[0,{["httpQuery"]:"next_token"}],[1,{["httpQuery"]:"max_result"}]],1],ARt=[3,"com.amazonaws.sso","ListAccountsResponse",0,["nextToken","accountList"],[0,()=>mRt]],SRt=[3,"com.amazonaws.sso","LogoutRequest",0,["accessToken"],[[()=>u1,{["httpHeader"]:"x-amz-sso_bearer_token"}]],1],_Rt=[-3,"com.amazonaws.sso","ResourceNotFoundException",{["error"]:"client",["httpError"]:404},["message"],[0]];ef.TypeRegistry.for("com.amazonaws.sso").registerError(_Rt,h1);$Rt=[3,"com.amazonaws.sso","RoleCredentials",0,["accessKeyId","secretAccessKey","sessionToken","expiration"],[0,[()=>cRt,0],[()=>iRt,0],1]],ORt=[3,"com.amazonaws.sso","RoleInfo",0,["roleName","accountId"],[0,0]],RRt=[-3,"com.amazonaws.sso","TooManyRequestsException",{["error"]:"client",["httpError"]:429},["message"],[0]];ef.TypeRegistry.for("com.amazonaws.sso").registerError(RRt,w1);IRt=[-3,"com.amazonaws.sso","UnauthorizedException",{["error"]:"client",["httpError"]:401},["message"],[0]];ef.TypeRegistry.for("com.amazonaws.sso").registerError(IRt,p1);NRt=[-3,"smithy.ts.sdk.synthetic.com.amazonaws.sso","SSOServiceException",0,[],[]];ef.TypeRegistry.for("smithy.ts.sdk.synthetic.com.amazonaws.sso").registerError(NRt,Xn);mRt=[1,"com.amazonaws.sso","AccountListType",0,()=>fRt],aRt=[1,"com.amazonaws.sso","RoleListType",0,()=>ORt],TB=[9,"com.amazonaws.sso","GetRoleCredentials",{["http"]:["GET","/federation/credentials",200]},()=>hRt,()=>wRt],NB=[9,"com.amazonaws.sso","ListAccountRoles",{["http"]:["GET","/assignment/roles",200]},()=>uRt,()=>dRt],mB=[9,"com.amazonaws.sso","ListAccounts",{["http"]:["GET","/assignment/accounts",200]},()=>yRt,()=>ARt],aB=[9,"com.amazonaws.sso","Logout",{["http"]:["POST","/logout",200]},()=>SRt,()=>TRt]});var UB,HB,oh;var M$=_(()=>{ji();of();UB=O(X(),1),HB=O(z(),1);oh=class oh extends HB.Command.classBuilder().ep(Ns).m(function(t,r,e,o){return[UB.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(TB).build(){}});var bB,lB,nh;var d1=_(()=>{ji();of();bB=O(X(),1),lB=O(z(),1);nh=class nh extends lB.Command.classBuilder().ep(Ns).m(function(t,r,e,o){return[bB.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(NB).build(){}});var FB,LB,sh;var y1=_(()=>{ji();of();FB=O(X(),1),LB=O(z(),1);sh=class sh extends LB.Command.classBuilder().ep(Ns).m(function(t,r,e,o){return[FB.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(mB).build(){}});var GB,vB,z$;var k$=_(()=>{ji();of();GB=O(X(),1),vB=O(z(),1);z$=class z$ extends vB.Command.classBuilder().ep(Ns).m(function(t,r,e,o){return[GB.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(aB).build(){}});var MB,URt,zB;var kB=_(()=>{M$();d1();y1();k$();eh();MB=O(z(),1),URt={GetRoleCredentialsCommand:oh,ListAccountRolesCommand:nh,ListAccountsCommand:sh,LogoutCommand:z$};zB=class zB extends Bn{};MB.createAggregatedClient(URt,zB)});var WB=_(()=>{M$();d1();y1();k$()});var ZB=()=>{};var BB,Jgt;var XB=_(()=>{d1();eh();BB=O(Kr(),1),Jgt=BB.createPaginator(Bn,nh,"nextToken","nextToken","maxResults")});var JB,Cgt;var YB=_(()=>{y1();eh();JB=O(Kr(),1),Cgt=JB.createPaginator(Bn,sh,"nextToken","nextToken","maxResults")});var PB=_(()=>{ZB();XB();YB()});var gB=()=>{};var CB=_(()=>{eh();kB();WB();of();PB();v$();gB()});var QB={};wo(QB,{SSOClient:()=>Bn,GetRoleCredentialsCommand:()=>oh});var KB=_(()=>{CB()});var W$,nf,EB,ch=!1,Z$=async({ssoStartUrl:t,ssoSession:r,ssoAccountId:e,ssoRegion:o,ssoRoleName:n,ssoClient:c,clientConfig:i,parentClientConfig:f,callerClientConfig:h,profile:w,filepath:p,configFilepath:u,ignoreCache:d,logger:y})=>{let R,S="To refresh this SSO session run aws sso login with the corresponding profile.";if(r)try{let gt=await NZ({profile:w,filepath:p,configFilepath:u,ignoreCache:d})();R={accessToken:gt.token,expiresAt:new Date(gt.expiration).toISOString()}}catch(gt){throw new nf.CredentialsProviderError(gt.message,{tryNextLink:ch,logger:y})}else try{R=await EB.getSSOTokenFromFile(t)}catch(gt){throw new nf.CredentialsProviderError("The SSO session associated with this profile is invalid. To refresh this SSO session run aws sso login with the corresponding profile.",{tryNextLink:ch,logger:y})}if(new Date(R.expiresAt).getTime()-Date.now()<=0)throw new nf.CredentialsProviderError("The SSO session associated with this profile has expired. To refresh this SSO session run aws sso login with the corresponding profile.",{tryNextLink:ch,logger:y});let{accessToken:T}=R,{SSOClient:N,GetRoleCredentialsCommand:G}=await Promise.resolve().then(() => (KB(),QB)),v=c||new N(Object.assign({},i??{},{logger:i?.logger??h?.logger??f?.logger,region:i?.region??o,userAgentAppId:i?.userAgentAppId??h?.userAgentAppId??f?.userAgentAppId})),J;try{J=await v.send(new G({accountId:e,roleName:n,accessToken:T}))}catch(gt){throw new nf.CredentialsProviderError(gt,{tryNextLink:ch,logger:y})}let{roleCredentials:{accessKeyId:K,secretAccessKey:D,sessionToken:E,expiration:ht,credentialScope:Rt,accountId:it}={}}=J;if(!K||!D||!E||!ht)throw new nf.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:ch,logger:y});let q={accessKeyId:K,secretAccessKey:D,sessionToken:E,expiration:new Date(ht),...Rt&&{credentialScope:Rt},...it&&{accountId:it}};if(r)W$.setCredentialFeature(q,"CREDENTIALS_SSO","s");else W$.setCredentialFeature(q,"CREDENTIALS_SSO_LEGACY","u");return q};var xB=_(()=>{HZ();W$=O(Ge(),1),nf=O(_r(),1),EB=O(De(),1)});var qB,B$=(t,r)=>{let{sso_start_url:e,sso_account_id:o,sso_region:n,sso_role_name:c}=t;if(!e||!o||!n||!c)throw new qB.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:r});return t};var X$=_(()=>{qB=O(_r(),1)});var sf,cf,HRt=(t={})=>async({callerClientConfig:r}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:e,ssoAccountId:o,ssoRegion:n,ssoRoleName:c,ssoSession:i}=t,{ssoClient:f}=t,h=cf.getProfileName({profile:t.profile??r?.profile});if(!e&&!o&&!n&&!c&&!i){let p=(await cf.parseKnownFiles(t))[h];if(!p)throw new sf.CredentialsProviderError(`Profile ${h} was not found.`,{logger:t.logger});if(!s$(p))throw new sf.CredentialsProviderError(`Profile ${h} is not configured with SSO credentials.`,{logger:t.logger});if(p?.sso_session){let N=(await cf.loadSsoSessionData(t))[p.sso_session],G=` configurations in profile ${h} and sso-session ${p.sso_session}`;if(n&&n!==N.sso_region)throw new sf.CredentialsProviderError("Conflicting SSO region"+G,{tryNextLink:!1,logger:t.logger});if(e&&e!==N.sso_start_url)throw new sf.CredentialsProviderError("Conflicting SSO start_url"+G,{tryNextLink:!1,logger:t.logger});p.sso_region=N.sso_region,p.sso_start_url=N.sso_start_url}let{sso_start_url:u,sso_account_id:d,sso_region:y,sso_role_name:R,sso_session:S}=B$(p,t.logger);return Z$({ssoStartUrl:u,ssoSession:S,ssoAccountId:d,ssoRegion:y,ssoRoleName:R,ssoClient:f,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:h,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else if(!e||!o||!n||!c)throw new sf.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});else return Z$({ssoStartUrl:e,ssoSession:i,ssoAccountId:o,ssoRegion:n,ssoRoleName:c,ssoClient:f,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,callerClientConfig:t.callerClientConfig,profile:h,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})};var DB=_(()=>{xB();X$();sf=O(_r(),1),cf=O(De(),1)});var VB=()=>{};var J$={};wo(J$,{validateSsoProfile:()=>B$,isSsoProfile:()=>s$,fromSSO:()=>HRt});var Y$=_(()=>{DB();VB();X$()});var jB,A1,tX=(t,r,e)=>{let o={EcsContainer:async(n)=>{let{fromHttp:c}=await Promise.resolve().then(() => (n$(),o$)),{fromContainerMetadata:i}=await Promise.resolve().then(() => (V0(),D0));return e?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>A1.chain(c(n??{}),i(n))().then(P$)},Ec2InstanceMetadata:async(n)=>{e?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:c}=await Promise.resolve().then(() => (V0(),D0));return async()=>c(n)().then(P$)},Environment:async(n)=>{e?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:c}=await Promise.resolve().then(() => (K3(),Kk));return async()=>c(n)().then(P$)}};if(t in o)return o[t];else throw new A1.CredentialsProviderError(`Unsupported credential source in profile ${r}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:e})},P$=(t)=>jB.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p");var rX=_(()=>{jB=O(Ge(),1),A1=O(_r(),1)});var C$=Q((eX)=>{Object.defineProperty(eX,"__esModule",{value:!0});eX.resolveHttpAuthSchemeConfig=eX.resolveStsAuthConfig=eX.defaultSTSHttpAuthSchemeProvider=eX.defaultSTSHttpAuthSchemeParametersProvider=void 0;var bRt=Vr(),g$=Qe(),lRt=Q$(),FRt=async(t,r,e)=>{return{operation:(0,g$.getSmithyContext)(r).operation,region:await(0,g$.normalizeProvider)(t.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};eX.defaultSTSHttpAuthSchemeParametersProvider=FRt;function LRt(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(r,e)=>({signingProperties:{config:r,context:e}})}}function GRt(t){return{schemeId:"smithy.api#noAuth"}}var vRt=(t)=>{let r=[];switch(t.operation){case"AssumeRoleWithWebIdentity":{r.push(GRt(t));break}default:r.push(LRt(t))}return r};eX.defaultSTSHttpAuthSchemeProvider=vRt;var MRt=(t)=>Object.assign(t,{stsClientCtor:lRt.STSClient});eX.resolveStsAuthConfig=MRt;var zRt=(t)=>{let r=eX.resolveStsAuthConfig(t),e=(0,bRt.resolveAwsSdkSigV4Config)(r);return Object.assign(e,{authSchemePreference:(0,g$.normalizeProvider)(t.authSchemePreference??[])})};eX.resolveHttpAuthSchemeConfig=zRt});var K$=Q((sX)=>{Object.defineProperty(sX,"__esModule",{value:!0});sX.commonParams=sX.resolveClientEndpointParameters=void 0;var ZRt=(t)=>{return Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"})};sX.resolveClientEndpointParameters=ZRt;sX.commonParams={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var FX=Q((bX)=>{Object.defineProperty(bX,"__esModule",{value:!0});bX.ruleSet=void 0;var $X="required",bt="type",xt="fn",qt="argv",Hs="ref",iX=!1,E$=!0,Us="booleanEquals",Ne="stringEquals",OX="sigv4",RX="sts",IX="us-east-1",lr="endpoint",fX="https://sts.{Region}.{PartitionResult#dnsSuffix}",An="tree",ff="error",q$="getAttr",hX={[$X]:!1,[bt]:"string"},x$={[$X]:!0,default:!1,[bt]:"boolean"},TX={[Hs]:"Endpoint"},wX={[xt]:"isSet",[qt]:[{[Hs]:"Region"}]},me={[Hs]:"Region"},pX={[xt]:"aws.partition",[qt]:[me],assign:"PartitionResult"},NX={[Hs]:"UseFIPS"},mX={[Hs]:"UseDualStack"},Me={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:OX,signingName:RX,signingRegion:IX}]},headers:{}},Ro={},uX={conditions:[{[xt]:Ne,[qt]:[me,"aws-global"]}],[lr]:Me,[bt]:lr},aX={[xt]:Us,[qt]:[NX,!0]},UX={[xt]:Us,[qt]:[mX,!0]},dX={[xt]:q$,[qt]:[{[Hs]:"PartitionResult"},"supportsFIPS"]},HX={[Hs]:"PartitionResult"},yX={[xt]:Us,[qt]:[!0,{[xt]:q$,[qt]:[HX,"supportsDualStack"]}]},AX=[{[xt]:"isSet",[qt]:[TX]}],SX=[aX],_X=[UX],XRt={version:"1.0",parameters:{Region:hX,UseDualStack:x$,UseFIPS:x$,Endpoint:hX,UseGlobalEndpoint:x$},rules:[{conditions:[{[xt]:Us,[qt]:[{[Hs]:"UseGlobalEndpoint"},E$]},{[xt]:"not",[qt]:AX},wX,pX,{[xt]:Us,[qt]:[NX,iX]},{[xt]:Us,[qt]:[mX,iX]}],rules:[{conditions:[{[xt]:Ne,[qt]:[me,"ap-northeast-1"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"ap-south-1"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"ap-southeast-1"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"ap-southeast-2"]}],endpoint:Me,[bt]:lr},uX,{conditions:[{[xt]:Ne,[qt]:[me,"ca-central-1"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"eu-central-1"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"eu-north-1"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"eu-west-1"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"eu-west-2"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"eu-west-3"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"sa-east-1"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,IX]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"us-east-2"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"us-west-1"]}],endpoint:Me,[bt]:lr},{conditions:[{[xt]:Ne,[qt]:[me,"us-west-2"]}],endpoint:Me,[bt]:lr},{endpoint:{url:fX,properties:{authSchemes:[{name:OX,signingName:RX,signingRegion:"{Region}"}]},headers:Ro},[bt]:lr}],[bt]:An},{conditions:AX,rules:[{conditions:SX,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[bt]:ff},{conditions:_X,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[bt]:ff},{endpoint:{url:TX,properties:Ro,headers:Ro},[bt]:lr}],[bt]:An},{conditions:[wX],rules:[{conditions:[pX],rules:[{conditions:[aX,UX],rules:[{conditions:[{[xt]:Us,[qt]:[E$,dX]},yX],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ro,headers:Ro},[bt]:lr}],[bt]:An},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[bt]:ff}],[bt]:An},{conditions:SX,rules:[{conditions:[{[xt]:Us,[qt]:[dX,E$]}],rules:[{conditions:[{[xt]:Ne,[qt]:[{[xt]:q$,[qt]:[HX,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Ro,headers:Ro},[bt]:lr},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ro,headers:Ro},[bt]:lr}],[bt]:An},{error:"FIPS is enabled but this partition does not support FIPS",[bt]:ff}],[bt]:An},{conditions:_X,rules:[{conditions:[yX],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ro,headers:Ro},[bt]:lr}],[bt]:An},{error:"DualStack is enabled but this partition does not support DualStack",[bt]:ff}],[bt]:An},uX,{endpoint:{url:fX,properties:Ro,headers:Ro},[bt]:lr}],[bt]:An}],[bt]:An},{error:"Invalid Configuration: Missing Region",[bt]:ff}]};bX.ruleSet=XRt});var vX=Q((LX)=>{Object.defineProperty(LX,"__esModule",{value:!0});LX.defaultEndpointResolver=void 0;var JRt=hc(),D$=ps(),YRt=FX(),PRt=new D$.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),gRt=(t,r={})=>{return PRt.get(t,()=>(0,D$.resolveEndpoint)(YRt.ruleSet,{endpointParams:t,logger:r.logger}))};LX.defaultEndpointResolver=gRt;D$.customEndpointFunctions.aws=JRt.awsEndpointFunctions});var ZX=Q((kX)=>{Object.defineProperty(kX,"__esModule",{value:!0});kX.getRuntimeConfig=void 0;var CRt=Vr(),QRt=Ei(),KRt=Kr(),ERt=z(),xRt=Mn(),MX=Ke(),zX=ue(),qRt=C$(),DRt=vX(),VRt=(t)=>{return{apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??MX.fromBase64,base64Encoder:t?.base64Encoder??MX.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??DRt.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??qRt.defaultSTSHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(r)=>r.getIdentityProvider("aws.auth#sigv4"),signer:new CRt.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(r)=>r.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new KRt.NoAuthSigner}],logger:t?.logger??new ERt.NoOpLogger,protocol:t?.protocol??QRt.AwsQueryProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??xRt.parseUrl,utf8Decoder:t?.utf8Decoder??zX.fromUtf8,utf8Encoder:t?.utf8Encoder??zX.toUtf8}};kX.getRuntimeConfig=VRt});var CX=Q((PX)=>{Object.defineProperty(PX,"__esModule",{value:!0});PX.getRuntimeConfig=void 0;var jRt=ii(),tIt=jRt.__importDefault(Gu()),V$=Vr(),BX=Yi(),S1=co(),rIt=Kr(),eIt=Pi(),XX=qo(),$c=xo(),JX=os(),YX=z(),oIt=gi(),nIt=Ci(),sIt=dc(),cIt=ZX(),iIt=(t)=>{(0,YX.emitWarningIfUnsupportedVersion)(process.version);let r=(0,nIt.resolveDefaultsModeConfig)(t),e=()=>r().then(YX.loadConfigsForDefaultMode),o=(0,cIt.getRuntimeConfig)(t);(0,V$.emitWarningIfUnsupportedVersion)(process.version);let n={profile:t?.profile,logger:o.logger};return{...o,...t,runtime:"node",defaultsMode:r,authSchemePreference:t?.authSchemePreference??(0,$c.loadConfig)(V$.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:t?.bodyLengthChecker??oIt.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,BX.createDefaultUserAgentProvider)({serviceId:o.serviceId,clientVersion:tIt.default.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(c)=>c.getIdentityProvider("aws.auth#sigv4")||(async(i)=>await t.credentialDefaultProvider(i?.__config||{})()),signer:new V$.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(c)=>c.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new rIt.NoAuthSigner}],maxAttempts:t?.maxAttempts??(0,$c.loadConfig)(XX.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,$c.loadConfig)(S1.NODE_REGION_CONFIG_OPTIONS,{...S1.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:JX.NodeHttpHandler.create(t?.requestHandler??e),retryMode:t?.retryMode??(0,$c.loadConfig)({...XX.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await e()).retryMode||sIt.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??eIt.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??JX.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,$c.loadConfig)(S1.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??(0,$c.loadConfig)(S1.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??(0,$c.loadConfig)(BX.NODE_APP_ID_CONFIG_OPTIONS,n)}};PX.getRuntimeConfig=iIt});var EX=Q((QX)=>{Object.defineProperty(QX,"__esModule",{value:!0});QX.resolveHttpAuthRuntimeConfig=QX.getHttpAuthExtensionConfiguration=void 0;var fIt=(t)=>{let{httpAuthSchemes:r,httpAuthSchemeProvider:e,credentials:o}=t;return{setHttpAuthScheme(n){let c=r.findIndex((i)=>i.schemeId===n.schemeId);if(c===-1)r.push(n);else r.splice(c,1,n)},httpAuthSchemes(){return r},setHttpAuthSchemeProvider(n){e=n},httpAuthSchemeProvider(){return e},setCredentials(n){o=n},credentials(){return o}}};QX.getHttpAuthExtensionConfiguration=fIt;var hIt=(t)=>{return{httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}};QX.resolveHttpAuthRuntimeConfig=hIt});var rJ=Q((jX)=>{Object.defineProperty(jX,"__esModule",{value:!0});jX.resolveRuntimeExtensions=void 0;var xX=_c(),qX=tr(),DX=z(),VX=EX(),pIt=(t,r)=>{let e=Object.assign((0,xX.getAwsRegionExtensionConfiguration)(t),(0,DX.getDefaultExtensionConfiguration)(t),(0,qX.getHttpHandlerExtensionConfiguration)(t),(0,VX.getHttpAuthExtensionConfiguration)(t));return r.forEach((o)=>o.configure(e)),Object.assign(t,(0,xX.resolveAwsRegionExtensionConfiguration)(e),(0,DX.resolveDefaultRuntimeConfig)(e),(0,qX.resolveHttpHandlerRuntimeConfig)(e),(0,VX.resolveHttpAuthRuntimeConfig)(e))};jX.resolveRuntimeExtensions=pIt});var Q$=Q((tO)=>{Object.defineProperty(tO,"__esModule",{value:!0});tO.STSClient=tO.__Client=void 0;var eJ=Ui(),uIt=Hi(),dIt=bi(),oJ=wc(),yIt=co(),j$=Kr(),AIt=so(),SIt=Li(),_It=X(),nJ=qo(),cJ=z();Object.defineProperty(tO,"__Client",{enumerable:!0,get:function(){return cJ.Client}});var sJ=C$(),$It=K$(),OIt=CX(),RIt=rJ();class iJ extends cJ.Client{config;constructor(...[t]){let r=(0,OIt.getRuntimeConfig)(t||{});super(r);this.initConfig=r;let e=(0,$It.resolveClientEndpointParameters)(r),o=(0,oJ.resolveUserAgentConfig)(e),n=(0,nJ.resolveRetryConfig)(o),c=(0,yIt.resolveRegionConfig)(n),i=(0,eJ.resolveHostHeaderConfig)(c),f=(0,_It.resolveEndpointConfig)(i),h=(0,sJ.resolveHttpAuthSchemeConfig)(f),w=(0,RIt.resolveRuntimeExtensions)(h,t?.extensions||[]);this.config=w,this.middlewareStack.use((0,AIt.getSchemaSerdePlugin)(this.config)),this.middlewareStack.use((0,oJ.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,nJ.getRetryPlugin)(this.config)),this.middlewareStack.use((0,SIt.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,eJ.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,uIt.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,dIt.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,j$.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:sJ.defaultSTSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(p)=>new j$.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use((0,j$.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}}tO.STSClient=iJ});var fO=Q((_1)=>{var ih=Q$(),fh=z(),hJ=X(),wJ=K$(),bs=so(),rO=Ge(),IIt=_c();class tn extends fh.ServiceException{constructor(t){super(t);Object.setPrototypeOf(this,tn.prototype)}}class $1 extends tn{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});Object.setPrototypeOf(this,$1.prototype)}}class O1 extends tn{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t});Object.setPrototypeOf(this,O1.prototype)}}class R1 extends tn{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t});Object.setPrototypeOf(this,R1.prototype)}}class I1 extends tn{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t});Object.setPrototypeOf(this,I1.prototype)}}class T1 extends tn{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t});Object.setPrototypeOf(this,T1.prototype)}}class N1 extends tn{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t});Object.setPrototypeOf(this,N1.prototype)}}class m1 extends tn{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t});Object.setPrototypeOf(this,m1.prototype)}}var TIt="Arn",NIt="AccessKeyId",mIt="AssumeRole",aIt="AssumedRoleId",UIt="AssumeRoleRequest",HIt="AssumeRoleResponse",eO="AssumedRoleUser",bIt="AssumeRoleWithWebIdentity",lIt="AssumeRoleWithWebIdentityRequest",FIt="AssumeRoleWithWebIdentityResponse",LIt="Audience",oO="Credentials",GIt="ContextAssertion",pJ="DurationSeconds",vIt="Expiration",MIt="ExternalId",zIt="ExpiredTokenException",kIt="IDPCommunicationErrorException",WIt="IDPRejectedClaimException",ZIt="InvalidIdentityTokenException",BIt="Key",XIt="MalformedPolicyDocumentException",uJ="Policy",dJ="PolicyArns",JIt="ProviderArn",YIt="ProvidedContexts",PIt="ProvidedContextsListType",gIt="ProvidedContext",CIt="PolicyDescriptorType",QIt="ProviderId",yJ="PackedPolicySize",KIt="PackedPolicyTooLargeException",EIt="Provider",AJ="RoleArn",xIt="RegionDisabledException",SJ="RoleSessionName",qIt="SecretAccessKey",DIt="SubjectFromWebIdentityToken",nO="SourceIdentity",VIt="SerialNumber",jIt="SessionToken",tTt="Tags",rTt="TokenCode",eTt="TransitiveTagKeys",oTt="Tag",nTt="Value",sTt="WebIdentityToken",cTt="arn",iTt="accessKeySecretType",Oc="awsQueryError",Rc="client",fTt="clientTokenType",Ic="error",Tc="httpError",Nc="message",hTt="policyDescriptorListType",_J="smithy.ts.sdk.synthetic.com.amazonaws.sts",wTt="tagListType",sr="com.amazonaws.sts",pTt=[0,sr,iTt,8,0],uTt=[0,sr,fTt,8,0],sO=[3,sr,eO,0,[aIt,TIt],[0,0],2],$J=[3,sr,UIt,0,[AJ,SJ,dJ,uJ,pJ,tTt,eTt,MIt,VIt,rTt,nO,YIt],[0,0,()=>vJ,0,1,()=>yTt,64,0,0,0,0,()=>dTt],2],OJ=[3,sr,HIt,0,[oO,eO,yJ,nO],[[()=>cO,0],()=>sO,1,0]],RJ=[3,sr,lIt,0,[AJ,SJ,sTt,QIt,dJ,uJ,pJ],[0,0,[()=>uTt,0],0,()=>vJ,0,1],3],IJ=[3,sr,FIt,0,[oO,DIt,eO,yJ,EIt,LIt,nO],[[()=>cO,0],0,()=>sO,1,0,0,0]],cO=[3,sr,oO,0,[NIt,qIt,jIt,vIt],[0,[()=>pTt,0],0,4],4],TJ=[-3,sr,zIt,{[Oc]:["ExpiredTokenException",400],[Ic]:Rc,[Tc]:400},[Nc],[0]];bs.TypeRegistry.for(sr).registerError(TJ,$1);var NJ=[-3,sr,kIt,{[Oc]:["IDPCommunicationError",400],[Ic]:Rc,[Tc]:400},[Nc],[0]];bs.TypeRegistry.for(sr).registerError(NJ,m1);var mJ=[-3,sr,WIt,{[Oc]:["IDPRejectedClaim",403],[Ic]:Rc,[Tc]:403},[Nc],[0]];bs.TypeRegistry.for(sr).registerError(mJ,T1);var aJ=[-3,sr,ZIt,{[Oc]:["InvalidIdentityToken",400],[Ic]:Rc,[Tc]:400},[Nc],[0]];bs.TypeRegistry.for(sr).registerError(aJ,N1);var UJ=[-3,sr,XIt,{[Oc]:["MalformedPolicyDocument",400],[Ic]:Rc,[Tc]:400},[Nc],[0]];bs.TypeRegistry.for(sr).registerError(UJ,O1);var HJ=[-3,sr,KIt,{[Oc]:["PackedPolicyTooLarge",400],[Ic]:Rc,[Tc]:400},[Nc],[0]];bs.TypeRegistry.for(sr).registerError(HJ,R1);var bJ=[3,sr,CIt,0,[cTt],[0]],lJ=[3,sr,gIt,0,[JIt,GIt],[0,0]],FJ=[-3,sr,xIt,{[Oc]:["RegionDisabledException",403],[Ic]:Rc,[Tc]:403},[Nc],[0]];bs.TypeRegistry.for(sr).registerError(FJ,I1);var LJ=[3,sr,oTt,0,[BIt,nTt],[0,0],2],GJ=[-3,_J,"STSServiceException",0,[],[]];bs.TypeRegistry.for(_J).registerError(GJ,tn);var vJ=[1,sr,hTt,0,()=>bJ],dTt=[1,sr,PIt,0,()=>lJ],yTt=[1,sr,wTt,0,()=>LJ],MJ=[9,sr,mIt,0,()=>$J,()=>OJ],zJ=[9,sr,bIt,0,()=>RJ,()=>IJ];class a1 extends fh.Command.classBuilder().ep(wJ.commonParams).m(function(t,r,e,o){return[hJ.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(MJ).build(){}class U1 extends fh.Command.classBuilder().ep(wJ.commonParams).m(function(t,r,e,o){return[hJ.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(zJ).build(){}var ATt={AssumeRoleCommand:a1,AssumeRoleWithWebIdentityCommand:U1};class iO extends ih.STSClient{}fh.createAggregatedClient(ATt,iO);var kJ=(t)=>{if(typeof t?.Arn==="string"){let r=t.Arn.split(":");if(r.length>4&&r[4]!=="")return r[4]}return},WJ=async(t,r,e,o={})=>{let n=typeof t==="function"?await t():t,c=typeof r==="function"?await r():r,i="",f=n??c??(i=await IIt.stsRegionDefaultResolver(o)());return e?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${c} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),f},STt=(t,r)=>{let e,o;return async(n,c)=>{if(o=n,!e){let{logger:p=t?.parentClientConfig?.logger,profile:u=t?.parentClientConfig?.profile,region:d,requestHandler:y=t?.parentClientConfig?.requestHandler,credentialProviderLogger:R,userAgentAppId:S=t?.parentClientConfig?.userAgentAppId}=t,T=await WJ(d,t?.parentClientConfig?.region,R,{logger:p,profile:u}),N=!ZJ(y);e=new r({...t,userAgentAppId:S,profile:u,credentialDefaultProvider:()=>async()=>o,region:T,requestHandler:N?y:void 0,logger:p})}let{Credentials:i,AssumedRoleUser:f}=await e.send(new a1(c));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${c.RoleArn}`);let h=kJ(f),w={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...h&&{accountId:h}};return rO.setCredentialFeature(w,"CREDENTIALS_STS_ASSUME_ROLE","i"),w}},_Tt=(t,r)=>{let e;return async(o)=>{if(!e){let{logger:h=t?.parentClientConfig?.logger,profile:w=t?.parentClientConfig?.profile,region:p,requestHandler:u=t?.parentClientConfig?.requestHandler,credentialProviderLogger:d,userAgentAppId:y=t?.parentClientConfig?.userAgentAppId}=t,R=await WJ(p,t?.parentClientConfig?.region,d,{logger:h,profile:w}),S=!ZJ(u);e=new r({...t,userAgentAppId:y,profile:w,region:R,requestHandler:S?u:void 0,logger:h})}let{Credentials:n,AssumedRoleUser:c}=await e.send(new U1(o));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${o.RoleArn}`);let i=kJ(c),f={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...i&&{accountId:i}};if(i)rO.setCredentialFeature(f,"RESOLVED_ACCOUNT_ID","T");return rO.setCredentialFeature(f,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),f}},ZJ=(t)=>{return t?.metadata?.handlerProtocol==="h2"},BJ=(t,r)=>{if(!r)return t;else return class extends t{constructor(o){super(o);for(let n of r)this.middlewareStack.use(n)}}},XJ=(t={},r)=>STt(t,BJ(ih.STSClient,r)),JJ=(t={},r)=>_Tt(t,BJ(ih.STSClient,r)),$Tt=(t)=>(r)=>t({roleAssumer:XJ(r),roleAssumerWithWebIdentity:JJ(r),...r});Object.defineProperty(_1,"$Command",{enumerable:!0,get:function(){return fh.Command}});_1.AssumeRole$=MJ;_1.AssumeRoleCommand=a1;_1.AssumeRoleRequest$=$J;_1.AssumeRoleResponse$=OJ;_1.AssumeRoleWithWebIdentity$=zJ;_1.AssumeRoleWithWebIdentityCommand=U1;_1.AssumeRoleWithWebIdentityRequest$=RJ;_1.AssumeRoleWithWebIdentityResponse$=IJ;_1.AssumedRoleUser$=sO;_1.Credentials$=cO;_1.ExpiredTokenException=$1;_1.ExpiredTokenException$=TJ;_1.IDPCommunicationErrorException=m1;_1.IDPCommunicationErrorException$=NJ;_1.IDPRejectedClaimException=T1;_1.IDPRejectedClaimException$=mJ;_1.InvalidIdentityTokenException=N1;_1.InvalidIdentityTokenException$=aJ;_1.MalformedPolicyDocumentException=O1;_1.MalformedPolicyDocumentException$=UJ;_1.PackedPolicyTooLargeException=R1;_1.PackedPolicyTooLargeException$=HJ;_1.PolicyDescriptorType$=bJ;_1.ProvidedContext$=lJ;_1.RegionDisabledException=I1;_1.RegionDisabledException$=FJ;_1.STS=iO;_1.STSServiceException=tn;_1.STSServiceException$=GJ;_1.Tag$=LJ;_1.decorateDefaultCredentialProvider=$Tt;_1.getDefaultRoleAssumer=XJ;_1.getDefaultRoleAssumerWithWebIdentity=JJ;Object.keys(ih).forEach(function(t){if(t!=="default"&&!Object.prototype.hasOwnProperty.call(_1,t))Object.defineProperty(_1,t,{enumerable:!0,get:function(){return ih[t]}})})});var hO,wO,PJ,gJ=(t,{profile:r="default",logger:e}={})=>{return Boolean(t)&&typeof t==="object"&&typeof t.role_arn==="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(VTt(t,{profile:r,logger:e})||jTt(t,{profile:r,logger:e}))},VTt=(t,{profile:r,logger:e})=>{let o=typeof t.source_profile==="string"&&typeof t.credential_source>"u";if(o)e?.debug?.(`    ${r} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`);return o},jTt=(t,{profile:r,logger:e})=>{let o=typeof t.credential_source==="string"&&typeof t.source_profile>"u";if(o)e?.debug?.(`    ${r} isCredentialSourceProfile credential_source=${t.credential_source}`);return o},CJ=async(t,r,e,o,n={},c)=>{e.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=r[t],{source_profile:f,region:h}=i;if(!e.roleAssumer){let{getDefaultRoleAssumer:p}=await Promise.resolve().then(() => O(fO(),1));e.roleAssumer=p({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...o,...e?.parentClientConfig,region:h??e?.parentClientConfig?.region??o?.region}},e.clientPlugins)}if(f&&f in n)throw new wO.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${PJ.getProfileName(e)}. Profiles visited: `+Object.keys(n).join(", "),{logger:e.logger});e.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${f?`source_profile=[${f}]`:`profile=[${t}]`}`);let w=f?c(f,r,e,o,{...n,[f]:!0},YJ(r[f]??{})):(await tX(i.credential_source,t,e.logger)(e))();if(YJ(i))return w.then((p)=>hO.setCredentialFeature(p,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));else{let p={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:u}=i;if(u){if(!e.mfaCodeProvider)throw new wO.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:e.logger,tryNextLink:!1});p.SerialNumber=u,p.TokenCode=await e.mfaCodeProvider(u)}let d=await w;return e.roleAssumer(d,p).then((y)=>hO.setCredentialFeature(y,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},YJ=(t)=>{return!t.role_arn&&!!t.credential_source};var QJ=_(()=>{rX();hO=O(Ge(),1),wO=O(_r(),1),PJ=O(De(),1)});var uO=Q((KJ)=>{Object.defineProperty(KJ,"__esModule",{value:!0});KJ.resolveHttpAuthSchemeConfig=KJ.defaultSigninHttpAuthSchemeProvider=KJ.defaultSigninHttpAuthSchemeParametersProvider=void 0;var t6t=Vr(),pO=Qe(),r6t=async(t,r,e)=>{return{operation:(0,pO.getSmithyContext)(r).operation,region:await(0,pO.normalizeProvider)(t.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}};KJ.defaultSigninHttpAuthSchemeParametersProvider=r6t;function e6t(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"signin",region:t.region},propertiesExtractor:(r,e)=>({signingProperties:{config:r,context:e}})}}function o6t(t){return{schemeId:"smithy.api#noAuth"}}var n6t=(t)=>{let r=[];switch(t.operation){case"CreateOAuth2Token":{r.push(o6t(t));break}default:r.push(e6t(t))}return r};KJ.defaultSigninHttpAuthSchemeProvider=n6t;var s6t=(t)=>{let r=(0,t6t.resolveAwsSdkSigV4Config)(t);return Object.assign(r,{authSchemePreference:(0,pO.normalizeProvider)(t.authSchemePreference??[])})};KJ.resolveHttpAuthSchemeConfig=s6t});var cY=Q((nY)=>{Object.defineProperty(nY,"__esModule",{value:!0});nY.ruleSet=void 0;var oY="required",ke="fn",We="argv",Jn="ref",xJ=!0,qJ="isSet",mc="booleanEquals",hf="error",ls="endpoint",rn="tree",l1="PartitionResult",dO="stringEquals",DJ={[oY]:!0,default:!1,type:"boolean"},VJ={[oY]:!1,type:"string"},jJ={[Jn]:"Endpoint"},yO={[ke]:mc,[We]:[{[Jn]:"UseFIPS"},!0]},AO={[ke]:mc,[We]:[{[Jn]:"UseDualStack"},!0]},ze={},SO={[ke]:"getAttr",[We]:[{[Jn]:l1},"name"]},H1={[ke]:mc,[We]:[{[Jn]:"UseFIPS"},!1]},b1={[ke]:mc,[We]:[{[Jn]:"UseDualStack"},!1]},tY={[ke]:"getAttr",[We]:[{[Jn]:l1},"supportsFIPS"]},rY={[ke]:mc,[We]:[!0,{[ke]:"getAttr",[We]:[{[Jn]:l1},"supportsDualStack"]}]},eY=[{[Jn]:"Region"}],f6t={version:"1.0",parameters:{UseDualStack:DJ,UseFIPS:DJ,Endpoint:VJ,Region:VJ},rules:[{conditions:[{[ke]:qJ,[We]:[jJ]}],rules:[{conditions:[yO],error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:hf},{rules:[{conditions:[AO],error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:hf},{endpoint:{url:jJ,properties:ze,headers:ze},type:ls}],type:rn}],type:rn},{rules:[{conditions:[{[ke]:qJ,[We]:eY}],rules:[{conditions:[{[ke]:"aws.partition",[We]:eY,assign:l1}],rules:[{conditions:[{[ke]:dO,[We]:[SO,"aws"]},H1,b1],endpoint:{url:"https://{Region}.signin.aws.amazon.com",properties:ze,headers:ze},type:ls},{conditions:[{[ke]:dO,[We]:[SO,"aws-cn"]},H1,b1],endpoint:{url:"https://{Region}.signin.amazonaws.cn",properties:ze,headers:ze},type:ls},{conditions:[{[ke]:dO,[We]:[SO,"aws-us-gov"]},H1,b1],endpoint:{url:"https://{Region}.signin.amazonaws-us-gov.com",properties:ze,headers:ze},type:ls},{conditions:[yO,AO],rules:[{conditions:[{[ke]:mc,[We]:[xJ,tY]},rY],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ze,headers:ze},type:ls}],type:rn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:hf}],type:rn},{conditions:[yO,b1],rules:[{conditions:[{[ke]:mc,[We]:[tY,xJ]}],rules:[{endpoint:{url:"https://signin-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ze,headers:ze},type:ls}],type:rn},{error:"FIPS is enabled but this partition does not support FIPS",type:hf}],type:rn},{conditions:[H1,AO],rules:[{conditions:[rY],rules:[{endpoint:{url:"https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ze,headers:ze},type:ls}],type:rn},{error:"DualStack is enabled but this partition does not support DualStack",type:hf}],type:rn},{endpoint:{url:"https://signin.{Region}.{PartitionResult#dnsSuffix}",properties:ze,headers:ze},type:ls}],type:rn}],type:rn},{error:"Invalid Configuration: Missing Region",type:hf}],type:rn}]};nY.ruleSet=f6t});var hY=Q((iY)=>{Object.defineProperty(iY,"__esModule",{value:!0});iY.defaultEndpointResolver=void 0;var h6t=hc(),_O=ps(),w6t=cY(),p6t=new _O.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),u6t=(t,r={})=>{return p6t.get(t,()=>(0,_O.resolveEndpoint)(w6t.ruleSet,{endpointParams:t,logger:r.logger}))};iY.defaultEndpointResolver=u6t;_O.customEndpointFunctions.aws=h6t.awsEndpointFunctions});var yY=Q((uY)=>{Object.defineProperty(uY,"__esModule",{value:!0});uY.getRuntimeConfig=void 0;var d6t=Vr(),y6t=Ei(),A6t=Kr(),S6t=z(),_6t=Mn(),wY=Ke(),pY=ue(),$6t=uO(),O6t=hY(),R6t=(t)=>{return{apiVersion:"2023-01-01",base64Decoder:t?.base64Decoder??wY.fromBase64,base64Encoder:t?.base64Encoder??wY.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??O6t.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??$6t.defaultSigninHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(r)=>r.getIdentityProvider("aws.auth#sigv4"),signer:new d6t.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:(r)=>r.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new A6t.NoAuthSigner}],logger:t?.logger??new S6t.NoOpLogger,protocol:t?.protocol??y6t.AwsRestJsonProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.signin",version:"2023-01-01",serviceTarget:"Signin"},serviceId:t?.serviceId??"Signin",urlParser:t?.urlParser??_6t.parseUrl,utf8Decoder:t?.utf8Decoder??pY.fromUtf8,utf8Encoder:t?.utf8Encoder??pY.toUtf8}};uY.getRuntimeConfig=R6t});var TY=Q((RY)=>{Object.defineProperty(RY,"__esModule",{value:!0});RY.getRuntimeConfig=void 0;var I6t=ii(),T6t=I6t.__importDefault(Gu()),AY=Vr(),SY=Yi(),F1=co(),N6t=Pi(),_Y=qo(),ac=xo(),$Y=os(),OY=z(),m6t=gi(),a6t=Ci(),U6t=dc(),H6t=yY(),b6t=(t)=>{(0,OY.emitWarningIfUnsupportedVersion)(process.version);let r=(0,a6t.resolveDefaultsModeConfig)(t),e=()=>r().then(OY.loadConfigsForDefaultMode),o=(0,H6t.getRuntimeConfig)(t);(0,AY.emitWarningIfUnsupportedVersion)(process.version);let n={profile:t?.profile,logger:o.logger};return{...o,...t,runtime:"node",defaultsMode:r,authSchemePreference:t?.authSchemePreference??(0,ac.loadConfig)(AY.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:t?.bodyLengthChecker??m6t.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,SY.createDefaultUserAgentProvider)({serviceId:o.serviceId,clientVersion:T6t.default.version}),maxAttempts:t?.maxAttempts??(0,ac.loadConfig)(_Y.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,ac.loadConfig)(F1.NODE_REGION_CONFIG_OPTIONS,{...F1.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:$Y.NodeHttpHandler.create(t?.requestHandler??e),retryMode:t?.retryMode??(0,ac.loadConfig)({..._Y.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await e()).retryMode||U6t.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??N6t.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??$Y.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,ac.loadConfig)(F1.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??(0,ac.loadConfig)(F1.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??(0,ac.loadConfig)(SY.NODE_APP_ID_CONFIG_OPTIONS,n)}};RY.getRuntimeConfig=b6t});var tP=Q((mO)=>{var NY=Ui(),l6t=Hi(),F6t=bi(),mY=wc(),L6t=co(),$O=Kr(),wf=so(),G6t=Li(),XY=X(),aY=qo(),Fs=z(),UY=uO(),v6t=TY(),HY=_c(),bY=tr(),M6t=(t)=>{return Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"signin"})},z6t={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},k6t=(t)=>{let{httpAuthSchemes:r,httpAuthSchemeProvider:e,credentials:o}=t;return{setHttpAuthScheme(n){let c=r.findIndex((i)=>i.schemeId===n.schemeId);if(c===-1)r.push(n);else r.splice(c,1,n)},httpAuthSchemes(){return r},setHttpAuthSchemeProvider(n){e=n},httpAuthSchemeProvider(){return e},setCredentials(n){o=n},credentials(){return o}}},W6t=(t)=>{return{httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}},Z6t=(t,r)=>{let e=Object.assign(HY.getAwsRegionExtensionConfiguration(t),Fs.getDefaultExtensionConfiguration(t),bY.getHttpHandlerExtensionConfiguration(t),k6t(t));return r.forEach((o)=>o.configure(e)),Object.assign(t,HY.resolveAwsRegionExtensionConfiguration(e),Fs.resolveDefaultRuntimeConfig(e),bY.resolveHttpHandlerRuntimeConfig(e),W6t(e))};class OO extends Fs.Client{config;constructor(...[t]){let r=v6t.getRuntimeConfig(t||{});super(r);this.initConfig=r;let e=M6t(r),o=mY.resolveUserAgentConfig(e),n=aY.resolveRetryConfig(o),c=L6t.resolveRegionConfig(n),i=NY.resolveHostHeaderConfig(c),f=XY.resolveEndpointConfig(i),h=UY.resolveHttpAuthSchemeConfig(f),w=Z6t(h,t?.extensions||[]);this.config=w,this.middlewareStack.use(wf.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(mY.getUserAgentPlugin(this.config)),this.middlewareStack.use(aY.getRetryPlugin(this.config)),this.middlewareStack.use(G6t.getContentLengthPlugin(this.config)),this.middlewareStack.use(NY.getHostHeaderPlugin(this.config)),this.middlewareStack.use(l6t.getLoggerPlugin(this.config)),this.middlewareStack.use(F6t.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use($O.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:UY.defaultSigninHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async(p)=>new $O.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use($O.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}}class Gs extends Fs.ServiceException{constructor(t){super(t);Object.setPrototypeOf(this,Gs.prototype)}}class G1 extends Gs{name="AccessDeniedException";$fault="client";error;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t});Object.setPrototypeOf(this,G1.prototype),this.error=t.error}}class v1 extends Gs{name="InternalServerException";$fault="server";error;constructor(t){super({name:"InternalServerException",$fault:"server",...t});Object.setPrototypeOf(this,v1.prototype),this.error=t.error}}class M1 extends Gs{name="TooManyRequestsError";$fault="client";error;constructor(t){super({name:"TooManyRequestsError",$fault:"client",...t});Object.setPrototypeOf(this,M1.prototype),this.error=t.error}}class z1 extends Gs{name="ValidationException";$fault="client";error;constructor(t){super({name:"ValidationException",$fault:"client",...t});Object.setPrototypeOf(this,z1.prototype),this.error=t.error}}var B6t="AccessDeniedException",X6t="AccessToken",J6t="CreateOAuth2Token",Y6t="CreateOAuth2TokenRequest",P6t="CreateOAuth2TokenRequestBody",g6t="CreateOAuth2TokenResponseBody",C6t="CreateOAuth2TokenResponse",Q6t="InternalServerException",K6t="RefreshToken",E6t="TooManyRequestsError",x6t="ValidationException",lY="accessKeyId",FY="accessToken",RO="client",LY="clientId",GY="codeVerifier",q6t="code",Ls="error",vY="expiresIn",MY="grantType",D6t="http",IO="httpError",zY="idToken",Io="jsonName",k1="message",L1="refreshToken",kY="redirectUri",V6t="server",WY="secretAccessKey",ZY="sessionToken",JY="smithy.ts.sdk.synthetic.com.amazonaws.signin",j6t="tokenInput",tNt="tokenOutput",BY="tokenType",ro="com.amazonaws.signin",YY=[0,ro,K6t,8,0],PY=[-3,ro,B6t,{[Ls]:RO},[Ls,k1],[0,0],2];wf.TypeRegistry.for(ro).registerError(PY,G1);var gY=[3,ro,X6t,8,[lY,WY,ZY],[[0,{[Io]:lY}],[0,{[Io]:WY}],[0,{[Io]:ZY}]],3],CY=[3,ro,Y6t,0,[j6t],[[()=>QY,16]],1],QY=[3,ro,P6t,0,[LY,MY,q6t,kY,GY,L1],[[0,{[Io]:LY}],[0,{[Io]:MY}],0,[0,{[Io]:kY}],[0,{[Io]:GY}],[()=>YY,{[Io]:L1}]],2],KY=[3,ro,C6t,0,[tNt],[[()=>EY,16]],1],EY=[3,ro,g6t,0,[FY,BY,vY,L1,zY],[[()=>gY,{[Io]:FY}],[0,{[Io]:BY}],[1,{[Io]:vY}],[()=>YY,{[Io]:L1}],[0,{[Io]:zY}]],4],xY=[-3,ro,Q6t,{[Ls]:V6t,[IO]:500},[Ls,k1],[0,0],2];wf.TypeRegistry.for(ro).registerError(xY,v1);var qY=[-3,ro,E6t,{[Ls]:RO,[IO]:429},[Ls,k1],[0,0],2];wf.TypeRegistry.for(ro).registerError(qY,M1);var DY=[-3,ro,x6t,{[Ls]:RO,[IO]:400},[Ls,k1],[0,0],2];wf.TypeRegistry.for(ro).registerError(DY,z1);var VY=[-3,JY,"SigninServiceException",0,[],[]];wf.TypeRegistry.for(JY).registerError(VY,Gs);var jY=[9,ro,J6t,{[D6t]:["POST","/v1/token",200]},()=>CY,()=>KY];class TO extends Fs.Command.classBuilder().ep(z6t).m(function(t,r,e,o){return[XY.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("Signin","CreateOAuth2Token",{}).n("SigninClient","CreateOAuth2TokenCommand").sc(jY).build(){}var rNt={CreateOAuth2TokenCommand:TO};class NO extends OO{}Fs.createAggregatedClient(rNt,NO);var eNt={AUTHCODE_EXPIRED:"AUTHCODE_EXPIRED",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",INVALID_REQUEST:"INVALID_REQUEST",SERVER_ERROR:"server_error",TOKEN_EXPIRED:"TOKEN_EXPIRED",USER_CREDENTIALS_CHANGED:"USER_CREDENTIALS_CHANGED"};Object.defineProperty(mO,"$Command",{enumerable:!0,get:function(){return Fs.Command}});Object.defineProperty(mO,"__Client",{enumerable:!0,get:function(){return Fs.Client}});mO.AccessDeniedException=G1;mO.AccessDeniedException$=PY;mO.AccessToken$=gY;mO.CreateOAuth2Token$=jY;mO.CreateOAuth2TokenCommand=TO;mO.CreateOAuth2TokenRequest$=CY;mO.CreateOAuth2TokenRequestBody$=QY;mO.CreateOAuth2TokenResponse$=KY;mO.CreateOAuth2TokenResponseBody$=EY;mO.InternalServerException=v1;mO.InternalServerException$=xY;mO.OAuth2ErrorCode=eNt;mO.Signin=NO;mO.SigninClient=OO;mO.SigninServiceException=Gs;mO.SigninServiceException$=VY;mO.TooManyRequestsError=M1;mO.TooManyRequestsError$=qY;mO.ValidationException=z1;mO.ValidationException$=DY});import{createHash as NNt,createPrivateKey as mNt,createPublicKey as aNt,sign as UNt}from"crypto";import{promises as aO}from"fs";import{homedir as HNt}from"os";import{dirname as bNt,join as rP}from"path";class W1{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=300000;constructor(t,r,e){this.profileData=t,this.init=r,this.callerClientConfig=e}async loadCredentials(){let t=await this.loadToken();if(!t)throw new vs.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=t.accessToken,e=Date.now();if(new Date(r.expiresAt).getTime()-e<=W1.REFRESH_THRESHOLD)return this.refresh(t);return{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(t){let{SigninClient:r,CreateOAuth2TokenCommand:e}=await Promise.resolve().then(() => O(tP(),1)),{logger:o,userAgentAppId:n}=this.callerClientConfig??{},i=((p)=>{return p?.metadata?.handlerProtocol==="h2"})(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,f=this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,h=new r({credentials:{accessKeyId:"",secretAccessKey:""},region:f,requestHandler:i,logger:o,userAgentAppId:n,...this.init?.clientConfig});this.createDPoPInterceptor(h.middlewareStack);let w={tokenInput:{clientId:t.clientId,refreshToken:t.refreshToken,grantType:"refresh_token"}};try{let p=await h.send(new e(w)),{accessKeyId:u,secretAccessKey:d,sessionToken:y}=p.tokenOutput?.accessToken??{},{refreshToken:R,expiresIn:S}=p.tokenOutput??{};if(!u||!d||!y||!R)throw new vs.CredentialsProviderError("Token refresh response missing required fields",{logger:this.logger,tryNextLink:!1});let T=(S??900)*1000,N=new Date(Date.now()+T),G={...t,accessToken:{...t.accessToken,accessKeyId:u,secretAccessKey:d,sessionToken:y,expiresAt:N.toISOString()},refreshToken:R};await this.saveToken(G);let v=G.accessToken;return{accessKeyId:v.accessKeyId,secretAccessKey:v.secretAccessKey,sessionToken:v.sessionToken,accountId:v.accountId,expiration:N}}catch(p){if(p.name==="AccessDeniedException"){let u=p.error,d;switch(u){case"TOKEN_EXPIRED":d="Your session has expired. Please reauthenticate.";break;case"USER_CREDENTIALS_CHANGED":d="Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.";break;case"INSUFFICIENT_PERMISSIONS":d="Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.";break;default:d=`Failed to refresh token: ${String(p)}. Please re-authenticate using \`aws login\``}throw new vs.CredentialsProviderError(d,{logger:this.logger,tryNextLink:!1})}throw new vs.CredentialsProviderError(`Failed to refresh token: ${String(p)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let t=this.getTokenFilePath();try{let r;try{r=await oP.readFile(t,{ignoreCache:this.init?.ignoreCache})}catch{r=await aO.readFile(t,"utf8")}let e=JSON.parse(r),o=["accessToken","clientId","refreshToken","dpopKey"].filter((n)=>!e[n]);if(!e.accessToken?.accountId)o.push("accountId");if(o.length>0)throw new vs.CredentialsProviderError(`Token validation failed, missing fields: ${o.join(", ")}`,{logger:this.logger,tryNextLink:!1});return e}catch(r){throw new vs.CredentialsProviderError(`Failed to load token from ${t}: ${String(r)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(t){let r=this.getTokenFilePath(),e=bNt(r);try{await aO.mkdir(e,{recursive:!0})}catch(o){}await aO.writeFile(r,JSON.stringify(t,null,2),"utf8")}getTokenFilePath(){let t=process.env.AWS_LOGIN_CACHE_DIRECTORY??rP(HNt(),".aws","login","cache"),r=Buffer.from(this.loginSession,"utf8"),e=NNt("sha256").update(r).digest("hex");return rP(t,`${e}.json`)}derToRawSignature(t){let r=2;if(t[r]!==2)throw Error("Invalid DER signature");r++;let e=t[r++],o=t.subarray(r,r+e);if(r+=e,t[r]!==2)throw Error("Invalid DER signature");r++;let n=t[r++],c=t.subarray(r,r+n);o=o[0]===0?o.subarray(1):o,c=c[0]===0?c.subarray(1):c;let i=Buffer.concat([Buffer.alloc(32-o.length),o]),f=Buffer.concat([Buffer.alloc(32-c.length),c]);return Buffer.concat([i,f])}createDPoPInterceptor(t){t.add((r)=>async(e)=>{if(eP.HttpRequest.isInstance(e.request)){let o=e.request,n=`${o.protocol}//${o.hostname}${o.port?`:${o.port}`:""}${o.path}`,c=await this.generateDpop(o.method,n);o.headers={...o.headers,DPoP:c}}return r(e)},{step:"finalizeRequest",name:"dpopInterceptor",override:!0})}async generateDpop(t="POST",r){let e=await this.loadToken();try{let o=mNt({key:e.dpopKey,format:"pem",type:"sec1"}),c=aNt(o).export({format:"der",type:"spki"}),i=-1;for(let N=0;N<c.length;N++)if(c[N]===4){i=N;break}let f=c.slice(i+1,i+33),h=c.slice(i+33,i+65),w={alg:"ES256",typ:"dpop+jwt",jwk:{kty:"EC",crv:"P-256",x:f.toString("base64url"),y:h.toString("base64url")}},p={jti:crypto.randomUUID(),htm:t,htu:r,iat:Math.floor(Date.now()/1000)},u=Buffer.from(JSON.stringify(w)).toString("base64url"),d=Buffer.from(JSON.stringify(p)).toString("base64url"),y=`${u}.${d}`,R=UNt("sha256",Buffer.from(y),o),T=this.derToRawSignature(R).toString("base64url");return`${y}.${T}`}catch(o){throw new vs.CredentialsProviderError(`Failed to generate Dpop proof: ${o instanceof Error?o.message:String(o)}`,{logger:this.logger,tryNextLink:!1})}}}var vs,eP,oP;var nP=_(()=>{vs=O(_r(),1),eP=O(tr(),1),oP=O(De(),1)});var sP,cP,Z1,iP=(t)=>async({callerClientConfig:r}={})=>{t?.logger?.debug?.("@aws-sdk/credential-providers - fromLoginCredentials");let e=await Z1.parseKnownFiles(t||{}),o=Z1.getProfileName({profile:t?.profile??r?.profile}),n=e[o];if(!n?.login_session)throw new cP.CredentialsProviderError(`Profile ${o} does not contain login_session.`,{tryNextLink:!0,logger:t?.logger});let i=await new W1(n,t,r).loadCredentials();return sP.setCredentialFeature(i,"CREDENTIALS_LOGIN","AD")};var fP=_(()=>{nP();sP=O(Ge(),1),cP=O(_r(),1),Z1=O(De(),1)});var hP=()=>{};var wP=_(()=>{fP();hP()});var pP,uP=(t)=>{return Boolean(t&&t.login_session)},dP=async(t,r,e)=>{let o=await iP({...r,profile:t})({callerClientConfig:e});return pP.setCredentialFeature(o,"CREDENTIALS_PROFILE_LOGIN","AC")};var yP=_(()=>{wP();pP=O(Ge(),1)});var AP,SP=(t,r,e)=>{if(r.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(r.AccessKeyId===void 0||r.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(r.Expiration){let c=new Date;if(new Date(r.Expiration)<c)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let o=r.AccountId;if(!o&&e?.[t]?.aws_account_id)o=e[t].aws_account_id;let n={accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,...r.SessionToken&&{sessionToken:r.SessionToken},...r.Expiration&&{expiration:new Date(r.Expiration)},...r.CredentialScope&&{credentialScope:r.CredentialScope},...o&&{accountId:o}};return AP.setCredentialFeature(n,"CREDENTIALS_PROCESS","w"),n};var _P=_(()=>{AP=O(Ge(),1)});import{exec as lNt}from"child_process";import{promisify as FNt}from"util";var B1,$P,OP=async(t,r,e)=>{let o=r[t];if(r[t]){let n=o.credential_process;if(n!==void 0){let c=FNt($P.externalDataInterceptor?.getTokenRecord?.().exec??lNt);try{let{stdout:i}=await c(n),f;try{f=JSON.parse(i.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return SP(t,f,r)}catch(i){throw new B1.CredentialsProviderError(i.message,{logger:e})}}else throw new B1.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:e})}else throw new B1.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:e})};var RP=_(()=>{_P();B1=O(_r(),1),$P=O(De(),1)});var X1,LNt=(t={})=>async({callerClientConfig:r}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let e=await X1.parseKnownFiles(t);return OP(X1.getProfileName({profile:t.profile??r?.profile}),e,t.logger)};var IP=_(()=>{RP();X1=O(De(),1)});var UO={};wo(UO,{fromProcess:()=>LNt});var HO=_(()=>{IP()});var TP,NP=(t)=>Boolean(t)&&typeof t==="object"&&typeof t.credential_process==="string",mP=async(t,r)=>Promise.resolve().then(() => (HO(),UO)).then(({fromProcess:e})=>e({...t,profile:r})().then((o)=>TP.setCredentialFeature(o,"CREDENTIALS_PROFILE_PROCESS","v")));var aP=_(()=>{TP=O(Ge(),1)});var bO,UP=async(t,r,e={},o)=>{let{fromSSO:n}=await Promise.resolve().then(() => (Y$(),J$));return n({profile:t,logger:e.logger,parentClientConfig:e.parentClientConfig,clientConfig:e.clientConfig})({callerClientConfig:o}).then((c)=>{if(r.sso_session)return bO.setCredentialFeature(c,"CREDENTIALS_PROFILE_SSO","r");else return bO.setCredentialFeature(c,"CREDENTIALS_PROFILE_SSO_LEGACY","t")})},HP=(t)=>t&&(typeof t.sso_start_url==="string"||typeof t.sso_account_id==="string"||typeof t.sso_session==="string"||typeof t.sso_region==="string"||typeof t.sso_role_name==="string");var bP=_(()=>{bO=O(Ge(),1)});var lP,lO=(t)=>Boolean(t)&&typeof t==="object"&&typeof t.aws_access_key_id==="string"&&typeof t.aws_secret_access_key==="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,FO=async(t,r)=>{r?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let e={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return lP.setCredentialFeature(e,"CREDENTIALS_PROFILE","n")};var FP=_(()=>{lP=O(Ge(),1)});var LO=(t)=>async(r)=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:e,roleSessionName:o,webIdentityToken:n,providerId:c,policyArns:i,policy:f,durationSeconds:h}=t,{roleAssumerWithWebIdentity:w}=t;if(!w){let{getDefaultRoleAssumerWithWebIdentity:p}=await Promise.resolve().then(() => O(fO(),1));w=p({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...r?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return w({RoleArn:e,RoleSessionName:o??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:c,PolicyArns:i,Policy:f,DurationSeconds:h})};import{readFileSync as GNt}from"fs";var GP,vP,MP,LP="AWS_WEB_IDENTITY_TOKEN_FILE",vNt="AWS_ROLE_ARN",MNt="AWS_ROLE_SESSION_NAME",zNt=(t={})=>async(r)=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let e=t?.webIdentityTokenFile??process.env[LP],o=t?.roleArn??process.env[vNt],n=t?.roleSessionName??process.env[MNt];if(!e||!o)throw new vP.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let c=await LO({...t,webIdentityToken:MP.externalDataInterceptor?.getTokenRecord?.()[e]??GNt(e,{encoding:"ascii"}),roleArn:o,roleSessionName:n})(r);if(e===process.env[LP])GP.setCredentialFeature(c,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h");return c};var zP=_(()=>{GP=O(Ge(),1),vP=O(_r(),1),MP=O(De(),1)});var GO={};wo(GO,{fromWebToken:()=>LO,fromTokenFile:()=>zNt});var vO=_(()=>{zP()});var kP,WP=(t)=>Boolean(t)&&typeof t==="object"&&typeof t.web_identity_token_file==="string"&&typeof t.role_arn==="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,ZP=async(t,r,e)=>Promise.resolve().then(() => (vO(),GO)).then(({fromTokenFile:o})=>o({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:r.roleAssumerWithWebIdentity,logger:r.logger,parentClientConfig:r.parentClientConfig})({callerClientConfig:e}).then((n)=>kP.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q")));var BP=_(()=>{kP=O(Ge(),1)});var XP,MO=async(t,r,e,o,n={},c=!1)=>{let i=r[t];if(Object.keys(n).length>0&&lO(i))return FO(i,e);if(c||gJ(i,{profile:t,logger:e.logger}))return CJ(t,r,e,o,n,MO);if(lO(i))return FO(i,e);if(WP(i))return ZP(i,e,o);if(NP(i))return mP(e,t);if(HP(i))return await UP(t,i,e,o);if(uP(i))return dP(t,e,o);throw new XP.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:e.logger})};var JP=_(()=>{QJ();yP();aP();bP();FP();BP();XP=O(_r(),1)});var J1,kNt=(t={})=>async({callerClientConfig:r}={})=>{t.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let e=await J1.parseKnownFiles(t);return MO(J1.getProfileName({profile:t.profile??r?.profile}),e,t,r)};var YP=_(()=>{JP();J1=O(De(),1)});var PP={};wo(PP,{fromIni:()=>kNt});var gP=_(()=>{YP()});var Y1,QP,CP=!1,KP=(t={})=>H9([async()=>{if(t.profile??process.env[QP.ENV_PROFILE]){if(process.env[Ru]&&process.env[Iu]){if(!CP)(t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),CP=!0}throw new Y1.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0})}return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Q3(t)()},async(r)=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:e,ssoAccountId:o,ssoRegion:n,ssoRoleName:c,ssoSession:i}=t;if(!e&&!o&&!n&&!c&&!i)throw new Y1.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:f}=await Promise.resolve().then(() => (Y$(),J$));return f(t)(r)},async(r)=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:e}=await Promise.resolve().then(() => (gP(),PP));return e(t)(r)},async(r)=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:e}=await Promise.resolve().then(() => (HO(),UO));return e(t)(r)},async(r)=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:e}=await Promise.resolve().then(() => (vO(),GO));return e(t)(r)},async()=>{return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await a9(t))()},async()=>{throw new Y1.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],WNt),WNt=(t)=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<300000;var EP=_(()=>{K3();U9();Y1=O(_r(),1),QP=O(De(),1)});var xP=_(()=>{EP()});var qP=()=>{};var pf,ZNt="AWS_S3_USE_ARN_REGION",BNt="s3_use_arn_region",DP;var VP=_(()=>{pf=O(zp(),1),DP={environmentVariableSelector:(t)=>pf.booleanSelector(t,ZNt,pf.SelectorType.ENV),configFileSelector:(t)=>pf.booleanSelector(t,BNt,pf.SelectorType.CONFIG),default:void 0}});var jP=()=>{};var t7=()=>{};var r7=_(()=>{qP();VP();t7();jP()});class uf{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776000||t<-9223372036854776000)throw Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let e=7,o=Math.abs(Math.round(t));e>-1&&o>0;e--,o/=256)r[e]=o;if(t<0)e7(r);return new uf(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;if(r)e7(t);return parseInt(o7.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function e7(t){for(let r=0;r<8;r++)t[r]^=255;for(let r=7;r>-1;r--)if(t[r]++,t[r]!==0)break}var o7;var zO=_(()=>{o7=O(c0(),1)});class kO{toUtf8;fromUtf8;constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let n of Object.keys(t)){let c=this.fromUtf8(n);r.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(t[n]))}let e=new Uint8Array(r.reduce((n,c)=>n+c.byteLength,0)),o=0;for(let n of r)e.set(n,o),o+=n.byteLength;return e}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let e=new DataView(new ArrayBuffer(5));return e.setUint8(0,4),e.setInt32(1,t.value,!1),new Uint8Array(e.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let n=new DataView(new ArrayBuffer(3+t.value.byteLength));n.setUint8(0,6),n.setUint16(1,t.value.byteLength,!1);let c=new Uint8Array(n.buffer);return c.set(t.value,3),c;case"string":let i=this.fromUtf8(t.value),f=new DataView(new ArrayBuffer(3+i.byteLength));f.setUint8(0,7),f.setUint16(1,i.byteLength,!1);let h=new Uint8Array(f.buffer);return h.set(i,3),h;case"timestamp":let w=new Uint8Array(9);return w[0]=8,w.set(uf.fromNumber(t.value.valueOf()).bytes,1),w;case"uuid":if(!ENt.test(t.value))throw Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set(Ms.fromHex(t.value.replace(/\-/g,"")),1),p}}parse(t){let r={},e=0;while(e<t.byteLength){let o=t.getUint8(e++),n=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+e,o));switch(e+=o,t.getUint8(e++)){case 0:r[n]={type:s7,value:!0};break;case 1:r[n]={type:s7,value:!1};break;case 2:r[n]={type:XNt,value:t.getInt8(e++)};break;case 3:r[n]={type:JNt,value:t.getInt16(e,!1)},e+=2;break;case 4:r[n]={type:YNt,value:t.getInt32(e,!1)},e+=4;break;case 5:r[n]={type:PNt,value:new uf(new Uint8Array(t.buffer,t.byteOffset+e,8))},e+=8;break;case 6:let c=t.getUint16(e,!1);e+=2,r[n]={type:gNt,value:new Uint8Array(t.buffer,t.byteOffset+e,c)},e+=c;break;case 7:let i=t.getUint16(e,!1);e+=2,r[n]={type:CNt,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+e,i))},e+=i;break;case 8:r[n]={type:QNt,value:new Date(new uf(new Uint8Array(t.buffer,t.byteOffset+e,8)).valueOf())},e+=8;break;case 9:let f=new Uint8Array(t.buffer,t.byteOffset+e,16);e+=16,r[n]={type:KNt,value:`${Ms.toHex(f.subarray(0,4))}-${Ms.toHex(f.subarray(4,6))}-${Ms.toHex(f.subarray(6,8))}-${Ms.toHex(f.subarray(8,10))}-${Ms.toHex(f.subarray(10))}`};break;default:throw Error("Unrecognized header type tag")}}return r}}var Ms,n7,s7="boolean",XNt="byte",JNt="short",YNt="integer",PNt="long",gNt="binary",CNt="string",QNt="timestamp",KNt="uuid",ENt;var WO=_(()=>{zO();Ms=O(c0(),1);(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(n7||(n7={}));ENt=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/});function i7({byteLength:t,byteOffset:r,buffer:e}){if(t<xNt)throw Error("Provided message too short to accommodate event stream message overhead");let o=new DataView(e,r,t),n=o.getUint32(0,!1);if(t!==n)throw Error("Reported message length does not match received message length");let c=o.getUint32(c7,!1),i=o.getUint32(zs,!1),f=o.getUint32(t-Uc,!1),h=new fc().update(new Uint8Array(e,r,zs));if(i!==h.digest())throw Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${h.digest()})`);if(h.update(new Uint8Array(e,r+zs,t-(zs+Uc))),f!==h.digest())throw Error(`The message checksum (${h.digest()}) did not match the expected value of ${f}`);return{headers:new DataView(e,r+zs+Uc,c),body:new Uint8Array(e,r+zs+Uc+c,n-c-(zs+Uc+Uc))}}var c7=4,zs,Uc=4,xNt;var f7=_(()=>{l0();zs=c7*2,xNt=zs+Uc*2});class ZO{headerMarshaller;messageBuffer;isEndOfStream;constructor(t,r){this.headerMarshaller=new kO(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let e=this.headerMarshaller.format(t),o=e.byteLength+r.byteLength+16,n=new Uint8Array(o),c=new DataView(n.buffer,n.byteOffset,n.byteLength),i=new fc;return c.setUint32(0,o,!1),c.setUint32(4,e.byteLength,!1),c.setUint32(8,i.update(n.subarray(0,8)).digest(),!1),n.set(e,12),n.set(r,e.byteLength+12),c.setUint32(o-4,i.update(n.subarray(8,o-4)).digest(),!1),n}decode(t){let{headers:r,body:e}=i7(t);return{headers:this.headerMarshaller.parse(r),body:e}}formatHeaders(t){return this.headerMarshaller.format(t)}}var h7=_(()=>{l0();WO();f7()});var w7=()=>{};var BO;var p7=_(()=>{BO=class BO{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}}});var XO;var u7=_(()=>{XO=class XO{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);if(this.options.includeEndFrame)yield new Uint8Array(0)}}});var JO;var d7=_(()=>{JO=class JO{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);if(r===void 0)continue;yield r}}}});var YO;var y7=_(()=>{YO=class YO{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}}});var A7=_(()=>{h7();WO();zO();w7();p7();u7();d7();y7()});function S7(t){let r=0,e=0,o=null,n=null,c=(f)=>{if(typeof f!=="number")throw Error("Attempted to allocate an event message where size was not a number: "+f);r=f,e=4,o=new Uint8Array(f),new DataView(o.buffer).setUint32(0,f,!1)},i=async function*(){let f=t[Symbol.asyncIterator]();while(!0){let{value:h,done:w}=await f.next();if(w){if(!r)return;else if(r===e)yield o;else throw Error("Truncated event message received.");return}let p=h.length,u=0;while(u<p){if(!o){let y=p-u;if(!n)n=new Uint8Array(4);let R=Math.min(4-e,y);if(n.set(h.slice(u,u+R),e),e+=R,u+=R,e<4)break;c(new DataView(n.buffer).getUint32(0,!1)),n=null}let d=Math.min(r-e,p-u);if(o.set(h.slice(u,u+d),e),e+=d,u+=d,r&&r===e)yield o,o=null,r=0,e=0}}};return{[Symbol.asyncIterator]:i}}function _7(t,r){return async function(e){let{value:o}=e.headers[":message-type"];if(o==="error"){let n=Error(e.headers[":error-message"].value||"UnknownError");throw n.name=e.headers[":error-code"].value,n}else if(o==="exception"){let n=e.headers[":exception-type"].value,c={[n]:e},i=await t(c);if(i.$unknown){let f=Error(r(e.body));throw f.name=n,f}throw i[n]}else if(o==="event"){let n={[e.headers[":event-type"].value]:e},c=await t(n);if(c.$unknown)return;return c}else throw Error(`Unrecognizable event type: ${e.headers[":event-type"].value}`)}}class PO{eventStreamCodec;utfEncoder;constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new ZO(t,r),this.utfEncoder=t}deserialize(t,r){let e=S7(t);return new JO({messageStream:new BO({inputStream:e,decoder:this.eventStreamCodec}),deserializer:_7(r,this.utfEncoder)})}serialize(t,r){return new XO({messageStream:new YO({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}}var $7=_(()=>{A7()});var O7=()=>{};var R7=_(()=>{$7();O7()});async function*I7(t){let r=!1,e=!1,o=[];t.on("error",(n)=>{if(!r)r=!0;if(n)throw n}),t.on("data",(n)=>{o.push(n)}),t.on("end",()=>{r=!0});while(!e){let n=await new Promise((c)=>setTimeout(()=>c(o.shift()),0));if(n)yield n;e=r&&o.length===0}}import{Readable as qNt}from"stream";class gO{universalMarshaller;constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new PO({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let e=typeof t[Symbol.asyncIterator]==="function"?t:I7(t);return this.universalMarshaller.deserialize(e,r)}serialize(t,r){return qNt.from(this.universalMarshaller.serialize(t,r))}}var CO=_(()=>{R7()});var T7=(t)=>new gO(t);var N7=_(()=>{CO()});var m7=_(()=>{CO();N7()});import{Writable as DNt}from"stream";var a7,QO;var U7=_(()=>{a7=O(ue(),1);QO=class QO extends DNt{hash;constructor(t,r){super(r);this.hash=t}_write(t,r,e){try{this.hash.update(a7.toUint8Array(t))}catch(o){return e(o)}e()}}});var H7=()=>{};var b7=(t,r)=>{if(r.readableFlowing!==null)throw Error("Unable to calculate hash for flowing readable stream");let e=new t,o=new QO(e);return r.pipe(o),new Promise((n,c)=>{r.on("error",(i)=>{o.end(),c(i)}),o.on("error",c),o.on("finish",()=>{e.digest().then(n).catch(c)})})};var l7=_(()=>{U7()});var F7=_(()=>{H7();l7()});var P1,L7,G7,v7,g1,C1,Q1,M7=(t)=>{return{apiVersion:"2006-03-01",base64Decoder:t?.base64Decoder??g1.fromBase64,base64Encoder:t?.base64Encoder??g1.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??ru,extensions:t?.extensions??[],getAwsChunkedEncodingStream:t?.getAwsChunkedEncodingStream??C1.getAwsChunkedEncodingStream,httpAuthSchemeProvider:t?.httpAuthSchemeProvider??iM,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:(r)=>r.getIdentityProvider("aws.auth#sigv4"),signer:new P1.AwsSdkSigV4Signer},{schemeId:"aws.auth#sigv4a",identityProvider:(r)=>r.getIdentityProvider("aws.auth#sigv4a"),signer:new P1.AwsSdkSigV4ASigner}],logger:t?.logger??new G7.NoOpLogger,protocol:t?.protocol??L7.AwsRestXmlProtocol,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.s3",xmlNamespace:"http://s3.amazonaws.com/doc/2006-03-01/",version:"2006-03-01",serviceTarget:"AmazonS3"},sdkStreamMixin:t?.sdkStreamMixin??C1.sdkStreamMixin,serviceId:t?.serviceId??"S3",signerConstructor:t?.signerConstructor??yc,signingEscapePath:t?.signingEscapePath??!1,urlParser:t?.urlParser??v7.parseUrl,useArnRegion:t?.useArnRegion??void 0,utf8Decoder:t?.utf8Decoder??Q1.fromUtf8,utf8Encoder:t?.utf8Encoder??Q1.toUtf8}};var z7=_(()=>{qp();M3();v3();P1=O(Vr(),1),L7=O(Ei(),1),G7=O(z(),1),v7=O(Mn(),1),g1=O(Ke(),1),C1=O(js(),1),Q1=O(ue(),1)});var df,E1,ks,K1,x1,To,q1,D1,k7,W7,Z7,B7=(t)=>{D1.emitWarningIfUnsupportedVersion(process.version);let r=W7.resolveDefaultsModeConfig(t),e=()=>r().then(D1.loadConfigsForDefaultMode),o=M7(t);df.emitWarningIfUnsupportedVersion(process.version);let n={profile:t?.profile,logger:o.logger};return{...o,...t,runtime:"node",defaultsMode:r,authSchemePreference:t?.authSchemePreference??To.loadConfig(df.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:t?.bodyLengthChecker??k7.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??KP,defaultUserAgentProvider:t?.defaultUserAgentProvider??E1.createDefaultUserAgentProvider({serviceId:o.serviceId,clientVersion:Bk.version}),disableS3ExpressSessionAuth:t?.disableS3ExpressSessionAuth??To.loadConfig(v_,n),eventStreamSerdeProvider:t?.eventStreamSerdeProvider??T7,maxAttempts:t?.maxAttempts??To.loadConfig(x1.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),md5:t?.md5??K1.Hash.bind(null,"md5"),region:t?.region??To.loadConfig(ks.NODE_REGION_CONFIG_OPTIONS,{...ks.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestChecksumCalculation:t?.requestChecksumCalculation??To.loadConfig(Ba,n),requestHandler:q1.NodeHttpHandler.create(t?.requestHandler??e),responseChecksumValidation:t?.responseChecksumValidation??To.loadConfig(Ja,n),retryMode:t?.retryMode??To.loadConfig({...x1.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await e()).retryMode||Z7.DEFAULT_RETRY_MODE},t),sha1:t?.sha1??K1.Hash.bind(null,"sha1"),sha256:t?.sha256??K1.Hash.bind(null,"sha256"),sigv4aSigningRegionSet:t?.sigv4aSigningRegionSet??To.loadConfig(df.NODE_SIGV4A_CONFIG_OPTIONS,n),streamCollector:t?.streamCollector??q1.streamCollector,streamHasher:t?.streamHasher??b7,useArnRegion:t?.useArnRegion??To.loadConfig(DP,n),useDualstackEndpoint:t?.useDualstackEndpoint??To.loadConfig(ks.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:t?.useFipsEndpoint??To.loadConfig(ks.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:t?.userAgentAppId??To.loadConfig(E1.NODE_APP_ID_CONFIG_OPTIONS,n)}};var X7=_(()=>{Zk();xP();r7();Et();st();m7();F7();z7();df=O(Vr(),1),E1=O(Yi(),1),ks=O(co(),1),K1=O(Pi(),1),x1=O(qo(),1),To=O(xo(),1),q1=O(os(),1),D1=O(z(),1),k7=O(gi(),1),W7=O(Ci(),1),Z7=O(dc(),1)});var J7=(t)=>{let{httpAuthSchemes:r,httpAuthSchemeProvider:e,credentials:o}=t;return{setHttpAuthScheme(n){let c=r.findIndex((i)=>i.schemeId===n.schemeId);if(c===-1)r.push(n);else r.splice(c,1,n)},httpAuthSchemes(){return r},setHttpAuthSchemeProvider(n){e=n},httpAuthSchemeProvider(){return e},setCredentials(n){o=n},credentials(){return o}}},Y7=(t)=>{return{httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}};var V1,j1,td,P7=(t,r)=>{let e=Object.assign(V1.getAwsRegionExtensionConfiguration(t),td.getDefaultExtensionConfiguration(t),j1.getHttpHandlerExtensionConfiguration(t),J7(t));return r.forEach((o)=>o.configure(e)),Object.assign(t,V1.resolveAwsRegionExtensionConfiguration(e),td.resolveDefaultRuntimeConfig(e),j1.resolveHttpHandlerRuntimeConfig(e),Y7(e))};var g7=_(()=>{V1=O(_c(),1),j1=O(tr(),1),td=O(z(),1)});var rd,C7,Q7,ed,K7,yf,E7,x7,q7,od,D7,No;var Hc=_(()=>{Wa();Et();st();ZL();M3();Ou();g();X7();g7();rd=O(Ui(),1),C7=O(Hi(),1),Q7=O(bi(),1),ed=O(wc(),1),K7=O(co(),1),yf=O(Kr(),1),E7=O(so(),1),x7=O(Li(),1),q7=O(X(),1),od=O(qo(),1),D7=O(z(),1);No=class No extends D7.Client{config;constructor(...[t]){let r=B7(t||{});super(r);this.initConfig=r;let e=hM(r),o=ed.resolveUserAgentConfig(e),n=oF(o),c=od.resolveRetryConfig(n),i=K7.resolveRegionConfig(c),f=rd.resolveHostHeaderConfig(i),h=q7.resolveEndpointConfig(f),w=WL(h),p=fM(w),u=gF(p,{session:[()=>this,K0]}),d=P7(u,t?.extensions||[]);this.config=d,this.middlewareStack.use(E7.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(ed.getUserAgentPlugin(this.config)),this.middlewareStack.use(od.getRetryPlugin(this.config)),this.middlewareStack.use(x7.getContentLengthPlugin(this.config)),this.middlewareStack.use(rd.getHostHeaderPlugin(this.config)),this.middlewareStack.use(C7.getLoggerPlugin(this.config)),this.middlewareStack.use(Q7.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(yf.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:nM,identityProviderConfigProvider:async(y)=>new yf.DefaultIdentityProviderConfig({"aws.auth#sigv4":y.credentials,"aws.auth#sigv4a":y.credentials})})),this.middlewareStack.use(yf.getHttpSigningPlugin(this.config)),this.middlewareStack.use(VF(this.config)),this.middlewareStack.use(ka(this.config)),this.middlewareStack.use(RF(this.config)),this.middlewareStack.use(M_(this.config)),this.middlewareStack.use(z_(this.config))}destroy(){super.destroy()}}});var V7,j7,KO;var EO=_(()=>{st();g();C();V7=O(X(),1),j7=O(z(),1);KO=class KO extends j7.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[V7.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","AbortMultipartUpload",{}).n("S3Client","AbortMultipartUploadCommand").sc(ZM).build(){}});function VNt(t){return(r)=>async(e)=>{let o={...e.input},n=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let c of n){let i=o[c.target];if(i){let f;if(typeof i==="string")if(tmt(i,t))f=t.base64Decoder(i);else f=t.utf8Decoder(i),o[c.target]=t.base64Encoder(f);else f=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i),o[c.target]=t.base64Encoder(f);let h=new t.md5;h.update(f),o[c.hash]=t.base64Encoder(await h.digest())}}return r({...e,input:o})}}function tmt(t,r){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))return!1;try{return r.base64Decoder(t).length===32}catch{return!1}}var jNt,Yr=(t)=>({applyToStack:(r)=>{r.add(VNt(t),jNt)}});var Bo=_(()=>{jNt={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0}});var tg,rg,xO;var qO=_(()=>{st();Bo();g();C();tg=O(X(),1),rg=O(z(),1);xO=class xO extends rg.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[tg.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e),Yr(e)]}).s("AmazonS3","CompleteMultipartUpload",{}).n("S3Client","CompleteMultipartUploadCommand").sc(BM).build(){}});var eg,og,DO;var VO=_(()=>{st();Bo();g();C();eg=O(X(),1),og=O(z(),1);DO=class DO extends og.Command.classBuilder().ep({...H,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"},CopySource:{type:"contextParams",name:"CopySource"}}).m(function(t,r,e,o){return[eg.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e),Yr(e)]}).s("AmazonS3","CopyObject",{}).n("S3Client","CopyObjectCommand").sc(XM).build(){}});function rmt(t){return(r)=>async(e)=>{let{CreateBucketConfiguration:o}=e.input,n=await t.region();if(!o?.LocationConstraint&&!o?.Location){if(n!=="us-east-1")e.input.CreateBucketConfiguration=e.input.CreateBucketConfiguration??{},e.input.CreateBucketConfiguration.LocationConstraint=n}return r(e)}}var emt,ng=(t)=>({applyToStack:(r)=>{r.add(rmt(t),emt)}});var sg=_(()=>{emt={step:"initialize",tags:["LOCATION_CONSTRAINT","CREATE_BUCKET_CONFIGURATION"],name:"locationConstraintMiddleware",override:!0}});var cg,ig,jO;var t4=_(()=>{sg();st();g();C();cg=O(X(),1),ig=O(z(),1);jO=class jO extends ig.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},DisableAccessPoints:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[cg.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e),ng(e)]}).s("AmazonS3","CreateBucket",{}).n("S3Client","CreateBucketCommand").sc(JM).build(){}});var fg,hg,r4;var e4=_(()=>{Et();g();C();fg=O(X(),1),hg=O(z(),1);r4=class r4 extends hg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[fg.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","CreateBucketMetadataConfiguration",{}).n("S3Client","CreateBucketMetadataConfigurationCommand").sc(YM).build(){}});var wg,pg,o4;var n4=_(()=>{Et();g();C();wg=O(X(),1),pg=O(z(),1);o4=class o4 extends pg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[wg.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","CreateBucketMetadataTableConfiguration",{}).n("S3Client","CreateBucketMetadataTableConfigurationCommand").sc(PM).build(){}});var ug,dg,s4;var c4=_(()=>{st();Bo();g();C();ug=O(X(),1),dg=O(z(),1);s4=class s4 extends dg.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[ug.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e),Yr(e)]}).s("AmazonS3","CreateMultipartUpload",{}).n("S3Client","CreateMultipartUploadCommand").sc(gM).build(){}});var yg,Ag,i4;var f4=_(()=>{g();C();yg=O(X(),1),Ag=O(z(),1);i4=class i4 extends Ag.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[yg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketAnalyticsConfiguration",{}).n("S3Client","DeleteBucketAnalyticsConfigurationCommand").sc(KM).build(){}});var Sg,_g,h4;var w4=_(()=>{g();C();Sg=O(X(),1),_g=O(z(),1);h4=class h4 extends _g.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Sg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucket",{}).n("S3Client","DeleteBucketCommand").sc(QM).build(){}});var $g,Og,p4;var u4=_(()=>{g();C();$g=O(X(),1),Og=O(z(),1);p4=class p4 extends Og.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[$g.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketCors",{}).n("S3Client","DeleteBucketCorsCommand").sc(EM).build(){}});var Rg,Ig,d4;var y4=_(()=>{g();C();Rg=O(X(),1),Ig=O(z(),1);d4=class d4 extends Ig.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Rg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketEncryption",{}).n("S3Client","DeleteBucketEncryptionCommand").sc(xM).build(){}});var Tg,Ng,A4;var S4=_(()=>{g();C();Tg=O(X(),1),Ng=O(z(),1);A4=class A4 extends Ng.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Tg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketIntelligentTieringConfiguration",{}).n("S3Client","DeleteBucketIntelligentTieringConfigurationCommand").sc(qM).build(){}});var mg,ag,_4;var $4=_(()=>{g();C();mg=O(X(),1),ag=O(z(),1);_4=class _4 extends ag.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[mg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketInventoryConfiguration",{}).n("S3Client","DeleteBucketInventoryConfigurationCommand").sc(DM).build(){}});var Ug,Hg,O4;var R4=_(()=>{g();C();Ug=O(X(),1),Hg=O(z(),1);O4=class O4 extends Hg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Ug.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketLifecycle",{}).n("S3Client","DeleteBucketLifecycleCommand").sc(VM).build(){}});var bg,lg,I4;var T4=_(()=>{g();C();bg=O(X(),1),lg=O(z(),1);I4=class I4 extends lg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[bg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketMetadataConfiguration",{}).n("S3Client","DeleteBucketMetadataConfigurationCommand").sc(jM).build(){}});var Fg,Lg,N4;var m4=_(()=>{g();C();Fg=O(X(),1),Lg=O(z(),1);N4=class N4 extends Lg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Fg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketMetadataTableConfiguration",{}).n("S3Client","DeleteBucketMetadataTableConfigurationCommand").sc(tz).build(){}});var Gg,vg,a4;var U4=_(()=>{g();C();Gg=O(X(),1),vg=O(z(),1);a4=class a4 extends vg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Gg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketMetricsConfiguration",{}).n("S3Client","DeleteBucketMetricsConfigurationCommand").sc(rz).build(){}});var Mg,zg,H4;var b4=_(()=>{g();C();Mg=O(X(),1),zg=O(z(),1);H4=class H4 extends zg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Mg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketOwnershipControls",{}).n("S3Client","DeleteBucketOwnershipControlsCommand").sc(ez).build(){}});var kg,Wg,l4;var F4=_(()=>{g();C();kg=O(X(),1),Wg=O(z(),1);l4=class l4 extends Wg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[kg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketPolicy",{}).n("S3Client","DeleteBucketPolicyCommand").sc(oz).build(){}});var Zg,Bg,L4;var G4=_(()=>{g();C();Zg=O(X(),1),Bg=O(z(),1);L4=class L4 extends Bg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Zg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketReplication",{}).n("S3Client","DeleteBucketReplicationCommand").sc(nz).build(){}});var Xg,Jg,v4;var M4=_(()=>{g();C();Xg=O(X(),1),Jg=O(z(),1);v4=class v4 extends Jg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Xg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketTagging",{}).n("S3Client","DeleteBucketTaggingCommand").sc(sz).build(){}});var Yg,Pg,z4;var k4=_(()=>{g();C();Yg=O(X(),1),Pg=O(z(),1);z4=class z4 extends Pg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Yg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteBucketWebsite",{}).n("S3Client","DeleteBucketWebsiteCommand").sc(cz).build(){}});var gg,Cg,W4;var Z4=_(()=>{st();g();C();gg=O(X(),1),Cg=O(z(),1);W4=class W4 extends Cg.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[gg.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","DeleteObject",{}).n("S3Client","DeleteObjectCommand").sc(iz).build(){}});var Qg,Kg,B4;var X4=_(()=>{Et();st();g();C();Qg=O(X(),1),Kg=O(z(),1);B4=class B4 extends Kg.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Qg.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),Z(e)]}).s("AmazonS3","DeleteObjects",{}).n("S3Client","DeleteObjectsCommand").sc(fz).build(){}});var Eg,xg,J4;var Y4=_(()=>{st();g();C();Eg=O(X(),1),xg=O(z(),1);J4=class J4 extends xg.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Eg.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","DeleteObjectTagging",{}).n("S3Client","DeleteObjectTaggingCommand").sc(hz).build(){}});var qg,Dg,P4;var g4=_(()=>{g();C();qg=O(X(),1),Dg=O(z(),1);P4=class P4 extends Dg.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[qg.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeletePublicAccessBlock",{}).n("S3Client","DeletePublicAccessBlockCommand").sc(wz).build(){}});var Vg,jg,C4;var Q4=_(()=>{st();g();C();Vg=O(X(),1),jg=O(z(),1);C4=class C4 extends jg.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[Vg.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketAbac",{}).n("S3Client","GetBucketAbacCommand").sc(pz).build(){}});var tC,rC,K4;var E4=_(()=>{st();g();C();tC=O(X(),1),rC=O(z(),1);K4=class K4 extends rC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[tC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketAccelerateConfiguration",{}).n("S3Client","GetBucketAccelerateConfigurationCommand").sc(uz).build(){}});var eC,oC,x4;var q4=_(()=>{st();g();C();eC=O(X(),1),oC=O(z(),1);x4=class x4 extends oC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[eC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketAcl",{}).n("S3Client","GetBucketAclCommand").sc(dz).build(){}});var nC,sC,D4;var V4=_(()=>{st();g();C();nC=O(X(),1),sC=O(z(),1);D4=class D4 extends sC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[nC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketAnalyticsConfiguration",{}).n("S3Client","GetBucketAnalyticsConfigurationCommand").sc(yz).build(){}});var cC,iC,j4;var tR=_(()=>{st();g();C();cC=O(X(),1),iC=O(z(),1);j4=class j4 extends iC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[cC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketCors",{}).n("S3Client","GetBucketCorsCommand").sc(Az).build(){}});var fC,hC,rR;var eR=_(()=>{st();g();C();fC=O(X(),1),hC=O(z(),1);rR=class rR extends hC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[fC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketEncryption",{}).n("S3Client","GetBucketEncryptionCommand").sc(Sz).build(){}});var wC,pC,oR;var nR=_(()=>{st();g();C();wC=O(X(),1),pC=O(z(),1);oR=class oR extends pC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[wC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketIntelligentTieringConfiguration",{}).n("S3Client","GetBucketIntelligentTieringConfigurationCommand").sc(_z).build(){}});var uC,dC,sR;var cR=_(()=>{st();g();C();uC=O(X(),1),dC=O(z(),1);sR=class sR extends dC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[uC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketInventoryConfiguration",{}).n("S3Client","GetBucketInventoryConfigurationCommand").sc($z).build(){}});var yC,AC,iR;var fR=_(()=>{st();g();C();yC=O(X(),1),AC=O(z(),1);iR=class iR extends AC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[yC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketLifecycleConfiguration",{}).n("S3Client","GetBucketLifecycleConfigurationCommand").sc(Oz).build(){}});var SC,_C,hR;var wR=_(()=>{st();g();C();SC=O(X(),1),_C=O(z(),1);hR=class hR extends _C.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[SC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketLocation",{}).n("S3Client","GetBucketLocationCommand").sc(Rz).build(){}});var $C,OC,pR;var uR=_(()=>{st();g();C();$C=O(X(),1),OC=O(z(),1);pR=class pR extends OC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[$C.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketLogging",{}).n("S3Client","GetBucketLoggingCommand").sc(Iz).build(){}});var RC,IC,dR;var yR=_(()=>{st();g();C();RC=O(X(),1),IC=O(z(),1);dR=class dR extends IC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[RC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketMetadataConfiguration",{}).n("S3Client","GetBucketMetadataConfigurationCommand").sc(Tz).build(){}});var TC,NC,AR;var SR=_(()=>{st();g();C();TC=O(X(),1),NC=O(z(),1);AR=class AR extends NC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[TC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketMetadataTableConfiguration",{}).n("S3Client","GetBucketMetadataTableConfigurationCommand").sc(Nz).build(){}});var mC,aC,_R;var $R=_(()=>{st();g();C();mC=O(X(),1),aC=O(z(),1);_R=class _R extends aC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[mC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketMetricsConfiguration",{}).n("S3Client","GetBucketMetricsConfigurationCommand").sc(mz).build(){}});var UC,HC,OR;var RR=_(()=>{st();g();C();UC=O(X(),1),HC=O(z(),1);OR=class OR extends HC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[UC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketNotificationConfiguration",{}).n("S3Client","GetBucketNotificationConfigurationCommand").sc(az).build(){}});var bC,lC,IR;var TR=_(()=>{st();g();C();bC=O(X(),1),lC=O(z(),1);IR=class IR extends lC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[bC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketOwnershipControls",{}).n("S3Client","GetBucketOwnershipControlsCommand").sc(Uz).build(){}});var FC,LC,NR;var mR=_(()=>{st();g();C();FC=O(X(),1),LC=O(z(),1);NR=class NR extends LC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[FC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketPolicy",{}).n("S3Client","GetBucketPolicyCommand").sc(Hz).build(){}});var GC,vC,aR;var UR=_(()=>{st();g();C();GC=O(X(),1),vC=O(z(),1);aR=class aR extends vC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[GC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketPolicyStatus",{}).n("S3Client","GetBucketPolicyStatusCommand").sc(bz).build(){}});var MC,zC,HR;var bR=_(()=>{st();g();C();MC=O(X(),1),zC=O(z(),1);HR=class HR extends zC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[MC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketReplication",{}).n("S3Client","GetBucketReplicationCommand").sc(lz).build(){}});var kC,WC,lR;var FR=_(()=>{st();g();C();kC=O(X(),1),WC=O(z(),1);lR=class lR extends WC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[kC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketRequestPayment",{}).n("S3Client","GetBucketRequestPaymentCommand").sc(Fz).build(){}});var ZC,BC,LR;var GR=_(()=>{st();g();C();ZC=O(X(),1),BC=O(z(),1);LR=class LR extends BC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[ZC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketTagging",{}).n("S3Client","GetBucketTaggingCommand").sc(Lz).build(){}});var XC,JC,vR;var MR=_(()=>{st();g();C();XC=O(X(),1),JC=O(z(),1);vR=class vR extends JC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[XC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketVersioning",{}).n("S3Client","GetBucketVersioningCommand").sc(Gz).build(){}});var YC,PC,zR;var kR=_(()=>{st();g();C();YC=O(X(),1),PC=O(z(),1);zR=class zR extends PC.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[YC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetBucketWebsite",{}).n("S3Client","GetBucketWebsiteCommand").sc(vz).build(){}});var gC,CC,WR;var ZR=_(()=>{st();g();C();gC=O(X(),1),CC=O(z(),1);WR=class WR extends CC.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[gC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetObjectAcl",{}).n("S3Client","GetObjectAclCommand").sc(zz).build(){}});var QC,KC,BR;var XR=_(()=>{st();Bo();g();C();QC=O(X(),1),KC=O(z(),1);BR=class BR extends KC.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[QC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e),Yr(e)]}).s("AmazonS3","GetObjectAttributes",{}).n("S3Client","GetObjectAttributesCommand").sc(kz).build(){}});var EC,xC,hh;var JR=_(()=>{Et();st();Bo();g();C();EC=O(X(),1),xC=O(z(),1);hh=class hh extends xC.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[EC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC64NVME","CRC32","CRC32C","SHA256","SHA1"]}),Yr(e),vp(e)]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").sc(Mz).build(){}});var qC,DC,YR;var PR=_(()=>{st();g();C();qC=O(X(),1),DC=O(z(),1);YR=class YR extends DC.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[qC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetObjectLegalHold",{}).n("S3Client","GetObjectLegalHoldCommand").sc(Wz).build(){}});var VC,jC,gR;var CR=_(()=>{st();g();C();VC=O(X(),1),jC=O(z(),1);gR=class gR extends jC.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[VC.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetObjectLockConfiguration",{}).n("S3Client","GetObjectLockConfigurationCommand").sc(Zz).build(){}});var tQ,rQ,QR;var KR=_(()=>{st();g();C();tQ=O(X(),1),rQ=O(z(),1);QR=class QR extends rQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[tQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetObjectRetention",{}).n("S3Client","GetObjectRetentionCommand").sc(Bz).build(){}});var eQ,oQ,ER;var xR=_(()=>{st();g();C();eQ=O(X(),1),oQ=O(z(),1);ER=class ER extends oQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[eQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetObjectTagging",{}).n("S3Client","GetObjectTaggingCommand").sc(Xz).build(){}});var nQ,sQ,qR;var DR=_(()=>{g();C();nQ=O(X(),1),sQ=O(z(),1);qR=class qR extends sQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[nQ.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","GetObjectTorrent",{}).n("S3Client","GetObjectTorrentCommand").sc(Jz).build(){}});var cQ,iQ,VR;var jR=_(()=>{st();g();C();cQ=O(X(),1),iQ=O(z(),1);VR=class VR extends iQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[cQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","GetPublicAccessBlock",{}).n("S3Client","GetPublicAccessBlockCommand").sc(Yz).build(){}});var fQ,hQ,tI;var rI=_(()=>{st();g();C();fQ=O(X(),1),hQ=O(z(),1);tI=class tI extends hQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[fQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","HeadBucket",{}).n("S3Client","HeadBucketCommand").sc(Pz).build(){}});var wQ,pQ,eI;var oI=_(()=>{st();Bo();g();C();wQ=O(X(),1),pQ=O(z(),1);eI=class eI extends pQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[wQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e),Yr(e),vp(e)]}).s("AmazonS3","HeadObject",{}).n("S3Client","HeadObjectCommand").sc(gz).build(){}});var uQ,dQ,nI;var sI=_(()=>{st();g();C();uQ=O(X(),1),dQ=O(z(),1);nI=class nI extends dQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[uQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListBucketAnalyticsConfigurations",{}).n("S3Client","ListBucketAnalyticsConfigurationsCommand").sc(Cz).build(){}});var yQ,AQ,cI;var iI=_(()=>{st();g();C();yQ=O(X(),1),AQ=O(z(),1);cI=class cI extends AQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[yQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListBucketIntelligentTieringConfigurations",{}).n("S3Client","ListBucketIntelligentTieringConfigurationsCommand").sc(Qz).build(){}});var SQ,_Q,fI;var hI=_(()=>{st();g();C();SQ=O(X(),1),_Q=O(z(),1);fI=class fI extends _Q.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[SQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListBucketInventoryConfigurations",{}).n("S3Client","ListBucketInventoryConfigurationsCommand").sc(Kz).build(){}});var $Q,OQ,wI;var pI=_(()=>{st();g();C();$Q=O(X(),1),OQ=O(z(),1);wI=class wI extends OQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[$Q.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListBucketMetricsConfigurations",{}).n("S3Client","ListBucketMetricsConfigurationsCommand").sc(Ez).build(){}});var RQ,IQ,wh;var nd=_(()=>{st();g();C();RQ=O(X(),1),IQ=O(z(),1);wh=class wh extends IQ.Command.classBuilder().ep(H).m(function(t,r,e,o){return[RQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListBuckets",{}).n("S3Client","ListBucketsCommand").sc(xz).build(){}});var TQ,NQ,ph;var sd=_(()=>{st();g();C();TQ=O(X(),1),NQ=O(z(),1);ph=class ph extends NQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0}}).m(function(t,r,e,o){return[TQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListDirectoryBuckets",{}).n("S3Client","ListDirectoryBucketsCommand").sc(qz).build(){}});var mQ,aQ,uI;var dI=_(()=>{st();g();C();mQ=O(X(),1),aQ=O(z(),1);uI=class uI extends aQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,e,o){return[mQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListMultipartUploads",{}).n("S3Client","ListMultipartUploadsCommand").sc(Dz).build(){}});var UQ,HQ,yI;var AI=_(()=>{st();g();C();UQ=O(X(),1),HQ=O(z(),1);yI=class yI extends HQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,e,o){return[UQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListObjects",{}).n("S3Client","ListObjectsCommand").sc(Vz).build(){}});var bQ,lQ,Ws;var cd=_(()=>{st();g();C();bQ=O(X(),1),lQ=O(z(),1);Ws=class Ws extends lQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,e,o){return[bQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListObjectsV2",{}).n("S3Client","ListObjectsV2Command").sc(jz).build(){}});var FQ,LQ,SI;var _I=_(()=>{st();g();C();FQ=O(X(),1),LQ=O(z(),1);SI=class SI extends LQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,e,o){return[FQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","ListObjectVersions",{}).n("S3Client","ListObjectVersionsCommand").sc(tk).build(){}});var GQ,vQ,uh;var id=_(()=>{st();Bo();g();C();GQ=O(X(),1),vQ=O(z(),1);uh=class uh extends vQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[GQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e),Yr(e)]}).s("AmazonS3","ListParts",{}).n("S3Client","ListPartsCommand").sc(rk).build(){}});var MQ,zQ,$I;var OI=_(()=>{Et();g();C();MQ=O(X(),1),zQ=O(z(),1);$I=class $I extends zQ.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[MQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1})]}).s("AmazonS3","PutBucketAbac",{}).n("S3Client","PutBucketAbacCommand").sc(ek).build(){}});var kQ,WQ,RI;var II=_(()=>{Et();g();C();kQ=O(X(),1),WQ=O(z(),1);RI=class RI extends WQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[kQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1})]}).s("AmazonS3","PutBucketAccelerateConfiguration",{}).n("S3Client","PutBucketAccelerateConfigurationCommand").sc(ok).build(){}});var ZQ,BQ,TI;var NI=_(()=>{Et();g();C();ZQ=O(X(),1),BQ=O(z(),1);TI=class TI extends BQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[ZQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketAcl",{}).n("S3Client","PutBucketAclCommand").sc(nk).build(){}});var XQ,JQ,mI;var aI=_(()=>{g();C();XQ=O(X(),1),JQ=O(z(),1);mI=class mI extends JQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[XQ.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketAnalyticsConfiguration",{}).n("S3Client","PutBucketAnalyticsConfigurationCommand").sc(sk).build(){}});var YQ,PQ,UI;var HI=_(()=>{Et();g();C();YQ=O(X(),1),PQ=O(z(),1);UI=class UI extends PQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[YQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketCors",{}).n("S3Client","PutBucketCorsCommand").sc(ck).build(){}});var gQ,CQ,bI;var lI=_(()=>{Et();g();C();gQ=O(X(),1),CQ=O(z(),1);bI=class bI extends CQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[gQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketEncryption",{}).n("S3Client","PutBucketEncryptionCommand").sc(ik).build(){}});var QQ,KQ,FI;var LI=_(()=>{g();C();QQ=O(X(),1),KQ=O(z(),1);FI=class FI extends KQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[QQ.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketIntelligentTieringConfiguration",{}).n("S3Client","PutBucketIntelligentTieringConfigurationCommand").sc(fk).build(){}});var EQ,xQ,GI;var vI=_(()=>{g();C();EQ=O(X(),1),xQ=O(z(),1);GI=class GI extends xQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[EQ.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketInventoryConfiguration",{}).n("S3Client","PutBucketInventoryConfigurationCommand").sc(hk).build(){}});var qQ,DQ,MI;var zI=_(()=>{Et();st();g();C();qQ=O(X(),1),DQ=O(z(),1);MI=class MI extends DQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[qQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),Z(e)]}).s("AmazonS3","PutBucketLifecycleConfiguration",{}).n("S3Client","PutBucketLifecycleConfigurationCommand").sc(wk).build(){}});var VQ,jQ,kI;var WI=_(()=>{Et();g();C();VQ=O(X(),1),jQ=O(z(),1);kI=class kI extends jQ.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[VQ.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketLogging",{}).n("S3Client","PutBucketLoggingCommand").sc(pk).build(){}});var tK,rK,ZI;var BI=_(()=>{g();C();tK=O(X(),1),rK=O(z(),1);ZI=class ZI extends rK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[tK.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketMetricsConfiguration",{}).n("S3Client","PutBucketMetricsConfigurationCommand").sc(uk).build(){}});var eK,oK,XI;var JI=_(()=>{g();C();eK=O(X(),1),oK=O(z(),1);XI=class XI extends oK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[eK.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","PutBucketNotificationConfiguration",{}).n("S3Client","PutBucketNotificationConfigurationCommand").sc(dk).build(){}});var nK,sK,YI;var PI=_(()=>{Et();g();C();nK=O(X(),1),sK=O(z(),1);YI=class YI extends sK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[nK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketOwnershipControls",{}).n("S3Client","PutBucketOwnershipControlsCommand").sc(yk).build(){}});var cK,iK,gI;var CI=_(()=>{Et();g();C();cK=O(X(),1),iK=O(z(),1);gI=class gI extends iK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[cK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketPolicy",{}).n("S3Client","PutBucketPolicyCommand").sc(Ak).build(){}});var fK,hK,QI;var KI=_(()=>{Et();g();C();fK=O(X(),1),hK=O(z(),1);QI=class QI extends hK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[fK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketReplication",{}).n("S3Client","PutBucketReplicationCommand").sc(Sk).build(){}});var wK,pK,EI;var xI=_(()=>{Et();g();C();wK=O(X(),1),pK=O(z(),1);EI=class EI extends pK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[wK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketRequestPayment",{}).n("S3Client","PutBucketRequestPaymentCommand").sc(_k).build(){}});var uK,dK,qI;var DI=_(()=>{Et();g();C();uK=O(X(),1),dK=O(z(),1);qI=class qI extends dK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[uK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketTagging",{}).n("S3Client","PutBucketTaggingCommand").sc($k).build(){}});var yK,AK,VI;var jI=_(()=>{Et();g();C();yK=O(X(),1),AK=O(z(),1);VI=class VI extends AK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[yK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketVersioning",{}).n("S3Client","PutBucketVersioningCommand").sc(Ok).build(){}});var SK,_K,tT;var rT=_(()=>{Et();g();C();SK=O(X(),1),_K=O(z(),1);tT=class tT extends _K.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[SK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutBucketWebsite",{}).n("S3Client","PutBucketWebsiteCommand").sc(Rk).build(){}});var $K,OK,eT;var oT=_(()=>{Et();st();g();C();$K=O(X(),1),OK=O(z(),1);eT=class eT extends OK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[$K.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),Z(e)]}).s("AmazonS3","PutObjectAcl",{}).n("S3Client","PutObjectAclCommand").sc(Tk).build(){}});var RK,IK,nT;var sT=_(()=>{Et();st();Bo();g();C();RK=O(X(),1),IK=O(z(),1);nT=class nT extends IK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[RK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),SF(e),Z(e),Yr(e)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").sc(Ik).build(){}});var TK,NK,cT;var iT=_(()=>{Et();st();g();C();TK=O(X(),1),NK=O(z(),1);cT=class cT extends NK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[TK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),Z(e)]}).s("AmazonS3","PutObjectLegalHold",{}).n("S3Client","PutObjectLegalHoldCommand").sc(Nk).build(){}});var mK,aK,fT;var hT=_(()=>{Et();st();g();C();mK=O(X(),1),aK=O(z(),1);fT=class fT extends aK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[mK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),Z(e)]}).s("AmazonS3","PutObjectLockConfiguration",{}).n("S3Client","PutObjectLockConfigurationCommand").sc(mk).build(){}});var UK,HK,wT;var pT=_(()=>{Et();st();g();C();UK=O(X(),1),HK=O(z(),1);wT=class wT extends HK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[UK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),Z(e)]}).s("AmazonS3","PutObjectRetention",{}).n("S3Client","PutObjectRetentionCommand").sc(ak).build(){}});var bK,lK,uT;var dT=_(()=>{Et();st();g();C();bK=O(X(),1),lK=O(z(),1);uT=class uT extends lK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[bK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),Z(e)]}).s("AmazonS3","PutObjectTagging",{}).n("S3Client","PutObjectTaggingCommand").sc(Uk).build(){}});var FK,LK,yT;var AT=_(()=>{Et();g();C();FK=O(X(),1),LK=O(z(),1);yT=class yT extends LK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[FK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","PutPublicAccessBlock",{}).n("S3Client","PutPublicAccessBlockCommand").sc(Hk).build(){}});var GK,vK,ST;var _T=_(()=>{st();g();C();GK=O(X(),1),vK=O(z(),1);ST=class ST extends vK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[GK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e)]}).s("AmazonS3","RenameObject",{}).n("S3Client","RenameObjectCommand").sc(bk).build(){}});var MK,zK,$T;var OT=_(()=>{Et();st();g();C();MK=O(X(),1),zK=O(z(),1);$T=class $T extends zK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[MK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),Z(e)]}).s("AmazonS3","RestoreObject",{}).n("S3Client","RestoreObjectCommand").sc(lk).build(){}});var kK,WK,RT;var IT=_(()=>{st();Bo();g();C();kK=O(X(),1),WK=O(z(),1);RT=class RT extends WK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[kK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e),Yr(e)]}).s("AmazonS3","SelectObjectContent",{eventStream:{output:!0}}).n("S3Client","SelectObjectContentCommand").sc(Fk).build(){}});var ZK,BK,TT;var NT=_(()=>{Et();g();C();ZK=O(X(),1),BK=O(z(),1);TT=class TT extends BK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[ZK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","UpdateBucketMetadataInventoryTableConfiguration",{}).n("S3Client","UpdateBucketMetadataInventoryTableConfigurationCommand").sc(Lk).build(){}});var XK,JK,mT;var aT=_(()=>{Et();g();C();XK=O(X(),1),JK=O(z(),1);mT=class mT extends JK.Command.classBuilder().ep({...H,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[XK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0})]}).s("AmazonS3","UpdateBucketMetadataJournalTableConfiguration",{}).n("S3Client","UpdateBucketMetadataJournalTableConfigurationCommand").sc(Gk).build(){}});var YK,PK,UT;var HT=_(()=>{Et();st();Bo();g();C();YK=O(X(),1),PK=O(z(),1);UT=class UT extends PK.Command.classBuilder().ep({...H,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,e,o){return[YK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),dt(e,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),Z(e),Yr(e)]}).s("AmazonS3","UploadPart",{}).n("S3Client","UploadPartCommand").sc(vk).build(){}});var gK,CK,bT;var lT=_(()=>{st();Bo();g();C();gK=O(X(),1),CK=O(z(),1);bT=class bT extends CK.Command.classBuilder().ep({...H,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,e,o){return[gK.getEndpointPlugin(e,t.getEndpointParameterInstructions()),Z(e),Yr(e)]}).s("AmazonS3","UploadPartCopy",{}).n("S3Client","UploadPartCopyCommand").sc(Mk).build(){}});var QK,KK,FT;var LT=_(()=>{g();C();QK=O(X(),1),KK=O(z(),1);FT=class FT extends KK.Command.classBuilder().ep({...H,UseObjectLambdaEndpoint:{type:"staticContextParams",value:!0}}).m(function(t,r,e,o){return[QK.getEndpointPlugin(e,t.getEndpointParameterInstructions())]}).s("AmazonS3","WriteGetObjectResponse",{}).n("S3Client","WriteGetObjectResponseCommand").sc(zk).build(){}});var EK,omt,xK;var qK=_(()=>{EO();qO();VO();t4();e4();n4();c4();Ou();f4();w4();u4();y4();S4();$4();R4();T4();m4();U4();b4();F4();G4();M4();k4();Z4();X4();Y4();g4();Q4();E4();q4();V4();tR();eR();nR();cR();fR();wR();uR();yR();SR();$R();RR();TR();mR();UR();bR();FR();GR();MR();kR();ZR();XR();JR();PR();CR();KR();xR();DR();jR();rI();oI();sI();iI();hI();pI();nd();sd();dI();AI();cd();_I();id();OI();II();NI();aI();HI();lI();LI();vI();zI();WI();BI();JI();PI();CI();KI();xI();DI();jI();rT();oT();sT();iT();hT();pT();dT();AT();_T();OT();IT();NT();aT();HT();lT();LT();Hc();EK=O(z(),1),omt={AbortMultipartUploadCommand:KO,CompleteMultipartUploadCommand:xO,CopyObjectCommand:DO,CreateBucketCommand:jO,CreateBucketMetadataConfigurationCommand:r4,CreateBucketMetadataTableConfigurationCommand:o4,CreateMultipartUploadCommand:s4,CreateSessionCommand:K0,DeleteBucketCommand:h4,DeleteBucketAnalyticsConfigurationCommand:i4,DeleteBucketCorsCommand:p4,DeleteBucketEncryptionCommand:d4,DeleteBucketIntelligentTieringConfigurationCommand:A4,DeleteBucketInventoryConfigurationCommand:_4,DeleteBucketLifecycleCommand:O4,DeleteBucketMetadataConfigurationCommand:I4,DeleteBucketMetadataTableConfigurationCommand:N4,DeleteBucketMetricsConfigurationCommand:a4,DeleteBucketOwnershipControlsCommand:H4,DeleteBucketPolicyCommand:l4,DeleteBucketReplicationCommand:L4,DeleteBucketTaggingCommand:v4,DeleteBucketWebsiteCommand:z4,DeleteObjectCommand:W4,DeleteObjectsCommand:B4,DeleteObjectTaggingCommand:J4,DeletePublicAccessBlockCommand:P4,GetBucketAbacCommand:C4,GetBucketAccelerateConfigurationCommand:K4,GetBucketAclCommand:x4,GetBucketAnalyticsConfigurationCommand:D4,GetBucketCorsCommand:j4,GetBucketEncryptionCommand:rR,GetBucketIntelligentTieringConfigurationCommand:oR,GetBucketInventoryConfigurationCommand:sR,GetBucketLifecycleConfigurationCommand:iR,GetBucketLocationCommand:hR,GetBucketLoggingCommand:pR,GetBucketMetadataConfigurationCommand:dR,GetBucketMetadataTableConfigurationCommand:AR,GetBucketMetricsConfigurationCommand:_R,GetBucketNotificationConfigurationCommand:OR,GetBucketOwnershipControlsCommand:IR,GetBucketPolicyCommand:NR,GetBucketPolicyStatusCommand:aR,GetBucketReplicationCommand:HR,GetBucketRequestPaymentCommand:lR,GetBucketTaggingCommand:LR,GetBucketVersioningCommand:vR,GetBucketWebsiteCommand:zR,GetObjectCommand:hh,GetObjectAclCommand:WR,GetObjectAttributesCommand:BR,GetObjectLegalHoldCommand:YR,GetObjectLockConfigurationCommand:gR,GetObjectRetentionCommand:QR,GetObjectTaggingCommand:ER,GetObjectTorrentCommand:qR,GetPublicAccessBlockCommand:VR,HeadBucketCommand:tI,HeadObjectCommand:eI,ListBucketAnalyticsConfigurationsCommand:nI,ListBucketIntelligentTieringConfigurationsCommand:cI,ListBucketInventoryConfigurationsCommand:fI,ListBucketMetricsConfigurationsCommand:wI,ListBucketsCommand:wh,ListDirectoryBucketsCommand:ph,ListMultipartUploadsCommand:uI,ListObjectsCommand:yI,ListObjectsV2Command:Ws,ListObjectVersionsCommand:SI,ListPartsCommand:uh,PutBucketAbacCommand:$I,PutBucketAccelerateConfigurationCommand:RI,PutBucketAclCommand:TI,PutBucketAnalyticsConfigurationCommand:mI,PutBucketCorsCommand:UI,PutBucketEncryptionCommand:bI,PutBucketIntelligentTieringConfigurationCommand:FI,PutBucketInventoryConfigurationCommand:GI,PutBucketLifecycleConfigurationCommand:MI,PutBucketLoggingCommand:kI,PutBucketMetricsConfigurationCommand:ZI,PutBucketNotificationConfigurationCommand:XI,PutBucketOwnershipControlsCommand:YI,PutBucketPolicyCommand:gI,PutBucketReplicationCommand:QI,PutBucketRequestPaymentCommand:EI,PutBucketTaggingCommand:qI,PutBucketVersioningCommand:VI,PutBucketWebsiteCommand:tT,PutObjectCommand:nT,PutObjectAclCommand:eT,PutObjectLegalHoldCommand:cT,PutObjectLockConfigurationCommand:fT,PutObjectRetentionCommand:wT,PutObjectTaggingCommand:uT,PutPublicAccessBlockCommand:yT,RenameObjectCommand:ST,RestoreObjectCommand:$T,SelectObjectContentCommand:RT,UpdateBucketMetadataInventoryTableConfigurationCommand:TT,UpdateBucketMetadataJournalTableConfigurationCommand:mT,UploadPartCommand:UT,UploadPartCopyCommand:bT,WriteGetObjectResponseCommand:FT};xK=class xK extends No{};EK.createAggregatedClient(omt,xK)});var DK=_(()=>{EO();qO();VO();t4();e4();n4();c4();Ou();f4();w4();u4();y4();S4();$4();R4();T4();m4();U4();b4();F4();G4();M4();k4();Z4();Y4();X4();g4();Q4();E4();q4();V4();tR();eR();nR();cR();fR();wR();uR();yR();SR();$R();RR();TR();mR();UR();bR();FR();GR();MR();kR();ZR();XR();JR();PR();CR();KR();xR();DR();jR();rI();oI();sI();iI();hI();pI();nd();sd();dI();_I();AI();cd();id();OI();II();NI();aI();HI();lI();LI();vI();zI();WI();BI();JI();PI();CI();KI();xI();DI();jI();rT();oT();sT();iT();hT();pT();dT();AT();_T();OT();IT();NT();aT();HT();lT();LT()});var VK=()=>{};var jK,jsr;var tE=_(()=>{nd();Hc();jK=O(Kr(),1),jsr=jK.createPaginator(No,wh,"ContinuationToken","ContinuationToken","MaxBuckets")});var rE,ocr;var eE=_(()=>{sd();Hc();rE=O(Kr(),1),ocr=rE.createPaginator(No,ph,"ContinuationToken","ContinuationToken","MaxDirectoryBuckets")});var oE,icr;var nE=_(()=>{cd();Hc();oE=O(Kr(),1),icr=oE.createPaginator(No,Ws,"ContinuationToken","NextContinuationToken","MaxKeys")});var sE,pcr;var cE=_(()=>{id();Hc();sE=O(Kr(),1),pcr=sE.createPaginator(No,uh,"PartNumberMarker","NextPartNumberMarker","MaxParts")});var iE=_(()=>{VK();tE();eE();nE();cE()});var fE=()=>{};var hE=()=>{};var wE=()=>{};var pE=()=>{};var uE=_(()=>{fE();hE();wE();pE()});var dE=()=>{};var yE=()=>{};var AE=()=>{};var GT=_(()=>{Hc();qK();DK();C();iE();uE();dE();k3();yE();AE()});function _E(t){let{port:r,query:e}=t,{protocol:o,path:n,hostname:c}=t;if(o&&o.slice(-1)!==":")o+=":";if(r)c+=`:${r}`;if(n&&n.charAt(0)!=="/")n=`/${n}`;let i=e?SE.buildQueryString(e):"";if(i&&i[0]!=="?")i=`?${i}`;let f="";if(t.username!=null||t.password!=null){let w=t.username??"",p=t.password??"";f=`${w}:${p}@`}let h="";if(t.fragment)h=`#${t.fragment}`;return`${o}//${f}${c}${n}${i}${h}`}var SE;var $E=_(()=>{SE=O(Yw(),1)});var OE="UNSIGNED-PAYLOAD",RE="X-Amz-Content-Sha256";class fd{signer;constructor(t){let r={service:t.signingName||t.service||"s3",uriEscapePath:t.uriEscapePath||!1,applyChecksum:t.applyChecksum||!1,...t};this.signer=new yc(r)}presign(t,{unsignableHeaders:r=new Set,hoistableHeaders:e=new Set,unhoistableHeaders:o=new Set,...n}={}){return this.prepareRequest(t,{unsignableHeaders:r,unhoistableHeaders:o,hoistableHeaders:e}),this.signer.presign(t,{expiresIn:900,unsignableHeaders:r,unhoistableHeaders:o,...n})}presignWithCredentials(t,r,{unsignableHeaders:e=new Set,hoistableHeaders:o=new Set,unhoistableHeaders:n=new Set,...c}={}){return this.prepareRequest(t,{unsignableHeaders:e,unhoistableHeaders:n,hoistableHeaders:o}),this.signer.presignWithCredentials(t,r,{expiresIn:900,unsignableHeaders:e,unhoistableHeaders:n,...c})}prepareRequest(t,{unsignableHeaders:r=new Set,unhoistableHeaders:e=new Set,hoistableHeaders:o=new Set}={}){r.add("content-type"),Object.keys(t.headers).map((f)=>f.toLowerCase()).filter((f)=>f.startsWith("x-amz-server-side-encryption")).forEach((f)=>{if(!o.has(f))e.add(f)}),t.headers[RE]=OE;let n=t.headers.host,c=t.port,i=`${t.hostname}${t.port!=null?":"+c:""}`;if(!n||n===t.hostname&&t.port!=null)t.headers.host=i}}var vT=_(()=>{qp()});var IE,TE,NE=async(t,r,e={})=>{let o,n;if(typeof t.config.endpointProvider==="function"){let d=(await IE.getEndpointFromInstructions(r.input,r.constructor,t.config)).properties?.authSchemes?.[0];if(d?.name==="sigv4a")n=d?.signingRegionSet?.join(",");else n=d?.signingRegion;o=new fd({...t.config,signingName:d?.signingName,region:async()=>n})}else o=new fd(t.config);let c=(u,d)=>async(y)=>{let{request:R}=y;if(!TE.HttpRequest.isInstance(R))throw Error("Request to be presigned is not an valid HTTP request.");delete R.headers["amz-sdk-invocation-id"],delete R.headers["amz-sdk-request"],delete R.headers["x-amz-user-agent"];let S,T={...e,signingRegion:e.signingRegion??d.signing_region??n,signingService:e.signingService??d.signing_service};if(d.s3ExpressIdentity)S=await o.presignWithCredentials(R,d.s3ExpressIdentity,T);else S=await o.presign(R,T);return{response:{},output:{$metadata:{httpStatusCode:200},presigned:S}}},i="presignInterceptMiddleware",f=t.middlewareStack.clone();f.addRelativeTo(c,{name:i,relation:"before",toMiddleware:"awsAuthMiddleware",override:!0});let h=r.resolveMiddleware(f,t.config,{}),{output:w}=await h({input:r.input}),{presigned:p}=w;return _E(p)};var mE=_(()=>{$E();vT();IE=O(X(),1),TE=O(tr(),1)});var aE=_(()=>{mE();vT()});var UE={};wo(UE,{signS3Key:()=>Xo,s3Client:()=>dh,S3_CONFIG:()=>Zs});async function Xo(t){if(!t)return null;try{let r=t;if(t.startsWith("http")){let o=new URL(t);r=decodeURIComponent(o.pathname.substring(1))}if(r.includes("%%"))r=r.replace(/%%/g,"%25");let e=new hh({Bucket:Zs.bucket,Key:r});return await NE(dh,e,{expiresIn:3600})}catch(r){return console.error(`Error signing URL for ${t}:`,r),null}}var Zs,dh;var Af=_(()=>{GT();aE();Zs={region:"sfo3",endpoint:"https://sfo3.digitaloceanspaces.com",credentials:{accessKeyId:"DO00N8MHEPAM98V3JXAG",secretAccessKey:"QiBWGdSZkzoEbnBzFHss/VLnMTJb7wLyJC1towj0Kpw"},bucket:"whitelabel-only"},dh=new No({region:Zs.region,endpoint:Zs.endpoint,credentials:Zs.credentials,forcePathStyle:!1})});var _d=(t,r,e)=>{return(o,n)=>{let c=-1;return i(0);async function i(f){if(f<=c)throw Error("next() called multiple times");c=f;let h,w=!1,p;if(t[f])p=t[f][0][0],o.req.routeIndex=f;else p=f===t.length&&n||void 0;if(p)try{h=await p(o,()=>i(f+1))}catch(u){if(u instanceof Error&&r)o.error=u,h=await r(u,o),w=!0;else throw u}else if(o.finalized===!1&&e)h=await e(o);if(h&&(o.finalized===!1||w))o.res=h;return o}}};var gT=Symbol();var CT=async(t,r=Object.create(null))=>{let{all:e=!1,dot:o=!1}=r,c=(t instanceof mh?t.raw.headers:t.headers).get("Content-Type");if(c?.startsWith("multipart/form-data")||c?.startsWith("application/x-www-form-urlencoded"))return Dx(t,{all:e,dot:o});return{}};async function Dx(t,r){let e=await t.formData();if(e)return Vx(e,r);return{}}function Vx(t,r){let e=Object.create(null);if(t.forEach((o,n)=>{if(!(r.all||n.endsWith("[]")))e[n]=o;else jx(e,n,o)}),r.dot)Object.entries(e).forEach(([o,n])=>{if(o.includes("."))tq(e,o,n),delete e[o]});return e}var jx=(t,r,e)=>{if(t[r]!==void 0)if(Array.isArray(t[r]))t[r].push(e);else t[r]=[t[r],e];else if(!r.endsWith("[]"))t[r]=e;else t[r]=[e]},tq=(t,r,e)=>{let o=t,n=r.split(".");n.forEach((c,i)=>{if(i===n.length-1)o[c]=e;else{if(!o[c]||typeof o[c]!=="object"||Array.isArray(o[c])||o[c]instanceof File)o[c]=Object.create(null);o=o[c]}})};var Od=(t)=>{let r=t.split("/");if(r[0]==="")r.shift();return r},QT=(t)=>{let{groups:r,path:e}=rq(t),o=Od(e);return eq(o,r)},rq=(t)=>{let r=[];return t=t.replace(/\{[^}]+\}/g,(e,o)=>{let n=`@${o}`;return r.push([n,e]),n}),{groups:r,path:t}},eq=(t,r)=>{for(let e=r.length-1;e>=0;e--){let[o]=r[e];for(let n=t.length-1;n>=0;n--)if(t[n].includes(o)){t[n]=t[n].replace(o,r[e][1]);break}}return t},ah={},KT=(t,r)=>{if(t==="*")return"*";let e=t.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(e){let o=`${t}#${r}`;if(!ah[o])if(e[2])ah[o]=r&&r[0]!==":"&&r[0]!=="*"?[o,e[1],new RegExp(`^${e[2]}(?=/${r})`)]:[t,e[1],new RegExp(`^${e[2]}$`)];else ah[o]=[t,e[1],!0];return ah[o]}return null},Gc=(t,r)=>{try{return r(t)}catch{return t.replace(/(?:%[0-9A-Fa-f]{2})+/g,(e)=>{try{return r(e)}catch{return e}})}},oq=(t)=>Gc(t,decodeURI),Rd=(t)=>{let r=t.url,e=r.indexOf("/",r.indexOf(":")+4),o=e;for(;o<r.length;o++){let n=r.charCodeAt(o);if(n===37){let c=r.indexOf("?",o),i=r.slice(e,c===-1?void 0:c);return oq(i.includes("%25")?i.replace(/%25/g,"%2525"):i)}else if(n===63)break}return r.slice(e,o)};var ET=(t)=>{let r=Rd(t);return r.length>1&&r.at(-1)==="/"?r.slice(0,-1):r},Xs=(t,r,...e)=>{if(e.length)r=Xs(r,...e);return`${t?.[0]==="/"?"":"/"}${t}${r==="/"?"":`${t?.at(-1)==="/"?"":"/"}${r?.[0]==="/"?r.slice(1):r}`}`},Uh=(t)=>{if(t.charCodeAt(t.length-1)!==63||!t.includes(":"))return null;let r=t.split("/"),e=[],o="";return r.forEach((n)=>{if(n!==""&&!/\:/.test(n))o+="/"+n;else if(/\:/.test(n))if(/\?/.test(n)){if(e.length===0&&o==="")e.push("/");else e.push(o);let c=n.replace("?","");o+="/"+c,e.push(o)}else o+="/"+n}),e.filter((n,c,i)=>i.indexOf(n)===c)},$d=(t)=>{if(!/[%+]/.test(t))return t;if(t.indexOf("+")!==-1)t=t.replace(/\+/g," ");return t.indexOf("%")!==-1?Gc(t,If):t},xT=(t,r,e)=>{let o;if(!e&&r&&!/[%+]/.test(r)){let i=t.indexOf("?",8);if(i===-1)return;if(!t.startsWith(r,i+1))i=t.indexOf(`&${r}`,i+1);while(i!==-1){let f=t.charCodeAt(i+r.length+1);if(f===61){let h=i+r.length+2,w=t.indexOf("&",h);return $d(t.slice(h,w===-1?void 0:w))}else if(f==38||isNaN(f))return"";i=t.indexOf(`&${r}`,i+1)}if(o=/[%+]/.test(t),!o)return}let n={};o??=/[%+]/.test(t);let c=t.indexOf("?",8);while(c!==-1){let i=t.indexOf("&",c+1),f=t.indexOf("=",c);if(f>i&&i!==-1)f=-1;let h=t.slice(c+1,f===-1?i===-1?void 0:i:f);if(o)h=$d(h);if(c=i,h==="")continue;let w;if(f===-1)w="";else if(w=t.slice(f+1,i===-1?void 0:i),o)w=$d(w);if(e){if(!(n[h]&&Array.isArray(n[h])))n[h]=[];n[h].push(w)}else n[h]??=w}return r?n[r]:n},qT=xT,DT=(t,r)=>{return xT(t,r,!0)},If=decodeURIComponent;var VT=(t)=>Gc(t,If),mh=class{raw;#t;#r;routeIndex=0;path;bodyCache={};constructor(t,r="/",e=[[]]){this.raw=t,this.path=r,this.#r=e,this.#t={}}param(t){return t?this.#e(t):this.#s()}#e(t){let r=this.#r[0][this.routeIndex][1][t],e=this.#n(r);return e&&/\%/.test(e)?VT(e):e}#s(){let t={},r=Object.keys(this.#r[0][this.routeIndex][1]);for(let e of r){let o=this.#n(this.#r[0][this.routeIndex][1][e]);if(o!==void 0)t[e]=/\%/.test(o)?VT(o):o}return t}#n(t){return this.#r[1]?this.#r[1][t]:t}query(t){return qT(this.url,t)}queries(t){return DT(this.url,t)}header(t){if(t)return this.raw.headers.get(t)??void 0;let r={};return this.raw.headers.forEach((e,o)=>{r[o]=e}),r}async parseBody(t){return this.bodyCache.parsedBody??=await CT(this,t)}#o=(t)=>{let{bodyCache:r,raw:e}=this,o=r[t];if(o)return o;let n=Object.keys(r)[0];if(n)return r[n].then((c)=>{if(n==="json")c=JSON.stringify(c);return new Response(c)[t]()});return r[t]=e[t]()};json(){return this.#o("text").then((t)=>JSON.parse(t))}text(){return this.#o("text")}arrayBuffer(){return this.#o("arrayBuffer")}blob(){return this.#o("blob")}formData(){return this.#o("formData")}addValidatedData(t,r){this.#t[t]=r}valid(t){return this.#t[t]}get url(){return this.raw.url}get method(){return this.raw.method}get[gT](){return this.#r}get matchedRoutes(){return this.#r[0].map(([[,t]])=>t)}get routePath(){return this.#r[0].map(([[,t]])=>t)[this.routeIndex].path}};var Id={Stringify:1,BeforeStream:2,Stream:3},po=(t,r)=>{let e=new String(t);return e.isEscaped=!0,e.callbacks=r,e},sq=/[&<>'"]/,Td=async(t,r)=>{let e="";r||=[];let o=await Promise.all(t);for(let n=o.length-1;;n--){if(e+=o[n],n--,n<0)break;let c=o[n];if(typeof c==="object")r.push(...c.callbacks||[]);let i=c.isEscaped;if(c=await(typeof c==="object"?c.toString():c),typeof c==="object")r.push(...c.callbacks||[]);if(c.isEscaped??i)e+=c;else{let f=[e];Qn(c,f),e=f[0]}}return po(e,r)},Qn=(t,r)=>{let e=t.search(sq);if(e===-1){r[0]+=t;return}let o,n,c=0;for(n=e;n<t.length;n++){switch(t.charCodeAt(n)){case 34:o="&quot;";break;case 39:o="&#39;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}r[0]+=t.substring(c,n)+o,c=n+1}r[0]+=t.substring(c,n)},Nd=(t)=>{let r=t.callbacks;if(!r?.length)return t;let e=[t],o={};return r.forEach((n)=>n({phase:Id.Stringify,buffer:e,context:o})),e[0]},md=async(t,r,e,o,n)=>{if(typeof t==="object"&&!(t instanceof String)){if(!(t instanceof Promise))t=t.toString();if(t instanceof Promise)t=await t}let c=t.callbacks;if(!c?.length)return Promise.resolve(t);if(n)n[0]+=t;else n=[t];let i=Promise.all(c.map((f)=>f({phase:r,buffer:n,context:o}))).then((f)=>Promise.all(f.filter(Boolean).map((h)=>md(h,r,!1,o,n))).then(()=>n[0]));if(e)return po(await i,c);else return i};var cq="text/plain; charset=UTF-8",ad=(t,r)=>{return{"Content-Type":t,...r}},jT=class{#t;#r;env={};#e;finalized=!1;error;#s;#n;#o;#w;#f;#h;#i;#p;#u;constructor(t,r){if(this.#t=t,r)this.#n=r.executionCtx,this.env=r.env,this.#h=r.notFoundHandler,this.#u=r.path,this.#p=r.matchResult}get req(){return this.#r??=new mh(this.#t,this.#u,this.#p),this.#r}get event(){if(this.#n&&"respondWith"in this.#n)return this.#n;else throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#n)return this.#n;else throw Error("This context has no ExecutionContext")}get res(){return this.#o||=new Response(null,{headers:this.#i??=new Headers})}set res(t){if(this.#o&&t){t=new Response(t.body,t);for(let[r,e]of this.#o.headers.entries()){if(r==="content-type")continue;if(r==="set-cookie"){let o=this.#o.headers.getSetCookie();t.headers.delete("set-cookie");for(let n of o)t.headers.append("set-cookie",n)}else t.headers.set(r,e)}}this.#o=t,this.finalized=!0}render=(...t)=>{return this.#f??=(r)=>this.html(r),this.#f(...t)};setLayout=(t)=>this.#w=t;getLayout=()=>this.#w;setRenderer=(t)=>{this.#f=t};header=(t,r,e)=>{if(this.finalized)this.#o=new Response(this.#o.body,this.#o);let o=this.#o?this.#o.headers:this.#i??=new Headers;if(r===void 0)o.delete(t);else if(e?.append)o.append(t,r);else o.set(t,r)};status=(t)=>{this.#s=t};set=(t,r)=>{this.#e??=new Map,this.#e.set(t,r)};get=(t)=>{return this.#e?this.#e.get(t):void 0};get var(){if(!this.#e)return{};return Object.fromEntries(this.#e)}#c(t,r,e){let o=this.#o?new Headers(this.#o.headers):this.#i??new Headers;if(typeof r==="object"&&"headers"in r){let c=r.headers instanceof Headers?r.headers:new Headers(r.headers);for(let[i,f]of c)if(i.toLowerCase()==="set-cookie")o.append(i,f);else o.set(i,f)}if(e)for(let[c,i]of Object.entries(e))if(typeof i==="string")o.set(c,i);else{o.delete(c);for(let f of i)o.append(c,f)}let n=typeof r==="number"?r:r?.status??this.#s;return new Response(t,{status:n,headers:o})}newResponse=(...t)=>this.#c(...t);body=(t,r,e)=>this.#c(t,r,e);text=(t,r,e)=>{return!this.#i&&!this.#s&&!r&&!e&&!this.finalized?new Response(t):this.#c(t,r,ad(cq,e))};json=(t,r,e)=>{return this.#c(JSON.stringify(t),r,ad("application/json",e))};html=(t,r,e)=>{let o=(n)=>this.#c(n,r,ad("text/html; charset=UTF-8",e));return typeof t==="object"?md(t,Id.Stringify,!1,{}).then(o):o(t)};redirect=(t,r)=>{let e=String(t);return this.header("Location",!/[^\x00-\xFF]/.test(e)?e:encodeURI(e)),this.newResponse(null,r??302)};notFound=()=>{return this.#h??=()=>new Response,this.#h(this)}};var pr="ALL",t6="all",r6=["get","post","put","delete","options","patch"],Hh="Can not add a route since the matcher is already built.",bh=class extends Error{};var Ud="__COMPOSED_HANDLER";var iq=(t)=>{return t.text("404 Not Found",404)},e6=(t,r)=>{if("getResponse"in t){let e=t.getResponse();return r.newResponse(e.body,e)}return console.error(t),r.text("Internal Server Error",500)},o6=class t{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#t="/";routes=[];constructor(r={}){[...r6,t6].forEach((c)=>{this[c]=(i,...f)=>{if(typeof i==="string")this.#t=i;else this.#s(c,this.#t,i);return f.forEach((h)=>{this.#s(c,this.#t,h)}),this}}),this.on=(c,i,...f)=>{for(let h of[i].flat()){this.#t=h;for(let w of[c].flat())f.map((p)=>{this.#s(w.toUpperCase(),this.#t,p)})}return this},this.use=(c,...i)=>{if(typeof c==="string")this.#t=c;else this.#t="*",i.unshift(c);return i.forEach((f)=>{this.#s(pr,this.#t,f)}),this};let{strict:o,...n}=r;Object.assign(this,n),this.getPath=o??!0?r.getPath??Rd:ET}#r(){let r=new t({router:this.router,getPath:this.getPath});return r.errorHandler=this.errorHandler,r.#e=this.#e,r.routes=this.routes,r}#e=iq;errorHandler=e6;route(r,e){let o=this.basePath(r);return e.routes.map((n)=>{let c;if(e.errorHandler===e6)c=n.handler;else c=async(i,f)=>(await _d([],e.errorHandler)(i,()=>n.handler(i,f))).res,c[Ud]=n.handler;o.#s(n.method,n.path,c)}),this}basePath(r){let e=this.#r();return e._basePath=Xs(this._basePath,r),e}onError=(r)=>{return this.errorHandler=r,this};notFound=(r)=>{return this.#e=r,this};mount(r,e,o){let n,c;if(o)if(typeof o==="function")c=o;else if(c=o.optionHandler,o.replaceRequest===!1)n=(h)=>h;else n=o.replaceRequest;let i=c?(h)=>{let w=c(h);return Array.isArray(w)?w:[w]}:(h)=>{let w=void 0;try{w=h.executionCtx}catch{}return[h.env,w]};n||=(()=>{let h=Xs(this._basePath,r),w=h==="/"?0:h.length;return(p)=>{let u=new URL(p.url);return u.pathname=u.pathname.slice(w)||"/",new Request(u,p)}})();let f=async(h,w)=>{let p=await e(n(h.req.raw),...i(h));if(p)return p;await w()};return this.#s(pr,Xs(r,"*"),f),this}#s(r,e,o){r=r.toUpperCase(),e=Xs(this._basePath,e);let n={basePath:this._basePath,path:e,method:r,handler:o};this.router.add(r,e,[o,n]),this.routes.push(n)}#n(r,e){if(r instanceof Error)return this.errorHandler(r,e);throw r}#o(r,e,o,n){if(n==="HEAD")return(async()=>new Response(null,await this.#o(r,e,o,"GET")))();let c=this.getPath(r,{env:o}),i=this.router.match(n,c),f=new jT(r,{path:c,matchResult:i,env:o,executionCtx:e,notFoundHandler:this.#e});if(i[0].length===1){let w;try{w=i[0][0][0][0](f,async()=>{f.res=await this.#e(f)})}catch(p){return this.#n(p,f)}return w instanceof Promise?w.then((p)=>p||(f.finalized?f.res:this.#e(f))).catch((p)=>this.#n(p,f)):w??this.#e(f)}let h=_d(i[0],this.errorHandler,this.#e);return(async()=>{try{let w=await h(f);if(!w.finalized)throw Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return w.res}catch(w){return this.#n(w,f)}})()}fetch=(r,...e)=>{return this.#o(r,e[1],e[0],r.method)};request=(r,e,o,n)=>{if(r instanceof Request)return this.fetch(e?new Request(r,e):r,o,n);return r=r.toString(),this.fetch(new Request(/^https?:\/\//.test(r)?r:`http://localhost${Xs("/",r)}`,e),o,n)};fire=()=>{addEventListener("fetch",(r)=>{r.respondWith(this.#o(r.request,r,void 0,r.request.method))})}};var Tf=[];function lh(t,r){let e=this.buildAllMatchers(),o=(n,c)=>{let i=e[n]||e[pr],f=i[2][c];if(f)return f;let h=c.match(i[0]);if(!h)return[[],Tf];let w=h.indexOf("",1);return[i[1][w],h]};return this.match=o,o(t,r)}var Fh="[^/]+",Nf=".*",mf="(?:|/.*)",Js=Symbol(),fq=new Set(".\\+*[^]$()");function hq(t,r){if(t.length===1)return r.length===1?t<r?-1:1:-1;if(r.length===1)return 1;if(t===Nf||t===mf)return 1;else if(r===Nf||r===mf)return-1;if(t===Fh)return 1;else if(r===Fh)return-1;return t.length===r.length?t<r?-1:1:r.length-t.length}var n6=class t{#t;#r;#e=Object.create(null);insert(r,e,o,n,c){if(r.length===0){if(this.#t!==void 0)throw Js;if(c)return;this.#t=e;return}let[i,...f]=r,h=i==="*"?f.length===0?["","",Nf]:["","",Fh]:i==="/*"?["","",mf]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),w;if(h){let p=h[1],u=h[2]||Fh;if(p&&h[2]){if(u===".*")throw Js;if(u=u.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(u))throw Js}if(w=this.#e[u],!w){if(Object.keys(this.#e).some((d)=>d!==Nf&&d!==mf))throw Js;if(c)return;if(w=this.#e[u]=new t,p!=="")w.#r=n.varIndex++}if(!c&&p!=="")o.push([p,w.#r])}else if(w=this.#e[i],!w){if(Object.keys(this.#e).some((p)=>p.length>1&&p!==Nf&&p!==mf))throw Js;if(c)return;w=this.#e[i]=new t}w.insert(f,e,o,n,c)}buildRegExpStr(){let e=Object.keys(this.#e).sort(hq).map((o)=>{let n=this.#e[o];return(typeof n.#r==="number"?`(${o})@${n.#r}`:fq.has(o)?`\\${o}`:o)+n.buildRegExpStr()});if(typeof this.#t==="number")e.unshift(`#${this.#t}`);if(e.length===0)return"";if(e.length===1)return e[0];return"(?:"+e.join("|")+")"}};var s6=class{#t={varIndex:0};#r=new n6;insert(t,r,e){let o=[],n=[];for(let i=0;;){let f=!1;if(t=t.replace(/\{[^}]+\}/g,(h)=>{let w=`@\\${i}`;return n[i]=[w,h],i++,f=!0,w}),!f)break}let c=t.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let i=n.length-1;i>=0;i--){let[f]=n[i];for(let h=c.length-1;h>=0;h--)if(c[h].indexOf(f)!==-1){c[h]=c[h].replace(f,n[i][1]);break}}return this.#r.insert(c,r,o,this.#t,e),o}buildRegExp(){let t=this.#r.buildRegExpStr();if(t==="")return[/^$/,[],[]];let r=0,e=[],o=[];return t=t.replace(/#(\d+)|@(\d+)|\.\*\$/g,(n,c,i)=>{if(c!==void 0)return e[++r]=Number(c),"$()";if(i!==void 0)return o[Number(i)]=++r,"";return""}),[new RegExp(`^${t}`),e,o]}};var wq=[/^$/,[],Object.create(null)],c6=Object.create(null);function i6(t){return c6[t]??=new RegExp(t==="*"?"":`^${t.replace(/\/\*$|([.\\+*[^\]$()])/g,(r,e)=>e?`\\${e}`:"(?:|/.*)")}$`)}function pq(){c6=Object.create(null)}function uq(t){let r=new s6,e=[];if(t.length===0)return wq;let o=t.map((w)=>[!/\*|\/:/.test(w[0]),...w]).sort(([w,p],[u,d])=>w?1:u?-1:p.length-d.length),n=Object.create(null);for(let w=0,p=-1,u=o.length;w<u;w++){let[d,y,R]=o[w];if(d)n[y]=[R.map(([T])=>[T,Object.create(null)]),Tf];else p++;let S;try{S=r.insert(y,p,d)}catch(T){throw T===Js?new bh(y):T}if(d)continue;e[p]=R.map(([T,N])=>{let G=Object.create(null);N-=1;for(;N>=0;N--){let[v,J]=S[N];G[v]=J}return[T,G]})}let[c,i,f]=r.buildRegExp();for(let w=0,p=e.length;w<p;w++)for(let u=0,d=e[w].length;u<d;u++){let y=e[w][u]?.[1];if(!y)continue;let R=Object.keys(y);for(let S=0,T=R.length;S<T;S++)y[R[S]]=f[y[R[S]]]}let h=[];for(let w in i)h[w]=e[i[w]];return[c,h,n]}function vc(t,r){if(!t)return;for(let e of Object.keys(t).sort((o,n)=>n.length-o.length))if(i6(e).test(r))return[...t[e]];return}var Lh=class{name="RegExpRouter";#t;#r;constructor(){this.#t={[pr]:Object.create(null)},this.#r={[pr]:Object.create(null)}}add(t,r,e){let o=this.#t,n=this.#r;if(!o||!n)throw Error(Hh);if(!o[t])[o,n].forEach((f)=>{f[t]=Object.create(null),Object.keys(f[pr]).forEach((h)=>{f[t][h]=[...f[pr][h]]})});if(r==="/*")r="*";let c=(r.match(/\/:/g)||[]).length;if(/\*$/.test(r)){let f=i6(r);if(t===pr)Object.keys(o).forEach((h)=>{o[h][r]||=vc(o[h],r)||vc(o[pr],r)||[]});else o[t][r]||=vc(o[t],r)||vc(o[pr],r)||[];Object.keys(o).forEach((h)=>{if(t===pr||t===h)Object.keys(o[h]).forEach((w)=>{f.test(w)&&o[h][w].push([e,c])})}),Object.keys(n).forEach((h)=>{if(t===pr||t===h)Object.keys(n[h]).forEach((w)=>f.test(w)&&n[h][w].push([e,c]))});return}let i=Uh(r)||[r];for(let f=0,h=i.length;f<h;f++){let w=i[f];Object.keys(n).forEach((p)=>{if(t===pr||t===p)n[p][w]||=[...vc(o[p],w)||vc(o[pr],w)||[]],n[p][w].push([e,c-h+f+1])})}}match=lh;buildAllMatchers(){let t=Object.create(null);return Object.keys(this.#r).concat(Object.keys(this.#t)).forEach((r)=>{t[r]||=this.#e(r)}),this.#t=this.#r=void 0,pq(),t}#e(t){let r=[],e=t===pr;if([this.#t,this.#r].forEach((o)=>{let n=o[t]?Object.keys(o[t]).map((c)=>[c,o[t][c]]):[];if(n.length!==0)e||=!0,r.push(...n);else if(t!==pr)r.push(...Object.keys(o[pr]).map((c)=>[c,o[pr][c]]))}),!e)return null;else return uq(r)}};var dq=class{name="PreparedRegExpRouter";#t;#r;constructor(t,r){this.#t=t,this.#r=r}#e(t,r){let e=this.#t[t];e[1].forEach((o)=>o&&o.push(r)),Object.values(e[2]).forEach((o)=>o[0].push(r))}#s(t,r,e,o,n){let c=this.#t[t];if(!n)c[2][r][0].push([e,{}]);else o.forEach((i)=>{if(typeof i==="number")c[1][i].push([e,n]);else c[2][i||r][0].push([e,n])})}add(t,r,e){if(!this.#t[t]){let n=this.#t[pr],c={};for(let i in n[2])c[i]=[n[2][i][0].slice(),Tf];this.#t[t]=[n[0],n[1].map((i)=>Array.isArray(i)?i.slice():0),c]}if(r==="/*"||r==="*"){let n=[e,{}];if(t===pr)for(let c in this.#t)this.#e(c,n);else this.#e(t,n);return}let o=this.#r[r];if(!o)throw Error(`Path ${r} is not registered`);for(let[n,c]of o)if(t===pr)for(let i in this.#t)this.#s(i,r,e,n,c);else this.#s(t,r,e,n,c)}buildAllMatchers(){return this.#t}match=lh};var Hd=class{name="SmartRouter";#t=[];#r=[];constructor(t){this.#t=t.routers}add(t,r,e){if(!this.#r)throw Error(Hh);this.#r.push([t,r,e])}match(t,r){if(!this.#r)throw Error("Fatal error");let e=this.#t,o=this.#r,n=e.length,c=0,i;for(;c<n;c++){let f=e[c];try{for(let h=0,w=o.length;h<w;h++)f.add(...o[h]);i=f.match(t,r)}catch(h){if(h instanceof bh)continue;throw h}this.match=f.match.bind(f),this.#t=[f],this.#r=void 0;break}if(c===n)throw Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,i}get activeRouter(){if(this.#r||this.#t.length!==1)throw Error("No active router has been determined yet.");return this.#t[0]}};var af=Object.create(null),f6=class t{#t;#r;#e;#s=0;#n=af;constructor(r,e,o){if(this.#r=o||Object.create(null),this.#t=[],r&&e){let n=Object.create(null);n[r]={handler:e,possibleKeys:[],score:0},this.#t=[n]}this.#e=[]}insert(r,e,o){this.#s=++this.#s;let n=this,c=QT(e),i=[];for(let f=0,h=c.length;f<h;f++){let w=c[f],p=c[f+1],u=KT(w,p),d=Array.isArray(u)?u[0]:w;if(d in n.#r){if(n=n.#r[d],u)i.push(u[1]);continue}if(n.#r[d]=new t,u)n.#e.push(u),i.push(u[1]);n=n.#r[d]}return n.#t.push({[r]:{handler:o,possibleKeys:i.filter((f,h,w)=>w.indexOf(f)===h),score:this.#s}}),n}#o(r,e,o,n){let c=[];for(let i=0,f=r.#t.length;i<f;i++){let h=r.#t[i],w=h[e]||h[pr],p={};if(w!==void 0){if(w.params=Object.create(null),c.push(w),o!==af||n&&n!==af)for(let u=0,d=w.possibleKeys.length;u<d;u++){let y=w.possibleKeys[u],R=p[w.score];w.params[y]=n?.[y]&&!R?n[y]:o[y]??n?.[y],p[w.score]=!0}}}return c}search(r,e){let o=[];this.#n=af;let c=[this],i=Od(e),f=[];for(let h=0,w=i.length;h<w;h++){let p=i[h],u=h===w-1,d=[];for(let y=0,R=c.length;y<R;y++){let S=c[y],T=S.#r[p];if(T)if(T.#n=S.#n,u){if(T.#r["*"])o.push(...this.#o(T.#r["*"],r,S.#n));o.push(...this.#o(T,r,S.#n))}else d.push(T);for(let N=0,G=S.#e.length;N<G;N++){let v=S.#e[N],J=S.#n===af?{}:{...S.#n};if(v==="*"){let it=S.#r["*"];if(it)o.push(...this.#o(it,r,S.#n)),it.#n=J,d.push(it);continue}let[K,D,E]=v;if(!p&&!(E instanceof RegExp))continue;let ht=S.#r[K],Rt=i.slice(h).join("/");if(E instanceof RegExp){let it=E.exec(Rt);if(it){if(J[D]=it[0],o.push(...this.#o(ht,r,S.#n,J)),Object.keys(ht.#r).length){ht.#n=J;let q=it[0].match(/\//)?.length??0;(f[q]||=[]).push(ht)}continue}}if(E===!0||E.test(p))if(J[D]=p,u){if(o.push(...this.#o(ht,r,J,S.#n)),ht.#r["*"])o.push(...this.#o(ht.#r["*"],r,J,S.#n))}else ht.#n=J,d.push(ht)}}c=d.concat(f.shift()??[])}if(o.length>1)o.sort((h,w)=>{return h.score-w.score});return[o.map(({handler:h,params:w})=>[h,w])]}};var bd=class{name="TrieRouter";#t;constructor(){this.#t=new f6}add(t,r,e){let o=Uh(r);if(o){for(let n=0,c=o.length;n<c;n++)this.#t.insert(t,o[n],e);return}this.#t.insert(t,r,e)}match(t,r){return this.#t.search(t,r)}};var $n=class extends o6{constructor(t={}){super(t);this.router=t.router??new Hd({routers:[new Lh,new bd]})}};import{stat as $q}from"fs/promises";import{join as Oq}from"path";var h6=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i;var ld=(t,r=Aq)=>{let e=/\.([a-zA-Z0-9]+?)$/,o=t.match(e);if(!o)return;let n=r[o[1]];if(n&&n.startsWith("text"))n+="; charset=utf-8";return n};var yq={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},Aq=yq;var w6=(...t)=>{let r=t.filter((n)=>n!=="").join("/");r=r.replace(/(?<=\/)\/+/g,"");let e=r.split("/"),o=[];for(let n of e)if(n===".."&&o.length>0&&o.at(-1)!=="..")o.pop();else if(n!==".")o.push(n);return o.join("/")||"."};var p6={br:".br",zstd:".zst",gzip:".gz"},Sq=Object.keys(p6),_q="index.html",u6=(t)=>{let r=t.root??"./",e=t.path,o=t.join??w6;return async(n,c)=>{if(n.finalized)return c();let i;if(t.path)i=t.path;else try{if(i=decodeURIComponent(n.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(i))throw Error()}catch{return await t.onNotFound?.(n.req.path,n),c()}let f=o(r,!e&&t.rewriteRequestPath?t.rewriteRequestPath(i):i);if(t.isDir&&await t.isDir(f))f=o(f,_q);let h=t.getContent,w=await h(f,n);if(w instanceof Response)return n.newResponse(w.body,w);if(w){let p=t.mimes&&ld(f,t.mimes)||ld(f);if(n.header("Content-Type",p||"application/octet-stream"),t.precompressed&&(!p||h6.test(p))){let u=new Set(n.req.header("Accept-Encoding")?.split(",").map((d)=>d.trim()));for(let d of Sq){if(!u.has(d))continue;let y=await h(f+p6[d],n);if(y){w=y,n.header("Content-Encoding",d),n.header("Vary","Accept-Encoding",{append:!0});break}}}return await t.onFound?.(f,n),n.body(w)}await t.onNotFound?.(f,n),await c();return}};var Fd=(t)=>{return async function(e,o){return u6({...t,getContent:async(i)=>{let f=Bun.file(i);return await f.exists()?f:null},join:Oq,isDir:async(i)=>{let f;try{f=(await $q(i)).isDirectory()}catch{}return f}})(e,o)}};var Ld="x-hono-disable-ssg",oat=(()=>{try{return new Response("SSG is disabled",{status:404,headers:{[Ld]:"true"}})}catch{return null}})();var{write:Hat}=Bun;var Iq=class{#t;constructor(t){this.#t=t,this.raw=t.raw,this.url=t.url?new URL(t.url):null,this.protocol=t.protocol??null}send(t,r){this.#t.send(t,r??{})}raw;binaryType="arraybuffer";get readyState(){return this.#t.readyState}url;protocol;close(t,r){this.#t.close(t,r)}};var d6=(t)=>{return(...r)=>{if(typeof r[0]==="function"){let[e,o]=r;return async function(c,i){let f=await e(c),h=await t(c,f,o);if(h)return h;await i()}}else{let[e,o,n]=r;return(async()=>{let c=await t(e,o,n);if(!c)throw Error("Failed to upgrade WebSocket");return c})()}}};var Gd=(t)=>("server"in t.env)?t.env.server:t.env;var Tq=d6((t,r)=>{let e=Gd(t);if(!e)throw TypeError("env has to include the 2nd argument of fetch.");if(e.upgrade(t.req.raw,{data:{events:r,url:new URL(t.req.url),protocol:t.req.url}}))return new Response(null);return});var Nq=/^[\w!#$%&'*.^`|~+-]+$/,mq=/^[ !#-:<-[\]-~]*$/,vd=(t,r)=>{if(r&&t.indexOf(r)===-1)return{};let e=t.trim().split(";"),o={};for(let n of e){n=n.trim();let c=n.indexOf("=");if(c===-1)continue;let i=n.substring(0,c).trim();if(r&&r!==i||!Nq.test(i))continue;let f=n.substring(c+1).trim();if(f.startsWith('"')&&f.endsWith('"'))f=f.slice(1,-1);if(mq.test(f)){if(o[i]=f.indexOf("%")!==-1?Gc(f,If):f,r)break}}return o};var aq=(t,r,e={})=>{let o=`${t}=${r}`;if(t.startsWith("__Secure-")&&!e.secure)throw Error("__Secure- Cookie must have Secure attributes");if(t.startsWith("__Host-")){if(!e.secure)throw Error("__Host- Cookie must have Secure attributes");if(e.path!=="/")throw Error('__Host- Cookie must have Path attributes with "/"');if(e.domain)throw Error("__Host- Cookie must not have Domain attributes")}if(e&&typeof e.maxAge==="number"&&e.maxAge>=0){if(e.maxAge>34560000)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");o+=`; Max-Age=${e.maxAge|0}`}if(e.domain&&e.prefix!=="host")o+=`; Domain=${e.domain}`;if(e.path)o+=`; Path=${e.path}`;if(e.expires){if(e.expires.getTime()-Date.now()>34560000000)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");o+=`; Expires=${e.expires.toUTCString()}`}if(e.httpOnly)o+="; HttpOnly";if(e.secure)o+="; Secure";if(e.sameSite)o+=`; SameSite=${e.sameSite.charAt(0).toUpperCase()+e.sameSite.slice(1)}`;if(e.priority)o+=`; Priority=${e.priority.charAt(0).toUpperCase()+e.priority.slice(1)}`;if(e.partitioned){if(!e.secure)throw Error("Partitioned Cookie must have Secure attributes");o+="; Partitioned"}return o},Gh=(t,r,e)=>{return r=encodeURIComponent(r),aq(t,r,e)};var Uf=(t,r,e)=>{let o=t.req.raw.headers.get("Cookie");if(typeof r==="string"){if(!o)return;let c=r;if(e==="secure")c="__Secure-"+r;else if(e==="host")c="__Host-"+r;return vd(o,c)[c]}if(!o)return{};return vd(o)};var Uq=(t,r,e)=>{let o;if(e?.prefix==="secure")o=Gh("__Secure-"+t,r,{path:"/",...e,secure:!0});else if(e?.prefix==="host")o=Gh("__Host-"+t,r,{...e,path:"/",secure:!0,domain:void 0});else o=Gh(t,r,{path:"/",...e});return o},vh=(t,r,e,o)=>{let n=Uq(r,e,o);t.header("Set-Cookie",n,{append:!0})};var Md=(t)=>{return kd(t.replace(/_|-/g,(r)=>({_:"/","-":"+"})[r]??r))},zd=(t)=>Hq(t).replace(/\/|\+/g,(r)=>({"/":"_","+":"-"})[r]??r),Hq=(t)=>{let r="",e=new Uint8Array(t);for(let o=0,n=e.length;o<n;o++)r+=String.fromCharCode(e[o]);return btoa(r)},kd=(t)=>{let r=atob(t),e=new Uint8Array(new ArrayBuffer(r.length)),o=r.length/2;for(let n=0,c=r.length-1;n<=o;n++,c--)e[n]=r.charCodeAt(n),e[c]=r.charCodeAt(c);return e};var Mc=((t)=>{return t.HS256="HS256",t.HS384="HS384",t.HS512="HS512",t.RS256="RS256",t.RS384="RS384",t.RS512="RS512",t.PS256="PS256",t.PS384="PS384",t.PS512="PS512",t.ES256="ES256",t.ES384="ES384",t.ES512="ES512",t.EdDSA="EdDSA",t})(Mc||{});var bq={deno:"Deno",bun:"Bun",workerd:"Cloudflare-Workers",node:"Node.js"},y6=()=>{let t=globalThis;if(typeof navigator<"u"&&typeof navigator.userAgent==="string"){for(let[e,o]of Object.entries(bq))if(lq(o))return e}if(typeof t?.EdgeRuntime==="string")return"edge-light";if(t?.fastly!==void 0)return"fastly";if(t?.process?.release?.name==="node")return"node";return"other"},lq=(t)=>{return navigator.userAgent.startsWith(t)};var A6=class extends Error{constructor(t){super(`${t} is not an implemented algorithm`);this.name="JwtAlgorithmNotImplemented"}},Wd=class extends Error{constructor(){super('JWT verification requires "alg" option to be specified');this.name="JwtAlgorithmRequired"}},Zd=class extends Error{constructor(t,r){super(`JWT algorithm mismatch: expected "${t}", got "${r}"`);this.name="JwtAlgorithmMismatch"}},Hf=class extends Error{constructor(t){super(`invalid JWT token: ${t}`);this.name="JwtTokenInvalid"}},S6=class extends Error{constructor(t){super(`token (${t}) is being used before it's valid`);this.name="JwtTokenNotBefore"}},_6=class extends Error{constructor(t){super(`token (${t}) expired`);this.name="JwtTokenExpired"}},$6=class extends Error{constructor(t,r){super(`Invalid "iat" claim, must be a valid number lower than "${t}" (iat: "${r}")`);this.name="JwtTokenIssuedAt"}},Mh=class extends Error{constructor(t,r){super(`expected issuer "${t}", got ${r?`"${r}"`:"none"} `);this.name="JwtTokenIssuer"}},Bd=class extends Error{constructor(t){super(`jwt header is invalid: ${JSON.stringify(t)}`);this.name="JwtHeaderInvalid"}},O6=class extends Error{constructor(t){super(`required "kid" in jwt header: ${JSON.stringify(t)}`);this.name="JwtHeaderRequiresKid"}},R6=class extends Error{constructor(t){super(`symmetric algorithm "${t}" is not allowed for JWK verification`);this.name="JwtSymmetricAlgorithmNotAllowed"}},I6=class extends Error{constructor(t,r){super(`algorithm "${t}" is not in the allowed list: [${r.join(", ")}]`);this.name="JwtAlgorithmNotAllowed"}},T6=class extends Error{constructor(t){super(`token(${t}) signature mismatched`);this.name="JwtTokenSignatureMismatched"}},N6=class extends Error{constructor(t){super(`required "aud" in jwt payload: ${JSON.stringify(t)}`);this.name="JwtPayloadRequiresAud"}},m6=class extends Error{constructor(t,r){super(`expected audience "${Array.isArray(t)?t.join(", "):t}", got "${r}"`);this.name="JwtTokenAudience"}},zc=((t)=>{return t.Encrypt="encrypt",t.Decrypt="decrypt",t.Sign="sign",t.Verify="verify",t.DeriveKey="deriveKey",t.DeriveBits="deriveBits",t.WrapKey="wrapKey",t.UnwrapKey="unwrapKey",t})(zc||{});var Kn=new TextEncoder,a6=new TextDecoder;async function H6(t,r,e){let o=l6(r),n=await Fq(t,o);return await crypto.subtle.sign(o,n,e)}async function b6(t,r,e,o){let n=l6(r),c=await Lq(t,n);return await crypto.subtle.verify(n,c,e,o)}function Xd(t){return kd(t.replace(/-+(BEGIN|END).*/g,"").replace(/\s/g,""))}async function Fq(t,r){if(!crypto.subtle||!crypto.subtle.importKey)throw Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(F6(t)){if(t.type!=="private"&&t.type!=="secret")throw Error(`unexpected key type: CryptoKey.type is ${t.type}, expected private or secret`);return t}let e=[zc.Sign];if(typeof t==="object")return await crypto.subtle.importKey("jwk",t,r,!1,e);if(t.includes("PRIVATE"))return await crypto.subtle.importKey("pkcs8",Xd(t),r,!1,e);return await crypto.subtle.importKey("raw",Kn.encode(t),r,!1,e)}async function Lq(t,r){if(!crypto.subtle||!crypto.subtle.importKey)throw Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(F6(t)){if(t.type==="public"||t.type==="secret")return t;t=await U6(t)}if(typeof t==="string"&&t.includes("PRIVATE")){let o=await crypto.subtle.importKey("pkcs8",Xd(t),r,!0,[zc.Sign]);t=await U6(o)}let e=[zc.Verify];if(typeof t==="object")return await crypto.subtle.importKey("jwk",t,r,!1,e);if(t.includes("PUBLIC"))return await crypto.subtle.importKey("spki",Xd(t),r,!1,e);return await crypto.subtle.importKey("raw",Kn.encode(t),r,!1,e)}async function U6(t){if(t.type!=="private")throw Error(`unexpected key type: ${t.type}`);if(!t.extractable)throw Error("unexpected private key is unextractable");let r=await crypto.subtle.exportKey("jwk",t),{kty:e}=r,{alg:o,e:n,n:c}=r,{crv:i,x:f,y:h}=r;return{kty:e,alg:o,e:n,n:c,crv:i,x:f,y:h,key_ops:[zc.Verify]}}function l6(t){switch(t){case"HS256":return{name:"HMAC",hash:{name:"SHA-256"}};case"HS384":return{name:"HMAC",hash:{name:"SHA-384"}};case"HS512":return{name:"HMAC",hash:{name:"SHA-512"}};case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"RS384":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"PS256":return{name:"RSA-PSS",hash:{name:"SHA-256"},saltLength:32};case"PS384":return{name:"RSA-PSS",hash:{name:"SHA-384"},saltLength:48};case"PS512":return{name:"RSA-PSS",hash:{name:"SHA-512"},saltLength:64};case"ES256":return{name:"ECDSA",hash:{name:"SHA-256"},namedCurve:"P-256"};case"ES384":return{name:"ECDSA",hash:{name:"SHA-384"},namedCurve:"P-384"};case"ES512":return{name:"ECDSA",hash:{name:"SHA-512"},namedCurve:"P-521"};case"EdDSA":return{name:"Ed25519",namedCurve:"Ed25519"};default:throw new A6(t)}}function F6(t){if(y6()==="node"&&!!crypto.webcrypto)return t instanceof crypto.webcrypto.CryptoKey;return t instanceof CryptoKey}var Jd=(t)=>zd(Kn.encode(JSON.stringify(t)).buffer).replace(/=/g,""),Gq=(t)=>zd(t).replace(/=/g,""),Yd=(t)=>JSON.parse(a6.decode(Md(t)));function L6(t){if(typeof t==="object"&&t!==null){let r=t;return"alg"in r&&Object.values(Mc).includes(r.alg)&&(!("typ"in r)||r.typ==="JWT")}return!1}var G6=async(t,r,e="HS256")=>{let o=Jd(t),n;if(typeof r==="object"&&"alg"in r)e=r.alg,n=Jd({alg:e,typ:"JWT",kid:r.kid});else n=Jd({alg:e,typ:"JWT"});let c=`${n}.${o}`,i=await H6(r,e,Kn.encode(c)),f=Gq(i);return`${c}.${f}`},Pd=async(t,r,e)=>{if(!e)throw new Wd;let{alg:o,iss:n,nbf:c=!0,exp:i=!0,iat:f=!0,aud:h}=typeof e==="string"?{alg:e}:e;if(!o)throw new Wd;let w=t.split(".");if(w.length!==3)throw new Hf(t);let{header:p,payload:u}=gd(t);if(!L6(p))throw new Bd(p);if(p.alg!==o)throw new Zd(o,p.alg);let d=Date.now()/1000|0;if(c&&u.nbf&&u.nbf>d)throw new S6(t);if(i&&u.exp&&u.exp<=d)throw new _6(t);if(f&&u.iat&&d<u.iat)throw new $6(d,u.iat);if(n){if(!u.iss)throw new Mh(n,null);if(typeof n==="string"&&u.iss!==n)throw new Mh(n,u.iss);if(n instanceof RegExp&&!n.test(u.iss))throw new Mh(n,u.iss)}if(h){if(!u.aud)throw new N6(u);if(!(Array.isArray(u.aud)?u.aud:[u.aud]).some((N)=>h instanceof RegExp?h.test(N):typeof h==="string"?N===h:Array.isArray(h)&&h.includes(N)))throw new m6(h,u.aud)}let y=t.substring(0,t.lastIndexOf("."));if(!await b6(r,o,Md(w[2]),Kn.encode(y)))throw new T6(t);return u},vq=[Mc.HS256,Mc.HS384,Mc.HS512],v6=async(t,r,e)=>{let o=r.verification||{},n=Mq(t);if(!L6(n))throw new Bd(n);if(!n.kid)throw new O6(n);if(vq.includes(n.alg))throw new R6(n.alg);if(!r.allowedAlgorithms.includes(n.alg))throw new I6(n.alg,r.allowedAlgorithms);if(r.jwks_uri){let i=await fetch(r.jwks_uri,e);if(!i.ok)throw Error(`failed to fetch JWKS from ${r.jwks_uri}`);let f=await i.json();if(!f.keys)throw Error('invalid JWKS response. "keys" field is missing');if(!Array.isArray(f.keys))throw Error('invalid JWKS response. "keys" field is not an array');if(r.keys)r.keys.push(...f.keys);else r.keys=f.keys}else if(!r.keys)throw Error('verifyWithJwks requires options for either "keys" or "jwks_uri" or both');let c=r.keys.find((i)=>i.kid===n.kid);if(!c)throw new Hf(t);if(c.alg&&c.alg!==n.alg)throw new Zd(c.alg,n.alg);return await Pd(t,c,{alg:n.alg,...o})},gd=(t)=>{try{let[r,e]=t.split("."),o=Yd(r),n=Yd(e);return{header:o,payload:n}}catch{throw new Hf(t)}},Mq=(t)=>{try{let[r]=t.split(".");return Yd(r)}catch{throw new Hf(t)}};var bf={sign:G6,verify:Pd,decode:gd,verifyWithJwks:v6};var zq=bf.verifyWithJwks,lf=bf.verify,kq=bf.decode,zh=bf.sign;var kh=Symbol("RENDERER"),M6=Symbol("ERROR_HANDLER");var z6=Symbol("INTERNAL");var Ff=Symbol("PERMALINK");var Cd=(t)=>{return t[z6]=!0,t};var k6=(t)=>({value:r,children:e})=>{if(!e)return;let o={children:[{tag:Cd(()=>{t.push(r)}),props:{}}]};if(Array.isArray(e))o.children.push(...e.flat());else o.children.push(e);o.children.push({tag:Cd(()=>{t.pop()}),props:{}});let n={tag:"",props:o,type:""};return n[M6]=(c)=>{throw t.pop(),c},n};var Lf=[],W6=(t)=>{let r=[t],e=(o)=>{r.push(o.value);let n;try{n=o.children?(Array.isArray(o.children)?new Qd("",{},o.children):o.children).toString():""}finally{r.pop()}if(n instanceof Promise)return n.then((c)=>po(c,c.callbacks));else return po(n)};return e.values=r,e.Provider=e,e[kh]=k6(r),Lf.push(e),e},kc=(t)=>{return t.values.at(-1)};var Z6={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},Kd={},B6="data-precedence";var zf={};wo(zf,{title:()=>Wq,style:()=>Bq,script:()=>Zq,meta:()=>Jq,link:()=>Xq,input:()=>Pq,form:()=>Yq,button:()=>gq});var Gf=(t)=>Array.isArray(t)?t:[t];var X6=new WeakMap,J6=(t,r,e,o)=>({buffer:n,context:c})=>{if(!n)return;let i=X6.get(c)||{};X6.set(c,i);let f=i[t]||=[],h=!1,w=Z6[t];if(w.length>0)t:for(let[,p]of f)for(let u of w)if((p?.[u]??null)===e?.[u]){h=!0;break t}if(h)n[0]=n[0].replaceAll(r,"");else if(w.length>0)f.push([r,e,o]);else f.unshift([r,e,o]);if(n[0].indexOf("</head>")!==-1){let p;if(o===void 0)p=f.map(([u])=>u);else{let u=[];p=f.map(([d,,y])=>{let R=u.indexOf(y);if(R===-1)u.push(y),R=u.length-1;return[d,R]}).sort((d,y)=>d[1]-y[1]).map(([d])=>d)}p.forEach((u)=>{n[0]=n[0].replaceAll(u,"")}),n[0]=n[0].replace(/(?=<\/head>)/,p.join(""))}},vf=(t,r,e)=>po(new ao(t,e,Gf(r??[])).toString()),Mf=(t,r,e,o)=>{if("itemProp"in e)return vf(t,r,e);let{precedence:n,blocking:c,...i}=e;if(n=o?n??"":void 0,o)i[B6]=n;let f=new ao(t,i,Gf(r||[])).toString();if(f instanceof Promise)return f.then((h)=>po(f,[...h.callbacks||[],J6(t,h,i,n)]));else return po(f,[J6(t,f,i,n)])},Wq=({children:t,...r})=>{let e=Wh();if(e){let o=kc(e);if(o==="svg"||o==="head")return new ao("title",r,Gf(t??[]))}return Mf("title",t,r,!1)},Zq=({children:t,...r})=>{let e=Wh();if(["src","async"].some((o)=>!r[o])||e&&kc(e)==="head")return vf("script",t,r);return Mf("script",t,r,!1)},Bq=({children:t,...r})=>{if(!["href","precedence"].every((e)=>(e in r)))return vf("style",t,r);return r["data-href"]=r.href,delete r.href,Mf("style",t,r,!0)},Xq=({children:t,...r})=>{if(["onLoad","onError"].some((e)=>(e in r))||r.rel==="stylesheet"&&(!("precedence"in r)||("disabled"in r)))return vf("link",t,r);return Mf("link",t,r,"precedence"in r)},Jq=({children:t,...r})=>{let e=Wh();if(e&&kc(e)==="head")return vf("meta",t,r);return Mf("meta",t,r,!1)},Y6=(t,{children:r,...e})=>new ao(t,e,Gf(r??[])),Yq=(t)=>{if(typeof t.action==="function")t.action=Ff in t.action?t.action[Ff]:void 0;return Y6("form",t)},P6=(t,r)=>{if(typeof r.formAction==="function")r.formAction=Ff in r.formAction?r.formAction[Ff]:void 0;return Y6(t,r)},Pq=(t)=>P6("input",t),gq=(t)=>P6("button",t);var Cq=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),Ed=(t)=>Cq.get(t)||t,g6=(t,r)=>{for(let[e,o]of Object.entries(t)){let n=e[0]==="-"||!/[A-Z]/.test(e)?e:e.replace(/[A-Z]/g,(c)=>`-${c.toLowerCase()}`);r(n,o==null?null:typeof o==="number"?!n.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${o}px`:`${o}`:o)}};var kf=void 0,Wh=()=>kf,Qq=(t)=>/[A-Z]/.test(t)&&t.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Kq=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Eq=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],qd=(t,r)=>{for(let e=0,o=t.length;e<o;e++){let n=t[e];if(typeof n==="string")Qn(n,r);else if(typeof n==="boolean"||n===null||n===void 0)continue;else if(n instanceof ao)n.toStringToBuffer(r);else if(typeof n==="number"||n.isEscaped)r[0]+=n;else if(n instanceof Promise)r.unshift("",n);else qd(n,r)}},ao=class{tag;props;key;children;isEscaped=!0;localContexts;constructor(t,r,e){this.tag=t,this.props=r,this.children=e}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){let t=[""];this.localContexts?.forEach(([r,e])=>{r.values.push(e)});try{this.toStringToBuffer(t)}finally{this.localContexts?.forEach(([r])=>{r.values.pop()})}return t.length===1?"callbacks"in t?Nd(po(t[0],t.callbacks)).toString():t[0]:Td(t,t.callbacks)}toStringToBuffer(t){let r=this.tag,e=this.props,{children:o}=this;t[0]+=`<${r}`;let n=kf&&kc(kf)==="svg"?(c)=>Qq(Ed(c)):(c)=>Ed(c);for(let[c,i]of Object.entries(e))if(c=n(c),c==="children");else if(c==="style"&&typeof i==="object"){let f="";g6(i,(h,w)=>{if(w!=null)f+=`${f?";":""}${h}:${w}`}),t[0]+=' style="',Qn(f,t),t[0]+='"'}else if(typeof i==="string")t[0]+=` ${c}="`,Qn(i,t),t[0]+='"';else if(i===null||i===void 0);else if(typeof i==="number"||i.isEscaped)t[0]+=` ${c}="${i}"`;else if(typeof i==="boolean"&&Eq.includes(c)){if(i)t[0]+=` ${c}=""`}else if(c==="dangerouslySetInnerHTML"){if(o.length>0)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");o=[po(i.__html)]}else if(i instanceof Promise)t[0]+=` ${c}="`,t.unshift('"',i);else if(typeof i==="function"){if(!c.startsWith("on")&&c!=="ref")throw Error(`Invalid prop '${c}' of type 'function' supplied to '${r}'.`)}else t[0]+=` ${c}="`,Qn(i.toString(),t),t[0]+='"';if(Kq.includes(r)&&o.length===0){t[0]+="/>";return}t[0]+=">",qd(o,t),t[0]+=`</${r}>`}},xd=class extends ao{toStringToBuffer(t){let{children:r}=this,e={...this.props};if(r.length)e.children=r.length===1?r[0]:r;let o=this.tag.call(null,e);if(typeof o==="boolean"||o==null)return;else if(o instanceof Promise)if(Lf.length===0)t.unshift("",o);else{let n=Lf.map((c)=>[c,c.values.at(-1)]);t.unshift("",o.then((c)=>{if(c instanceof ao)c.localContexts=n;return c}))}else if(o instanceof ao)o.toStringToBuffer(t);else if(typeof o==="number"||o.isEscaped){if(t[0]+=o,o.callbacks)t.callbacks||=[],t.callbacks.push(...o.callbacks)}else Qn(o,t)}},Qd=class extends ao{toStringToBuffer(t){qd(this.children,t)}};var C6=!1,Zh=(t,r,e)=>{if(!C6){for(let o in Kd)zf[o][kh]=Kd[o];C6=!0}if(typeof t==="function")return new xd(t,r,e);else if(zf[t])return new xd(zf[t],r,e);else if(t==="svg"||t==="head")return kf||=W6(""),new ao(t,r,[new xd(kf,{value:t},e)]);else return new ao(t,r,e)};var Zr=({children:t})=>{return new Qd("",{children:t},Array.isArray(t)?t:t?[t]:[])};function s(t,r,e){let o;if(!r||!("children"in r))o=Zh(t,r,[]);else{let n=r.children;o=Array.isArray(n)?Zh(t,r,n):Zh(t,r,[n])}return o.key=e,o}var Pr=({children:t,variant:r="primary",href:e,className:o="",type:n="button",onClick:c})=>{let f={primary:"bg-primary text-white hover:bg-primary/90 hover:shadow-neon-purple hover:-translate-y-0.5 border border-transparent",secondary:"bg-surface border border-white/10 text-white hover:border-primary/50 hover:text-primary hover:shadow-neon-purple hover:-translate-y-0.5",outline:"bg-transparent border border-white/30 text-white hover:border-white hover:bg-white/5",ghost:"bg-transparent text-gray-400 hover:text-white hover:bg-white/5"},h="text-sm px-6 py-3",w=`inline-flex items-center justify-center font-display uppercase tracking-widest transition-all duration-300 rounded-sm focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed ${f[r]} text-sm px-6 py-3 ${o}`;if(e)return s("a",{href:e,class:w,children:t},void 0,!1,void 0,this);return s("button",{type:n,class:w,onclick:c,children:t},void 0,!1,void 0,this)};var Q6=({isAdmin:t=!1,user:r})=>{return s("nav",{class:"fixed top-0 left-0 w-full z-[60] transition-all duration-300 bg-[#050505] border-b border-white/5 h-16",children:[s("div",{class:"w-full px-4 md:px-6 h-full flex items-center justify-between",children:[s("div",{class:"flex items-center gap-4",children:[s("button",{onclick:"toggleSidebar()",class:"md:hidden text-white p-1",children:s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("a",{href:"/",class:"flex items-center gap-2 group",children:[s("div",{class:"w-8 h-8 bg-gradient-to-br from-primary to-purple-900 rounded flex items-center justify-center font-display text-white",children:"C"},void 0,!1,void 0,this),s("span",{class:"text-xl font-display text-white tracking-wide hidden sm:block",children:["Creator",s("span",{class:"text-primary",children:"Flix"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"hidden md:flex flex-1 max-w-xl mx-8",children:s("div",{class:"relative w-full group",children:[s("input",{type:"text",placeholder:"Pesquisar modelos, v\xEDdeos, categorias...",class:"w-full bg-[#121212] border border-white/10 text-gray-300 text-sm rounded-full py-2 px-5 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all"},void 0,!1,void 0,this),s("button",{class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-primary",children:"\uD83D\uDD0D"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"flex items-center gap-3",children:[(!r||r.subscriptionStatus!==1)&&s("a",{href:"/plans",class:"hidden md:flex items-center gap-1 text-[#FFD700] text-xs font-bold border border-[#FFD700]/30 px-3 py-1.5 rounded-full hover:bg-[#FFD700]/10 transition-colors",children:[s("span",{children:"\uD83D\uDC8E"},void 0,!1,void 0,this)," SEJA VIP"]},void 0,!0,void 0,this),s("div",{class:"h-6 w-px bg-white/10 mx-2 hidden md:block"},void 0,!1,void 0,this),r?s("div",{class:"relative group","x-data":"{ open: false }",children:[s("button",{onclick:"const menu = document.getElementById('user-menu'); menu.classList.toggle('hidden');",class:"flex items-center gap-2 text-sm font-medium text-white hover:text-primary transition-colors focus:outline-none",children:[s("span",{children:r.name||r.email.split("@")[0]||"Minha Conta"},void 0,!1,void 0,this),s("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"user-menu",class:"hidden absolute right-0 mt-2 w-48 bg-[#121212] border border-white/10 rounded-lg shadow-xl py-2 z-50",children:[s("div",{class:"px-4 py-2 border-b border-white/5 mb-2",children:[s("p",{class:"text-xs text-gray-400",children:"Logado como"},void 0,!1,void 0,this),s("p",{class:"text-sm text-white truncate",children:r.email},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("a",{href:"/plans",class:"block px-4 py-2 text-sm text-gray-300 hover:bg-white/5 hover:text-white transition-colors",children:"\uD83D\uDCB3 Ver Plano"},void 0,!1,void 0,this),r.role==="admin"&&s("a",{href:"/admin",class:"block px-4 py-2 text-sm text-primary hover:bg-white/5 transition-colors",children:"\u26A1 Admin Panel"},void 0,!1,void 0,this),s("div",{class:"border-t border-white/5 mt-2 pt-2",children:s("form",{action:"/api/logout",method:"post",children:s("button",{type:"submit",class:"w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-white/5 transition-colors",children:"\uD83D\uDEAA Deslogar"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this):s(Zr,{children:[s("a",{href:"/login",class:"text-sm font-medium text-gray-400 hover:text-white",children:"Entrar"},void 0,!1,void 0,this),s(Pr,{href:"/register",variant:"primary",className:"!py-1.5 !px-4 !text-xs !rounded-full",children:"Criar Conta"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('user-menu');
            const button = event.target.closest('button');
            if (!menu.classList.contains('hidden') && !menu.contains(event.target) && (!button || !button.onclick)) {
                menu.classList.add('hidden');
            }
        });
      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var Bh=({imageUrl:t="https://images.unsplash.com/photo-1605810230434-7631ac76ec81?w=400&q=80",title:r,buttonText:e,link:o,adId:n,placement:c})=>{let i=n?`fetch('/api/ads/${n}/click${c?`?placement=${c}`:""}', {method:'POST'})`:"",f=`ad-spot-${n}-${Math.random().toString(36).substr(2,9)}`;return s("div",{class:"p-4 mt-auto border-t border-white/5 bg-[#0a0a0a]",id:f,children:[s("span",{class:"text-[10px] text-gray-600 uppercase mb-1 block",children:"Publicidade"},void 0,!1,void 0,this),s("a",{href:o,class:"block w-full aspect-square rounded-lg bg-white overflow-hidden relative group border border-white/10",onclick:i,children:[s("img",{src:t,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"},void 0,!1,void 0,this),s("div",{class:"absolute bottom-3 left-3 right-3 text-center",children:[s("p",{class:"text-white font-bold text-lg leading-none mb-1",children:r},void 0,!1,void 0,this),s("button",{class:"bg-[#FFD700] text-black text-[10px] font-bold w-full py-1 rounded hover:bg-white transition-colors",children:e},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n&&s("script",{dangerouslySetInnerHTML:{__html:`
            (function() {
              const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                  if (entry.isIntersecting) {
                    fetch('/api/ads/${n}/impression${c?`?placement=${c}`:""}', {method:'POST'});
                    observer.unobserve(entry.target);
                  }
                });
              }, { threshold: 0.1 });
              const el = document.getElementById('${f}');
              if (el) observer.observe(el);
            })();
          `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};Fe();pe();we();var ua={diamond:["feed_model"],diamond_block:["home_top","home_middle","models_grid"],banner:["home_top","home_bottom","login","register"],spot:["sidebar","model_profile","model_sidebar"],hero:["home_top"]},pa=(t)=>{return ua[t][0]},uA=(t,r)=>{return ua[t].includes(r)},Mr={async list(t=1,r=20,e){let o=(t-1)*r,n=[];if(e?.status)n.push(Y(Zt.status,e.status));if(e?.placement)n.push(Y(Zt.placement,e.placement));if(e?.type)n.push(Y(Zt.type,e.type));let c=L.select().from(Zt).orderBy(Vt(Zt.createdAt)).limit(r).offset(o);if(n.length>0)c=c.where(Ir(...n));let i=await c,f=L.select({count:I`count(*)`}).from(Zt);if(n.length>0)f=f.where(Ir(...n));let[h]=await f,w=Number(h?.count||0);return{data:i,total:w,page:t,totalPages:Math.ceil(w/r)}},async getById(t){let[r]=await L.select().from(Zt).where(Y(Zt.id,t)).limit(1);return r||null},async create(t){let{type:r,placement:e}=t;if(!uA(r,e))e=pa(r),console.warn(`[Ads] Placement "${t.placement}" inv\xE1lido para tipo "${r}". Usando placement padr\xE3o: "${e}"`);let[o]=await L.insert(Zt).values({name:t.name,type:t.type,placement:e,status:t.status||"draft",title:t.title,subtitle:t.subtitle||null,ctaText:t.ctaText||null,imageUrl:t.imageUrl||null,link:t.link,category:t.category||null,priority:t.priority||0,startDate:t.startDate||null,endDate:t.endDate||null}).returning();return o},async update(t){let{id:r,...e}=t;if(e.type!==void 0){let c=await this.getById(r);if(c){let i=e.type,f=e.placement||c.placement;if(!uA(i,f))e.placement=pa(i),console.warn(`[Ads] Placement "${f}" inv\xE1lido para tipo "${i}". Ajustando para: "${e.placement}"`)}}if(e.placement!==void 0&&e.type===void 0){let c=await this.getById(r);if(c&&!uA(c.type,e.placement))console.warn(`[Ads] Placement "${e.placement}" inv\xE1lido para tipo "${c.type}". Mantendo placement atual.`),delete e.placement}let o={};if(e.name!==void 0)o.name=e.name;if(e.type!==void 0)o.type=e.type;if(e.placement!==void 0)o.placement=e.placement;if(e.status!==void 0)o.status=e.status;if(e.title!==void 0)o.title=e.title;if(e.subtitle!==void 0)o.subtitle=e.subtitle;if(e.ctaText!==void 0)o.ctaText=e.ctaText;if(e.imageUrl!==void 0)o.imageUrl=e.imageUrl;if(e.link!==void 0)o.link=e.link;if(e.category!==void 0)o.category=e.category;if(e.priority!==void 0)o.priority=e.priority;if(e.startDate!==void 0)o.startDate=e.startDate;if(e.endDate!==void 0)o.endDate=e.endDate;let[n]=await L.update(Zt).set(o).where(Y(Zt.id,r)).returning();return n||null},async delete(t){let[r]=await L.delete(Zt).where(Y(Zt.id,t)).returning();return!!r},async toggleStatus(t){let r=await this.getById(t);if(!r)return null;let e=r.status==="active"?"paused":"active";return this.update({id:t,status:e})},async trackImpression(t,r){try{await L.transaction(async(e)=>{await e.update(Zt).set({impressions:I`${Zt.impressions} + 1`}).where(Y(Zt.id,t)),await e.insert(wA).values({adId:t,placement:r?.placement||null,userAgent:r?.userAgent||null,ip:r?.ip||null})})}catch(e){console.error(`[AdsService] Erro ao rastrear impress\xE3o do an\xFAncio ${t}:`,e)}},async trackClick(t,r){try{await L.transaction(async(e)=>{await e.update(Zt).set({clicks:I`${Zt.clicks} + 1`}).where(Y(Zt.id,t)),await e.insert(pA).values({adId:t,placement:r?.placement||null,userAgent:r?.userAgent||null,ip:r?.ip||null})})}catch(e){console.error(`[AdsService] Erro ao rastrear clique do an\xFAncio ${t}:`,e)}},async trackEvent(t,r,e){if(r==="impression")return this.trackImpression(t,e);else if(r==="click")return this.trackClick(t,e)},async getActiveByPlacement(t,r=10,e=!1){let o=new Date,c=await L.select().from(Zt).where(Ir(Y(Zt.status,"active"),Y(Zt.placement,t),ge(Dc(Zt.startDate),Qf(Zt.startDate,o)),ge(Dc(Zt.endDate),Ko(Zt.endDate,o)))).orderBy(Vt(Zt.priority),Vt(Zt.createdAt)).limit(r);if(e)for(let i of c)this.trackImpression(i.id,{placement:t}).catch(()=>{});return c},async getActiveByPlacements(t,r=!1){let e={};for(let o of t)e[o]=await this.getActiveByPlacement(o,10,r);return e},formatPlacementLabel(t){return{home_top:"Home (Topo)",home_middle:"Home (Meio)",home_bottom:"Home (Rodap\xE9)",sidebar:"Sidebar",feed_mix:"Feed Mix",models_grid:"Grid de Modelos",model_profile:"Perfil de Modelo",login:"P\xE1gina de Login",register:"P\xE1gina de Registro",feed_model:"Feed de Modelo",model_sidebar:"Sidebar de Modelo"}[t]||t},formatTypeLabel(t){return{diamond:"Diamond (Post)",diamond_block:"Diamond (Block)",banner:"Banner",spot:"Ad Spot",hero:"Hero Carousel"}[t]||t}};var da=async()=>{let r=(await Mr.getActiveByPlacement("sidebar",1,!1)).find((n)=>n.type==="spot"),e=[{label:"Home",link:"/",active:!0,icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},void 0,!1,void 0,this),s("polyline",{points:"9 22 9 12 15 12 15 22"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},{label:"Premium",link:"/plans",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M6 12 12 2l6 10-6 10Z"},void 0,!1,void 0,this),s("path",{d:"M12 22 6 12 12 2l6 10Z"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},{label:"Ao Vivo",link:"/models?filter=live",isLive:!0,icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},void 0,!1,void 0,this),s("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},{label:"Em Alta",link:"/models?filter=trending",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"M13 2 3 14h9l-1 8 10-12h-9l1-8z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},{label:"Novidades",link:"/models?filter=new",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M5 12h14"},void 0,!1,void 0,this),s("path",{d:"M12 5v14"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}],o=["Brasileiras","Amadoras","Gamer","Cosplay","Tatuadas","Ebony","Milf"];return s(Zr,{children:[s("div",{id:"sidebar-overlay",class:"fixed inset-0 bg-black/60 z-40 hidden md:hidden backdrop-blur-sm transition-opacity",onclick:"toggleSidebar()"},void 0,!1,void 0,this),s("aside",{id:"sidebar",class:"fixed top-0 left-0 h-full w-64 bg-[#050505] border-r border-white/5 z-50 transform -translate-x-full md:translate-x-0 transition-all duration-300 overflow-y-auto flex flex-col custom-scrollbar",children:[s("div",{class:"h-16 flex items-center px-6 shrink-0 border-b border-white/5 bg-black/20",children:[s("span",{class:"font-display text-2xl text-white tracking-tighter",children:["CREATOR",s("span",{class:"text-primary shadow-neon-purple",children:"FLIX"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("button",{onclick:"toggleSidebar()",class:"md:hidden ml-auto text-gray-500 hover:text-white",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,void 0,this),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex-1 px-3 py-6 space-y-8",children:[s("div",{children:[s("h4",{class:"px-4 text-[10px] font-bold text-gray-500 uppercase tracking-[0.2em] mb-4",children:"Navega\xE7\xE3o"},void 0,!1,void 0,this),s("nav",{class:"space-y-1",children:e.map((n)=>s("a",{href:n.link,class:`
                    group flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all relative
                    ${n.active?"bg-primary/10 text-white border border-primary/20 shadow-[inset_0_0_20px_rgba(138,43,226,0.05)]":"text-gray-400 hover:bg-white/[0.03] hover:text-white border border-transparent"}
                  `,children:[n.active&&s("div",{class:"absolute left-0 w-1 h-5 bg-primary rounded-r-full shadow-neon-purple"},void 0,!1,void 0,this),s("span",{class:`${n.active?"text-primary":"text-gray-500 group-hover:text-primary"} transition-colors`,children:n.icon},void 0,!1,void 0,this),s("span",{class:"tracking-wide",children:n.label},void 0,!1,void 0,this),n.isLive&&s("span",{class:"ml-auto flex h-2 w-2",children:[s("span",{class:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-red-500 opacity-75"},void 0,!1,void 0,this),s("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-red-600"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("h4",{class:"px-4 text-[10px] font-bold text-gray-500 uppercase tracking-[0.2em] mb-4",children:"Categorias Populares"},void 0,!1,void 0,this),s("div",{class:"flex flex-wrap gap-2 px-2",children:o.map((n)=>s("a",{href:`/models?cat=${n.toLowerCase()}`,class:"px-3 py-1.5 rounded-lg bg-surface/30 border border-white/5 text-[11px] text-gray-400 hover:text-white hover:border-primary/40 hover:bg-primary/5 transition-all",children:n},void 0,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),r&&s(Bh,{title:r.title,buttonText:r.ctaText||"SAIBA MAIS",link:r.link,imageUrl:r.imageUrl||void 0,adId:r.id},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            if (sidebar.classList.contains('-translate-x-full')) {
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            } else {
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
                document.body.style.overflow = '';
            }
        }
      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};Fe();pe();we();var ya=async()=>{let t=await L.select().from(So).where(Y(So.isActive,!0));return s("div",{class:"fixed bottom-6 right-6 z-50 group",children:[s("div",{id:"support-menu",class:"hidden absolute bottom-full right-0 mb-4 w-52 bg-[#121212] border border-white/10 rounded-xl shadow-2xl shadow-black/50 overflow-hidden transform transition-all duration-300 origin-bottom-right",children:[s("div",{class:"bg-white/5 px-4 py-3 border-b border-white/5",children:[s("h3",{class:"text-sm font-bold text-white",children:"Precisa de Ajuda?"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-400",children:"Entre em contato com o suporte"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"p-2 space-y-1",children:t.map((r)=>s("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",class:"flex items-center gap-3 px-3 py-3 rounded-lg hover:bg-white/5 transition-colors group/item",children:[r.platform==="telegram"&&s("span",{class:"bg-[#229ED9]/10 p-2 rounded-full text-[#229ED9] group-hover/item:bg-[#229ED9] group-hover/item:text-white transition-all",children:s("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12.268 12.268 0 0 0-.056 0c-.367.006-.732.023-1.092.052v.004H11.944zM8.903 16.59l.526-2.529 6.22-6.058c.27-.27-.087-.417-.428-.15l-7.75 4.885-2.614-.816c-.568-.178-.58-.57.119-.844l10.218-3.94c.475-.176.89.108.736.814L14.15 15.11c-.13.626-.644.838-1.294.52l-2.953-2.04z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),r.platform==="whatsapp"&&s("span",{class:"bg-[#25D366]/10 p-2 rounded-full text-[#25D366] group-hover/item:bg-[#25D366] group-hover/item:text-white transition-all",children:s("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{children:[s("p",{class:"text-sm font-medium text-gray-200 group-hover/item:text-white",children:r.platform==="telegram"?"Telegram":"WhatsApp"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500",children:r.platform==="telegram"?"Resposta r\xE1pida":"Atendimento 24h"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("button",{id:"support-btn",onclick:"const menu = document.getElementById('support-menu'); menu.classList.toggle('hidden'); this.classList.toggle('rotate-90');",class:"bg-gradient-to-br from-primary to-purple-900 hover:brightness-110 text-white p-4 rounded-full shadow-lg shadow-primary/30 hover:shadow-neon-purple hover:-translate-y-1 transition-all duration-300 flex items-center justify-center z-50 relative","aria-label":"Abrir Suporte",children:s("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
        document.addEventListener('click', function(e) {
            const container = document.querySelector('.fixed.bottom-6.right-6');
            const menu = document.getElementById('support-menu');
            const btn = document.getElementById('support-btn');
            
            if (container && !container.contains(e.target) && menu && !menu.classList.contains('hidden')) {
                menu.classList.add('hidden');
                btn.classList.remove('rotate-90');
            }
        });
      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var Aa=()=>{return s("div",{id:"age-verification-modal",class:"fixed inset-0 hidden items-center justify-center p-4",style:"z-index: 999999 !important;",children:[s("div",{class:"absolute inset-0 bg-black/95 backdrop-blur-md transition-opacity duration-300"},void 0,!1,void 0,this),s("div",{class:"relative w-full max-w-[400px] bg-[#121212] border border-white/10 rounded-2xl shadow-[0_0_50px_-12px_rgba(138,43,226,0.3)] overflow-hidden animate-in fade-in zoom-in duration-300",children:[s("div",{class:"p-8 pb-4 text-center flex flex-col items-center",children:[s("div",{class:"mb-5 relative group",children:[s("div",{class:"absolute inset-0 bg-primary/20 blur-xl rounded-full group-hover:bg-primary/30 transition-all duration-500"},void 0,!1,void 0,this),s("svg",{width:"64",height:"64",viewBox:"0 0 54 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"relative z-10 drop-shadow-[0_0_10px_rgba(138,43,226,0.5)]",children:[s("path",{d:"M12.7807 2.29511V27.4257H4.3081V8.68546H0V2.29511H12.7807Z",fill:"white"},void 0,!1,void 0,this),s("path",{d:"M34.8945 14.1783C35.9715 14.8484 36.7972 15.6741 37.3716 16.6554C37.97 17.6128 38.2691 18.7137 38.2691 19.9583C38.2691 21.5619 37.7905 22.974 36.8331 24.1946C35.8997 25.4152 34.5714 26.3606 32.8481 27.0308C31.1488 27.677 29.1982 28.0001 26.9963 28.0001C24.7944 28.0001 22.8318 27.677 21.1086 27.0308C19.4092 26.3606 18.0809 25.4152 17.1236 24.1946C16.1901 22.974 15.7234 21.5619 15.7234 19.9583C15.7234 18.7137 16.0106 17.6128 16.5851 16.6554C17.1834 15.6741 18.0211 14.8484 19.0981 14.1783C17.4467 12.8619 16.621 11.2105 16.621 9.22397C16.621 7.71614 17.0518 6.39977 17.9134 5.27488C18.7989 4.14999 20.0196 3.2764 21.5753 2.65412C23.1549 2.03184 24.9619 1.7207 26.9963 1.7207C29.0307 1.7207 30.8257 2.03184 32.3814 2.65412C33.961 3.2764 35.1817 4.14999 36.0433 5.27488C36.9288 6.39977 37.3716 7.71614 37.3716 9.22397C37.3716 11.2105 36.5459 12.8619 34.8945 14.1783ZM26.9963 7.42893C26.3979 7.42893 25.9073 7.6204 25.5244 8.00334C25.1653 8.38628 24.9858 8.91283 24.9858 9.58298C24.9858 10.2531 25.1653 10.7797 25.5244 11.1626C25.9073 11.5456 26.3979 11.737 26.9963 11.737C27.5946 11.737 28.0733 11.5456 28.4323 11.1626C28.8153 10.7797 29.0067 10.2531 29.0067 9.58298C29.0067 8.91283 28.8153 8.38628 28.4323 8.00334C28.0733 7.6204 27.5946 7.42893 26.9963 7.42893ZM26.9963 22.2919C27.81 22.2919 28.4682 22.0525 28.9708 21.5738C29.4974 21.0952 29.7606 20.4609 29.7606 19.6711C29.7606 18.8813 29.4974 18.247 28.9708 17.7684C28.4682 17.2897 27.81 17.0503 26.9963 17.0503C26.1825 17.0503 25.5124 17.2897 24.9858 17.7684C24.4832 18.247 24.2319 18.8813 24.2319 19.6711C24.2319 20.4609 24.4832 21.0952 24.9858 21.5738C25.5124 22.0525 26.1825 22.2919 26.9963 22.2919Z",fill:"white"},void 0,!1,void 0,this),s("path",{d:"M52.1901 12.6725H45.9434V18.7756H41.3122V12.6725H35.1013V8.29259H41.3122V2.18945H45.9434V8.29259H52.1901V12.6725Z",fill:"white"},void 0,!1,void 0,this),s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M54 12.6721C54 13.8811 53.3991 14.8612 52.1901 14.8612H48.1324V18.7752C48.1324 19.9842 47.1523 20.9643 45.9433 20.9643H41.3121C40.1032 20.9643 39.1231 19.9842 39.1231 18.7752V14.8612H35.1013C33.8923 14.8612 32.9122 13.8811 32.9122 12.6721V8.29221C32.9122 7.08322 33.8923 6.10314 35.1013 6.10314H39.1231V2.18907C39.1231 0.980081 40.1032 0 41.3121 0H45.9433C47.1523 0 48.1324 0.980081 48.1324 2.18907V6.10314H52.1901C53.3991 6.10314 54 7.08322 54 8.29221V12.6721ZM45.9433 8.29221V2.18907H41.3121V8.29221H35.1013V12.6721H41.3121V18.7752H45.9433V12.6721H52.1901V8.29221H45.9433Z",fill:"#8A2BE2","fill-opacity":"0.8"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("h2",{class:"text-3xl font-display text-white tracking-wide",children:["CONTE\xDADO ",s("br",{},void 0,!1,void 0,this),s("span",{class:"text-primary text-4xl drop-shadow-neon-purple",children:"ADULTO"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"px-8 space-y-6",children:[s("p",{class:"text-gray-300 text-center font-body text-sm leading-relaxed",children:["Entendo que o site ",s("strong",{class:"text-white",children:"CreatorFlix"},void 0,!1,void 0,this)," apresenta ",s("strong",{class:"text-white",children:"conte\xFAdo expl\xEDcito"},void 0,!1,void 0,this)," destinado a ",s("strong",{class:"text-white",children:"adultos"},void 0,!1,void 0,this),"."]},void 0,!0,void 0,this),s("div",{class:"bg-white/5 rounded-lg p-4 border border-white/5",children:[s("p",{class:"text-[11px] text-gray-400 font-bold mb-1 uppercase tracking-wider",children:"Aviso de Cookies"},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-500",children:"N\xF3s usamos cookies e outras tecnologias semelhantes para melhorar a sua experi\xEAncia em nosso site."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"text-[10px] text-center text-gray-600",children:["A profiss\xE3o de acompanhante \xE9 legalizada no Brasil e deve ser respeitada. ",s("br",{},void 0,!1,void 0,this),s("a",{href:"/terms",class:"text-gray-500 underline hover:text-primary transition-colors",children:"Termos de uso"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"p-8 pt-6",children:s("button",{id:"age-confirm-btn",class:"w-full bg-gradient-to-r from-primary to-purple-800 hover:from-primary/90 hover:to-purple-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-primary/20 hover:shadow-neon-purple hover:-translate-y-0.5 transition-all duration-300 uppercase tracking-widest text-sm",children:"Concordo"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
        (function() {
            const modal = document.getElementById('age-verification-modal');
            const btn = document.getElementById('age-confirm-btn');
            const storageKey = 'creatorflix-age-verified-v1';

            // Check if verified
            if (!localStorage.getItem(storageKey)) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                document.body.style.overflow = 'hidden'; // Prevent scrolling
            }

            // Handle confirm
            btn.addEventListener('click', function() {
                localStorage.setItem(storageKey, 'true');
                modal.classList.add('opacity-0');
                
                // Allow animation to finish before hiding
                setTimeout(() => {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                    document.body.style.overflow = '';
                }, 300);
            });
        })();
      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var _o=({children:t,title:r="CreatorFlix - Premium Content",isAdmin:e=!1,user:o})=>{return s("html",{lang:"pt-BR",children:[s("head",{children:[s("meta",{charset:"UTF-8"},void 0,!1,void 0,this),s("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},void 0,!1,void 0,this),s("title",{children:r},void 0,!1,void 0,this),s("link",{rel:"stylesheet",href:"/static/styles.css"},void 0,!1,void 0,this),s("link",{href:"https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;500;600;700&display=swap",rel:"stylesheet"},void 0,!1,void 0,this),s("script",{src:"https://unpkg.com/htmx.org@1.9.10"},void 0,!1,void 0,this),s("style",{dangerouslySetInnerHTML:{__html:`
            .custom-scrollbar::-webkit-scrollbar { width: 6px; }
            .custom-scrollbar::-webkit-scrollbar-track { background: #050505; }
            .custom-scrollbar::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
            .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #8A2BE2; }
        `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("body",{class:"bg-[#050505] text-white font-sans min-h-screen antialiased selection:bg-primary selection:text-white overflow-x-hidden",children:[s(Aa,{},void 0,!1,void 0,this),s(Q6,{isAdmin:e,user:o},void 0,!1,void 0,this),s(da,{},void 0,!1,void 0,this),s("main",{class:"pt-16 md:pl-64 min-h-screen transition-all duration-300",children:[t,s("footer",{class:"border-t border-white/5 py-8 mt-12 px-6 text-center text-gray-600 text-xs",children:s("p",{children:"\xA9 2024 CreatorFlix Inc. All rights reserved. 18+ Only."},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s(ya,{},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var jn=({name:t,thumbnailUrl:r,postCount:e})=>{let o=r||"/static/img/placeholder_model.jpg",n=t.trim();return s("a",{href:`/models/${n}`,class:"group relative w-full aspect-[3/4] rounded-md overflow-hidden cursor-pointer block bg-gray-900 border border-white/5 hover:border-primary/50 transition-all duration-300",children:[s("img",{src:o,alt:t,class:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"},void 0,!1,void 0,this),s("div",{class:"absolute inset-x-0 bottom-0 h-2/3 bg-gradient-to-t from-black/90 via-black/40 to-transparent z-10"},void 0,!1,void 0,this),s("div",{class:"absolute bottom-0 left-0 w-full p-3 z-20",children:[s("h3",{class:"text-white text-sm md:text-base font-bold truncate capitalize shadow-black drop-shadow-md",children:t},void 0,!1,void 0,this),s("div",{class:"flex items-center gap-2 mt-1",children:s("span",{class:"text-[10px] text-gray-300 flex items-center gap-1 bg-white/10 px-1.5 py-0.5 rounded backdrop-blur-sm border border-white/10",children:["\uD83D\uDCF8 ",e," Posts"]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var xs=({title:t,subtitle:r,ctaText:e,link:o,imageUrl:n,adId:c,placement:i})=>{let f=c?`fetch('/api/ads/${c}/click${i?`?placement=${i}`:""}', {method:'POST'})`:"",h=`ad-banner-${c}-${Math.random().toString(36).substr(2,9)}`;return s("a",{href:o,class:"block my-6 group",onclick:f,id:h,children:[s("div",{class:"relative w-full h-24 md:h-32 rounded-lg overflow-hidden bg-gradient-to-r from-[#1a1a1a] to-[#050505] border border-white/10 hover:border-primary/50 transition-all",children:[n&&s("img",{src:n,class:"absolute inset-0 w-full h-full object-cover opacity-40 group-hover:opacity-50 transition-opacity"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 flex items-center justify-between px-4 md:px-10 z-10",children:[s("div",{class:"flex flex-col justify-center",children:[s("span",{class:"text-[10px] text-[#FFD700] uppercase font-bold tracking-widest border border-[#FFD700] px-1 w-fit mb-1",children:"Publicidade"},void 0,!1,void 0,this),s("h4",{class:"text-white font-display text-xl md:text-3xl uppercase leading-none",children:t},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-xs md:text-sm hidden sm:block",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{class:"bg-primary text-white text-xs md:text-sm font-bold px-4 py-2 rounded-sm uppercase group-hover:bg-primary/80 transition-colors",children:e},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),c&&s("script",{dangerouslySetInnerHTML:{__html:`
          (function() {
            const observer = new IntersectionObserver((entries) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  fetch('/api/ads/${c}/impression${i?`?placement=${i}`:""}', {method:'POST'});
                  observer.unobserve(entry.target);
                }
              });
            }, { threshold: 0.1 });
            const el = document.getElementById('${h}');
            if (el) observer.observe(el);
          })();
        `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var Sa=({name:t,imageUrl:r,category:e="Model",isLive:o=!1,views:n="1.2k",isPromoted:c=!1,link:i,adId:f,placement:h})=>{let w=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),p=i||`/models/${w}`,u=`ad-card-${f}-${Math.random().toString(36).substr(2,9)}`,d=f?`fetch('/api/ads/${f}/click${h?`?placement=${h}`:""}', {method:'POST'})`:"";return s("a",{href:p,id:u,onclick:d,class:`group relative w-full aspect-[3/4] rounded-md overflow-hidden cursor-pointer block transition-all duration-300 ${c?"border-2 border-[#FFD700] shadow-[0_0_15px_rgba(255,215,0,0.3)]":"bg-surface border border-white/5 hover:border-primary/50"}`,children:[s("img",{src:r,alt:t,class:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"},void 0,!1,void 0,this),c&&s("div",{class:"absolute top-0 left-0 w-full bg-[#FFD700] text-black text-[10px] font-bold uppercase text-center py-0.5 z-30",children:"Patrocinado"},void 0,!1,void 0,this),o&&s("div",{class:"absolute top-2 right-2 z-30",children:s("span",{class:"flex items-center gap-1 bg-red-600/90 text-white text-[10px] font-bold px-2 py-0.5 rounded-sm uppercase tracking-wider animate-pulse",children:"Live"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{class:"absolute inset-x-0 bottom-0 h-1/2 bg-gradient-to-t from-black/90 to-transparent z-20"},void 0,!1,void 0,this),s("div",{class:"absolute bottom-0 left-0 w-full p-3 z-30",children:[s("h3",{class:"text-white text-sm md:text-base font-bold truncate leading-tight",children:t},void 0,!1,void 0,this),s("div",{class:"flex items-center justify-between mt-1",children:[s("span",{class:"text-[10px] text-gray-400 uppercase tracking-wide truncate pr-2",children:e},void 0,!1,void 0,this),s("span",{class:"text-[10px] text-primary flex items-center gap-1 bg-black/50 px-1.5 py-0.5 rounded backdrop-blur-sm",children:["\uD83D\uDC41 ",n]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),f&&s("script",{dangerouslySetInnerHTML:{__html:`
          (function() {
            const observer = new IntersectionObserver((entries) => {
              entries.forEach(entry => {
                if (entry.isIntersecting) {
                  fetch('/api/ads/${f}/impression${h?`?placement=${h}`:""}', {method:'POST'});
                  observer.unobserve(entry.target);
                }
              });
            }, { threshold: 0.1 });
            const el = document.getElementById('${u}');
            if (el) observer.observe(el);
          })();
        `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var qs=({title:t,models:r,placement:e})=>{return s("div",{class:"my-8 p-4 rounded-xl bg-gradient-to-br from-[#1a1a1a] to-[#0a0a0a] border-y border-[#FFD700]/30 relative overflow-hidden",children:[s("div",{class:"flex items-center justify-between mb-4",children:[s("h3",{class:"text-white font-display text-xl flex items-center gap-2",children:[s("span",{class:"text-[#FFD700]",children:"\u2605"},void 0,!1,void 0,this)," ",t]},void 0,!0,void 0,this),s("span",{class:"text-[10px] text-gray-500 uppercase",children:"Patrocinado"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"grid grid-cols-2 md:grid-cols-4 gap-3",children:r.map((o)=>s(Sa,{...o,isPromoted:!0,placement:e},void 0,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var vw=({slides:t})=>{let r=t||[];if(r.length===0)return null;return s("div",{class:"relative w-full h-[45vh] md:h-[380px] rounded-xl overflow-hidden group border border-white/10 bg-black",children:[s("div",{id:"carousel-track",class:"w-full h-full relative",children:r.map((e,o)=>s("div",{class:`carousel-slide absolute inset-0 w-full h-full transition-opacity duration-700 ease-in-out ${o===0?"opacity-100 z-10":"opacity-0 z-0"}`,"data-index":o,"data-ad-id":e.adId,"data-placement":e.placement||"home_top",children:[s("img",{src:e.image,class:"w-full h-full object-cover"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 bg-gradient-to-r from-black via-black/40 to-transparent"},void 0,!1,void 0,this),s("div",{class:"absolute bottom-0 left-0 p-8 max-w-lg z-20",children:[s("div",{class:"flex items-center gap-3 mb-2",children:[e.isLive&&s("span",{class:"bg-red-600 text-white text-[10px] font-bold px-2 py-0.5 rounded animate-pulse",children:"LIVE"},void 0,!1,void 0,this),s("span",{class:"text-primary font-bold text-xs uppercase tracking-widest",children:e.category},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("h2",{class:"text-4xl md:text-5xl font-display text-white mb-4 leading-none",children:e.title},void 0,!1,void 0,this),s("div",{class:"flex gap-3",children:[s("a",{href:e.link||"#",onclick:e.adId?`fetch('/api/ads/${e.adId}/click', {method:'POST'})`:"",children:s(Pr,{variant:"primary",className:"!py-2 !px-6 text-sm",children:"Acessar"},void 0,!1,void 0,this)},void 0,!1,void 0,this),e.modelSlug&&s("a",{href:`/models/${e.modelSlug}`,children:s(Pr,{variant:"outline",className:"!py-2 !px-6 text-sm",children:"Perfil"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this))},void 0,!1,void 0,this),s("div",{class:"absolute bottom-4 right-4 z-30 flex gap-2",children:r.map((e,o)=>s("button",{onclick:`changeSlide(${o})`,class:"w-3 h-3 rounded-full bg-white/20 hover:bg-white transition-colors data-[active=true]:bg-primary",id:`indicator-${o}`},void 0,!1,void 0,this))},void 0,!1,void 0,this),s("button",{onclick:"nextSlide()",class:"absolute right-4 top-1/2 -translate-y-1/2 z-30 w-10 h-10 bg-black/50 hover:bg-primary text-white flex items-center justify-center rounded-full backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity",children:"\u279C"},void 0,!1,void 0,this),s("button",{onclick:"prevSlide()",class:"absolute left-4 top-1/2 -translate-y-1/2 z-30 w-10 h-10 bg-black/50 hover:bg-primary text-white flex items-center justify-center rounded-full backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity rotate-180",children:"\u279C"},void 0,!1,void 0,this),s("script",{src:"/static/js/carousel.js",defer:!0},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var e0={getTrendingModels:()=>[{name:"Fernanda T.",imageUrl:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=600&q=80",category:"Gamer",isLive:!0,views:"8.5k"},{name:"Sarah J.",imageUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=600&q=80",category:"Cosplay",isLive:!0,views:"5.1k"}],getFeedModels:()=>[{name:"Julia K.",imageUrl:"https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=600&q=80",category:"Fashion",isLive:!1,views:"2k"},{name:"Mariana S.",imageUrl:"https://images.unsplash.com/photo-1502823403499-6ccfcf4fb453?w=600&q=80",category:"Vlog",isLive:!1,views:"4k"},{name:"Elena R.",imageUrl:"https://images.unsplash.com/photo-1524250502761-1ac6f2e30d43?w=600&q=80",category:"Fitness",isLive:!1,views:"12k"},{name:"HOT_GIRL_99",imageUrl:"https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600&q=80",category:"PATROCINADO",isLive:!1,views:"AD",isPromoted:!0},{name:"Sophie",imageUrl:"https://images.unsplash.com/photo-1526510747491-58f928ec870f?w=600&q=80",category:"Art",isLive:!1,views:"900"},{name:"Valentina",imageUrl:"https://images.unsplash.com/photo-1529139574466-a302d2d3f524?w=600&q=80",category:"Lifestyle",isLive:!1,views:"3.2k"},{name:"Isabella",imageUrl:"https://images.unsplash.com/photo-1529139574466-a302d2d3f524?w=600&q=80",category:"Model",isLive:!1,views:"5k"},{name:"Carla",imageUrl:"https://images.unsplash.com/photo-1500917293891-ef795e70e1f6?w=600&q=80",category:"Fitness",isLive:!1,views:"2.1k"}],getSponsoredModels:()=>[{name:"Vitoria Secret",imageUrl:"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600&q=80",category:"Premium",isLive:!1,views:"PRO"},{name:"Bella Doll",imageUrl:"https://images.unsplash.com/photo-1464863979621-258859e62245?w=600&q=80",category:"New",isLive:!1,views:"PRO"}],getHeroSlides:()=>[{id:1,image:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=1200&q=80",title:"ALESSANDRA V.",category:"CAM #1 BRASIL",isLive:!0},{id:2,image:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=1200&q=80",title:"GAMER NIGHT",category:"EVENTO EXCLUSIVO",isLive:!0},{id:3,image:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=1200&q=80",title:"SARAH JONES",category:"LAN\xC7AMENTO 4K",isLive:!1}],getTags:()=>["Recomendados","Brasileiras","VR","Live","Novinhas","Milf","Gamer"],getAllModels:()=>{let t=(o)=>({name:`Model ${o}`,imageUrl:`https://images.unsplash.com/photo-${["1534528741775-53994a69daeb","1524504388940-b1c1722653e1","1529626455594-4ff0802cfb7e","1494790108377-be9c29b29330","1517841905240-472988babdf9"][o%5]}?w=600&q=80`,category:["Brasileira","Gamer","Cosplay","Amadora"][o%4],isLive:o%7===0,views:`${(Math.random()*10).toFixed(1)}k`,isPromoted:!1}),r=Array.from({length:10}).map((o,n)=>t(n)),e=Array.from({length:8}).map((o,n)=>t(n+10));return e.splice(2,0,{name:"JOGUE AGORA",imageUrl:"https://images.unsplash.com/photo-1596838132731-3301c3fd4317?w=600&q=80",category:"CASSINO",isLive:!1,views:"AD",isPromoted:!0}),{section1:r,section2:e}},getVipModels:()=>[{name:"Elite One",imageUrl:"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600&q=80",category:"VIP",isLive:!1,views:"PRO"},{name:"Elite Two",imageUrl:"https://images.unsplash.com/photo-1464863979621-258859e62245?w=600&q=80",category:"VIP",isLive:!1,views:"PRO"},{name:"Elite Three",imageUrl:"https://images.unsplash.com/photo-1500917293891-ef795e70e1f6?w=600&q=80",category:"VIP",isLive:!1,views:"PRO"},{name:"Elite Four",imageUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=600&q=80",category:"VIP",isLive:!1,views:"PRO"}],getPlans:()=>[{id:"basic",name:"Basic",price:"29,90",currency:"R$",features:["Acesso limitado","Qualidade SD (720p)","Com an\xFAncios"],highlighted:!1,variant:"outline",description:"Acesso imediato. Cancele quando quiser.",className:"order-2 lg:order-1"},{id:"diamond",name:"DIAMOND",price:"99,90",currency:"R$",period:"/m\xEAs",features:[{icon:"\uD83D\uDC51",title:"Acesso Total VIP",subtitle:"Todos os v\xEDdeos, fotos e sets exclusivos."},{icon:"\uD83C\uDFA5",title:"4K Ultra HD + VR",subtitle:"A melhor qualidade poss\xEDvel."},{icon:"\uD83D\uDCAC",title:"Direct Message",subtitle:"Fale diretamente com as modelos."}],highlighted:!0,variant:"primary",badge:"Experi\xEAncia Definitiva",className:"order-1 lg:order-2"},{id:"gold",name:"Gold",price:"59,90",currency:"R$",features:["Acesso ilimitado","Full HD (1080p)","Sem an\xFAncios","Acesso a Lives"],highlighted:!1,variant:"secondary",className:"order-3 lg:order-3"}],getAdminAds:()=>[{id:1,name:"BetWinner Banner",type:"Banner (Type B)",placement:"Home Top",impressions:"125,400",clicks:"4,200",status:"Active"},{id:2,name:"Cassino Native",type:"Native Block (Type C)",placement:"Models Grid",impressions:"80,100",clicks:"1,240",status:"Active"},{id:3,name:"Diamond Push",type:"Post Injection (Type A)",placement:"Feed Mix",impressions:"200,500",clicks:"8,500",status:"Paused"},{id:4,name:"PokerStars Promo",type:"Banner (Type B)",placement:"Sidebar",impressions:"45,000",clicks:"980",status:"Active"},{id:5,name:"OnlyFans Cross",type:"Post Injection (Type A)",placement:"Feed Mix",impressions:"12,000",clicks:"340",status:"Draft"}],getAdminModels:()=>Array.from({length:10}).map((t,r)=>({id:r,name:`Model_${r+1}`,email:`model${r+1}@example.com`,joined:"2 days ago",status:r%3===0?"Pending":"Verified",earnings:`R$ ${Math.floor(Math.random()*5000)}`,posts:Math.floor(Math.random()*500)})),getModelBySlug:(t)=>{return{id:1,name:t.split("-").map((e)=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")||"Fernanda T.",slug:t,description:"Conte\xFAdo exclusivo todos os dias. Bem-vindo ao meu mundo privado! \uD83D\uDD25",imageUrl:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=600&q=80",bannerUrl:"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=1200&q=80",category:"Gamer",postsCount:124,likesCount:"45k",isLive:!0,isSubscribed:!1}},getPostsByModel:(t)=>[{id:101,title:"Bastidores do ensaio de hoje",content:"Um pouco do que rolou no ensaio de hoje. O que acharam?",mediaUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=800&q=80",type:"image",likes:1200,comments:45,createdAt:"2 horas atr\xE1s",isLocked:!1},{id:102,title:"V\xEDdeo exclusivo para assinantes",content:"Confira o v\xEDdeo completo que acabei de postar no feed VIP.",mediaUrl:"https://images.unsplash.com/photo-1524250502761-1ac6f2e30d43?w=800&q=80",type:"video",likes:3400,comments:128,createdAt:"5 horas atr\xE1s",isLocked:!0},{id:103,title:"Bom dia!",content:"Acordando inspirada hoje. Prontos para as novidades?",mediaUrl:"https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=800&q=80",type:"image",likes:850,comments:12,createdAt:"1 dia atr\xE1s",isLocked:!1}],getPostById:(t)=>({id:t,modelId:1,modelName:"Fernanda T.",modelImageUrl:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=600&q=80",title:"Bastidores do ensaio de hoje",content:"Um pouco do que rolou no ensaio de hoje. O que acharam? Espero que gostem tanto quanto eu gostei de fazer!",mediaUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=1200&q=80",type:"image",likes:1200,comments:45,createdAt:"17 de Janeiro, 2026",isLocked:!1})};var _a=({model:t,sidebarAds:r=[]})=>{return s("div",{class:"hidden lg:flex flex-col gap-4 h-[380px]",children:[s("div",{class:"flex-1 relative rounded-lg overflow-hidden border border-white/10 group cursor-pointer",children:[s("img",{src:t.imageUrl,class:"w-full h-full object-cover transition-transform group-hover:scale-110"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors"},void 0,!1,void 0,this),s("div",{class:"absolute top-2 left-2 bg-red-600 text-[10px] font-bold px-2 rounded text-white animate-pulse",children:"LIVE"},void 0,!1,void 0,this),s("div",{class:"absolute bottom-2 left-2 font-bold text-white leading-tight",children:[t.name,s("br",{},void 0,!1,void 0,this),s("span",{class:"text-[10px] text-gray-300",children:"Gamer Girl Room"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),r.length>0?s("div",{class:"h-1/3 overflow-hidden rounded-lg",id:`ad-trending-${r[0].id}`,children:[s("a",{href:r[0].link,class:"block h-full w-full relative group",onclick:`fetch('/api/ads/${r[0].id}/click?placement=sidebar', {method:'post'})`,children:[r[0].imageUrl&&s("img",{src:r[0].imageUrl,class:"w-full h-full object-cover transition-transform group-hover:scale-110"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 flex flex-col items-center justify-center p-2 text-center",children:[s("p",{class:"text-[#FFD700] text-[10px] font-bold uppercase tracking-widest mb-1",children:"Patrocinado"},void 0,!1,void 0,this),s("p",{class:"text-white font-display text-lg leading-tight",children:r[0].title},void 0,!1,void 0,this),r[0].ctaText&&s("span",{class:"mt-2 bg-primary text-white text-[9px] px-2 py-1 rounded font-bold uppercase",children:r[0].ctaText},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
                        (function() {
                            const observer = new IntersectionObserver((entries) => {
                                entries.forEach(entry => {
                                    if (entry.isIntersecting) {
                                        fetch('/api/ads/${r[0].id}/impression?placement=sidebar', {method:'POST'});
                                        observer.unobserve(entry.target);
                                    }
                                });
                            }, { threshold: 0.1 });
                            const el = document.getElementById('ad-trending-${r[0].id}');
                            if (el) observer.observe(el);
                        })();
                    `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this):s("div",{class:"h-1/3 bg-[#111] rounded-lg border border-[#FFD700]/30 flex items-center justify-center relative overflow-hidden group",children:[s("div",{class:"text-center z-10",children:[s("p",{class:"text-[#FFD700] text-xs font-bold uppercase tracking-widest mb-1",children:"Promo\xE7\xE3o"},void 0,!1,void 0,this),s("p",{class:"text-white font-display text-xl",children:"50% OFF"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"absolute inset-0 bg-gradient-to-br from-purple-900/50 to-black/50 group-hover:opacity-0 transition-opacity"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var dA=({models:t,user:r,ads:e={},pagination:o})=>{let n=e0.getTrendingModels(),c=e0.getTags(),i=e.home_top?.filter((S)=>S.type==="hero")||[],f=e.home_top?.filter((S)=>S.type==="banner")||[],h=e.home_top?.filter((S)=>S.type==="diamond_block")||[],w=e.home_middle?.filter((S)=>S.type==="diamond_block")||[],p=e.home_bottom?.filter((S)=>S.type==="banner")||[],u=new Set,d=t.slice(0,5);d.forEach((S)=>u.add(S.id));let y=t.filter((S)=>!u.has(S.id)).slice(0,10);y.forEach((S)=>u.add(S.id));let R=t.filter((S)=>!u.has(S.id)).reverse();return console.log("[Home] Ads data:",{home_top_count:e.home_top?.length,home_middle_count:e.home_middle?.length,home_bottom_count:e.home_bottom?.length,top_banners:f.length,bottom_banners:p.length,models_counts:{total:t.length,recommended:d.length,featured:y.length,new_revelations:R.length}}),s(_o,{user:r,children:s("div",{class:"max-w-[1600px] mx-auto pb-20 p-4 md:p-6",children:[s("section",{class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6",children:[s("div",{class:"lg:col-span-3",children:[s(vw,{slides:i.map((S)=>({adId:S.id,placement:"home_top",image:S.imageUrl,title:S.title,category:S.category||"DESTAQUE",isLive:!1,link:S.link,modelSlug:S.link.includes("/models/")?S.link.split("/models/")[1]:void 0}))},void 0,!1,void 0,this),f.length>0&&s("div",{class:"mt-4",children:s(xs,{title:f[0].title,subtitle:f[0].subtitle||"",ctaText:f[0].ctaText||"Saiba Mais",link:f[0].link,imageUrl:f[0].imageUrl,adId:f[0].id,placement:"home_top"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s(_a,{model:n[0],sidebarAds:e.sidebar},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:c.map((S,T)=>s("button",{class:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${T===0?"bg-white text-black":"bg-[#1a1a1a] text-gray-400 hover:bg-[#333] hover:text-white"}`,children:S},void 0,!1,void 0,this))},void 0,!1,void 0,this),h.length>0&&s("div",{class:"mb-10",children:s(qs,{title:h[0].title||"Diamond Selection",placement:"home_top",models:h.slice(0,4).map((S)=>({adId:S.id,name:S.title,imageUrl:S.imageUrl||"",category:S.category||"Destaque",link:S.link}))},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("section",{class:"mb-8",children:[s("h3",{class:"font-display text-xl text-white mb-4 flex items-center gap-2",children:[s("span",{class:"w-1.5 h-6 bg-primary rounded-full"},void 0,!1,void 0,this),"Recomendados"]},void 0,!0,void 0,this),s("div",{class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 md:gap-4",children:d.map((S)=>s(jn,{id:S.id,name:S.name,postCount:S.postCount,thumbnailUrl:S.thumbnailUrl},void 0,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("section",{children:[s("h3",{class:"font-display text-xl text-white mb-4 flex items-center gap-2",children:[s("span",{class:"w-1.5 h-6 bg-primary rounded-full"},void 0,!1,void 0,this),"Modelos em Destaque"]},void 0,!0,void 0,this),s("div",{class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 md:gap-4",children:y.map((S)=>s(jn,{id:S.id,name:S.name,postCount:S.postCount,thumbnailUrl:S.thumbnailUrl},void 0,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),w.length>0&&s("div",{class:"my-10",children:s(qs,{title:w[0].title||"Diamond Selection",placement:"home_middle",models:w.slice(0,4).map((S)=>({adId:S.id,name:S.title,imageUrl:S.imageUrl||"",category:S.category||"Destaque",link:S.link}))},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("section",{class:"mt-8",children:[s("h3",{class:"font-display text-2xl text-white mb-4",children:"Novas Revela\xE7\xF5es"},void 0,!1,void 0,this),s("div",{id:"new-revelations-grid",class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 md:gap-4",children:R.map((S)=>s(jn,{id:S.id,name:S.name,postCount:S.postCount,thumbnailUrl:S.thumbnailUrl},void 0,!1,void 0,this))},void 0,!1,void 0,this),s("div",{id:"load-more-container",children:o?.hasNextPage&&s("div",{class:"mt-12 flex justify-center",children:s(Pr,{variant:"secondary",className:"min-w-[250px] !rounded-full py-4 border-white/20 hover:border-primary group",onClick:`this.setAttribute('disabled', 'true'); htmx.ajax('GET', '/?page=${o.currentPage+1}', {target: '#new-revelations-grid', swap: 'beforeend'})`,children:s("span",{class:"flex items-center gap-2",children:["Carregar Mais Modelos",s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 transition-transform group-hover:translate-y-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),p.map((S)=>s(xs,{title:S.title,subtitle:S.subtitle||"",ctaText:S.ctaText||"Saiba Mais",link:S.link,imageUrl:S.imageUrl,adId:S.id,placement:"home_bottom"},void 0,!1,void 0,this))]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var $a=()=>{return s("div",{class:"sticky top-16 z-40 bg-[#050505]/95 backdrop-blur border-b border-white/5 py-3 px-4 md:px-6 shadow-lg",children:s("div",{class:"max-w-[1600px] mx-auto flex flex-col md:flex-row items-center justify-between gap-4",children:[s("div",{class:"flex items-center gap-3 w-full md:w-auto",children:[s("h1",{class:"font-display text-2xl text-white",children:"Modelos"},void 0,!1,void 0,this),s("span",{class:"text-xs font-bold text-gray-500 bg-white/10 px-2 py-0.5 rounded",children:"12,450+"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center gap-2 overflow-x-auto w-full md:w-auto scrollbar-hide",children:[s("select",{class:"bg-[#121212] border border-white/10 text-white text-xs font-bold uppercase py-2 px-4 rounded-full focus:outline-none focus:border-primary",children:[s("option",{children:"Recomendados"},void 0,!1,void 0,this),s("option",{children:"Mais Populares"},void 0,!1,void 0,this),s("option",{children:"Novas"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"h-6 w-px bg-white/10 mx-2 flex-shrink-0"},void 0,!1,void 0,this),["Brasileiras","Live Now","4K","VR"].map((t)=>s("button",{class:"px-4 py-2 rounded-full bg-[#121212] border border-white/5 text-xs font-medium text-gray-400 hover:text-white hover:border-white/20 whitespace-nowrap transition-colors",children:t},void 0,!1,void 0,this))]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var ts=({currentPage:t,totalPages:r=1,nextUrl:e,prevUrl:o,baseUrl:n,showingFrom:c,showingTo:i,totalItems:f})=>{let h=o||(n&&t>1?`${n}?page=${t-1}`:void 0),w=e||(n&&r&&t<r?`${n}?page=${t+1}`:void 0);return s("div",{class:"px-6 py-4 border-t border-white/5 bg-[#1a1a1a] flex items-center justify-between",children:[s("div",{class:"text-xs text-gray-500",children:c&&i?s(Zr,{children:["Mostrando ",s("span",{class:"font-bold text-white",children:c},void 0,!1,void 0,this)," a ",s("span",{class:"font-bold text-white",children:i},void 0,!1,void 0,this)," de ",s("span",{class:"font-bold text-white",children:f||"muitos"},void 0,!1,void 0,this)," resultados"]},void 0,!0,void 0,this):s(Zr,{children:["P\xE1gina ",s("span",{class:"font-bold text-white",children:t},void 0,!1,void 0,this)," de ",s("span",{class:"font-bold text-white",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"flex items-center gap-2",children:[h?s("a",{href:h,class:"px-3 py-1.5 rounded bg-[#050505] border border-white/10 text-xs text-white hover:border-primary transition-colors",children:"Anterior"},void 0,!1,void 0,this):s("button",{disabled:!0,class:"px-3 py-1.5 rounded bg-[#050505] border border-white/5 text-xs text-gray-600 cursor-not-allowed",children:"Anterior"},void 0,!1,void 0,this),r>1&&s("div",{class:"hidden sm:flex gap-1",children:Array.from({length:Math.min(5,r)}).map((p,u)=>{let d=u+1,y=d===t,R=n?`${n}?page=${d}`:void 0;if(R)return s("a",{href:R,class:`w-8 h-8 rounded flex items-center justify-center text-xs font-bold transition-colors ${y?"bg-primary text-white":"bg-transparent text-gray-400 hover:text-white"}`,children:d},void 0,!1,void 0,this);return s("button",{class:`w-8 h-8 rounded flex items-center justify-center text-xs font-bold transition-colors ${y?"bg-primary text-white":"bg-transparent text-gray-400 hover:text-white"}`,children:d},void 0,!1,void 0,this)})},void 0,!1,void 0,this),w?s("a",{href:w,class:"px-3 py-1.5 rounded bg-[#050505] border border-white/10 text-xs text-white hover:border-primary transition-colors",children:"Pr\xF3xima"},void 0,!1,void 0,this):s("button",{disabled:!0,class:"px-3 py-1.5 rounded bg-[#050505] border border-white/5 text-xs text-gray-600 cursor-not-allowed",children:"Pr\xF3xima"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var Oa=({models:t,pagination:r,user:e,ads:o={}})=>{let n=(o.models_grid||[]).filter((c)=>c.type==="diamond_block");return s(_o,{title:"Explorar Modelos - CreatorFlix",user:e,children:[s($a,{},void 0,!1,void 0,this),s("div",{class:"max-w-[1600px] mx-auto px-4 md:px-6 py-6 min-h-screen",children:[n.length>0&&s("div",{class:"mb-8",children:s(qs,{title:n[0].title||"Diamond Selection",placement:"models_grid",models:n.slice(0,4).map((c)=>({adId:c.id,name:c.title,imageUrl:c.imageUrl||"",category:c.category||"VIP",link:c.link}))},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:t.map((c)=>s(jn,{id:c.id,name:c.folderName||c.name,postCount:c.postCount||0,thumbnailUrl:c.thumbnailUrl},void 0,!1,void 0,this))},void 0,!1,void 0,this),s(ts,{...r},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var Ra=({id:t,name:r,price:e,currency:o,period:n,features:c,highlighted:i,variant:f,badge:h,description:w,className:p,checkoutUrl:u,cardStyle:d,ctaText:y})=>{let R=d||f||"secondary",S=()=>s(Pr,{href:`/checkout?planId=${t}`,variant:i?"primary":R,className:i?"w-full !bg-gradient-to-r !from-gold !to-[#B8860B] !text-black hover:!brightness-110 !font-bold !text-lg !py-4 shadow-[0_0_20px_rgba(255,215,0,0.3)] border-none":`w-full ${R==="outline"?"border-gray-700 text-gray-400 hover:text-white hover:border-white":""}`,children:y||(i?`ASSINAR ${r}`:`Selecionar ${r}`)},void 0,!1,void 0,this);if(i)return s("div",{class:`relative p-1 rounded-2xl bg-gradient-to-b from-gold via-[#B8860B] to-black shadow-neon-gold transform scale-105 z-20 ${p||""}`,children:[h&&s("div",{class:"absolute -top-5 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gold to-[#B8860B] text-black font-bold uppercase tracking-widest text-xs px-6 py-2 rounded-full shadow-lg",children:h},void 0,!1,void 0,this),s("div",{class:"bg-[#080808] rounded-xl p-10 h-full flex flex-col justify-between",children:[s("div",{children:[s("div",{class:"text-center mb-8",children:[s("h3",{class:"text-4xl font-display text-transparent bg-clip-text bg-gradient-to-r from-gold to-white mb-2",children:r},void 0,!1,void 0,this),s("div",{class:"flex items-center justify-center gap-1",children:[s("span",{class:"text-lg text-gold/80",children:o},void 0,!1,void 0,this),s("span",{class:"text-6xl font-bold text-white",children:e},void 0,!1,void 0,this),n&&s("span",{class:"text-gray-500 text-sm",children:n},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"space-y-6 mb-10",children:c.map((T)=>s("div",{class:"flex items-center gap-4",children:[s("div",{class:"w-10 h-10 rounded-full bg-gold/10 flex items-center justify-center text-gold",children:T.icon||"\u2605"},void 0,!1,void 0,this),s("div",{children:[s("p",{class:"font-bold text-white",children:T.title||T},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-400",children:T.subtitle||""},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s(S,{},void 0,!1,void 0,this),s("p",{class:"text-center text-xs text-gray-500 mt-4",children:"Renova\xE7\xE3o autom\xE1tica. Cancele a qualquer momento."},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);return s("div",{class:`relative p-8 rounded-2xl bg-surface${R==="outline"?"/50 backdrop-blur-sm grayscale opacity-70 hover:grayscale-0 hover:opacity-100":" border border-white/10 hover:border-primary/50"} transition-all duration-300 flex flex-col justify-between h-full ${p||""}`,children:[s("div",{children:[s("h3",{class:`text-2xl font-display ${R==="outline"?"text-gray-400":"text-white"} mb-2`,children:r},void 0,!1,void 0,this),s("div",{class:"flex items-end gap-1 mb-8",children:[s("span",{class:`text-sm ${R==="outline"?"text-gray-500":"text-gray-400"} mb-1`,children:o},void 0,!1,void 0,this),s("span",{class:"text-4xl font-bold text-white",children:e},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("ul",{class:`space-y-4 mb-8 text-sm ${R==="outline"?"text-gray-500":"text-gray-300"}`,children:c.map((T)=>s("li",{class:"flex items-center gap-3",children:[s("span",{class:R==="outline"?"text-gray-600":"text-primary",children:"\u2713"},void 0,!1,void 0,this)," ",typeof T==="string"?T:T.title||T]},void 0,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s(S,{},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var yA=({plans:t,user:r})=>{if(r&&r.subscriptionStatus===1&&r.subscription){let e=r.subscription,o=e.startDate?new Date(e.startDate).toLocaleDateString("pt-BR"):"N/A",n=e.endDate?new Date(e.endDate).toLocaleDateString("pt-BR"):"N/A",c=e.plan?.name||"Plano VIP",i=e.plan?.price?(e.plan.price/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"N/A";return s(_o,{title:"Minha Assinatura - CreatorFlix",user:r,children:s("section",{class:"min-h-screen py-20 relative overflow-hidden flex items-center justify-center bg-[#050505]",children:[s("div",{class:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-primary/20 rounded-full blur-[120px] pointer-events-none"},void 0,!1,void 0,this),s("div",{class:"max-w-2xl mx-auto px-6 relative z-10 w-full",children:s("div",{class:"bg-surface border border-white/10 rounded-3xl p-8 md:p-12 shadow-2xl backdrop-blur-sm",children:[s("div",{class:"text-center mb-10",children:[s("div",{class:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary/10 text-primary text-4xl mb-6",children:"\uD83D\uDC8E"},void 0,!1,void 0,this),s("h1",{class:"text-3xl md:text-4xl font-display mb-2",children:"Sua Assinatura VIP"},void 0,!1,void 0,this),s("p",{class:"text-gray-400",children:"Voc\xEA tem acesso ilimitado a todo o conte\xFAdo."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"space-y-6",children:[s("div",{class:"flex justify-between items-center py-4 border-b border-white/5",children:[s("span",{class:"text-gray-500 uppercase text-xs font-bold tracking-widest",children:"Plano Contratado"},void 0,!1,void 0,this),s("span",{class:"text-white font-bold",children:c},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex justify-between items-center py-4 border-b border-white/5",children:[s("span",{class:"text-gray-500 uppercase text-xs font-bold tracking-widest",children:"Valor"},void 0,!1,void 0,this),s("span",{class:"text-primary font-bold",children:i},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex justify-between items-center py-4 border-b border-white/5",children:[s("span",{class:"text-gray-500 uppercase text-xs font-bold tracking-widest",children:"Data de In\xEDcio"},void 0,!1,void 0,this),s("span",{class:"text-white",children:o},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex justify-between items-center py-4 border-b border-white/5",children:[s("span",{class:"text-gray-500 uppercase text-xs font-bold tracking-widest",children:"Pr\xF3xima Cobran\xE7a"},void 0,!1,void 0,this),s("span",{class:"text-white",children:n},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"mt-12 flex flex-col gap-4",children:[s("a",{href:"/",class:"w-full text-center bg-white text-black py-4 rounded-xl font-bold hover:bg-gray-200 transition-all",children:"IR PARA O CAT\xC1LOGO"},void 0,!1,void 0,this),s("p",{class:"text-center text-xs text-gray-600",children:"Para gerenciar sua assinatura ou cancelar, entre em contato com o suporte."},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}return s(_o,{title:"Planos VIP - CreatorFlix",user:r,children:s("section",{class:"min-h-screen py-20 relative overflow-hidden flex items-center justify-center bg-[#050505]",children:[s("div",{class:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-primary/20 rounded-full blur-[120px] pointer-events-none"},void 0,!1,void 0,this),s("div",{class:"max-w-7xl mx-auto px-6 relative z-10 w-full",children:[s("div",{class:"text-center mb-20",children:[s("h1",{class:"text-5xl md:text-7xl font-display mb-4",children:["DESTRAVE O ACESSO",s("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-gold to-[#FFFDD0]",children:" VIP"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-gray-400 text-xl font-light tracking-wide",children:"Acesso imediato. Cancele quando quiser."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"grid lg:grid-cols-3 gap-8 items-center max-w-6xl mx-auto",children:t.map((e)=>s(Ra,{...e},void 0,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var Ia=()=>{return s("div",{class:"hidden lg:flex w-1/2 relative bg-black overflow-hidden items-center justify-center",children:[s("div",{class:"absolute inset-0 z-0",children:[s("img",{src:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=1200&q=80",class:"w-full h-full object-cover opacity-60 grayscale hover:grayscale-0 transition-all duration-1000 scale-105 animate-[pulse_10s_ease-in-out_infinite]"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 bg-gradient-to-r from-black via-black/50 to-transparent"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"relative z-10 p-12 max-w-lg",children:[s("span",{class:"inline-block px-3 py-1 mb-6 border border-[#FFD700] text-[#FFD700] text-xs font-bold uppercase tracking-[0.2em] rounded",children:"Acesso Premium"},void 0,!1,void 0,this),s("h2",{class:"text-6xl font-display text-white mb-6 leading-none",children:["Junte-se \xE0 ",s("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-400",children:"Elite"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("ul",{class:"space-y-4 text-gray-300 font-light text-lg mb-12",children:[s("li",{class:"flex items-center gap-3",children:[s("span",{class:"text-primary",children:"\u2713"},void 0,!1,void 0,this)," 50,000+ V\xEDdeos Exclusivos"]},void 0,!0,void 0,this),s("li",{class:"flex items-center gap-3",children:[s("span",{class:"text-primary",children:"\u2713"},void 0,!1,void 0,this)," Lives Privadas 24/7"]},void 0,!0,void 0,this),s("li",{class:"flex items-center gap-3",children:[s("span",{class:"text-primary",children:"\u2713"},void 0,!1,void 0,this)," Qualidade 4K Ultra HD"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"bg-white/5 backdrop-blur-md border border-white/10 rounded-xl p-4 flex items-center gap-4 cursor-pointer hover:bg-white/10 transition-colors",children:[s("div",{class:"w-12 h-12 bg-[#FFD700] rounded-full flex items-center justify-center text-black font-bold text-xl",children:"$"},void 0,!1,void 0,this),s("div",{children:[s("h4",{class:"font-bold text-white text-sm",children:"Parceiro Oficial: BetWin"},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-400",children:"Cadastre-se hoje e ganhe 50 rodadas gr\xE1tis."},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var AA=({type:t,ads:r=[]})=>{let e=t==="login",o=r[0];return s(_o,{title:e?"Login - CreatorFlix":"Acesso VIP - CreatorFlix",children:s("div",{class:"min-h-screen flex",children:[s(Ia,{},void 0,!1,void 0,this),s("div",{class:"w-full lg:w-1/2 flex flex-col justify-center items-center p-6 bg-[#050505] relative",children:[s("div",{class:"absolute inset-0 lg:hidden z-0",children:[s("img",{src:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=800&q=80",class:"w-full h-full object-cover opacity-20"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 bg-[#050505]/90"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"w-full max-w-md relative z-10",children:[s("div",{class:"text-center mb-10",children:[s("a",{href:"/",class:"inline-block font-display text-3xl text-white mb-2",children:["Creator",s("span",{class:"text-primary",children:"Flix"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("h1",{class:"text-2xl font-bold text-white",children:e?"Bem-vindo de volta":"Desbloqueie seu Acesso"},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm mt-2",children:e?"Entre para assistir suas criadoras favoritas.":"Crie sua conta gratuita em menos de 1 minuto."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("form",{class:"space-y-5",action:e?"/api/login":"/api/register",method:"post",children:[!e&&s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Nome de Usu\xE1rio"},void 0,!1,void 0,this),s("div",{class:"relative group",children:[s("input",{type:"text",name:"name",class:"w-full px-4 py-3 bg-[#121212] border border-white/10 rounded text-white placeholder-gray-600 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all peer",placeholder:"Escolha um nome \xFAnico"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 border border-transparent peer-focus:border-primary/50 rounded pointer-events-none animate-pulse"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Email"},void 0,!1,void 0,this),s("input",{type:"email",name:"email",class:"w-full px-4 py-3 bg-[#121212] border border-white/10 rounded text-white placeholder-gray-600 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all",placeholder:"seu@email.com"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("div",{class:"flex items-center justify-between mb-2",children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Senha"},void 0,!1,void 0,this),e&&s("a",{href:"#",class:"text-xs text-primary hover:text-white transition-colors",children:"Esqueceu?"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("input",{type:"password",name:"password",class:"w-full px-4 py-3 bg-[#121212] border border-white/10 rounded text-white placeholder-gray-600 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),!e&&s("div",{class:"flex items-start gap-3 p-3 bg-white/5 border border-white/5 rounded",children:[s("input",{type:"checkbox",checked:!0,class:"mt-1 accent-primary"},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-400",children:["Eu concordo com os Termos e confirmo que tenho ",s("span",{class:"text-white font-bold",children:"18 anos ou mais"},void 0,!1,void 0,this),"."]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s(Pr,{type:"submit",variant:"primary",className:"w-full !py-4 !text-base shadow-neon-purple font-display tracking-widest",children:e?"ENTRAR AGORA":"CRIAR CONTA GR\xC1TIS"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"mt-8 text-center border-t border-white/5 pt-6",children:s("p",{class:"text-sm text-gray-400",children:[e?"Novo por aqui? ":"J\xE1 \xE9 membro? ",s("a",{href:e?"/register":"/login",class:"text-primary font-bold hover:text-white uppercase tracking-wide ml-1",children:e?"Assinar VIP":"Fazer Login"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),o&&s("div",{class:"mt-8",id:`ad-auth-${o.id}`,children:[s("a",{href:o.link,class:"block relative rounded-lg overflow-hidden border border-[#FFD700]/30 group",onclick:`fetch('/api/ads/${o.id}/click?placement=${t}', {method:'post'})`,children:[s("div",{class:"bg-gradient-to-r from-[#1a1a1a] to-black p-4 flex items-center justify-between",children:[s("div",{children:[s("span",{class:"text-[10px] text-[#FFD700] border border-[#FFD700] px-1 font-bold uppercase",children:"Parceiro"},void 0,!1,void 0,this),s("h5",{class:"text-white font-bold mt-1",children:o.title},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-400",children:o.subtitle||o.ctaText},void 0,!1,void 0,this)]},void 0,!0,void 0,this),o.imageUrl?s("img",{src:o.imageUrl,class:"w-12 h-12 rounded object-cover"},void 0,!1,void 0,this):s("span",{class:"text-2xl",children:"\uD83C\uDFB0"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"h-1 w-full bg-[#FFD700]/20",children:s("div",{class:"h-full bg-[#FFD700] w-2/3"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
                    (function() {
                        const observer = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                if (entry.isIntersecting) {
                                    fetch('/api/ads/${o.id}/impression?placement=${t}', {method:'POST'});
                                    observer.unobserve(entry.target);
                                }
                            });
                        }, { threshold: 0.1 });
                        const el = document.getElementById('ad-auth-${o.id}');
                        if (el) observer.observe(el);
                    })();
                 `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"mt-8 flex justify-center gap-4 opacity-30 grayscale hover:grayscale-0 transition-all",children:[s("span",{class:"text-xs text-white border border-white px-2 py-1 rounded",children:"SSL SECURE"},void 0,!1,void 0,this),s("span",{class:"text-xs text-white border border-white px-2 py-1 rounded",children:"18+ ONLY"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var Mw=({children:t,onClick:r,className:e=""})=>{return s("button",{onclick:r,class:`p-3 rounded-full bg-black/40 backdrop-blur-md border border-white/10 hover:bg-white/10 transition-all ${e}`,children:t},void 0,!1,void 0,this)};var Ta=()=>{return s("div",{class:"absolute top-6 left-6 right-6 flex justify-between items-start z-20",children:[s(Mw,{onClick:"history.back()",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"m15 18-6-6 6-6"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{class:"flex gap-3",children:[s(Mw,{children:"\uD83D\uDCE4"},void 0,!1,void 0,this),s(Mw,{className:"text-primary",children:"\u2605"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var Na=({bannerUrl:t})=>{return s("div",{class:"relative h-[40vh] md:h-[55vh] w-full overflow-hidden",children:[s("div",{class:"absolute inset-0",children:[s("img",{src:t,alt:"",class:"w-full h-full object-cover scale-105 blur-[2px] opacity-40"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 bg-gradient-to-t from-[#050505] via-[#050505]/60 to-transparent"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s(Ta,{},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var zw=({src:t,alt:r,size:e="md",className:o=""})=>{return s("div",{class:`relative group ${{sm:"w-11 h-11",md:"w-20 h-20",lg:"w-32 h-32 md:w-44 md:h-44",xl:"w-full h-full"}[e]} ${o}`,children:[s("div",{class:"absolute -inset-0.5 bg-gradient-to-tr from-[#8A2BE2] to-[#00F0FF] rounded-full opacity-0 group-hover:opacity-75 blur transition-opacity duration-300"},void 0,!1,void 0,this),s("div",{class:`relative overflow-hidden object-cover w-full h-full rounded-full ring-2 ring-[#121212] ${o}`,children:s("img",{src:t,alt:r,class:"w-full h-full object-cover rounded-full"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var rs=({children:t,variant:r="default",className:e=""})=>{return s("div",{class:`${{live:"w-fit bg-red-600 text-[10px] font-black px-3 py-1 rounded-full border-2 border-[#050505] uppercase tracking-tighter shadow-lg animate-pulse",primary:"w-6 h-6 bg-primary rounded-full flex items-center justify-center text-[10px] shadow-[0_0_15px_rgba(255,0,0,0.4)]",default:"w-fit bg-white/5 px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest",success:"w-fit bg-green-500/20 text-green-400 px-2.5 py-0.5 rounded text-[10px] font-bold border border-green-500/20 uppercase tracking-wider",warning:"w-fit bg-yellow-500/20 text-yellow-400 px-2.5 py-0.5 rounded text-[10px] font-bold border border-yellow-500/20 uppercase tracking-wider",danger:"w-fit bg-red-500/20 text-red-400 px-2.5 py-0.5 rounded text-[10px] font-bold border border-red-500/20 uppercase tracking-wider",secondary:"w-fit bg-gray-500/20 text-gray-400 px-2.5 py-0.5 rounded text-[10px] font-bold border border-gray-500/20 uppercase tracking-wider"}[r]} ${e}`,children:t},void 0,!1,void 0,this)};var ma=({postCount:t,likesCount:r})=>{return s("div",{class:"flex gap-6 mt-4",children:[s("div",{class:"flex flex-col",children:[s("span",{class:"text-xl font-black",children:t||0},void 0,!1,void 0,this),s("span",{class:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Posts"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex flex-col",children:[s("span",{class:"text-xl font-black",children:r||0},void 0,!1,void 0,this),s("span",{class:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"F\xE3s"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var aa=({model:t,displayName:r})=>{return s("div",{class:"relative px-6 -mt-32 z-10 max-w-5xl mx-auto",children:s("div",{class:"flex flex-col md:flex-row md:items-end gap-6",children:[s("div",{class:"relative shrink-0 group",children:[s("div",{children:s(zw,{src:t.iconUrl||t.thumbnailUrl||"/static/img/placeholder_model.jpg",alt:r,size:"lg",className:"w-32 h-32 md:w-44 md:h-44"},void 0,!1,void 0,this)},void 0,!1,void 0,this),t.isLive&&s("div",{class:"absolute -bottom-2 left-1/2 -translate-x-1/2",children:s(rs,{variant:"live",children:"AO VIVO"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex-1 pb-2",children:[s("div",{class:"flex items-center gap-2 mb-1",children:[s("h1",{class:"text-3xl md:text-5xl font-black uppercase tracking-tighter italic",children:r},void 0,!1,void 0,this),s(rs,{variant:"primary",children:"\u2713"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-white/60 font-medium text-lg",children:["@",t.folderName]},void 0,!0,void 0,this),s(ma,{postCount:t.postCount,likesCount:t.likesCount},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"w-full md:w-auto pb-2",children:s(Pr,{variant:"primary",className:"w-full md:w-auto px-10 py-4 rounded-2xl font-black text-sm shadow-lg shadow-primary/20 active:scale-95 uppercase tracking-widest",children:"Assinar Acesso Total"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var Ua=({description:t})=>{return s("div",{class:"lg:col-span-1 space-y-6",children:s("div",{class:"p-6 rounded-2xl bg-[#121212] border border-[#222] shadow-sm hover:shadow-[0_0_15px_rgba(138,43,226,0.1)] transition-shadow duration-300",children:[s("h3",{class:"text-xs font-bold text-[#8A2BE2] uppercase tracking-[0.25em] mb-4 flex items-center gap-2",children:[s("span",{class:"w-1.5 h-1.5 rounded-full bg-[#8A2BE2]"},void 0,!1,void 0,this),"Sobre a Modelo"]},void 0,!0,void 0,this),s("p",{class:"text-gray-400 text-[15px] leading-loose whitespace-pre-line font-medium",children:t},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var Ha=()=>{return s("div",{class:"flex gap-8 mb-8 border-b border-white/5",children:[s("button",{class:"pb-4 border-b-2 border-primary text-sm font-black tracking-widest text-primary uppercase",children:"Publica\xE7\xF5es"},void 0,!1,void 0,this),s("button",{class:"pb-4 border-b-2 border-transparent text-sm font-black tracking-widest text-gray-500 hover:text-white transition-colors uppercase",children:"Galeria"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var ba=({mediaItems:t,postId:r,isBlurred:e=!1})=>{let o=t.length>1;return s("div",{class:"post-carousel relative w-full aspect-[4/5] bg-[#1a1a1a] overflow-hidden group","data-post-id":r,children:[t.map((n,c)=>s("div",{class:`carousel-item absolute inset-0 w-full h-full transition-opacity duration-500 ease-in-out ${c===0?"opacity-100 z-10":"opacity-0 z-0 pointer-events-none"}`,children:n.type==="video"?s("div",{class:"custom-video-wrapper w-full h-full relative group/video no-context-menu",onContextMenu:(i)=>i.preventDefault(),children:[s("video",{src:n.url,class:"w-full h-full object-cover",loop:!0,playsInline:!0,muted:!0,onContextMenu:(i)=>i.preventDefault()},void 0,!1,void 0,this),s("div",{class:"video-overlay absolute inset-0 cursor-pointer z-10"},void 0,!1,void 0,this),s("div",{class:"play-state-icon absolute inset-0 flex items-center justify-center pointer-events-none z-20 transition-opacity duration-200",children:s("div",{class:"w-16 h-16 rounded-full bg-black/40 backdrop-blur-sm flex items-center justify-center pl-1 border border-white/10 shadow-lg",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",class:"opacity-90",children:s("path",{d:"M8 5v14l11-7z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{class:"video-controls absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover/video:opacity-100 transition-opacity duration-300 z-30 flex items-center gap-3",children:[s("button",{class:"control-play-btn text-white hover:text-primary transition-colors",children:[s("svg",{class:"icon-play w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M8 5v14l11-7z"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("svg",{class:"icon-pause w-5 h-5 hidden",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("input",{type:"range",min:"0",max:"100",value:"0",step:"0.1",class:"video-scrubber flex-1 h-1 bg-white/30 rounded-full appearance-none outline-none"},void 0,!1,void 0,this),s("button",{class:"control-mute-btn text-white hover:text-primary transition-colors",children:[s("svg",{class:"icon-muted w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M11 5 6 9H2v6h4l5 4V5z"},void 0,!1,void 0,this),s("line",{x1:"23",x2:"1",y1:"9",y2:"9",transform:"rotate(45 12 12)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("svg",{class:"icon-unmuted w-5 h-5 hidden",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},void 0,!1,void 0,this),s("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this):s("img",{src:n.url,class:"w-full h-full object-cover",loading:"lazy",alt:"Post content"},void 0,!1,void 0,this)},void 0,!1,void 0,this)),e&&s("div",{class:"premium-blur-overlay",style:`background-image: url('${t[0]?.url||""}');`,"aria-hidden":"true"},void 0,!1,void 0,this),o&&s(Zr,{children:[s("button",{class:"carousel-prev absolute left-2 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full bg-black/60 text-white/90 flex items-center justify-center backdrop-blur-sm z-30 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity hover:bg-[#8A2BE2] hover:scale-110",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"m15 18-6-6 6-6"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("button",{class:"carousel-next absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full bg-black/60 text-white/90 flex items-center justify-center backdrop-blur-sm z-30 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity hover:bg-[#8A2BE2] hover:scale-110",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"m9 18 6-6-6-6"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{class:"absolute bottom-4 left-0 right-0 flex justify-center gap-1.5 z-30 pointer-events-none",children:t.map((n,c)=>s("div",{class:`carousel-dot w-1.5 h-1.5 rounded-full transition-all duration-300 cursor-pointer pointer-events-auto shadow-sm ${c===0?"bg-[#8A2BE2] w-4":"bg-white/50 hover:bg-white"}`},void 0,!1,void 0,this))},void 0,!1,void 0,this),s("div",{class:"carousel-counter absolute top-3 right-3 bg-black/60 backdrop-blur-md px-2 py-1 rounded-full text-[10px] font-bold text-white border border-white/10 z-30",children:["1/",t.length]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var kw=({post:t,model:r,displayName:e,isSubscribed:o=!1})=>{let n=t.mediaCdns?.images||t.images||[],c=t.mediaCdns?.videos||t.videos||[],i=[...n,...c],f=(w)=>/\.(mp4|webm|ogg|mov|m4v|mkv|avi|wmv|flv)(\?|$)/i.test(w),h=i.map((w)=>({type:f(w)?"video":"image",url:w}));if(h.length===0)h.push({type:"image",url:t.thumbnail||t.thumbnailUrl||"/static/img/placeholder.jpg"});return s("div",{class:"premium-stack-card group",children:[s("div",{class:"stack-header",children:[s("div",{class:"flex items-center gap-3",children:[s("div",{class:"relative",children:s(zw,{src:r.iconUrl||r.thumbnailUrl,alt:e,size:"sm",className:"!rounded-full ring-2 ring-[#2a2a2a]"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{class:"flex flex-col",children:[s("p",{class:"text-sm font-bold text-gray-100 hover:text-[#8A2BE2] transition-colors cursor-pointer",children:e},void 0,!1,void 0,this),s("p",{class:"text-[11px] text-gray-500 font-medium uppercase tracking-wider",children:t.createdAt||"Publicado Agora"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("button",{class:"action-btn !p-2 text-gray-500 hover:text-white",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("circle",{cx:"12",cy:"12",r:"1"},void 0,!1,void 0,this),s("circle",{cx:"19",cy:"12",r:"1"},void 0,!1,void 0,this),s("circle",{cx:"5",cy:"12",r:"1"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"stack-media relative overflow-hidden",children:[s(ba,{mediaItems:h,postId:t.id,isBlurred:!o},void 0,!1,void 0,this),!o&&s("div",{class:"premium-overlay absolute inset-0 z-40 flex flex-col items-center justify-center bg-black/50",children:s("div",{class:"relative z-10 flex flex-col items-center text-center px-6",children:[s("div",{class:"w-16 h-16 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center mb-4 border border-white/20 shadow-lg",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"w-8 h-8 text-white",children:[s("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},void 0,!1,void 0,this),s("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("h3",{class:"text-lg font-bold text-white mb-2",children:"Conte\xFAdo Exclusivo"},void 0,!1,void 0,this),s("p",{class:"text-sm text-gray-300 mb-5 max-w-[200px]",children:"Assine para desbloquear este e outros conte\xFAdos premium"},void 0,!1,void 0,this),s("a",{href:"/plans",class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#8A2BE2] to-[#9D4EDD] text-white text-sm font-bold rounded-full hover:from-[#7B27CC] hover:to-[#8E3FCC] transition-all duration-300 shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 hover:scale-105",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4",children:[s("path",{d:"M12 2L2 7l10 5 10-5-10-5z"},void 0,!1,void 0,this),s("path",{d:"M2 17l10 5 10-5"},void 0,!1,void 0,this),s("path",{d:"M2 12l10 5 10-5"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Assinar Agora"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"stack-footer",children:[s("div",{class:"flex items-center justify-between mb-4",children:s("div",{class:"flex gap-6",children:[" ",s("div",{class:"flex items-center gap-1.5 group/item",children:[s("button",{class:"action-btn group/like","aria-label":"Like",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 group-active/like:scale-75 transition-transform",children:s("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("span",{class:"text-sm font-semibold text-gray-400 group-hover/item:text-gray-200 transition-colors",children:t.likes||0},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center gap-1.5 group/item",children:[s("button",{class:"action-btn","aria-label":"Send Money",children:s("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"currentColor",style:"width: 24px; height: 24px; color: inherit; opacity: 0.9;",children:s("g",{id:"SVGRepo_iconCarrier",children:s("g",{"data-name":"11. Phone",id:"_11._Phone",children:[s("path",{d:"M14,6a1,1,0,0,0,0-2H8A1,1,0,0,0,8,6Z"},void 0,!1,void 0,this),s("path",{d:"M21,8.84v-4A4.8,4.8,0,0,0,16.21,0H5.79A4.8,4.8,0,0,0,1,4.79V27.21A4.8,4.8,0,0,0,5.79,32H16.21A4.8,4.8,0,0,0,21,27.21v-.05A10,10,0,0,0,21,8.84ZM16.21,30H5.79A2.79,2.79,0,0,1,3,27.21V4.79A2.79,2.79,0,0,1,5.79,2H16.21A2.79,2.79,0,0,1,19,4.79V8.2A10.2,10.2,0,0,0,17,8a9.92,9.92,0,0,0-7,2.89V10a1,1,0,0,0-2,0V26a1,1,0,0,0,2,0v-.89A9.92,9.92,0,0,0,17,28a10.19,10.19,0,0,0,1.93-.19A2.79,2.79,0,0,1,16.21,30ZM17,26a8,8,0,0,1-7-4.14V14.14A8,8,0,1,1,17,26Z"},void 0,!1,void 0,this),s("path",{d:"M17,15h2a1,1,0,0,0,0-2H18a1,1,0,0,0-2,0v.18A3,3,0,0,0,17,19a1,1,0,0,1,0,2H15a1,1,0,0,0,0,2h1a1,1,0,0,0,2,0v-.18A3,3,0,0,0,17,17a1,1,0,0,1,0-2Z"},void 0,!1,void 0,this),s("path",{d:"M30,5H27.41l.3-.29a1,1,0,1,0-1.42-1.42l-2,2a1,1,0,0,0,0,1.42l2,2a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L27.41,7H30a1,1,0,0,0,0-2Z"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("span",{class:"text-sm font-semibold text-gray-400 group-hover/item:text-gray-200 transition-colors",children:["$",t.tipsTotal||0]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),t.title&&s("div",{class:"mb-2",children:s("p",{class:"text-sm text-gray-300 leading-relaxed",children:[s("span",{class:"font-bold text-white mr-2",children:e},void 0,!1,void 0,this),t.title]},void 0,!0,void 0,this)},void 0,!1,void 0,this),t.comments>0&&s("button",{class:"text-gray-500 text-xs hover:text-gray-300 transition-colors mt-1 font-medium",children:["Ver todos os ",t.comments," coment\xE1rios"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var la=({initialPosts:t,model:r,displayName:e,isSubscribed:o=!1})=>{return s("div",{class:"lg:col-span-2",children:[s("div",{id:"posts-feed",children:t.map((n)=>s(kw,{post:n,model:r,displayName:e,isSubscribed:o},void 0,!1,void 0,this))},void 0,!1,void 0,this),s("div",{id:"infinite-sentinel",class:"py-20 flex flex-col items-center justify-center gap-4",children:[s("div",{class:"w-10 h-10 border-4 border-[#8A2BE2] border-t-transparent rounded-full animate-spin"},void 0,!1,void 0,this),s("p",{class:"text-[10px] font-bold uppercase tracking-[0.3em] text-gray-600",children:"Carregando Conte\xFAdo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
        (function() {
            let page = 1;
            let loading = false;
            const modelSlug = "${r.folderName}";
            const modelIcon = "${r.iconUrl||r.thumbnailUrl}";
            const displayName = "${e}";
            const isSubscribed = ${o?"true":"false"};
            const feed = document.getElementById('posts-feed');
            const sentinel = document.getElementById('infinite-sentinel');

            if (!feed || !sentinel) {
                console.error("PostFeed: Feed or Sentinel element not found.");
                return;
            }

            function reinitCarousels() {
               if (window.initPostCarousels) {
                 window.initPostCarousels();
               }
            }
            
            // Fun\xE7\xE3o para gerar o overlay premium
            function getPremiumOverlayHtml() {
                if (isSubscribed) return '';
                return '<div class="premium-overlay absolute inset-0 z-40 flex flex-col items-center justify-center bg-black/50">' +
                    '<div class="relative z-10 flex flex-col items-center text-center px-6">' +
                        '<div class="w-16 h-16 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center mb-4 border border-white/20 shadow-lg">' +
                            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 text-white">' +
                                '<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>' +
                                '<path d="M7 11V7a5 5 0 0 1 10 0v4"></path>' +
                            '</svg>' +
                        '</div>' +
                        '<h3 class="text-lg font-bold text-white mb-2">Conte\xFAdo Exclusivo</h3>' +
                        '<p class="text-sm text-gray-300 mb-5 max-w-[200px]">Assine para desbloquear este e outros conte\xFAdos premium</p>' +
                        '<a href="/plans" class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#8A2BE2] to-[#9D4EDD] text-white text-sm font-bold rounded-full hover:from-[#7B27CC] hover:to-[#8E3FCC] transition-all duration-300 shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 hover:scale-105">' +
                            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg>' +
                            'Assinar Agora' +
                        '</a>' +
                    '</div>' +
                '</div>';
            }

            const observer = new IntersectionObserver(async (entries) => {
              if (entries[0].isIntersecting && !loading) {
                loading = true;
                page++;
                console.log("Loading page " + page);
                
                try {
                  const response = await fetch("/api/models/" + modelSlug + "/posts?page=" + page);
                  if (!response.ok) throw new Error("API responded with " + response.status);
                  const result = await response.json();
                  
                  if (result.data && result.data.length > 0) {
                    result.data.forEach(post => {
                        const rawImages = (post.mediaCdns?.images || post.images || []);
                        const rawVideos = (post.mediaCdns?.videos || post.videos || []);
                        const allUrls = [...rawImages, ...rawVideos];
                        
                        const isVideo = (url) => /\\.(mp4|webm|ogg|mov|m4v|mkv|avi|wmv|flv)(\\?|$)/i.test(url);
                        
                        let mediaItems = allUrls.map(url => ({
                            type: isVideo(url) ? 'video' : 'image',
                            url
                        }));

                        if (mediaItems.length === 0) mediaItems.push({ type: 'image', url: post.thumbnail || post.thumbnailUrl || "/static/img/placeholder.jpg" });

                        let postHtml = '<div class="premium-stack-card group">';
                        
                        // 1. Header (Updated to match Avatar.tsx size="sm" structure)
                        postHtml += '<div class="stack-header">';
                        postHtml +=   '<div class="flex items-center gap-3">';
                        postHtml +=     '<div class="relative">';
                        postHtml +=       '<div class="relative group w-11 h-11 !rounded-full ring-2 ring-[#2a2a2a]">';
                        postHtml +=         '<div class="absolute -inset-0.5 bg-gradient-to-tr from-[#8A2BE2] to-[#00F0FF] rounded-full opacity-0 group-hover:opacity-75 blur transition-opacity duration-300"></div>';
                        postHtml +=         '<div class="relative overflow-hidden object-cover w-full h-full rounded-full ring-2 ring-[#121212] !rounded-full ring-2 ring-[#2a2a2a]">';
                        postHtml +=             '<img src="' + modelIcon + '" class="w-full h-full object-cover rounded-full" />';
                        postHtml +=         '</div>';
                        postHtml +=       '</div>';
                        postHtml +=     '</div>';
                        postHtml +=     '<div class="flex flex-col">';
                        postHtml +=       '<p class="text-sm font-bold text-gray-100 hover:text-[#8A2BE2] transition-colors cursor-pointer">' + displayName + '</p>';
                        postHtml +=       '<p class="text-[11px] text-gray-500 font-medium uppercase tracking-wider">' + (post.createdAt || 'Publicado Agora') + '</p>';
                        postHtml +=     '</div>';
                        postHtml +=   '</div>';
                        postHtml +=   '<button class="action-btn !p-2 text-gray-500 hover:text-white">';
                        postHtml +=     '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg>';
                        postHtml +=   '</button>';
                        postHtml += '</div>';

                        // 2. Media
                        postHtml += '<div class="stack-media relative overflow-hidden">';
                        postHtml +=   '<div class="post-carousel relative w-full aspect-[4/5] bg-[#000] overflow-hidden group" data-post-id="' + post.id + '">';
                        
                        postHtml += mediaItems.map((item, idx) => {
                            let itemHtml = '<div class="carousel-item absolute inset-0 w-full h-full transition-opacity duration-500 ease-in-out ' + (idx === 0 ? 'opacity-100 z-10' : 'opacity-0 z-0 pointer-events-none') + '">';
                            
                            if (item.type === 'video') {
                                itemHtml += '<div class="custom-video-wrapper w-full h-full relative group/video no-context-menu" oncontextmenu="return false;">';
                                itemHtml +=   '<video src="' + item.url + '" class="w-full h-full object-cover" loop playsinline muted oncontextmenu="return false;"></video>';
                                itemHtml +=   '<div class="video-overlay absolute inset-0 cursor-pointer z-10"></div>';
                                itemHtml +=   '<div class="play-state-icon absolute inset-0 flex items-center justify-center pointer-events-none z-20 transition-opacity duration-200">';
                                itemHtml +=     '<div class="w-16 h-16 rounded-full bg-black/40 backdrop-blur-sm flex items-center justify-center pl-1 border border-white/10 shadow-lg">';
                                itemHtml +=       '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="white" class="opacity-90"><path d="M8 5v14l11-7z"/></svg>';
                                itemHtml +=     '</div>';
                                itemHtml +=   '</div>';
                                itemHtml +=   '<div class="video-controls absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover/video:opacity-100 transition-opacity duration-300 z-30 flex items-center gap-3">';
                                itemHtml +=      '<button class="control-play-btn text-white hover:text-primary transition-colors">';
                                itemHtml +=        '<svg class="icon-play w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>';
                                itemHtml +=        '<svg class="icon-pause w-5 h-5 hidden" viewBox="0 0 24 24" fill="currentColor"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/></svg>';
                                itemHtml +=      '</button>';
                                itemHtml +=      '<input type="range" min="0" max="100" value="0" step="0.1" class="video-scrubber flex-1 h-1 bg-white/30 rounded-full appearance-none outline-none" />';
                                itemHtml +=      '<button class="control-mute-btn text-white hover:text-primary transition-colors">';
                                itemHtml +=         '<svg class="icon-muted w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5 6 9H2v6h4l5 4V5z"/><line x1="23" x2="1" y1="9" y2="9" transform="rotate(45 12 12)"/></svg>';
                                itemHtml +=         '<svg class="icon-unmuted w-5 h-5 hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>';
                                itemHtml +=      '</button>';
                                itemHtml +=   '</div>';
                                itemHtml += '</div>';
                            } else {
                                itemHtml += '<img src="' + item.url + '" class="w-full h-full object-cover" loading="lazy" alt="Post content" />';
                            }
                            itemHtml += '</div>';
                            return itemHtml;
                        }).join('');
                        
                        // Adicionar blur overlay se n\xE3o for assinante - otimizado para performance
                        if (!isSubscribed && mediaItems.length > 0) {
                            postHtml += '<div class="premium-blur-overlay" style="background-image: url('' + mediaItems[0].url + '');" aria-hidden="true"></div>';
                        }

                        if (mediaItems.length > 1) {
                            postHtml += '<button class="carousel-prev absolute left-2 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full bg-black/60 text-white/90 flex items-center justify-center backdrop-blur-sm z-30 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity hover:bg-[#8A2BE2] hover:scale-110">';
                            postHtml +=   '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>';
                            postHtml += '</button>';
                            postHtml += '<button class="carousel-next absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full bg-black/60 text-white/90 flex items-center justify-center backdrop-blur-sm z-30 cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity hover:bg-[#8A2BE2] hover:scale-110">';
                            postHtml +=   '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>';
                            postHtml += '</button>';
                            
                            postHtml += '<div class="absolute bottom-4 left-0 right-0 flex justify-center gap-1.5 z-30 pointer-events-none">';
                            postHtml +=   mediaItems.map((_, i) => {
                                 return '<div class="carousel-dot w-1.5 h-1.5 rounded-full transition-all duration-300 cursor-pointer pointer-events-auto shadow-sm ' + (i === 0 ? 'bg-[#8A2BE2] w-4' : 'bg-white/50 hover:bg-white') + '"></div>';
                            }).join('');
                            postHtml += '</div>';
                            
                            postHtml += '<div class="carousel-counter absolute top-3 right-3 bg-black/60 backdrop-blur-md px-2 py-1 rounded-full text-[10px] font-bold text-white border border-white/10 z-30">';
                            postHtml +=   '1/' + mediaItems.length;
                            postHtml += '</div>';
                        }
                        
                        postHtml += '</div>'; // Close carousel
                        postHtml += getPremiumOverlayHtml(); // Add premium overlay
                        postHtml += '</div>'; // Close stack-media 

                        // 3. Footer (Updated to match PostCard.tsx exact structure)
                        postHtml += '<div class="stack-footer">';
                        
                        // Interaction Row
                        postHtml += '<div class="flex items-center justify-between mb-4">';
                        postHtml +=   '<div class="flex gap-6">';
                        
                        // Likes
                        postHtml +=     '<div class="flex items-center gap-1.5 group/item">';
                        postHtml +=       '<button class="action-btn group/like" aria-label="Like">';
                        postHtml +=         '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="w-6 h-6 group-active/like:scale-75 transition-transform"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>';
                        postHtml +=       '</button>';
                        postHtml +=       '<span class="text-sm font-semibold text-gray-400 group-hover/item:text-gray-200 transition-colors">' + (post.likes || 0) + '</span>';
                        postHtml +=     '</div>';

                        // Tips (Donate)
                        postHtml +=     '<div class="flex items-center gap-1.5 group/item">';
                        postHtml +=       '<button class="action-btn" aria-label="Send Money">';
                        postHtml +=         '<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="currentColor" style="width: 24px; height: 24px; color: inherit; opacity: 0.9;">';
                        postHtml +=           '<g id="SVGRepo_iconCarrier"><g data-name="11. Phone" id="_11._Phone">';
                        postHtml +=             '<path d="M14,6a1,1,0,0,0,0-2H8A1,1,0,0,0,8,6Z"></path>';
                        postHtml +=             '<path d="M21,8.84v-4A4.8,4.8,0,0,0,16.21,0H5.79A4.8,4.8,0,0,0,1,4.79V27.21A4.8,4.8,0,0,0,5.79,32H16.21A4.8,4.8,0,0,0,21,27.21v-.05A10,10,0,0,0,21,8.84ZM16.21,30H5.79A2.79,2.79,0,0,1,3,27.21V4.79A2.79,2.79,0,0,1,5.79,2H16.21A2.79,2.79,0,0,1,19,4.79V8.2A10.2,10.2,0,0,0,17,8a9.92,9.92,0,0,0-7,2.89V10a1,1,0,0,0-2,0V26a1,1,0,0,0,2,0v-.89A9.92,9.92,0,0,0,17,28a10.19,10.19,0,0,0,1.93-.19A2.79,2.79,0,0,1,16.21,30ZM17,26a8,8,0,0,1-7-4.14V14.14A8,8,0,1,1,17,26Z"></path>';
                        postHtml +=             '<path d="M17,15h2a1,1,0,0,0,0-2H18a1,1,0,0,0-2,0v.18A3,3,0,0,0,17,19a1,1,0,0,1,0,2H15a1,1,0,0,0,0,2h1a1,1,0,0,0,2,0v-.18A3,3,0,0,0,17,17a1,1,0,0,1,0-2Z"></path>';
                        postHtml +=             '<path d="M30,5H27.41l.3-.29a1,1,0,1,0-1.42-1.42l-2,2a1,1,0,0,0,0,1.42l2,2a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L27.41,7H30a1,1,0,0,0,0-2Z"></path>';
                        postHtml +=           '</g></g>';
                        postHtml +=         '</svg>';
                        postHtml +=       '</button>';
                        postHtml +=       '<span class="text-sm font-semibold text-gray-400 group-hover/item:text-gray-200 transition-colors">$' + (post.tipsTotal || 0) + '</span>';
                        postHtml +=     '</div>';

                        postHtml +=   '</div>'; // Close gap-6 flex
                        postHtml += '</div>'; // Close interaction row flex

                        if (post.title) {
                            postHtml += '<div class="mb-2"><p class="text-sm text-gray-300 leading-relaxed"><span class="font-bold text-white mr-2">' + displayName + '</span>' + post.title + '</p></div>';
                        }
                        
                        if (post.comments > 0) {
                            postHtml += '<button class="text-gray-500 text-xs hover:text-gray-300 transition-colors mt-1 font-medium">Ver todos os ' + post.comments + ' coment\xE1rios</button>';
                        }

                        postHtml += '</div>'; 
                        postHtml += '</div>'; 

                        feed.insertAdjacentHTML('beforeend', postHtml);
                    });
                    reinitCarousels();
                    loading = false;
                  } else {
                    sentinel.innerHTML = "<p class='text-gray-600 text-xs font-black uppercase tracking-widest'>Fim do cat\xE1logo</p>";
                    observer.unobserve(sentinel);
                  }
                } catch (err) {
                  console.error("Infinite scroll error:", err);
                  loading = false;
                  sentinel.innerHTML = "<div class='text-red-500 text-xs font-bold text-center'>Erro ao carregar.<br>Verifique sua conex\xE3o.</div>";
                }
              }
            }, { threshold: 0.1 });
            observer.observe(sentinel);
        })();
      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var Fa=({model:t,initialPosts:r,user:e,ads:o={}})=>{let n=t.folderName,c=t.name||n,i=e?.subscriptionStatus===1,f=t.bannerUrl||t.thumbnailUrl||"/static/img/placeholder_model.jpg",h=o.model_profile?.filter((p)=>p.type==="spot")||[],w=o.model_sidebar?.filter((p)=>p.type==="spot")||[];return s(_o,{title:`${c} (@${n}) - Perfil Exclusivo`,user:e,children:[s("div",{class:"relative min-h-screen bg-[#050505] text-white font-sans pb-20",children:[s(Na,{bannerUrl:f},void 0,!1,void 0,this),s(aa,{model:t,displayName:c},void 0,!1,void 0,this),s("div",{class:"px-6 mt-10 max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-10",children:[s("div",{children:[s(Ua,{description:t.description||"Bem-vindo ao meu perfil exclusivo. Assine para ter acesso a conte\xFAdos in\xE9ditos diariamente."},void 0,!1,void 0,this),w.length>0&&s("div",{class:"mt-6 space-y-4",children:w.slice(0,2).map((p)=>{let u=`ad-model-sidebar-${p.id}-${Math.random().toString(36).substr(2,9)}`;return s("div",{id:u,children:[s("a",{href:p.link,class:"block rounded-lg overflow-hidden border border-white/10 hover:border-primary/50 transition-colors group",onclick:`fetch('/api/ads/${p.id}/click?placement=model_sidebar', {method:'POST'})`,children:[p.imageUrl&&s("img",{src:p.imageUrl,class:"w-full h-32 object-cover group-hover:scale-105 transition-transform"},void 0,!1,void 0,this),s("div",{class:"p-3 bg-[#1a1a1a]",children:[s("span",{class:"text-[10px] text-[#FFD700] font-bold uppercase",children:"Patrocinado"},void 0,!1,void 0,this),s("h5",{class:"text-white font-bold text-sm mt-1",children:p.title},void 0,!1,void 0,this),p.ctaText&&s("span",{class:"text-xs text-primary mt-2 inline-block",children:p.ctaText},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
                        (function() {
                          const observer = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                              if (entry.isIntersecting) {
                                fetch('/api/ads/${p.id}/impression?placement=model_sidebar', {method:'POST'});
                                observer.unobserve(entry.target);
                              }
                            });
                          }, { threshold: 0.1 });
                          const el = document.getElementById('${u}');
                          if (el) observer.observe(el);
                        })();
                      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)})},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"lg:col-span-2",children:[s(Ha,{},void 0,!1,void 0,this),h.length>0&&s("div",{class:"mb-6",children:s(xs,{title:h[0].title,subtitle:h[0].subtitle||"",ctaText:h[0].ctaText||"Saiba Mais",link:h[0].link,imageUrl:h[0].imageUrl,adId:h[0].id,placement:"model_profile"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s(la,{initialPosts:r,model:t,displayName:c,isSubscribed:i},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("script",{src:"/static/js/post-carousel.js"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var La=({id:t,user:r})=>{let e=e0.getPostById(parseInt(t));return s(_o,{title:`${e.title} - ${e.modelName} | CreatorFlix`,user:r,children:s("div",{class:"max-w-4xl mx-auto min-h-screen pb-20 p-4",children:[s("div",{class:"flex items-center gap-4 mb-6",children:[s("button",{onclick:"history.back()",class:"p-2 text-gray-400 hover:text-white transition-colors",children:"\u2190 Voltar"},void 0,!1,void 0,this),s("h1",{class:"text-lg font-bold truncate",children:["Post de ",e.modelName]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s("div",{class:"lg:col-span-2 space-y-4",children:s("div",{class:"bg-[#111] rounded-2xl overflow-hidden border border-white/5",children:[s("div",{class:"relative w-full bg-black flex items-center justify-center min-h-[400px]",children:[e.type==="video"?s("video",{src:e.mediaUrl,controls:!0,class:"w-full h-full max-h-[80vh] object-contain"},void 0,!1,void 0,this):s("img",{src:e.mediaUrl,alt:e.title,class:"w-full h-full max-h-[80vh] object-contain"},void 0,!1,void 0,this),e.isLocked&&s("div",{class:"absolute inset-0 bg-black/80 backdrop-blur-xl flex flex-col items-center justify-center p-8 text-center",children:[s("div",{class:"w-20 h-20 bg-white/10 rounded-full flex items-center justify-center mb-6 text-4xl",children:"\uD83D\uDD12"},void 0,!1,void 0,this),s("h2",{class:"text-2xl font-bold mb-3",children:"Conte\xFAdo Bloqueado"},void 0,!1,void 0,this),s("p",{class:"text-gray-400 mb-8 max-w-xs",children:"Este post \xE9 exclusivo para assinantes. Fa\xE7a o upgrade do seu plano para ver agora."},void 0,!1,void 0,this),s("a",{href:"/plans",class:"bg-primary hover:bg-primary-hover text-white px-10 py-3 rounded-full font-bold transition-all transform hover:scale-105",children:"VER PLANOS DE ASSINATURA"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"p-6",children:[s("div",{class:"flex justify-between items-start mb-4",children:[s("div",{children:[s("h2",{class:"text-xl font-bold text-white mb-1",children:e.title},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-500 uppercase font-bold tracking-widest",children:e.createdAt},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-4",children:[s("button",{class:"flex flex-col items-center text-gray-400 hover:text-red-500 transition-colors",children:[s("span",{class:"text-xl",children:"\u2764\uFE0F"},void 0,!1,void 0,this),s("span",{class:"text-[10px] font-bold mt-1",children:e.likes},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("button",{class:"flex flex-col items-center text-gray-400 hover:text-primary transition-colors",children:[s("span",{class:"text-xl",children:"\uD83D\uDCAC"},void 0,!1,void 0,this),s("span",{class:"text-[10px] font-bold mt-1",children:e.comments},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-gray-300 leading-relaxed",children:e.content},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"border-t border-white/5 p-6 bg-black/20",children:[s("h3",{class:"font-bold text-sm mb-4",children:["Coment\xE1rios (",e.comments,")"]},void 0,!0,void 0,this),s("div",{class:"space-y-4",children:[s("div",{class:"flex gap-3",children:[s("div",{class:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-[10px] font-bold",children:"U1"},void 0,!1,void 0,this),s("div",{class:"bg-white/5 rounded-2xl p-3 flex-1",children:[s("p",{class:"text-xs font-bold mb-1",children:"user_alpha99"},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-400",children:"Maravilhosa demais! Ansioso pelo pr\xF3ximo set."},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-3",children:[s("div",{class:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-[10px] font-bold",children:"U2"},void 0,!1,void 0,this),s("div",{class:"bg-white/5 rounded-2xl p-3 flex-1",children:[s("p",{class:"text-xs font-bold mb-1",children:"joao_premium"},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-400",children:"O melhor conte\xFAdo da plataforma com certeza. \uD83D\uDD25\uD83D\uDD25\uD83D\uDD25"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"mt-6 flex gap-3",children:[s("div",{class:"w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center text-[10px] font-bold text-gray-500",children:"YOU"},void 0,!1,void 0,this),s("div",{class:"flex-1 relative",children:[s("input",{type:"text",placeholder:"Escreva um coment\xE1rio...",class:"w-full bg-white/5 border border-white/10 rounded-full py-2 px-4 text-xs focus:outline-none focus:border-primary transition-colors"},void 0,!1,void 0,this),s("button",{class:"absolute right-2 top-1/2 -translate-y-1/2 text-primary font-bold text-[10px] px-2",children:"ENVIAR"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"space-y-6",children:[s("div",{class:"bg-[#111] rounded-2xl p-6 border border-white/5 sticky top-24",children:[s("div",{class:"flex items-center gap-4 mb-6",children:[s("div",{class:"w-16 h-16 rounded-full overflow-hidden border-2 border-primary/30",children:s("img",{src:e.modelImageUrl,alt:e.modelName,class:"w-full h-full object-cover"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{children:[s("h3",{class:"font-bold text-lg",children:[e.modelName," ",s("span",{class:"text-primary text-xs",children:"\u2713"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-xs text-gray-500",children:"@modelo_premium"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-xs text-gray-400 mb-6 line-clamp-3",children:"Bem-vindo ao meu perfil! Aqui voc\xEA encontra conte\xFAdo exclusivo, bastidores e muito mais. N\xE3o esque\xE7a de assinar para ver tudo!"},void 0,!1,void 0,this),s("a",{href:"/models/slug-da-modelo",class:"block w-full text-center bg-white text-black py-3 rounded-xl font-bold text-sm hover:bg-gray-200 transition-colors mb-3",children:"VER PERFIL COMPLETO"},void 0,!1,void 0,this),s("button",{class:"w-full text-center border border-white/10 text-white py-3 rounded-xl font-bold text-sm hover:bg-white/5 transition-colors",children:"MENSAGEM DIRETA"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"bg-[#111] rounded-2xl p-6 border border-white/5",children:[s("h4",{class:"font-bold text-xs uppercase tracking-widest text-gray-500 mb-4",children:"Relacionados"},void 0,!1,void 0,this),s("div",{class:"space-y-4",children:[s("div",{class:"flex gap-3 group cursor-pointer",children:[s("div",{class:"w-16 h-16 rounded-lg overflow-hidden bg-gray-900 flex-shrink-0",children:s("img",{src:"https://images.unsplash.com/photo-1524250502761-1ac6f2e30d43?w=200&q=80",class:"w-full h-full object-cover group-hover:scale-110 transition-transform"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{children:[s("p",{class:"text-xs font-bold line-clamp-1 group-hover:text-primary transition-colors",children:"Aulas de Yoga e Flexibilidade"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"2.4k curtidas"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-3 group cursor-pointer",children:[s("div",{class:"w-16 h-16 rounded-lg overflow-hidden bg-gray-900 flex-shrink-0",children:s("img",{src:"https://images.unsplash.com/photo-1529139574466-a302d2d3f524?w=200&q=80",class:"w-full h-full object-cover group-hover:scale-110 transition-transform"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{children:[s("p",{class:"text-xs font-bold line-clamp-1 group-hover:text-primary transition-colors",children:"Look do Dia: Especial Ver\xE3o"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"1.8k curtidas"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};Af();GT();var Sf={parse(t){if(!t||t.endsWith("/"))return{type:"unknown",modelName:""};let r=t.split("/"),e=r[0];if(!e)return{type:"unknown",modelName:""};if(r.length===2){let o=r[1];if(/\.(jpg|jpeg|png|webp)$/i.test(o))return{type:"model",modelName:e,fileName:o,isImage:!0}}if(r.length>=3){let o=r[1];if(o==="profile"){let f=r.slice(2).join("/");if(/\.(jpg|jpeg|png|webp)$/i.test(f))return{type:"profile_media",modelName:e,fileName:f,isImage:!0};return{type:"unknown",modelName:e}}let n=r.slice(2).join("/"),c=/\.(mp4|mov|webm|m4v|mkv|avi|wmv|flv)$/i.test(n);return{type:"media",modelName:e,postName:o,fileName:n,isImage:!c,isVideo:c}}return{type:"unknown",modelName:e}}};Fe();pe();we();var re={async fetchKnownModels(){let t=await L.select({id:Lt.id,folderName:Lt.folderName}).from(Lt);return new Map(t.map((r)=>[r.folderName,r.id]))},async fetchKnownPosts(){let t=await L.select({id:jt.id,modelId:jt.whitelabelModelId,folderName:jt.folderName}).from(jt);return new Map(t.map((r)=>[`${r.modelId}:${r.folderName}`,r.id]))},async insertModels(t){if(t.length===0)return[];return await L.insert(Lt).values(t).onConflictDoNothing().returning({id:Lt.id,folderName:Lt.folderName})},async deleteModels(t){if(t.length===0)return;await L.delete(Lt).where(bo(Lt.id,t))},async insertPosts(t){if(t.length===0)return[];return await L.insert(jt).values(t).onConflictDoNothing().returning({id:jt.id,whitelabelModelId:jt.whitelabelModelId,folderName:jt.folderName})},async deletePosts(t){if(t.length===0)return;await L.delete(jt).where(bo(jt.id,t))},async insertMedia(t){if(t.length===0)return;await L.insert(le).values(t).onConflictDoUpdate({target:le.s3Key,set:{url:I`excluded.url`}})},async updateModelProfile(t,r){if(!r.iconUrl&&!r.bannerUrl)return;await L.update(Lt).set(r).where(I`${Lt.id} = ${t}`)},async updateAggregates(t){let r=t?I`WHERE id = ${t}`:I``,e=t?I`WHERE whitelabel_model_id = ${t}`:I``;await L.execute(I`
        UPDATE whitelabel_models 
        SET post_count = (
            SELECT count(*) FROM whitelabel_posts 
            WHERE whitelabel_posts.whitelabel_model_id = whitelabel_models.id
        )
        ${r}
    `),await L.execute(I`
        UPDATE whitelabel_posts
        SET media_cdns = sub.media_json
        FROM (
            SELECT 
                whitelabel_post_id,
                json_build_object(
                    'images', COALESCE(json_agg(url) FILTER (WHERE type = 'image' AND url IS NOT NULL), '[]'),
                    'videos', COALESCE(json_agg(url) FILTER (WHERE type = 'video' AND url IS NOT NULL), '[]')
                ) as media_json
            FROM whitelabel_media
            GROUP BY whitelabel_post_id
        ) as sub
        WHERE whitelabel_posts.id = sub.whitelabel_post_id
        ${t?I`AND whitelabel_posts.whitelabel_model_id = ${t}`:I``}
    `)}};var yh={async syncAllModels(){let t=void 0,r=!0,e=await re.fetchKnownModels(),o=await re.fetchKnownPosts(),n={models:0,posts:0,media:0,deletedModels:0,deletedPosts:0},c=new Set,i=new Set;while(r){let w=new Ws({Bucket:Zs.bucket,MaxKeys:1000,ContinuationToken:t}),p=await dh.send(w);if(!p.Contents||p.Contents.length===0)break;let u=new Map,d=new Map,y=[];for(let R of p.Contents){if(!R.Key)continue;let S=Sf.parse(R.Key);if(S.type==="unknown")continue;if(c.add(S.modelName),!e.has(S.modelName)&&!u.has(S.modelName))u.set(S.modelName,{folderName:S.modelName,status:"new",lastSyncedAt:new Date});let T=e.get(S.modelName);if(!T)continue;if(S.type==="media"&&S.postName){let N=`${T}:${S.postName}`;if(!o.has(N)&&!d.has(N))d.set(N,{whitelabelModelId:T,folderName:S.postName,title:S.postName})}}if(u.size>0)(await re.insertModels(Array.from(u.values()))).forEach((S)=>{e.set(S.folderName,S.id),n.models++});for(let R of p.Contents){if(!R.Key)continue;let S=Sf.parse(R.Key);if(S.type==="media"&&S.postName){let T=e.get(S.modelName);if(!T)continue;let N=`${T}:${S.postName}`;if(i.add(N),!o.has(N)&&!d.has(N))d.set(N,{whitelabelModelId:T,folderName:S.postName,title:S.postName})}}if(d.size>0)(await re.insertPosts(Array.from(d.values()))).forEach((S)=>{o.set(`${S.whitelabelModelId}:${S.folderName}`,S.id),n.posts++});for(let R of p.Contents){if(!R.Key)continue;let S=Sf.parse(R.Key);if(S.type==="profile_media"){let T=e.get(S.modelName);if(!T)continue;let N=`https://whitelabel-only.sfo3.digitaloceanspaces.com/${R.Key.split("/").map((G)=>encodeURIComponent(G)).join("/")}`;if(S.fileName==="icon.webp")await re.updateModelProfile(T,{iconUrl:N});else if(S.fileName==="banner.webp")await re.updateModelProfile(T,{bannerUrl:N});continue}if(S.type==="media"&&S.postName){let T=e.get(S.modelName);if(!T)continue;let N=`${T}:${S.postName}`,G=o.get(N);if(!G)continue;let v=`https://whitelabel-only.sfo3.digitaloceanspaces.com/${R.Key.split("/").map((J)=>encodeURIComponent(J)).join("/")}`;y.push({whitelabelPostId:G,s3Key:R.Key,url:v,type:S.isVideo?"video":"image"})}}if(y.length>0)await re.insertMedia(y),n.media+=y.length;r=p.IsTruncated||!1,t=p.NextContinuationToken}let f=[];for(let[w,p]of e)if(!c.has(w))f.push(p);if(f.length>0)await re.deleteModels(f),n.deletedModels=f.length;let h=[];for(let[w,p]of o)if(!i.has(w))h.push(p);if(h.length>0)await re.deletePosts(h),n.deletedPosts=h.length;return await re.updateAggregates(),n},async syncModelDetails(t){return this._syncPrefix(t)},async _syncPrefix(t){let r=await re.fetchKnownModels(),e=await re.fetchKnownPosts(),o=t.endsWith("/")?t:`${t}/`,n=o.replace("/","");if(!r.has(n)){let[w]=await re.insertModels([{folderName:n,status:"new",lastSyncedAt:new Date}]);r.set(w.folderName,w.id)}let c=void 0,i=!0,f=new Set;while(i){let w=new Ws({Bucket:Zs.bucket,Prefix:o,ContinuationToken:c}),p=await dh.send(w);if(!p.Contents)break;let u=new Map,d=[];for(let y of p.Contents){if(!y.Key)continue;let R=Sf.parse(y.Key);if(R.type==="media"&&R.postName){let S=r.get(R.modelName);if(!S)continue;let T=`${S}:${R.postName}`;if(f.add(T),!e.has(T)&&!u.has(T))u.set(T,{whitelabelModelId:S,folderName:R.postName,title:R.postName})}}if(u.size>0)(await re.insertPosts(Array.from(u.values()))).forEach((R)=>e.set(`${R.whitelabelModelId}:${R.folderName}`,R.id));for(let y of p.Contents){if(!y.Key)continue;let R=Sf.parse(y.Key);if(R.type==="profile_media"){let S=r.get(R.modelName);if(!S)continue;let T=`https://whitelabel-only.sfo3.digitaloceanspaces.com/${y.Key.split("/").map((N)=>encodeURIComponent(N)).join("/")}`;if(R.fileName==="icon.webp")await re.updateModelProfile(S,{iconUrl:T});else if(R.fileName==="banner.webp")await re.updateModelProfile(S,{bannerUrl:T});continue}if(R.type==="media"&&R.postName){let S=r.get(R.modelName);if(!S)continue;let T=`${S}:${R.postName}`,N=e.get(T);if(!N)continue;let G=`https://whitelabel-only.sfo3.digitaloceanspaces.com/${y.Key.split("/").map((v)=>encodeURIComponent(v)).join("/")}`;d.push({whitelabelPostId:N,s3Key:y.Key,url:G,type:R.isVideo?"video":"image"})}}if(d.length>0)await re.insertMedia(d);i=p.IsTruncated||!1,c=p.NextContinuationToken}let h=r.get(n);if(h){let w=[];for(let[p,u]of e)if(p.startsWith(`${h}:`)){if(!f.has(p))w.push(u)}if(w.length>0)await re.deletePosts(w)}return await re.updateAggregates(h),{success:!0}}};Fe();pe();we();Af();var bc={async _enrichWithThumbnails(t){if(t.length===0)return[];let r=t.map((o)=>o.id),e=await L.selectDistinctOn([jt.whitelabelModelId],{modelId:jt.whitelabelModelId,s3Key:le.s3Key}).from(le).innerJoin(jt,Y(le.whitelabelPostId,jt.id)).where(Ir(bo(jt.whitelabelModelId,r),Y(le.type,"image"),I`${le.s3Key} ~* '\.(jpg|jpeg|png|webp|gif)$'`)).orderBy(jt.whitelabelModelId,Vt(jt.id),le.id);return await Promise.all(t.map(async(o)=>{let n=e.find((i)=>i.modelId===o.id),c=o.thumbnailUrl||n?.s3Key||null;return{...o,thumbnailUrl:await Xo(c)}}))},async list(t=1,r=20){let e=(t-1)*r,[o,n]=await Promise.all([L.select().from(Lt).orderBy(Vt(Lt.createdAt),Vt(Lt.id)).limit(r).offset(e),L.select({count:Ao()}).from(Lt)]);return{data:await bc._enrichWithThumbnails(o),total:n[0].count,page:t,limit:r,totalPages:Math.ceil(n[0].count/r)}},async getTopWithThumbnails(t=1,r=20){let e=(t-1)*r,[o,n]=await Promise.all([L.select({id:Lt.id,name:Lt.folderName,postCount:Lt.postCount,thumbnailUrl:Lt.thumbnailUrl}).from(Lt).orderBy(Vt(Lt.postCount),Vt(Lt.id)).limit(r).offset(e),L.select({count:Ao()}).from(Lt)]),c=await L.select({id:$t.id,name:$t.name,postCount:$t.postCount,thumbnailUrl:$t.thumbnailUrl}).from($t).where(Ir(Y($t.status,"active"),Y($t.isAdvertiser,!0))).orderBy(Vt($t.isFeatured),Vt($t.createdAt)).limit(Math.min(4,r)),i=await bc._enrichWithThumbnails(o),f=[...c,...i],h=new Set;return{data:f.filter((p)=>{if(h.has(p.id))return!1;return h.add(p.id),!0}).slice(0,r),total:n[0].count+c.length,page:t,limit:r,totalPages:Math.ceil((n[0].count+c.length)/r)}},async getBySlug(t){let r=await L.select().from(Lt).where(Y(Lt.folderName,t)).limit(1).then((o)=>o[0]);if(r)return r.thumbnailUrl=await Xo(r.thumbnailUrl),r.iconUrl=await Xo(r.iconUrl),r.bannerUrl=await Xo(r.bannerUrl),{...r,name:r.folderName,source:"whitelabel"};let e=await L.select().from($t).where(Ir(ge(Y($t.slug,t),Y($t.name,t)),Y($t.status,"active"))).limit(1).then((o)=>o[0]);if(e)return{...e,folderName:e.slug||e.name,source:"admin"};return null},async getStats(){let[t]=await L.select({count:Ao()}).from(Lt);return{count:t.count}}};Fe();pe();we();Af();var MT={async getByModelId(t,r=1,e=20){let o=(r-1)*e,n=await L.select().from(jt).where(Y(jt.whitelabelModelId,t)).orderBy(Vt(jt.id)).limit(e).offset(o);return await Promise.all(n.map(async(i)=>{let f=typeof i.mediaCdns==="string"?JSON.parse(i.mediaCdns):i.mediaCdns,h=await Promise.all((f?.images||[]).map((u)=>Xo(u))),w=await Promise.all((f?.videos||[]).map((u)=>Xo(u))),p=h[0]||null;return{...i,thumbnail:p,mediaCdns:{images:h,videos:w}}}))},async getStats(){let[t]=await L.select({count:Ao()}).from(jt),[r]=await L.select({count:Ao()}).from(le);return{posts:t.count,media:r.count}}};Fe();pe();we();class Yn{static async listByModel(t,r=1,e=20,o){let n=(r-1)*e,c=[Y(Qr.modelId,t)];if(o?.type)c.push(Y(Qr.type,o.type));if(o?.search)c.push(he(Qr.title,`%${o.search}%`));let i=await L.select().from(Qr).where(Ir(...c)).orderBy(Vt(Qr.createdAt)).limit(e).offset(n),[f]=await L.select({count:Ao()}).from(Qr).where(Ir(...c)),h=Number(f?.count||0),w=Math.ceil(h/e);return{data:i,page:r,limit:e,total:h,totalPages:w}}static async getById(t){return await L.query.posts.findFirst({where:Y(Qr.id,t),with:{model:!0}})}static async create(t){if(!await L.query.models.findFirst({where:Y($t.id,t.modelId)}))throw Error("Modelo n\xE3o encontrada");let[e]=await L.insert(Qr).values({modelId:t.modelId,title:t.title,contentUrl:t.contentUrl,type:t.type}).returning();return await L.update($t).set({postCount:I`${$t.postCount} + 1`}).where(Y($t.id,t.modelId)),e}static async update(t){if(!await this.getById(t.id))throw Error("Post n\xE3o encontrado");let[e]=await L.update(Qr).set({title:t.title,contentUrl:t.contentUrl,type:t.type}).where(Y(Qr.id,t.id)).returning();return e}static async delete(t){let r=await this.getById(t);if(!r)throw Error("Post n\xE3o encontrado");return await L.delete(Qr).where(Y(Qr.id,t)),await L.update($t).set({postCount:I`GREATEST(0, ${$t.postCount} - 1)`}).where(Y($t.id,r.modelId)),!0}static async getStats(t){let[r]=await L.select({total:Ao(),images:Ao().filter(I`${Qr.type} = 'image'`),videos:Ao().filter(I`${Qr.type} = 'video'`)}).from(Qr).where(Y(Qr.modelId,t));return{total:Number(r?.total||0),images:Number(r?.images||0),videos:Number(r?.videos||0)}}static async formatForPublic(t){return await Promise.all(t.map(async(r)=>{let e=r.contentUrl;if(r.contentUrl&&r.contentUrl.includes("digitaloceanspaces.com"))try{let o=new URL(r.contentUrl),n=decodeURIComponent(o.pathname.substring(1)),{signS3Key:c}=await Promise.resolve().then(() => (Af(),UE)),i=await c(n);if(i)e=i}catch(o){console.error("Erro ao assinar URL do S3:",o)}return{id:r.id,title:r.title||`Post #${r.id}`,likes:0,tipsTotal:0,comments:0,createdAt:"Publicado",mediaCdns:{images:r.type==="image"?[e]:[],videos:r.type==="video"?[e]:[]}}}))}}var Ze={syncModelsFromBucket:yh.syncAllModels.bind(yh),syncModelDetails:yh.syncModelDetails.bind(yh),listModels:bc.list,getTopModelsWithThumbnails:bc.getTopWithThumbnails,getModelBySlug:bc.getBySlug,getModelPosts:async(t,r=1,e=20)=>{try{let o=await Promise.resolve().then(() => (Fe(),wa)).then((f)=>f.db),{models:n}=await Promise.resolve().then(() => (pe(),r0)),{eq:c}=await Promise.resolve().then(() => (we(),hA));if((await o.select().from(n).where(c(n.id,t)).limit(1)).length>0){let{posts:f}=await Promise.resolve().then(() => (pe(),r0)),{desc:h}=await Promise.resolve().then(() => (we(),hA)),w=await o.select().from(f).where(c(f.modelId,t)).orderBy(h(f.createdAt)).limit(e).offset((r-1)*e);return await Yn.formatForPublic(w)}}catch(o){console.error("Erro ao verificar modelo administrativa:",o)}try{return await MT.getByModelId(t,r,e)}catch(o){return console.error("Erro ao buscar posts whitelabel:",o),[]}},getStats:async()=>{let t=await bc.getStats(),r=await MT.getStats();return{models:t.count,posts:r.posts,media:r.media}}};Fe();pe();we();var HE=()=>{let t=[{id:1,label:"Identifica\xE7\xE3o"},{id:2,label:"Pagamento"},{id:3,label:"Acesso"}];return s("header",{class:"relative z-50 border-b border-white/5 bg-[#050505]/80 backdrop-blur-md sticky top-0",children:s("div",{class:"max-w-6xl mx-auto px-4 h-20 flex items-center justify-between",children:[s("div",{class:"flex items-center gap-3",children:[s("div",{class:"w-8 h-8 rounded bg-gradient-to-br from-primary to-black flex items-center justify-center font-bold text-white shadow-neon-purple",children:"V"},void 0,!1,void 0,this),s("span",{class:"font-display text-xl tracking-widest text-white",children:["CHECKOUT ",s("span",{class:"text-primary",children:"VIP"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"hidden md:flex items-center gap-6",children:t.map((r,e)=>s("div",{id:`ind-step-${r.id}`,class:`flex items-center gap-2 transition-colors ${r.id===1?"text-white":"text-gray-600"}`,children:[s("div",{class:`step-circle w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border transition-all ${r.id===1?"bg-primary text-white border-transparent shadow-neon-purple":"bg-surface text-gray-500 border-white/10"}`,children:r.id},void 0,!1,void 0,this),s("span",{class:"text-sm font-medium tracking-wide uppercase",children:r.label},void 0,!1,void 0,this),e<t.length-1&&s("div",{class:"w-12 h-[1px] bg-white/10"},void 0,!1,void 0,this)]},void 0,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var Sn=({id:t,name:r,label:e,placeholder:o,type:n="text",value:c,required:i,readOnly:f,maxLength:h,className:w=""})=>{return s("div",{class:w,children:[s("label",{class:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",for:t,children:e},void 0,!1,void 0,this),s("input",{type:n,id:t,name:r,value:c||"",class:`input-dark w-full px-5 py-4 rounded-xl text-base bg-[#111] border border-white/10 text-white focus:border-primary focus:shadow-neon-purple transition-all outline-none ${f?"opacity-60 cursor-not-allowed border-dashed":""}`,placeholder:o,required:i,readonly:f,maxlength:h},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var bE=({user:t})=>{let r=!!t?.email;return s("div",{id:"step-1",class:"step-content active",children:s("div",{class:"glass-card p-8 rounded-2xl border border-white/10",children:[s("div",{class:"mb-8 border-b border-white/5 pb-4",children:[s("h2",{class:"text-3xl font-display text-white mb-1",children:"Quem ir\xE1 assistir?"},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm",children:"Informe seus dados para criar seu acesso exclusivo."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"space-y-5",children:[s(Sn,{id:"email",name:"email",label:"E-mail de Acesso",placeholder:"seu@email.com",type:"email",value:t?.email,required:!0,readOnly:r},void 0,!1,void 0,this),s(Sn,{id:"name",name:"name",label:"Nome Completo",placeholder:"Nome impresso no cart\xE3o",value:t?.name,required:!0},void 0,!1,void 0,this),s("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s(Sn,{id:"cpf",name:"cpf",label:"CPF",placeholder:"000.000.000-00",required:!0},void 0,!1,void 0,this),s(Sn,{id:"phone",name:"phone",label:"Whatsapp",placeholder:"(00) 00000-0000",type:"tel",required:!0},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"mt-10 flex justify-end",children:s("button",{type:"button",onclick:"goToStep(2)",class:"group bg-primary text-white px-10 py-4 rounded-xl font-bold uppercase tracking-widest hover:bg-primary/90 hover:shadow-neon-purple transition-all flex items-center gap-3",children:["Pr\xF3ximo Passo",s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"group-hover:translate-x-1 transition-transform",children:[s("path",{d:"M5 12h14"},void 0,!1,void 0,this),s("path",{d:"m12 5 7 7-7 7"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var zT=({name:t,value:r,label:e,description:o,checked:n,icon:c,badge:i,children:f})=>{return s("label",{class:"cursor-pointer relative block radio-card-label h-full",children:[s("input",{type:"radio",name:t,value:r,class:"radio-card-input sr-only",checked:n},void 0,!1,void 0,this),s("div",{class:"radio-card-content p-5 rounded-xl border border-white/10 bg-[#151515] transition-all h-full flex flex-col justify-between hover:border-white/30",children:[s("div",{class:"flex items-center justify-between mb-3",children:s("span",{class:"font-bold text-white flex items-center gap-2",children:[c,e]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-500 mb-2",children:o},void 0,!1,void 0,this),i&&s("span",{class:"self-start px-2 py-1 bg-green-500/20 text-green-400 text-[10px] font-bold rounded uppercase border border-green-500/30",children:i},void 0,!1,void 0,this),f]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var nmt=({bump:t,index:r})=>{let e=(t.price/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"});return s("div",{class:"relative mb-4",children:s("label",{class:"cursor-pointer block",children:[s("input",{type:"checkbox",name:`order_bump_${t.id}`,id:`order_bump_${t.id}`,value:t.id,"data-bump-id":t.id,"data-bump-price":t.price,class:"bump-checkbox peer sr-only"},void 0,!1,void 0,this),s("div",{class:"border border-white/20 bg-gradient-to-r from-[#1a1a1a] to-black p-5 rounded-xl transition-all peer-checked:border-gold peer-checked:bg-gradient-to-r peer-checked:from-[#1a1a1a] peer-checked:to-[#2a2200] hover:border-white/30",children:s("div",{class:"flex items-start gap-4",children:[s("div",{class:"flex-shrink-0 w-6 h-6 rounded border border-gray-500 peer-checked:bg-gold peer-checked:border-gold flex items-center justify-center mt-1 transition-colors bump-checkbox-visual",children:s("svg",{class:"w-4 h-4 text-black opacity-0 bump-check-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),t.imageUrl&&s("img",{src:t.imageUrl,alt:t.name,class:"w-16 h-16 rounded-lg object-cover flex-shrink-0"},void 0,!1,void 0,this),s("div",{class:"flex-1",children:[s("h4",{class:"font-display text-lg text-white peer-checked:text-gold flex items-center gap-2 flex-wrap",children:[t.name,r===0&&s("span",{class:"text-[10px] bg-red-600 text-white px-2 rounded-full py-0.5",children:"OFERTA \xDANICA"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),t.description&&s("p",{class:"text-gray-400 text-sm mt-1 leading-relaxed",children:[t.description," ",s("span",{class:"text-white font-bold",children:e},void 0,!1,void 0,this)]},void 0,!0,void 0,this),!t.description&&s("p",{class:"text-gray-400 text-sm mt-1",children:["Por apenas ",s("span",{class:"text-white font-bold",children:e},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},lE=({orderBumps:t})=>{let r=t.filter((e)=>e.isActive);if(r.length===0)return null;return s("div",{class:"mb-8",id:"order-bumps-container",children:[r.map((e,o)=>s(nmt,{bump:e,index:o},e.id,!1,void 0,this)),s("input",{type:"hidden",name:"orderBumpIds",id:"orderBumpIds",value:""},void 0,!1,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
        (function() {
          function updateOrderBumpSelection() {
            const checkboxes = document.querySelectorAll('.bump-checkbox');
            const selectedIds = [];
            let totalBumpPrice = 0;
            
            checkboxes.forEach(function(cb) {
              const label = cb.closest('label');
              const visual = label.querySelector('.bump-checkbox-visual');
              const icon = label.querySelector('.bump-check-icon');
              const container = label.querySelector('.border');
              
              if (cb.checked) {
                selectedIds.push(cb.dataset.bumpId);
                totalBumpPrice += parseInt(cb.dataset.bumpPrice) || 0;
                
                // Atualizar visual
                if (visual) {
                  visual.classList.add('bg-[#FFD700]', 'border-[#FFD700]');
                  visual.classList.remove('border-gray-500');
                }
                if (icon) icon.classList.remove('opacity-0');
                if (container) {
                  container.classList.add('border-[#FFD700]');
                  container.classList.remove('border-white/20');
                }
              } else {
                // Reset visual
                if (visual) {
                  visual.classList.remove('bg-[#FFD700]', 'border-[#FFD700]');
                  visual.classList.add('border-gray-500');
                }
                if (icon) icon.classList.add('opacity-0');
                if (container) {
                  container.classList.remove('border-[#FFD700]');
                  container.classList.add('border-white/20');
                }
              }
            });
            
            // Atualizar input hidden com IDs selecionados
            document.getElementById('orderBumpIds').value = selectedIds.join(',');
            
            // Disparar evento customizado para atualizar total
            window.dispatchEvent(new CustomEvent('orderBumpsChanged', { 
              detail: { selectedIds, totalBumpPrice } 
            }));
          }
          
          // Adicionar listeners aos checkboxes
          document.querySelectorAll('.bump-checkbox').forEach(function(cb) {
            cb.addEventListener('change', updateOrderBumpSelection);
          });
          
          // Inicializar estado
          updateOrderBumpSelection();
        })();
      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var FE=()=>s("div",{class:"loader",style:"border: 3px solid rgba(255,255,255,0.1); border-radius: 50%; border-top: 3px solid #8A2BE2; width: 24px; height: 24px; animation: spin 1s linear infinite;"},void 0,!1,void 0,this);var LE=({orderBumps:t=[],planPrice:r=0,acceptsPix:e=!0,acceptsCard:o=!0})=>{let n=Array.from({length:12},(c,i)=>{let f=i+1,h=r/100/f;return{value:f,label:`${f}x de R$ ${h.toFixed(2).replace(".",",")}`}});return s("div",{id:"step-2",class:"step-content",children:s("div",{class:"glass-card p-8 rounded-2xl border border-white/10",children:[s("div",{class:"mb-8 border-b border-white/5 pb-4",children:[s("h2",{class:"text-3xl font-display text-white mb-1",children:"Pagamento Seguro"},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm",children:"Seus dados s\xE3o criptografados e processados com seguran\xE7a."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e&&s(zT,{name:"payment_method",value:"pix",label:"PIX (Instant\xE2neo)",description:"Libera\xE7\xE3o imediata do conte\xFAdo.",checked:!0,badge:"Recomendado",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-green-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[s("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"},void 0,!1,void 0,this),s("polyline",{points:"16 6 12 2 8 6"},void 0,!1,void 0,this),s("line",{x1:"12",y1:"2",x2:"12",y2:"15"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),o&&s(zT,{name:"payment_method",value:"credit_card",label:"Cart\xE3o de Cr\xE9dito",description:"At\xE9 12x no cart\xE3o. Discreto na fatura.",checked:!e,icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[s("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"},void 0,!1,void 0,this),s("line",{x1:"2",y1:"10",x2:"22",y2:"10"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),!e&&!o&&s("div",{class:"col-span-full p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-center",children:"N\xE3o h\xE1 m\xE9todos de pagamento dispon\xEDveis para este plano no momento. Entre em contato com o suporte."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"card-fields",class:"hidden space-y-5 mb-8 pt-6 border-t border-white/10 animate-[fadeIn_0.3s_ease]",children:[s(Sn,{id:"card_holder",name:"card_holder",label:"Nome no Cart\xE3o",placeholder:"Como est\xE1 impresso no cart\xE3o"},void 0,!1,void 0,this),s(Sn,{id:"card_number",name:"card_number",label:"N\xFAmero do Cart\xE3o",placeholder:"0000 0000 0000 0000"},void 0,!1,void 0,this),s("div",{class:"grid grid-cols-2 gap-5",children:[s(Sn,{id:"card_expiry",name:"card_expiry",label:"Validade",placeholder:"MM/AA"},void 0,!1,void 0,this),s(Sn,{id:"card_cvc",name:"card_cvc",label:"CVC",placeholder:"123",maxLength:4},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"space-y-2",children:[s("label",{class:"block text-sm font-medium text-gray-300",children:"Parcelas"},void 0,!1,void 0,this),s("select",{id:"card_installments",name:"card_installments",class:"w-full bg-surface border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all",children:n.map((c)=>s("option",{value:c.value,selected:c.value===1,children:c.label},void 0,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s(lE,{orderBumps:t},void 0,!1,void 0,this),s("div",{class:"flex justify-between items-center mt-8 pt-6 border-t border-white/5",children:[s("button",{type:"button",onclick:"goToStep(1)",class:"text-gray-400 hover:text-white font-medium text-sm transition-colors uppercase tracking-wide",children:"Voltar"},void 0,!1,void 0,this),s("button",{type:"button",id:"btn-process-checkout",onclick:"processCheckout()",class:"bg-gradient-to-r from-primary to-purple-600 text-white px-8 py-4 rounded-xl font-bold uppercase tracking-widest hover:brightness-110 shadow-neon-purple transition-all flex items-center gap-3",children:[s("span",{id:"pay-btn-text",children:"Finalizar e Acessar"},void 0,!1,void 0,this),s("div",{id:"pay-loader",class:"hidden",children:s(FE,{},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var GE=()=>{return s("div",{id:"step-3",class:"step-content",children:s("div",{class:"glass-card p-12 text-center rounded-2xl border border-white/10 flex flex-col items-center justify-center min-h-[400px]",children:[s("div",{id:"payment-pending-state",children:[s("div",{class:"w-24 h-24 bg-yellow-500/10 rounded-full flex items-center justify-center mb-8 border border-yellow-500/20 shadow-[0_0_30px_rgba(234,179,8,0.2)]",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-yellow-500",children:[s("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,void 0,this),s("polyline",{points:"12 6 12 12 16 14"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("h2",{id:"pending-title",class:"text-4xl font-display text-white mb-2",children:"Aguardando Pagamento"},void 0,!1,void 0,this),s("p",{id:"pending-message",class:"text-gray-400 mb-8 max-w-md text-lg",children:"Seu pedido foi recebido. Assim que o pagamento for confirmado, voc\xEA receber\xE1 o acesso no seu e-mail."},void 0,!1,void 0,this),s("div",{id:"checking-status",class:"flex items-center justify-center gap-2 text-sm text-gray-500 mb-6",children:[s("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,void 0,this),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{children:"Verificando pagamento..."},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"payment-confirmed-state",class:"hidden",children:[s("div",{class:"w-24 h-24 bg-green-500/10 rounded-full flex items-center justify-center mb-8 border border-green-500/20 shadow-[0_0_30px_rgba(34,197,94,0.2)] animate-[pulse_1s_ease-in-out]",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"text-green-500",children:s("polyline",{points:"20 6 9 17 4 12"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("h2",{class:"text-4xl font-display text-white mb-2",children:"Pagamento Confirmado!"},void 0,!1,void 0,this),s("p",{id:"confirmed-message",class:"text-gray-400 mb-8 max-w-md text-lg",children:"Seu pagamento foi aprovado com sucesso! Voc\xEA receber\xE1 o acesso no seu e-mail em instantes."},void 0,!1,void 0,this),s("div",{class:"inline-flex items-center gap-2 bg-green-500/10 border border-green-500/20 px-4 py-2 rounded-full mb-6",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"text-green-500",children:[s("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},void 0,!1,void 0,this),s("polyline",{points:"22 4 12 14.01 9 11.01"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{class:"text-green-400 text-sm font-medium",children:"Transa\xE7\xE3o aprovada"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"pix-code-container",class:"hidden w-full max-w-md mb-8 p-6 bg-[#111] rounded-xl border border-white/10",children:[s("p",{class:"text-xs uppercase font-bold text-gray-500 mb-3 tracking-widest",children:"Escaneie ou Copie o C\xF3digo PIX"},void 0,!1,void 0,this),s("div",{id:"pix-qrcode",class:"bg-white p-2 rounded w-32 h-32 mx-auto mb-4 flex items-center justify-center",children:s("svg",{class:"animate-spin h-8 w-8 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,void 0,this),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-500 mb-2",children:["Expira em: ",s("span",{id:"pix-expiration",class:"text-white",children:"--"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("textarea",{readonly:!0,class:"w-full text-xs bg-black/50 p-3 rounded border border-white/10 font-mono h-20 text-gray-300 mb-3 focus:outline-none resize-none",id:"pix-copy-code",placeholder:"Carregando c\xF3digo PIX..."},void 0,!1,void 0,this),s("button",{type:"button",id:"btn-copy-pix",onclick:"copyPixCode()",class:"w-full bg-white text-black py-3 rounded font-bold uppercase tracking-wide hover:bg-gray-200 transition-colors",children:"Copiar C\xF3digo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("a",{href:"/",class:"inline-block border border-white/20 text-white px-8 py-3 rounded-xl font-bold uppercase tracking-widest hover:bg-white/10 transition-colors",children:"Voltar para Vitrine"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var vE=({planName:t,planDuration:r,priceFormatted:e,orderBumps:o=[]})=>{let n=o.filter((c)=>c.isActive);return s("div",{class:"lg:col-span-4",children:[s("div",{class:"glass-card p-6 rounded-2xl border border-white/10 sticky top-28",children:[s("h3",{class:"font-display text-xl text-white mb-6 tracking-wide border-b border-white/5 pb-4",children:"Resumo do Pedido"},void 0,!1,void 0,this),s("div",{class:"flex items-start gap-4 pb-6 border-b border-white/5",children:[s("div",{class:"w-20 h-24 bg-gray-800 rounded-lg overflow-hidden relative group",children:[s("div",{class:"absolute inset-0 bg-cover bg-center opacity-60 group-hover:opacity-100 transition-opacity",style:"background-image: url('https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&w=150&q=80')"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("p",{class:"font-bold text-lg text-white leading-tight",children:t},void 0,!1,void 0,this),s("p",{class:"text-sm text-gray-500 mt-1",children:[r," dias de acesso VIP"]},void 0,!0,void 0,this),s("div",{class:"mt-2 text-xs bg-primary/20 text-primary px-2 py-0.5 rounded inline-block uppercase font-bold tracking-wider",children:"Qualidade 4K"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"py-6 space-y-3 text-sm",children:[s("div",{class:"flex justify-between text-gray-400",children:[s("span",{children:"Plano Selecionado"},void 0,!1,void 0,this),s("span",{class:"text-white",children:e},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"selected-bumps-container",children:n.map((c)=>s("div",{id:`bump-summary-${c.id}`,class:"bump-summary-item flex justify-between text-gold hidden animate-[fadeIn_0.3s_ease]","data-bump-id":c.id,"data-bump-price":c.price,children:[s("span",{class:"truncate max-w-[150px]",children:c.name},void 0,!1,void 0,this),s("span",{class:"font-bold",children:(c.price/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},void 0,!1,void 0,this)]},void 0,!0,void 0,this))},void 0,!1,void 0,this),s("div",{class:"flex justify-between text-green-400 font-medium",children:[s("span",{children:"Desconto Aplicado"},void 0,!1,void 0,this),s("span",{children:"R$ 0,00"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"pt-6 border-t border-white/10 flex justify-between items-center mb-6",children:[s("span",{class:"font-display text-xl text-white tracking-wide",children:"Total"},void 0,!1,void 0,this),s("span",{class:"font-display text-3xl text-primary",id:"total-price",children:e},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center justify-center gap-2 text-[10px] uppercase tracking-widest text-gray-500",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-green-500",children:[s("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"},void 0,!1,void 0,this),s("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Pagamento 100% Seguro e Discreto"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"mt-6 border border-red-500/20 bg-red-500/5 p-4 rounded-xl text-center relative overflow-hidden",children:[s("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-red-500/5 to-transparent animate-pulse"},void 0,!1,void 0,this),s("p",{class:"text-[10px] font-bold text-red-400 uppercase tracking-[0.2em] mb-1 relative z-10",children:"Oferta expira em"},void 0,!1,void 0,this),s("p",{class:"text-2xl font-mono font-bold text-red-500 relative z-10",id:"countdown",children:"10:00"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var ME=({plan:t,user:r,gateway:e,orderBumps:o=[]})=>{let n=(t.price/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),c=e?.publicKey||"",i=JSON.stringify(o.filter((f)=>f.isActive));return s("html",{lang:"pt-BR",class:"dark",children:[s("head",{children:[s("title",{children:"Finalizar Assinatura | A Vitrine VIP"},void 0,!1,void 0,this),s("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},void 0,!1,void 0,this),s("meta",{name:"theme-color",content:"#050505"},void 0,!1,void 0,this),s("link",{rel:"stylesheet",href:"/static/styles.css"},void 0,!1,void 0,this),s("link",{href:"https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;500;600;700&display=swap",rel:"stylesheet"},void 0,!1,void 0,this),s("script",{src:"https://unpkg.com/imask"},void 0,!1,void 0,this),s("script",{src:"https://api.junglepagamentos.com/v1/js"},void 0,!1,void 0,this),s("script",{src:"/static/js/checkout-core.js",defer:!0},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("body",{class:"min-h-screen bg-[#050505] selection:bg-primary selection:text-white overflow-x-hidden",onload:`initCheckout(${t.price}, '${c}', ${i}, ${t.acceptsPix!==!1}, ${t.acceptsCard!==!1})`,"data-plan-price":t.price,"data-junglepay-pk":c,"data-order-bumps":i,"data-accepts-pix":t.acceptsPix!==!1,"data-accepts-card":t.acceptsCard!==!1,children:[s("div",{class:"fixed top-0 left-0 right-0 h-[500px] bg-gradient-to-b from-primary/10 via-transparent to-transparent pointer-events-none z-0"},void 0,!1,void 0,this),s(HE,{},void 0,!1,void 0,this),s("main",{class:"relative z-10 max-w-6xl mx-auto px-4 py-10 grid grid-cols-1 lg:grid-cols-12 gap-10",children:[s("div",{class:"lg:col-span-8",children:s("form",{id:"checkout-form",onsubmit:"return false;",children:[s("input",{type:"hidden",name:"planId",value:t.id},void 0,!1,void 0,this),s(bE,{user:r},void 0,!1,void 0,this),s(LE,{orderBumps:o,planPrice:t.price,acceptsPix:t.acceptsPix!==!1,acceptsCard:t.acceptsCard!==!1},void 0,!1,void 0,this),s(GE,{},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s(vE,{planName:t.name,planDuration:t.duration,priceFormatted:n,orderBumps:o},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var Pn=new $n,smt=process.env.JWT_SECRET||"secret";async function _f(t){let r=Uf(t,"auth_token");if(!r)return null;try{let e=await lf(r,smt,"HS256"),o=await L.query.users.findFirst({where:Y(ft.id,e.id),with:{subscription:{with:{plan:!0}}}});if(o&&o.subscription&&Array.isArray(o.subscription))o.subscription=o.subscription.find((n)=>n.status==="active")||o.subscription[0];return o||null}catch(e){return console.error("Falha na verifica\xE7\xE3o do JWT:",e),null}}Pn.get("/",async(t)=>{let r=await _f(t),e=Math.max(1,parseInt(t.req.query("page")||"1")),o=20,n=t.req.header("HX-Request")==="true";try{if(n&&e>1){let h=await Ze.getTopModelsWithThumbnails(e,20),w=20*e<h.total;return t.html(s(Zr,{children:[h.data.map((p)=>s(jn,{id:p.id,name:p.name,postCount:p.postCount||0,thumbnailUrl:p.thumbnailUrl},void 0,!1,void 0,this)),s("div",{id:"load-more-container","hx-swap-oob":"true",children:w?s("div",{class:"mt-12 flex justify-center",children:s(Pr,{variant:"secondary",className:"min-w-[250px] !rounded-full py-4 border-white/20 hover:border-primary group",onClick:`this.setAttribute('disabled', 'true'); htmx.ajax('GET', '/?page=${e+1}', {target: '#new-revelations-grid', swap: 'beforeend'})`,children:s("span",{class:"flex items-center gap-2",children:["Carregar Mais Modelos",s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 transition-transform group-hover:translate-y-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this):s("div",{class:"mt-12"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this))}let[c,i]=await Promise.all([Ze.getTopModelsWithThumbnails(1,20*e),Mr.getActiveByPlacements(["home_top","home_middle","home_bottom","sidebar","feed_mix"])]),f=c.data.map((h)=>({...h,postCount:h.postCount||0}));return t.html(s(dA,{models:f,user:r,ads:i,pagination:{currentPage:e,totalPages:Math.ceil(c.total/20),hasNextPage:20*e<c.total}},void 0,!1,void 0,this))}catch(c){return console.error("Erro na Home:",c),t.html(s(dA,{models:[],user:r,ads:{}},void 0,!1,void 0,this))}});Pn.get("/models/:slug",async(t)=>{let r=await _f(t),e=t.req.param("slug"),o=await Ze.getModelBySlug(e);if(!o)return t.notFound();let[n,c]=await Promise.all([Ze.getModelPosts(o.id,1,20),Mr.getActiveByPlacements(["model_profile","model_sidebar"])]);return t.html(s(Fa,{model:o,initialPosts:n,user:r,ads:c},void 0,!1,void 0,this))});Pn.get("/models",async(t)=>{let r=await _f(t),e=parseInt(t.req.query("page")||"1")||1,[o,n]=await Promise.all([Ze.listModels(e,20),Mr.getActiveByPlacements(["models_grid","sidebar"])]);return t.html(s(Oa,{models:o.data,user:r,ads:n,pagination:{currentPage:o.page,totalPages:o.totalPages,totalItems:o.total,showingFrom:(o.page-1)*o.limit+1,showingTo:Math.min(o.page*o.limit,o.total),nextUrl:o.page<o.totalPages?`/models?page=${o.page+1}`:void 0,prevUrl:o.page>1?`/models?page=${o.page-1}`:void 0}},void 0,!1,void 0,this))});Pn.get("/posts/:id",async(t)=>{let r=await _f(t),e=t.req.param("id");return t.html(s(La,{id:e,user:r},void 0,!1,void 0,this))});Pn.get("/plans",async(t)=>{let r=await _f(t);try{let o=(await L.select().from(Tt).where(Y(Tt.isActive,!0)).orderBy(Tt.duration)).map((n)=>{let c=n.duration===365,i=n.duration===7,f=n.cardStyle==="primary"||c&&!n.cardStyle,h=n.benefits&&n.benefits.length>0?n.benefits:["Acesso Ilimitado a todas as Modelos","Conte\xFAdo Exclusivo em 4K","Chat Direto (VIP)","Novas Modelos toda semana","Cancelamento F\xE1cil"];return{id:n.id,name:n.name,price:(n.price/100).toLocaleString("pt-BR",{minimumFractionDigits:2}),currency:"R$",period:n.duration===7?"/semana":n.duration===30?"/m\xEAs":"/ano",features:h,highlighted:f,variant:n.cardStyle||(c?"primary":i?"outline":"secondary"),cardStyle:n.cardStyle,ctaText:n.ctaText,badge:c?"MELHOR VALOR":void 0,checkoutUrl:n.checkoutUrl}});return t.html(s(yA,{plans:o,user:r},void 0,!1,void 0,this))}catch(e){return console.error("Error fetching plans:",e),t.html(s(yA,{plans:[],user:r},void 0,!1,void 0,this))}});Pn.get("/checkout",async(t)=>{let r=await _f(t),e=t.req.query("planId");if(!e)return t.redirect("/plans");let o=await L.query.plans.findFirst({where:Y(Tt.id,parseInt(e))});if(!o)return t.redirect("/plans");let n=await L.query.paymentGateways.findFirst({where:Y(Dr.isActive,!0)});if(n&&n.name==="Dias Marketplace"&&o.checkoutUrl)return t.redirect(o.checkoutUrl);let c=await L.select().from(Wt).where(Y(Wt.isActive,!0)).orderBy(oo(Wt.displayOrder),oo(Wt.id));return t.html(s(ME,{plan:o,user:r,gateway:n,orderBumps:c},void 0,!1,void 0,this))});Pn.get("/login",async(t)=>{let r=await Mr.getActiveByPlacement("login",3,!1);return t.html(s(AA,{type:"login",ads:r},void 0,!1,void 0,this))});Pn.get("/register",async(t)=>{let r=await Mr.getActiveByPlacement("register",3,!1);return t.html(s(AA,{type:"register",ads:r},void 0,!1,void 0,this))});var zE=Pn;Fe();pe();we();var kE=({activePath:t="/admin"})=>{return s("aside",{class:"fixed top-0 left-0 h-full w-[240px] bg-[#000000] border-r border-primary/40 flex flex-col z-50 shadow-[10px_0_40px_-15px_rgba(138,43,226,0.4)]",children:[s("div",{class:"h-16 flex items-center px-6 bg-[#000000] border-b border-primary/30",children:s("span",{class:"font-display text-xl text-white tracking-widest uppercase",children:["CREATOR",s("span",{class:"text-primary ml-1.5 shadow-neon-purple",children:"ADMIN"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("nav",{class:"flex-1 overflow-y-auto py-4 px-4 space-y-6 custom-scrollbar",children:[{section:"VIS\xC3O GERAL",items:[{label:"Dashboard",path:"/admin",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"},void 0,!1,void 0,this),s("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"},void 0,!1,void 0,this),s("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"},void 0,!1,void 0,this),s("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}]},{section:"CONTE\xDADO",items:[{label:"Modelos",path:"/admin/models",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this),s("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"},void 0,!1,void 0,this),s("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},{label:"Whitelabel (S3)",path:"/admin/whitelabel",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"M17.5 19.5h-10A4.5 4.5 0 0 1 3 15a4.5 4.5 0 0 1 4.5-4.5H9a5 5 0 0 1 9.5-2.5 5 5 0 0 1 4 4.5V15a4.5 4.5 0 0 1-4.5 4.5Z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)}]},{section:"MONETIZA\xC7\xC3O",items:[{label:"Ads",path:"/admin/ads",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M6 18h8"},void 0,!1,void 0,this),s("path",{d:"M3 22h18"},void 0,!1,void 0,this),s("path",{d:"M9 10h6"},void 0,!1,void 0,this),s("path",{d:"M5 14h14"},void 0,!1,void 0,this),s("path",{d:"M12 2v4"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},{label:"Financeiro",path:"/admin/finance",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("line",{x1:"12",x2:"12",y1:"2",y2:"22"},void 0,!1,void 0,this),s("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},{label:"Planos",path:"/admin/plans",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"m6 12 6-9 6 9a6 6 0 1 1-12 0Z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},{label:"Clientes",path:"/admin/clients",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this),s("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"},void 0,!1,void 0,this),s("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}]},{section:"SISTEMA",items:[{label:"Configura\xE7\xF5es",path:"/admin/settings",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.1a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},void 0,!1,void 0,this),s("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},{label:"Suporte",path:"/admin/support",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M3 18v-6a9 9 0 0 1 18 0v6"},void 0,!1,void 0,this),s("path",{d:"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}]}].map((e)=>s("div",{class:"space-y-2",children:[s("h4",{class:"px-3 font-display text-[10px] text-gray-500 tracking-[0.2em] uppercase opacity-70",children:e.section},void 0,!1,void 0,this),s("ul",{class:"space-y-1",children:e.items.map((o)=>{let n=t===o.path;return s("li",{children:s("a",{href:o.path,class:`
                        group flex items-center gap-3 px-3 py-2.5 rounded-lg text-[13px] transition-all duration-300 relative
                        ${n?"bg-primary/15 text-white shadow-neon-purple border border-primary/60":"text-gray-400 hover:text-white hover:bg-white/[0.05] border border-transparent"}
                      `,children:[n&&s("div",{class:"absolute left-0 w-1.5 h-5 bg-primary rounded-r-full shadow-neon-purple"},void 0,!1,void 0,this),s("span",{class:`${n?"text-primary":"text-gray-500 group-hover:text-primary"} transition-colors duration-300`,children:o.icon},void 0,!1,void 0,this),s("span",{class:`font-body tracking-wide ${n?"font-bold":"font-medium"}`,children:o.label},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)})},void 0,!1,void 0,this),s("div",{class:"h-px w-full bg-gradient-to-r from-transparent via-primary/20 to-transparent mx-auto mt-4"},void 0,!1,void 0,this)]},void 0,!0,void 0,this))},void 0,!1,void 0,this),s("div",{class:"p-4 bg-[#000000] border-t border-primary/30",children:s("div",{class:"p-3 rounded-xl bg-surface border border-primary/20 flex items-center gap-3 hover:border-primary/50 transition-all duration-500 group shadow-lg",children:[s("div",{class:"relative flex-shrink-0",children:[s("div",{class:"w-9 h-9 rounded-lg bg-gradient-to-br from-primary to-purple-900 flex items-center justify-center font-display text-base text-white shadow-lg",children:"AD"},void 0,!1,void 0,this),s("div",{class:"absolute -bottom-0.5 -right-0.5 h-2.5 w-2.5 rounded-full bg-green-500 border-2 border-surface shadow-[0_0_8px_#22c55e]"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex-1 min-w-0",children:[s("p",{class:"font-display text-sm text-white tracking-wide truncate mb-0.5",children:"ADMIN MASTER"},void 0,!1,void 0,this),s("p",{class:"font-body text-[9px] text-primary/80 uppercase font-black tracking-widest leading-none",children:"Online"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("a",{href:"/logout",class:"p-1.5 rounded-md text-gray-500 hover:text-red-500 hover:bg-red-500/10 transition-all",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},void 0,!1,void 0,this),s("polyline",{points:"16 17 21 12 16 7"},void 0,!1,void 0,this),s("line",{x1:"21",x2:"9",y1:"12",y2:"12"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var Nr=({children:t,title:r="Admin Panel",activePath:e})=>{return s("html",{lang:"pt-BR",children:[s("head",{children:[s("meta",{charset:"UTF-8"},void 0,!1,void 0,this),s("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},void 0,!1,void 0,this),s("title",{children:r},void 0,!1,void 0,this),s("link",{rel:"stylesheet",href:"/static/styles.css"},void 0,!1,void 0,this),s("link",{href:"https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;500;600;700&display=swap",rel:"stylesheet"},void 0,!1,void 0,this),s("script",{src:"https://unpkg.com/htmx.org@1.9.10"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("body",{class:"bg-[#222222] text-white font-body min-h-screen antialiased selection:bg-primary selection:text-white",children:[s(kE,{activePath:e},void 0,!1,void 0,this),s("main",{class:"pl-[240px] min-h-screen flex flex-col relative",children:[s("div",{class:"fixed inset-0 pointer-events-none overflow-hidden z-0",children:[s("div",{class:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/5 rounded-full blur-[120px]"},void 0,!1,void 0,this),s("div",{class:"absolute bottom-[-10%] right-[-10%] w-[30%] h-[30%] bg-purple-900/10 rounded-full blur-[100px]"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("header",{class:"h-16 border-b border-primary/20 flex items-center justify-between px-8 bg-[#000000] sticky top-0 z-40",children:[s("div",{class:"flex items-center gap-4",children:[s("div",{class:"h-8 w-1 bg-primary rounded-full shadow-neon-purple"},void 0,!1,void 0,this),s("h1",{class:"font-display text-2xl tracking-wide text-white",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center gap-6",children:[s("div",{class:"flex flex-col items-end",children:[s("div",{class:"flex items-center gap-2",children:[s("span",{class:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_#22c55e]"},void 0,!1,void 0,this),s("span",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"System Online"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{class:"text-[9px] text-primary/60 font-medium",children:"v2.4.0-stable"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"h-8 w-px bg-primary/20"},void 0,!1,void 0,this),s("button",{class:"p-2 rounded-lg bg-surface border border-primary/20 hover:border-primary/50 transition-all group",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-400 group-hover:text-primary",children:[s("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"},void 0,!1,void 0,this),s("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"p-8 relative z-10 flex-1",children:t},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var eo=({label:t,value:r,trend:e,isPositive:o=!0,icon:n})=>s("div",{class:"p-6 rounded-2xl bg-surface/40 border border-primary/10 hover:border-primary/40 hover:shadow-[0_0_30px_-10px_rgba(138,43,226,0.3)] transition-all duration-500 group relative overflow-hidden backdrop-blur-sm",children:[s("div",{class:"absolute top-0 right-0 w-16 h-16 bg-primary/5 rounded-full blur-2xl group-hover:bg-primary/10 transition-colors"},void 0,!1,void 0,this),s("div",{class:"flex items-start justify-between mb-4",children:[s("p",{class:"text-[10px] text-gray-500 uppercase tracking-[0.2em] font-bold opacity-80",children:t},void 0,!1,void 0,this),n&&s("div",{class:"text-primary/60 group-hover:text-primary transition-colors duration-500",children:n},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-end justify-between relative z-10",children:[s("div",{children:s("h3",{class:"text-3xl font-display text-white tracking-wide group-hover:text-primary transition-colors duration-500",children:r},void 0,!1,void 0,this)},void 0,!1,void 0,this),e&&s("div",{class:`flex items-center gap-1.5 px-2.5 py-1 rounded-lg border ${o?"bg-green-500/5 border-green-500/20 text-green-500":"bg-red-500/5 border-red-500/20 text-red-500"}`,children:[s("span",{class:"text-[10px] font-black tracking-tighter uppercase",children:e},void 0,!1,void 0,this),s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:o?"":"rotate-180",children:[s("path",{d:"m19 12-7-7-7 7"},void 0,!1,void 0,this),s("path",{d:"M12 19V5"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent group-hover:w-full transition-all duration-700"},void 0,!1,void 0,this)]},void 0,!0,void 0,this);var WE=({stats:t,trafficData:r,recentActivity:e})=>{return s(Nr,{title:"Dashboard Overview",activePath:"/admin",children:[s("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s(eo,{label:"Receita Mensal",value:t.monthlyRevenue,trend:t.revenueTrend,isPositive:t.revenueIsPositive},void 0,!1,void 0,this),s(eo,{label:"Novos Assinantes",value:t.newSubscribers,trend:t.subscribersTrend,isPositive:t.subscribersIsPositive},void 0,!1,void 0,this),s(eo,{label:"Modelos Ativas",value:t.activeModels},void 0,!1,void 0,this),s(eo,{label:"Ads CTR M\xE9dio",value:t.avgAdsCtr},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"grid lg:grid-cols-3 gap-8",children:[s("div",{class:"lg:col-span-2 p-6 rounded-2xl bg-surface/50 border border-primary/10 hover:border-primary/20 transition-all duration-500 h-[400px] flex flex-col relative shadow-2xl backdrop-blur-sm group",children:[s("div",{class:"flex items-center justify-between mb-8",children:[s("div",{children:[s("h4",{class:"font-display text-lg text-white tracking-wide",children:"Fluxo de Tr\xE1fego"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 uppercase tracking-[0.2em]",children:"\xDAltimas 24 horas"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-2",children:s("div",{class:"px-3 py-1 rounded-md bg-primary/10 border border-primary/20 text-[10px] text-primary font-bold",children:"LIVE"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex-1 flex items-end gap-2 px-2 pb-2",children:r.map((o,n)=>{let c=Math.max(...r,1),i=o/c*80+5;return s("div",{style:{height:`${i}%`},class:`flex-1 rounded-t-sm transition-all duration-500 relative group/bar ${n%2===0?"bg-primary/20":"bg-primary/10"} hover:bg-primary hover:shadow-neon-purple`,children:s("div",{class:"absolute -top-8 left-1/2 -translate-x-1/2 bg-surface border border-primary/30 px-2 py-1 rounded text-[8px] opacity-0 group-hover/bar:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:[o," hits"]},void 0,!0,void 0,this)},void 0,!1,void 0,this)})},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 p-6 flex flex-col justify-between pointer-events-none opacity-10",children:[1,2,3,4].map(()=>s("div",{class:"w-full h-px bg-primary/50"},void 0,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"p-6 rounded-2xl bg-surface/50 border border-primary/10 h-full flex flex-col shadow-2xl backdrop-blur-sm",children:[s("div",{class:"mb-6",children:[s("h4",{class:"font-display text-lg text-white tracking-wide",children:"Atividade Recente"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-100/50 uppercase tracking-[0.2em]",children:"Monitoramento Global"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("ul",{class:"space-y-4 flex-1",children:e.map((o)=>s("li",{class:"flex items-center gap-4 p-3 rounded-xl hover:bg-white/[0.02] transition-colors group",children:[s("div",{class:"relative",children:[s("div",{class:"w-10 h-10 rounded-lg bg-primary/10 border border-primary/20 flex items-center justify-center text-sm group-hover:border-primary/50 transition-all",children:"\uD83D\uDC64"},void 0,!1,void 0,this),s("div",{class:"absolute -bottom-1 -right-1 w-3 h-3 bg-black rounded-full flex items-center justify-center",children:s("div",{class:"w-1.5 h-1.5 rounded-full bg-primary animate-pulse"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex-1 min-w-0",children:[s("p",{class:"text-xs text-gray-300 truncate",children:[s("span",{class:"text-white font-bold",children:o.userName},void 0,!1,void 0,this),s("span",{class:"text-gray-500 ml-1",children:"assinou o plano"},void 0,!1,void 0,this),s("span",{class:"text-primary font-bold ml-1",children:o.planName},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1 uppercase tracking-tighter",children:o.timeAgo},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this))},void 0,!1,void 0,this),s("button",{class:"w-full mt-6 py-3 rounded-xl border border-primary/20 text-[11px] text-gray-400 font-bold uppercase tracking-widest hover:bg-primary/5 hover:text-white hover:border-primary/50 transition-all duration-300",children:"Ver Todos os Logs"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};Fe();pe();we();var hd={async getStats(){let t=new Date,r=new Date;r.setDate(t.getDate()-30);let e=new Date;e.setDate(t.getDate()-60);let[o]=await L.select({total:I`SUM(${ut.totalAmount})`}).from(ut).where(Ir(Y(ut.status,"paid"),Ko(ut.createdAt,r))),[n]=await L.select({total:I`SUM(${ut.totalAmount})`}).from(ut).where(Ir(Y(ut.status,"paid"),Ko(ut.createdAt,e),qc(ut.createdAt,r))),c=Number(o?.total||0),i=Number(n?.total||0),f=i>0?`${((c-i)/i*100).toFixed(0)}%`:"+0%",h=(c/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),[w]=await L.select({count:I`COUNT(*)`}).from(pt).where(Ir(Y(pt.status,"active"),Ko(pt.createdAt,r))),[p]=await L.select({count:I`COUNT(*)`}).from(pt).where(Ir(Y(pt.status,"active"),Ko(pt.createdAt,e),qc(pt.createdAt,r))),u=Number(w?.count||0),d=Number(p?.count||0),y=d>0?`${((u-d)/d*100).toFixed(0)}%`:"+0%",R=u.toLocaleString("pt-BR"),[S]=await L.select({count:I`COUNT(*)`}).from($t),T=Number(S?.count||0).toLocaleString("pt-BR"),[N]=await L.select({clicks:I`SUM(${Zt.clicks})`,impressions:I`SUM(${Zt.impressions})`}).from(Zt),G=Number(N?.clicks||0),v=Number(N?.impressions||0),K=`${(v>0?G/v*100:0).toFixed(1)}%`;return{monthlyRevenue:h,revenueTrend:f,revenueIsPositive:c>=i,newSubscribers:R,subscribersTrend:y,subscribersIsPositive:u>=d,activeModels:T,avgAdsCtr:K}},async getTrafficData(){let t=new Date;t.setHours(t.getHours()-24);let r=await L.select({hour:I`DATE_TRUNC('hour', ${ut.createdAt})`,count:I`COUNT(*)`}).from(ut).where(Ko(ut.createdAt,t)).groupBy(I`DATE_TRUNC('hour', ${ut.createdAt})`).orderBy(I`DATE_TRUNC('hour', ${ut.createdAt})`),e=Array.from({length:24}).fill(0),o=new Date;return r.forEach((n)=>{let c=new Date(n.hour),i=Math.floor((o.getTime()-c.getTime())/3600000);if(i>=0&&i<24)e[23-i]=Number(n.count)}),e},async getRecentActivity(){return(await L.select({userName:ft.name,planName:Tt.name,createdAt:pt.createdAt}).from(pt).leftJoin(ft,Y(pt.userId,ft.id)).leftJoin(Tt,Y(pt.planId,Tt.id)).orderBy(Vt(pt.createdAt)).limit(5)).map((r)=>{let e=Math.floor((new Date().getTime()-new Date(r.createdAt).getTime())/60000),o=`${e} minutos`;if(e>=60){let n=Math.floor(e/60);o=`${n} ${n===1?"hora":"horas"}`}if(e>=1440){let n=Math.floor(e/1440);o=`${n} ${n===1?"dia":"dias"}`}return{userName:r.userName||"Visitante",planName:r.planName||"Plano",timeAgo:`H\xE1 ${o}`}})}};var ZE=({models:t,stats:r,pagination:e,filters:o})=>{let n=o?.search||"",c=o?.status||"";return s(Nr,{title:"Gest\xE3o de Modelos",activePath:"/admin/models",children:[s("div",{class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[s(eo,{label:"Total de Modelos",value:r.total.toString(),icon:"\uD83D\uDC64"},void 0,!1,void 0,this),s(eo,{label:"Ativos",value:r.active.toString(),icon:"\u2705"},void 0,!1,void 0,this),s(eo,{label:"Ocultos",value:r.hidden.toString(),icon:"\uD83D\uDC41\u200D\uD83D\uDDE8"},void 0,!1,void 0,this),s(eo,{label:"Destaques",value:r.featured.toString(),icon:"\u2B50"},void 0,!1,void 0,this),s(eo,{label:"Publicit\xE1rios",value:r.advertisers.toString(),icon:"\uD83D\uDCB0"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[s("div",{class:"flex gap-2 flex-wrap",children:[s("a",{href:"/admin/models",class:`px-4 py-2 border border-white/10 rounded text-xs font-bold uppercase transition-colors ${!c?"bg-[#1a1a1a] text-white":"bg-transparent text-gray-400 hover:text-white hover:bg-white/5"}`,children:["Todos (",r.total,")"]},void 0,!0,void 0,this),s("a",{href:"/admin/models?status=active",class:`px-4 py-2 border border-white/10 rounded text-xs font-bold uppercase transition-colors ${c==="active"?"bg-[#1a1a1a] text-white":"bg-transparent text-gray-400 hover:text-white hover:bg-white/5"}`,children:["Ativos (",r.active,")"]},void 0,!0,void 0,this),s("a",{href:"/admin/models?status=hidden",class:`px-4 py-2 border border-white/10 rounded text-xs font-bold uppercase transition-colors ${c==="hidden"?"bg-[#1a1a1a] text-white":"bg-transparent text-gray-400 hover:text-white hover:bg-white/5"}`,children:["Ocultos (",r.hidden,")"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-3 w-full md:w-auto",children:[s("form",{method:"get",action:"/admin/models",class:"flex-1 md:flex-none",children:s("input",{type:"text",name:"search",value:n,placeholder:"Buscar modelo...",class:"bg-surface border border-white/10 rounded px-4 py-2 text-xs text-white w-full md:w-64 focus:border-primary focus:outline-none"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("a",{href:"/admin/models/new",class:"bg-primary hover:bg-primary/80 text-white px-4 py-2 rounded text-xs font-bold uppercase tracking-wider flex items-center gap-2 transition-colors whitespace-nowrap",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M12 5v14"},void 0,!1,void 0,this),s("path",{d:"M5 12h14"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Novo Modelo"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"rounded-xl border border-white/5 bg-surface overflow-hidden",children:s("table",{class:"w-full text-left text-sm text-gray-400",children:[s("thead",{class:"bg-[#1a1a1a] text-xs uppercase font-bold text-gray-200",children:s("tr",{children:[s("th",{class:"px-6 py-4",children:"Modelo"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Status"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Posts"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Flags"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Criado em"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4 text-right",children:"A\xE7\xF5es"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("tbody",{class:"divide-y divide-white/5 bg-surface",children:t.length===0?s("tr",{children:s("td",{colspan:6,class:"px-6 py-12 text-center text-gray-500",children:s("div",{class:"flex flex-col items-center gap-4",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-20",children:[s("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this),s("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"},void 0,!1,void 0,this),s("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{children:"Nenhum modelo encontrado."},void 0,!1,void 0,this),s("a",{href:"/admin/models/new",class:"text-primary hover:underline text-sm",children:"Criar primeiro modelo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this):t.map((i)=>s("tr",{class:"hover:bg-white/5 transition-colors group",children:[s("td",{class:"px-6 py-4",children:s("div",{class:"flex items-center gap-3",children:[s("div",{class:"w-12 h-16 rounded overflow-hidden bg-gray-800 border border-white/10",children:i.thumbnailUrl?s("img",{src:i.thumbnailUrl,alt:i.name,class:"w-full h-full object-cover"},void 0,!1,void 0,this):s("div",{class:"w-full h-full flex items-center justify-center text-gray-600",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{children:[s("p",{class:"font-bold text-white group-hover:text-primary transition-colors",children:i.name},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-500",children:["/",i.slug||"sem-slug"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("span",{class:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide ${i.status==="active"?"bg-green-500/10 text-green-500 border border-green-500/20":i.status==="hidden"?"bg-orange-500/10 text-orange-500 border border-orange-500/20":"bg-gray-500/10 text-gray-500 border border-gray-500/20"}`,children:i.status==="active"?"Ativo":i.status==="hidden"?"Oculto":"Rascunho"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("a",{href:`/admin/models/${i.id}/posts`,class:"text-primary hover:text-primary-light text-sm font-bold flex items-center gap-1",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"9",r:"2"},void 0,!1,void 0,this),s("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),i.postCount||0]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("div",{class:"flex gap-1",children:[i.isFeatured&&s("span",{class:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-yellow-500/10 text-yellow-500 border border-yellow-500/20",title:"Destaque",children:"\u2B50"},void 0,!1,void 0,this),i.isAdvertiser&&s("span",{class:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-blue-500/10 text-blue-500 border border-blue-500/20",title:"Publicit\xE1rio",children:"ADS"},void 0,!1,void 0,this),i.externalUrl&&s("span",{class:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-purple-500/10 text-purple-500 border border-purple-500/20",title:"Link Externo",children:"\uD83D\uDD17"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("span",{class:"text-xs text-gray-500",children:i.createdAt?new Date(i.createdAt).toLocaleDateString("pt-BR"):"-"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4 text-right",children:s("div",{class:"flex justify-end gap-2",children:[s("a",{href:`/models/${i.slug||i.id}`,target:"_blank",class:"text-gray-400 hover:text-white text-xs uppercase font-bold px-2 py-1 rounded hover:bg-white/5 transition-colors",title:"Visualizar",children:"\uD83D\uDC41"},void 0,!1,void 0,this),s("a",{href:`/admin/models/${i.id}/edit`,class:"text-gray-400 hover:text-white text-xs uppercase font-bold px-2 py-1 rounded hover:bg-white/5 transition-colors",children:"Editar"},void 0,!1,void 0,this),s("form",{action:`/admin/models/${i.id}/toggle`,method:"post",class:"inline",children:s("button",{type:"submit",class:`text-xs uppercase font-bold px-2 py-1 rounded transition-colors ${i.status==="active"?"text-orange-500 hover:text-orange-400 hover:bg-orange-500/10":"text-green-500 hover:text-green-400 hover:bg-green-500/10"}`,children:i.status==="active"?"Ocultar":"Ativar"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("form",{action:`/admin/models/${i.id}/delete`,method:"post",class:"inline",onsubmit:"return confirm('Tem certeza que deseja excluir este modelo?')",children:s("button",{type:"submit",class:"text-red-500 hover:text-red-400 text-xs uppercase font-bold px-2 py-1 rounded hover:bg-red-500/10 transition-colors",children:"Excluir"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},i.id,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),e.totalPages>1&&s(ts,{currentPage:e.page,totalPages:e.totalPages,showingFrom:(e.page-1)*20+1,showingTo:Math.min(e.page*20,e.total),totalItems:e.total,nextUrl:e.page<e.totalPages?`/admin/models?page=${e.page+1}${c?`&status=${c}`:""}${n?`&search=${n}`:""}`:void 0,prevUrl:e.page>1?`/admin/models?page=${e.page-1}${c?`&status=${c}`:""}${n?`&search=${n}`:""}`:void 0},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var kT=({model:t,isEditing:r=!1})=>{let n={name:t?.name||"",slug:t?.slug||"",description:t?.description||"",thumbnailUrl:t?.thumbnailUrl||"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&q=80",iconUrl:t?.iconUrl||"",bannerUrl:t?.bannerUrl||"https://images.unsplash.com/photo-1579546929518-9e396f3cc809?w=1200&q=80",externalUrl:t?.externalUrl||"",isFeatured:t?.isFeatured||!1,isAdvertiser:t?.isAdvertiser??!0,status:t?.status||"active"},c=r?`/admin/models/${t?.id}/update`:"/admin/models/create",i=r?`Editar Modelo: ${t?.name}`:"Criar Novo Modelo";return s(Nr,{title:i,activePath:"/admin/models",children:[s("div",{class:"mb-6",children:s("a",{href:"/admin/models",class:"text-gray-400 hover:text-white text-sm inline-flex items-center gap-2",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"m15 18-6-6 6-6"},void 0,!1,void 0,this)},void 0,!1,void 0,this),"Voltar para lista"]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"flex flex-col lg:flex-row gap-8",children:[s("div",{class:"w-full lg:w-2/5 space-y-6",children:s("div",{class:"bg-[#1a1a1a] border border-white/5 rounded-xl p-6",children:[s("h2",{class:"text-xl font-display text-white mb-6",children:"Informa\xE7\xF5es do Modelo"},void 0,!1,void 0,this),s("form",{action:c,method:"post",class:"space-y-4",id:"model-form",children:[s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Nome do Modelo *"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-name",name:"name",value:n.name,placeholder:"Ex: Isabella Martinez",required:!0,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Slug (URL)"},void 0,!1,void 0,this),s("div",{class:"flex items-center",children:[s("span",{class:"text-gray-500 text-sm mr-2",children:"/models/"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-slug",name:"slug",value:n.slug,placeholder:"isabella-martinez",class:"flex-1 px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"Deixe em branco para gerar automaticamente a partir do nome."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Descri\xE7\xE3o"},void 0,!1,void 0,this),s("textarea",{id:"input-description",name:"description",rows:3,placeholder:"Uma breve descri\xE7\xE3o sobre o modelo...",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none resize-none",children:n.description},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("hr",{class:"border-white/10 my-4"},void 0,!1,void 0,this),s("h3",{class:"text-white font-bold text-sm uppercase tracking-wider",children:"Imagens"},void 0,!1,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Imagem Principal (Thumbnail) *"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-thumbnail",name:"thumbnailUrl",value:n.thumbnailUrl,required:!0,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"Recomendado: 400x600 (3:4) para melhor exibi\xE7\xE3o no grid."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Avatar (\xCDcone)"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-icon",name:"iconUrl",value:n.iconUrl,placeholder:"https://...",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"Imagem circular para perfil. Recomendado: 200x200."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Banner (Capa do Perfil)"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-banner",name:"bannerUrl",value:n.bannerUrl,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"Banner de capa para p\xE1gina de perfil. Recomendado: 1920x600."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("hr",{class:"border-white/10 my-4"},void 0,!1,void 0,this),s("h3",{class:"text-white font-bold text-sm uppercase tracking-wider",children:"Configura\xE7\xF5es de Publicidade"},void 0,!1,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Link Externo (CTA)"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-external",name:"externalUrl",value:n.externalUrl,placeholder:"https://link-para-onde-redirecionar.com",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"Link para onde o usu\xE1rio ser\xE1 redirecionado ao clicar (para an\xFAncios)."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Status"},void 0,!1,void 0,this),s("select",{id:"input-status",name:"status",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none appearance-none",children:[s("option",{value:"active",selected:n.status==="active",children:"Ativo"},void 0,!1,void 0,this),s("option",{value:"hidden",selected:n.status==="hidden",children:"Oculto"},void 0,!1,void 0,this),s("option",{value:"draft",selected:n.status==="draft",children:"Rascunho"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-6",children:[s("label",{class:"flex items-center gap-2 cursor-pointer",children:[s("input",{type:"checkbox",id:"input-featured",name:"isFeatured",value:"true",checked:n.isFeatured,class:"w-4 h-4 rounded border-white/20 bg-[#0a0a0a] text-primary focus:ring-primary"},void 0,!1,void 0,this),s("span",{class:"text-sm text-gray-300",children:"Destaque"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("label",{class:"flex items-center gap-2 cursor-pointer",children:[s("input",{type:"checkbox",id:"input-advertiser",name:"isAdvertiser",value:"true",checked:n.isAdvertiser,class:"w-4 h-4 rounded border-white/20 bg-[#0a0a0a] text-primary focus:ring-primary"},void 0,!1,void 0,this),s("span",{class:"text-sm text-gray-300",children:"Modelo Publicit\xE1rio (ADS)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"pt-4 flex gap-3",children:[s(Pr,{variant:"primary",className:"flex-1",type:"submit",children:r?"Salvar Altera\xE7\xF5es":"Criar Modelo"},void 0,!1,void 0,this),s("a",{href:"/admin/models",class:"px-6 py-3 bg-white/5 hover:bg-white/10 text-gray-400 rounded text-sm font-bold uppercase transition-colors",children:"Cancelar"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"w-full lg:w-3/5",children:s("div",{class:"sticky top-6 space-y-6",children:[s("div",{children:[s("div",{class:"flex items-center justify-between mb-4",children:[s("h3",{class:"text-white font-display uppercase tracking-widest text-sm",children:"Preview - Card do Modelo"},void 0,!1,void 0,this),s("span",{class:"text-[10px] bg-primary/20 text-primary border border-primary/30 px-2 py-1 rounded uppercase font-bold",children:"Ao Vivo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"bg-black/50 border border-white/5 rounded-xl p-8 pattern-grid",children:s("div",{class:"max-w-[200px] mx-auto",children:s("div",{id:"preview-card",class:"group relative w-full aspect-[3/4] rounded-md overflow-hidden cursor-pointer block bg-gray-900 border border-white/5 hover:border-primary/50 transition-all duration-300",children:[s("img",{id:"preview-card-image",src:n.thumbnailUrl,alt:"Preview",class:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"},void 0,!1,void 0,this),s("div",{class:"absolute inset-x-0 bottom-0 h-2/3 bg-gradient-to-t from-black/90 via-black/40 to-transparent z-10"},void 0,!1,void 0,this),s("div",{class:"absolute bottom-0 left-0 w-full p-3 z-20",children:s("h3",{id:"preview-card-name",class:"text-white text-sm md:text-base font-bold truncate capitalize shadow-black drop-shadow-md",children:n.name||"Nome do Modelo"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("div",{class:"flex items-center justify-between mb-4",children:[s("h3",{class:"text-white font-display uppercase tracking-widest text-sm",children:"Preview - P\xE1gina de Perfil"},void 0,!1,void 0,this),s("span",{class:"text-[10px] bg-blue-500/20 text-blue-400 border border-blue-500/30 px-2 py-1 rounded uppercase font-bold",children:"Simula\xE7\xE3o"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"bg-[#050505] border border-white/5 rounded-xl overflow-hidden",children:[s("div",{class:"relative h-32 md:h-40 overflow-hidden",children:[s("img",{id:"preview-profile-banner",src:n.bannerUrl,class:"absolute inset-0 w-full h-full object-cover"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 bg-gradient-to-t from-[#050505] to-transparent"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"px-6 -mt-12 relative z-10",children:[s("div",{class:"flex items-end gap-4",children:[s("div",{class:"w-20 h-20 rounded-full border-4 border-[#050505] overflow-hidden bg-gray-800",children:s("img",{id:"preview-profile-icon",src:n.iconUrl||n.thumbnailUrl,class:"w-full h-full object-cover"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{class:"flex-1 pb-2",children:s("h2",{id:"preview-profile-name",class:"text-white font-display text-xl font-bold",children:n.name||"Nome do Modelo"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"mt-4 pb-6",children:[s("p",{id:"preview-profile-description",class:"text-gray-400 text-sm line-clamp-2",children:n.description||"Descri\xE7\xE3o do modelo aparecer\xE1 aqui..."},void 0,!1,void 0,this),s("div",{id:"preview-cta-container",class:n.externalUrl?"":"hidden",children:s("a",{id:"preview-cta-link",href:n.externalUrl||"#",class:"mt-4 inline-flex items-center gap-2 bg-primary text-white text-xs font-bold px-4 py-2 rounded uppercase tracking-wider hover:bg-primary/80 transition-colors",children:[s("span",{children:"Ver Mais"},void 0,!1,void 0,this),s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},void 0,!1,void 0,this),s("polyline",{points:"15 3 21 3 21 9"},void 0,!1,void 0,this),s("line",{x1:"10",x2:"21",y1:"14",y2:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
        document.addEventListener('DOMContentLoaded', () => {
            // Inputs
            const nameInput = document.getElementById('input-name');
            const slugInput = document.getElementById('input-slug');
            const descInput = document.getElementById('input-description');
            const thumbnailInput = document.getElementById('input-thumbnail');
            const iconInput = document.getElementById('input-icon');
            const bannerInput = document.getElementById('input-banner');
            const externalInput = document.getElementById('input-external');

            // Preview Elements - Card
            const cardImage = document.getElementById('preview-card-image');
            const cardName = document.getElementById('preview-card-name');

            // Preview Elements - Profile
            const profileBanner = document.getElementById('preview-profile-banner');
            const profileIcon = document.getElementById('preview-profile-icon');
            const profileName = document.getElementById('preview-profile-name');
            const profileDescription = document.getElementById('preview-profile-description');
            const ctaContainer = document.getElementById('preview-cta-container');
            const ctaLink = document.getElementById('preview-cta-link');

            function updatePreview() {
                const name = nameInput.value || 'Nome do Modelo';
                const description = descInput.value || 'Descri\xE7\xE3o do modelo aparecer\xE1 aqui...';
                const thumbnail = thumbnailInput.value;
                const icon = iconInput.value || thumbnail;
                const banner = bannerInput.value;
                const externalUrl = externalInput.value;

                // Update Card Preview
                if (cardImage) cardImage.src = thumbnail;
                if (cardName) cardName.textContent = name;

                // Update Profile Preview
                if (profileBanner) profileBanner.src = banner;
                if (profileIcon) profileIcon.src = icon;
                if (profileName) profileName.textContent = name;
                if (profileDescription) profileDescription.textContent = description;

                // Update CTA
                if (ctaContainer) {
                    ctaContainer.classList.toggle('hidden', !externalUrl);
                }
                if (ctaLink) {
                    ctaLink.href = externalUrl || '#';
                }
            }

            // Auto-generate slug from name
            function generateSlug(name) {
                return name
                    .toLowerCase()
                    .normalize('NFD')
                    .replace(/[\\u0300-\\u036f]/g, '')
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/(^-|-$)/g, '');
            }

            nameInput.addEventListener('input', () => {
                // Only auto-generate if slug is empty
                if (!slugInput.value) {
                    slugInput.placeholder = generateSlug(nameInput.value) || 'slug-automatico';
                }
                updatePreview();
            });

            // Add listeners to all inputs
            [nameInput, slugInput, descInput, thumbnailInput, iconInput, bannerInput, externalInput].forEach(input => {
                if (input) input.addEventListener('input', updatePreview);
                if (input) input.addEventListener('change', updatePreview);
            });

            // Initial update
            updatePreview();
        });
      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var BE=({ads:t})=>{return s("div",{class:"rounded-xl border border-white/5 bg-surface overflow-hidden",children:s("table",{class:"w-full text-left text-sm text-gray-400",children:[s("thead",{class:"bg-[#1a1a1a] text-xs uppercase font-bold text-gray-200",children:s("tr",{children:[s("th",{class:"px-6 py-4",children:"Campanha"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Tipo"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Local"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Impress\xF5es"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Cliques (CTR)"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Status"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4 text-right",children:"A\xE7\xF5es"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("tbody",{class:"divide-y divide-white/5 bg-surface",children:t.map((r)=>{let e=parseInt(r.impressions.replace(/\./g,"").replace(/,/g,""))||0,o=parseInt(r.clicks.replace(/\./g,"").replace(/,/g,""))||0,n=e>0?(o/e*100).toFixed(2):"0.00";return s("tr",{class:"hover:bg-white/5 transition-colors",children:[s("td",{class:"px-6 py-4",children:s("div",{class:"flex flex-col",children:[s("span",{class:"font-bold text-white",children:r.name},void 0,!1,void 0,this),s("span",{class:"text-[10px] text-gray-500",children:["ID: ",r.id]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("span",{class:"px-2 py-1 rounded border border-white/10 bg-white/5 text-[10px] uppercase font-mono",children:r.type},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4 text-xs",children:r.placement},void 0,!1,void 0,this),s("td",{class:"px-6 py-4 font-mono text-white",children:r.impressions},void 0,!1,void 0,this),s("td",{class:"px-6 py-4 text-white font-mono",children:[r.clicks," ",s("span",{class:`text-xs ml-1 ${parseFloat(n)>2?"text-green-500":parseFloat(n)>1?"text-yellow-500":"text-gray-500"}`,children:["(",n,"%)"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("td",{class:"px-6 py-4",children:s("span",{class:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide border ${r.status==="Active"?"bg-green-500/10 text-green-500 border-green-500/20":r.status==="Paused"?"bg-yellow-500/10 text-yellow-500 border-yellow-500/20":"bg-gray-500/10 text-gray-500 border-gray-500/20"}`,children:r.status},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("div",{class:"flex items-center justify-end gap-2",children:[s("a",{href:`/admin/ads/${r.id}/edit`,class:"text-primary hover:text-white text-xs uppercase font-bold inline-flex items-center gap-1 px-2 py-1 rounded hover:bg-primary/10 transition-colors",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"},void 0,!1,void 0,this),s("path",{d:"m15 5 4 4"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Editar"]},void 0,!0,void 0,this),s("form",{action:`/admin/ads/${r.id}/toggle`,method:"post",class:"inline",children:s("button",{type:"submit",class:`text-xs uppercase font-bold inline-flex items-center gap-1 px-2 py-1 rounded transition-colors ${r.status==="Active"?"text-yellow-500 hover:text-yellow-400 hover:bg-yellow-500/10":"text-green-500 hover:text-green-400 hover:bg-green-500/10"}`,children:r.status==="Active"?s(Zr,{children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"},void 0,!1,void 0,this),s("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Pausar"]},void 0,!0,void 0,this):s(Zr,{children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("polygon",{points:"6 3 20 12 6 21 6 3"},void 0,!1,void 0,this)},void 0,!1,void 0,this),"Ativar"]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("form",{action:`/admin/ads/${r.id}/delete`,method:"post",class:"inline",onsubmit:"return confirm('Tem certeza que deseja excluir este an\xFAncio?')",children:s("button",{type:"submit",class:"text-red-500 hover:text-red-400 text-xs uppercase font-bold inline-flex items-center gap-1 px-2 py-1 rounded hover:bg-red-500/10 transition-colors",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M3 6h18"},void 0,!1,void 0,this),s("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},void 0,!1,void 0,this),s("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Excluir"]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)})},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var XE=({ads:t,pagination:r,filters:e})=>{let o=r?.page||1,n=r?.totalPages||1,c=r?.total||t.length;return s(Nr,{title:"Gest\xE3o de Publicidade (Ads)",activePath:"/admin/ads",children:[s("div",{class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[s("div",{children:[s("p",{class:"text-gray-400 text-sm",children:"Gerencie campanhas e acompanhe o CTR em tempo real."},void 0,!1,void 0,this),s("p",{class:"text-gray-500 text-xs mt-1",children:[c," an\xFAncio(s) encontrado(s)"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("a",{href:"/admin/ads/new",class:"bg-primary text-white px-4 py-2 rounded text-xs font-bold uppercase tracking-widest shadow-neon-purple hover:brightness-110 inline-flex items-center gap-2",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M5 12h14"},void 0,!1,void 0,this),s("path",{d:"M12 5v14"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Nova Campanha"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"bg-surface border border-white/5 rounded-xl p-4 mb-6",children:s("form",{method:"get",action:"/admin/ads",class:"flex flex-wrap gap-4 items-end",children:[s("div",{class:"flex-1 min-w-[150px]",children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Status"},void 0,!1,void 0,this),s("select",{name:"status",class:"w-full px-3 py-2 bg-[#0a0a0a] border border-white/10 rounded text-white text-sm focus:border-primary focus:outline-none",children:[s("option",{value:"",children:"Todos"},void 0,!1,void 0,this),s("option",{value:"active",selected:e?.status==="active",children:"Ativos"},void 0,!1,void 0,this),s("option",{value:"paused",selected:e?.status==="paused",children:"Pausados"},void 0,!1,void 0,this),s("option",{value:"draft",selected:e?.status==="draft",children:"Rascunhos"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex-1 min-w-[150px]",children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Placement"},void 0,!1,void 0,this),s("select",{name:"placement",class:"w-full px-3 py-2 bg-[#0a0a0a] border border-white/10 rounded text-white text-sm focus:border-primary focus:outline-none",children:[s("option",{value:"",children:"Todos"},void 0,!1,void 0,this),s("option",{value:"home_top",selected:e?.placement==="home_top",children:"Home (Topo)"},void 0,!1,void 0,this),s("option",{value:"home_middle",selected:e?.placement==="home_middle",children:"Home (Meio)"},void 0,!1,void 0,this),s("option",{value:"home_bottom",selected:e?.placement==="home_bottom",children:"Home (Rodap\xE9)"},void 0,!1,void 0,this),s("option",{value:"sidebar",selected:e?.placement==="sidebar",children:"Sidebar (Geral)"},void 0,!1,void 0,this),s("option",{value:"feed_mix",selected:e?.placement==="feed_mix",children:"Feed Mix"},void 0,!1,void 0,this),s("option",{value:"models_grid",selected:e?.placement==="models_grid",children:"Grid de Modelos"},void 0,!1,void 0,this),s("option",{value:"model_profile",selected:e?.placement==="model_profile",children:"Perfil de Modelo (Topo)"},void 0,!1,void 0,this),s("option",{value:"login",selected:e?.placement==="login",children:"P\xE1gina de Login"},void 0,!1,void 0,this),s("option",{value:"register",selected:e?.placement==="register",children:"P\xE1gina de Registro"},void 0,!1,void 0,this),s("option",{value:"feed_model",selected:e?.placement==="feed_model",children:"Feed de Modelo"},void 0,!1,void 0,this),s("option",{value:"model_sidebar",selected:e?.placement==="model_sidebar",children:"Sidebar de Modelo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("button",{type:"submit",class:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded text-xs font-bold uppercase transition-colors",children:"Filtrar"},void 0,!1,void 0,this),(e?.status||e?.placement)&&s("a",{href:"/admin/ads",class:"px-4 py-2 text-gray-400 hover:text-white text-xs uppercase transition-colors",children:"Limpar"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),t.length>0?s(BE,{ads:t},void 0,!1,void 0,this):s("div",{class:"bg-surface border border-white/5 rounded-xl p-12 text-center",children:[s("div",{class:"w-16 h-16 mx-auto mb-4 rounded-full bg-white/5 flex items-center justify-center",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-500",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"},void 0,!1,void 0,this),s("path",{d:"M3 9h18"},void 0,!1,void 0,this),s("path",{d:"M9 21V9"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("h3",{class:"text-white font-bold text-lg mb-2",children:"Nenhum an\xFAncio encontrado"},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm mb-6",children:"Comece criando sua primeira campanha publicit\xE1ria."},void 0,!1,void 0,this),s("a",{href:"/admin/ads/new",class:"inline-flex items-center gap-2 bg-primary text-white px-6 py-3 rounded text-sm font-bold uppercase tracking-widest hover:brightness-110",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M5 12h14"},void 0,!1,void 0,this),s("path",{d:"M12 5v14"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Criar Primeira Campanha"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n>1&&s(ts,{currentPage:o,totalPages:n,showingFrom:(o-1)*20+1,showingTo:Math.min(o*20,c),totalItems:c,nextUrl:o<n?`/admin/ads?page=${o+1}${e?.status?`&status=${e.status}`:""}${e?.placement?`&placement=${e.placement}`:""}`:void 0,prevUrl:o>1?`/admin/ads?page=${o-1}${e?.status?`&status=${e.status}`:""}${e?.placement?`&placement=${e.placement}`:""}`:void 0},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var cmt={diamond:["feed_model"],diamond_block:["home_top","home_middle","models_grid"],banner:["home_top","home_bottom","login","register"],spot:["sidebar","model_profile","model_sidebar"],hero:["home_top"]};var WT=({ad:t,isEditing:r=!1})=>{let o={name:t?.name||"",type:t?.type||"diamond",placement:t?.placement||"home_middle",status:t?.status||"draft",title:t?.title||"T\xEDtulo do An\xFAncio",subtitle:t?.subtitle||"Descri\xE7\xE3o curta do an\xFAncio",ctaText:t?.ctaText||"SAIBA MAIS",imageUrl:t?.imageUrl||"https://images.unsplash.com/photo-1605810230434-7631ac76ec81?w=400&q=80",link:t?.link||"#",category:t?.category||"DESTAQUE",priority:t?.priority||0},n=r?`/admin/ads/${t?.id}/update`:"/admin/ads/create",c=r?`Editar An\xFAncio: ${t?.name}`:"Criar Novo An\xFAncio",i=cmt[o.type]||[];return s(Nr,{title:c,activePath:"/admin/ads",children:[s("div",{class:"mb-6",children:s("a",{href:"/admin/ads",class:"text-gray-400 hover:text-white text-sm inline-flex items-center gap-2",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"m15 18-6-6 6-6"},void 0,!1,void 0,this)},void 0,!1,void 0,this),"Voltar para lista"]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"flex flex-col md:flex-row gap-8",children:[s("div",{class:"w-full md:w-1/3 space-y-6",children:s("div",{class:"bg-[#1a1a1a] border border-white/5 rounded-xl p-6",children:[s("h2",{class:"text-xl font-display text-white mb-6",children:"Configura\xE7\xE3o do An\xFAncio"},void 0,!1,void 0,this),s("form",{action:n,method:"post",class:"space-y-4",id:"ad-form",children:[s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Nome da Campanha"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-name",name:"name",value:o.name,placeholder:"Ex: Black Friday 2026",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Tipo de An\xFAncio"},void 0,!1,void 0,this),s("select",{id:"input-type",name:"type",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none appearance-none",children:[s("option",{value:"diamond",selected:o.type==="diamond",children:"Diamond Selection (Post Style)"},void 0,!1,void 0,this),s("option",{value:"diamond_block",selected:o.type==="diamond_block",children:"Diamond Selection (Native Block)"},void 0,!1,void 0,this),s("option",{value:"banner",selected:o.type==="banner",children:"Banner Horizontal (Native)"},void 0,!1,void 0,this),s("option",{value:"spot",selected:o.type==="spot",children:"Ad Spot Small (Native)"},void 0,!1,void 0,this),s("option",{value:"hero",selected:o.type==="hero",children:"Hero Carousel"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"O tipo determina onde o an\xFAncio pode aparecer."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Placement"},void 0,!1,void 0,this),s("select",{id:"input-placement",name:"placement",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none appearance-none"},void 0,!1,void 0,this),s("p",{id:"placement-hint",class:"text-[10px] text-primary/70 mt-1",children:"Locais dispon\xEDveis para este tipo de an\xFAncio."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Status"},void 0,!1,void 0,this),s("select",{id:"input-status",name:"status",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none appearance-none",children:[s("option",{value:"draft",selected:o.status==="draft",children:"Rascunho"},void 0,!1,void 0,this),s("option",{value:"active",selected:o.status==="active",children:"Ativo"},void 0,!1,void 0,this),s("option",{value:"paused",selected:o.status==="paused",children:"Pausado"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("hr",{class:"border-white/10 my-4"},void 0,!1,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"T\xEDtulo Principal"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-title",name:"title",value:o.title,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"field-subtitle",class:"hidden",children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Subt\xEDtulo"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-subtitle",name:"subtitle",value:o.subtitle,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"field-category",class:"hidden",children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Categoria"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-category",name:"category",value:o.category,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"field-cta",children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Texto do Bot\xE3o (CTA)"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-cta",name:"ctaText",value:o.ctaText,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"URL da Imagem"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-image",name:"imageUrl",value:o.imageUrl,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"Recomendado: 1200x628 para Banner, 1080x1350 para Post/Spot."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Link de Destino"},void 0,!1,void 0,this),s("input",{type:"text",id:"input-link",name:"link",value:o.link,class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Prioridade"},void 0,!1,void 0,this),s("input",{type:"number",id:"input-priority",name:"priority",value:String(o.priority),min:"0",max:"100",class:"w-full px-4 py-3 bg-[#0a0a0a] border border-white/10 rounded text-white focus:border-primary focus:outline-none"},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 mt-1",children:"Maior valor = maior prioridade de exibi\xE7\xE3o."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"pt-4 flex gap-3",children:[s(Pr,{variant:"primary",className:"flex-1",type:"submit",children:r?"Salvar Altera\xE7\xF5es":"Publicar An\xFAncio"},void 0,!1,void 0,this),s("a",{href:"/admin/ads",class:"px-6 py-3 bg-white/5 hover:bg-white/10 text-gray-400 rounded text-sm font-bold uppercase transition-colors",children:"Cancelar"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"w-full md:w-2/3",children:s("div",{class:"sticky top-6",children:[s("div",{class:"flex items-center justify-between mb-4",children:[s("h3",{class:"text-white font-display uppercase tracking-widest text-sm",children:"Preview em Tempo Real"},void 0,!1,void 0,this),s("span",{class:"text-[10px] bg-primary/20 text-primary border border-primary/30 px-2 py-1 rounded uppercase font-bold",children:"Ao Vivo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"bg-black/50 border border-white/5 rounded-xl p-8 flex items-center justify-center min-h-[500px] relative overflow-hidden pattern-grid",children:[s("div",{id:"preview-diamond",class:"w-full max-w-sm",children:s(kw,{post:{id:"preview",title:o.title,likes:1234,tipsTotal:500,comments:42,createdAt:"Patrocinado",mediaCdns:{images:[o.imageUrl]}},model:{iconUrl:"https://ui-avatars.com/api/?name=Ad+Partner&background=FFD700&color=000"},displayName:"Parceiro Oficial"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{id:"preview-diamond-block",class:"w-full hidden",children:s(qs,{title:"Diamond Selection",models:[{name:o.title,imageUrl:o.imageUrl,isPromoted:!0,category:"Destaque"},{name:"Modelo 2",imageUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400&q=80",isPromoted:!0,category:"Modelo"},{name:"Modelo 3",imageUrl:"https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=400&q=80",isPromoted:!0,category:"Modelo"},{name:"Modelo 4",imageUrl:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&q=80",isPromoted:!0,category:"Modelo"}]},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{id:"preview-banner",class:"w-full hidden",children:s(xs,{title:o.title,subtitle:o.subtitle,ctaText:o.ctaText,link:"#",imageUrl:o.imageUrl},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{id:"preview-banner-auth",class:"w-full hidden",children:s("div",{class:"bg-gradient-to-r from-[#1a1a1a] to-black p-4 flex items-center justify-between rounded-lg border border-[#FFD700]/30",children:[s("div",{children:[s("span",{class:"text-[10px] text-[#FFD700] border border-[#FFD700] px-1 font-bold uppercase",children:"Parceiro"},void 0,!1,void 0,this),s("h5",{class:"text-white font-bold mt-1",children:o.title},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-400",children:o.subtitle},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("img",{src:o.imageUrl,class:"w-12 h-12 rounded object-cover"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{id:"preview-spot",class:"w-64 hidden",children:s(Bh,{title:o.title,buttonText:o.ctaText,link:"#",imageUrl:o.imageUrl},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{id:"preview-spot-card",class:"w-64 hidden",children:s("a",{href:"#",class:"block rounded-lg overflow-hidden border border-white/10 hover:border-primary/50 transition-colors group",children:[s("img",{src:o.imageUrl,class:"w-full h-32 object-cover group-hover:scale-105 transition-transform"},void 0,!1,void 0,this),s("div",{class:"p-3 bg-[#1a1a1a]",children:[s("span",{class:"text-[10px] text-[#FFD700] font-bold uppercase",children:"Patrocinado"},void 0,!1,void 0,this),s("h5",{class:"text-white font-bold text-sm mt-1",children:o.title},void 0,!1,void 0,this),s("span",{class:"text-xs text-primary mt-2 inline-block",children:o.ctaText},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{id:"preview-spot-banner",class:"w-full hidden",children:s("div",{class:"relative w-full h-24 md:h-32 rounded-lg overflow-hidden bg-gradient-to-r from-[#1a1a1a] to-[#050505] border border-white/10 hover:border-primary/50 transition-all",children:[s("img",{src:o.imageUrl,class:"absolute inset-0 w-full h-full object-cover opacity-40 group-hover:opacity-50 transition-opacity"},void 0,!1,void 0,this),s("div",{class:"absolute inset-0 flex items-center justify-between px-4 md:px-10 z-10",children:[s("div",{class:"flex flex-col justify-center",children:[s("span",{class:"text-[10px] text-[#FFD700] uppercase font-bold tracking-widest border border-[#FFD700] px-1 w-fit mb-1",children:"Publicidade"},void 0,!1,void 0,this),s("h4",{class:"text-white font-display text-xl md:text-3xl uppercase leading-none",children:o.title},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-xs md:text-sm hidden sm:block",children:o.subtitle},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{class:"bg-primary text-white text-xs md:text-sm font-bold px-4 py-2 rounded-sm uppercase group-hover:bg-primary/80 transition-colors",children:o.ctaText},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{id:"preview-hero",class:"w-full hidden",children:s(vw,{slides:[{image:o.imageUrl,title:o.title,category:o.category,isLive:!1}]},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('ad-form');
            const typeSelect = document.getElementById('input-type');
            const placementSelect = document.getElementById('input-placement');
            
            // Inputs
            const titleInput = document.getElementById('input-title');
            const subtitleInput = document.getElementById('input-subtitle');
            const ctaInput = document.getElementById('input-cta');
            const imageInput = document.getElementById('input-image');
            const linkInput = document.getElementById('input-link');
            const catInput = document.getElementById('input-category');

            // Fields Containers
            const fieldSubtitle = document.getElementById('field-subtitle');
            const fieldCategory = document.getElementById('field-category');
            const fieldCta = document.getElementById('field-cta');

            // Preview Containers
            const pDiamond = document.getElementById('preview-diamond');
            const pDiamondBlock = document.getElementById('preview-diamond-block');
            const pBanner = document.getElementById('preview-banner');
            const pBannerAuth = document.getElementById('preview-banner-auth');
            const pSpot = document.getElementById('preview-spot');
            const pSpotCard = document.getElementById('preview-spot-card');
            const pSpotBanner = document.getElementById('preview-spot-banner');
            const pHero = document.getElementById('preview-hero');

            // Mapeamento de placements v\xE1lidos por tipo
            const validPlacementsByType = {
                diamond: ['feed_model'],
                diamond_block: ['home_top', 'home_middle', 'models_grid'],
                banner: ['home_top', 'home_bottom', 'login', 'register'],
                spot: ['sidebar', 'model_profile', 'model_sidebar'],
                hero: ['home_top']
            };

            // Labels para os placements
            const placementLabels = {
                'home_top': 'Home (Topo)',
                'home_middle': 'Home (Meio)',
                'home_bottom': 'Home (Rodap\xE9)',
                'sidebar': 'Sidebar (Geral)',
                'feed_mix': 'Feed Mix',
                'models_grid': 'Grid de Modelos',
                'model_profile': 'Perfil de Modelo (Topo)',
                'login': 'P\xE1gina de Login',
                'register': 'P\xE1gina de Registro',
                'feed_model': 'Feed de Modelo',
                'model_sidebar': 'Sidebar de Modelo'
            };

            // Valor inicial do placement (do servidor)
            const initialPlacement = '${o.placement}';

            function updatePlacementOptions() {
                const type = typeSelect.value;
                const validPlacements = validPlacementsByType[type] || [];
                
                // Salvar sele\xE7\xE3o atual se ainda for v\xE1lida
                const currentSelection = placementSelect.value;
                
                // Limpar op\xE7\xF5es atuais
                placementSelect.innerHTML = '';
                
                // Adicionar novas op\xE7\xF5es
                validPlacements.forEach(placement => {
                    const option = document.createElement('option');
                    option.value = placement;
                    option.textContent = placementLabels[placement] || placement;
                    
                    // Selecionar a op\xE7\xE3o se for a sele\xE7\xE3o atual ou inicial
                    if (placement === currentSelection && validPlacements.includes(currentSelection)) {
                        option.selected = true;
                    } else if (placement === initialPlacement && validPlacements.includes(initialPlacement) && !currentSelection) {
                        option.selected = true;
                    }
                    
                    placementSelect.appendChild(option);
                });

                // Se nenhuma op\xE7\xE3o foi selecionada, selecionar a primeira
                if (!placementSelect.value && placementSelect.options.length > 0) {
                    placementSelect.options[0].selected = true;
                }
            }

            function updateVisibility() {
                const type = typeSelect.value;
                const placement = placementSelect.value;
                
                // Reset Previews
                pDiamond.classList.add('hidden');
                pDiamondBlock.classList.add('hidden');
                pBanner.classList.add('hidden');
                pBannerAuth.classList.add('hidden');
                pSpot.classList.add('hidden');
                pSpotCard.classList.add('hidden');
                pSpotBanner.classList.add('hidden');
                pHero.classList.add('hidden');

                // Reset Fields
                fieldSubtitle.classList.add('hidden');
                fieldCategory.classList.add('hidden');
                fieldCta.classList.remove('hidden');

                if (type === 'diamond') {
                    pDiamond.classList.remove('hidden');
                    fieldCta.classList.add('hidden'); 
                } else if (type === 'diamond_block') {
                    pDiamondBlock.classList.remove('hidden');
                    fieldCta.classList.add('hidden');
                } else if (type === 'banner') {
                    if (placement === 'login' || placement === 'register') {
                        pBannerAuth.classList.remove('hidden');
                        fieldSubtitle.classList.remove('hidden');
                    } else {
                        pBanner.classList.remove('hidden');
                        fieldSubtitle.classList.remove('hidden');
                    }
                } else if (type === 'spot') {
                    if (placement === 'model_sidebar') {
                        pSpotCard.classList.remove('hidden');
                    } else if (placement === 'model_profile') {
                        pSpotBanner.classList.remove('hidden');
                        fieldSubtitle.classList.remove('hidden'); // Show subtitle for banner-style spot
                    } else {
                        pSpot.classList.remove('hidden');
                    }
                } else if (type === 'hero') {
                    pHero.classList.remove('hidden');
                    fieldCategory.classList.remove('hidden');
                }
            }

            function updatePreview() {
                const type = typeSelect.value;
                const title = titleInput.value;
                const subtitle = subtitleInput.value;
                const cta = ctaInput.value;
                const imgUrl = imageInput.value;
                const cat = catInput?.value || '';

                // Update Diamond (Post)
                if (type === 'diamond') {
                    const captionEl = pDiamond.querySelector('.stack-footer .text-gray-300');
                    if(captionEl) {
                        const nameSpan = captionEl.querySelector('span');
                        captionEl.innerHTML = '';
                        if(nameSpan) captionEl.appendChild(nameSpan);
                        captionEl.appendChild(document.createTextNode(' ' + title));
                    }
                    const imgEl = pDiamond.querySelector('.carousel-item img');
                    if(imgEl) imgEl.src = imgUrl;
                }

                // Update Diamond (Block)
                if (type === 'diamond_block') {
                    const blockTitleEl = pDiamondBlock.querySelector('h3');
                    if(blockTitleEl) {
                        const starSpan = blockTitleEl.querySelector('span');
                        blockTitleEl.innerHTML = '';
                        if(starSpan) blockTitleEl.appendChild(starSpan);
                        blockTitleEl.appendChild(document.createTextNode(' ' + title));
                    }

                    const firstCard = pDiamondBlock.querySelector('.grid > a:first-child');
                    if(firstCard) {
                        const imgEl = firstCard.querySelector('img');
                        const nameEl = firstCard.querySelector('h3');
                        
                        if(imgEl) imgEl.src = imgUrl;
                        if(nameEl) nameEl.innerText = title; 
                    }
                }

                // Update Banner
                if (type === 'banner') {
                    // Default Banner
                    const titleEl = pBanner.querySelector('h4');
                    const subEl = pBanner.querySelector('p');
                    const ctaEl = pBanner.querySelector('span.bg-primary');
                    const imgEl = pBanner.querySelector('img');
                    
                    if(titleEl) titleEl.innerText = title;
                    if(subEl) subEl.innerText = subtitle;
                    if(ctaEl) ctaEl.innerText = cta;
                    if(imgEl) imgEl.src = imgUrl;

                    // Auth Style Banner
                    const authTitleEl = pBannerAuth.querySelector('h5');
                    const authSubEl = pBannerAuth.querySelector('p');
                    const authImgEl = pBannerAuth.querySelector('img');

                    if(authTitleEl) authTitleEl.innerText = title;
                    if(authSubEl) authSubEl.innerText = subtitle;
                    if(authImgEl) authImgEl.src = imgUrl;
                }

                // Update Spot
                if (type === 'spot') {
                    // Default Spot
                    const titleEl = pSpot.querySelector('.absolute.bottom-3 p');
                    const btnEl = pSpot.querySelector('.absolute.bottom-3 button');
                    const imgEl = pSpot.querySelector('img');

                    if(titleEl) titleEl.innerText = title;
                    if(btnEl) btnEl.innerText = cta;
                    if(imgEl) imgEl.src = imgUrl;

                    // Card Style Spot
                    const cardTitleEl = pSpotCard.querySelector('h5');
                    const cardCtaEl = pSpotCard.querySelector('span.text-primary');
                    const cardImgEl = pSpotCard.querySelector('img');

                    if(cardTitleEl) cardTitleEl.innerText = title;
                    if(cardCtaEl) cardCtaEl.innerText = cta;
                    if(cardImgEl) cardImgEl.src = imgUrl;

                    // Banner Style Spot
                    const bTitleEl = pSpotBanner.querySelector('h4');
                    const bSubEl = pSpotBanner.querySelector('p');
                    const bCtaEl = pSpotBanner.querySelector('span.bg-primary');
                    const bImgEl = pSpotBanner.querySelector('img');

                    if(bTitleEl) bTitleEl.innerText = title;
                    if(bSubEl) bSubEl.innerText = subtitle;
                    if(bCtaEl) bCtaEl.innerText = cta;
                    if(bImgEl) bImgEl.src = imgUrl;
                }

                // Update Hero
                if (type === 'hero') {
                   const titleEl = pHero.querySelector('h2');
                   const catEl = pHero.querySelector('.text-primary.font-bold');
                   const imgEl = pHero.querySelector('img');
                   
                   if(titleEl) titleEl.innerText = title;
                   if(catEl) catEl.innerText = cat;
                   if(imgEl) imgEl.src = imgUrl;
                }
            }

            // Listeners
            typeSelect.addEventListener('change', () => {
                updatePlacementOptions();
                updateVisibility();
                updatePreview();
            });

            placementSelect.addEventListener('change', () => {
                updateVisibility();
                updatePreview();
            });

            [titleInput, subtitleInput, ctaInput, imageInput, linkInput, catInput].forEach(input => {
                if(input) input.addEventListener('input', updatePreview);
            });

            // Init
            updatePlacementOptions();
            updateVisibility();
            updatePreview();
        });
      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var JE=({plans:t,activeGateway:r,orderBumps:e})=>{let o=(h)=>t.find((w)=>w.duration===h)||{id:0,name:"Unknown",price:0,duration:h,checkoutUrl:"",acceptsPix:!1,acceptsCard:!1},n=o(7),c=o(30),i=o(365),f=(h,w)=>s("div",{class:"p-6 rounded-xl bg-surface border border-white/5 relative group hover:border-primary/50 transition-colors",children:s("form",{action:"/api/admin/plans/update",method:"post",class:"space-y-4",children:[s("input",{type:"hidden",name:"id",value:h.id},void 0,!1,void 0,this),s("div",{class:"flex justify-between items-center mb-4",children:[s("h3",{class:"font-bold text-xl text-white",children:w},void 0,!1,void 0,this),s("span",{class:"text-xs bg-primary/10 text-primary px-2 py-1 rounded font-bold uppercase",children:h.duration===7?"7 Dias":h.duration===30?"30 Dias":"365 Dias"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Pre\xE7o de Exibi\xE7\xE3o (R$)"},void 0,!1,void 0,this),s("div",{class:"relative",children:[s("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"},void 0,!1,void 0,this),s("input",{type:"text",name:"price",value:(h.price/100).toFixed(2),class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 pl-10 text-white focus:border-primary focus:outline-none transition-colors",placeholder:"0.00"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),r==="Dias Marketplace"?s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Link de Checkout"},void 0,!1,void 0,this),s("input",{type:"text",name:"checkoutUrl",value:h.checkoutUrl||"",class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"https://..."},void 0,!1,void 0,this)]},void 0,!0,void 0,this):s("div",{class:"space-y-3 pt-2",children:[s("label",{class:"block text-xs text-gray-500 uppercase font-bold tracking-wider",children:"M\xE9todos Aceitos (JunglePay)"},void 0,!1,void 0,this),s("label",{class:"flex items-center justify-between bg-[#1a1a1a] p-3 rounded border border-white/10 cursor-pointer hover:bg-white/5",children:[s("span",{class:"text-sm text-gray-300",children:"Aceitar PIX"},void 0,!1,void 0,this),s("input",{type:"checkbox",name:"acceptsPix",value:"true",checked:!!h.acceptsPix,class:"accent-primary w-5 h-5 rounded"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("label",{class:"flex items-center justify-between bg-[#1a1a1a] p-3 rounded border border-white/10 cursor-pointer hover:bg-white/5",children:[s("span",{class:"text-sm text-gray-300",children:"Aceitar Cart\xE3o"},void 0,!1,void 0,this),s("input",{type:"checkbox",name:"acceptsCard",value:"true",checked:!!h.acceptsCard,class:"accent-primary w-5 h-5 rounded"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"pt-4 border-t border-white/5 space-y-4",children:[s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Nome do Plano"},void 0,!1,void 0,this),s("input",{type:"text",name:"name",value:h.name,class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"Nome do plano"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Texto do Bot\xE3o (CTA)"},void 0,!1,void 0,this),s("input",{type:"text",name:"ctaText",value:h.ctaText||"",class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"Ex: Assinar Agora"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Status do Plano"},void 0,!1,void 0,this),s("label",{class:"flex items-center justify-between bg-[#1a1a1a] p-3 rounded border border-white/10 cursor-pointer hover:bg-white/5",children:[s("span",{class:"text-sm text-gray-300",children:"Ativo (Vis\xEDvel na p\xE1gina de planos)"},void 0,!1,void 0,this),s("input",{type:"checkbox",name:"isActive",value:"true",checked:!!h.isActive,class:"accent-primary w-5 h-5 rounded"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Estilo do Card"},void 0,!1,void 0,this),s("div",{class:"grid grid-cols-3 gap-2",children:[s("label",{class:`flex flex-col items-center justify-center p-3 rounded border cursor-pointer transition-all ${h.cardStyle==="primary"?"border-primary bg-primary/10":"border-white/10 hover:border-white/30"}`,children:[s("input",{type:"radio",name:"cardStyle",value:"primary",checked:h.cardStyle==="primary",class:"sr-only"},void 0,!1,void 0,this),s("span",{class:"text-sm font-bold mb-1",children:"Destaque"},void 0,!1,void 0,this),s("span",{class:"text-xs text-gray-500",children:"Principal"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("label",{class:`flex flex-col items-center justify-center p-3 rounded border cursor-pointer transition-all ${h.cardStyle==="secondary"?"border-primary bg-primary/10":"border-white/10 hover:border-white/30"}`,children:[s("input",{type:"radio",name:"cardStyle",value:"secondary",checked:h.cardStyle==="secondary",class:"sr-only"},void 0,!1,void 0,this),s("span",{class:"text-sm font-bold mb-1",children:"Secund\xE1rio"},void 0,!1,void 0,this),s("span",{class:"text-xs text-gray-500",children:"Normal"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("label",{class:`flex flex-col items-center justify-center p-3 rounded border cursor-pointer transition-all ${h.cardStyle==="outline"?"border-primary bg-primary/10":"border-white/10 hover:border-white/30"}`,children:[s("input",{type:"radio",name:"cardStyle",value:"outline",checked:h.cardStyle==="outline",class:"sr-only"},void 0,!1,void 0,this),s("span",{class:"text-sm font-bold mb-1",children:"Borda"},void 0,!1,void 0,this),s("span",{class:"text-xs text-gray-500",children:"Claro"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"pt-4 border-t border-white/5",children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Benef\xEDcios"},void 0,!1,void 0,this),s("div",{id:`benefits-container-${h.id}`,class:"space-y-2",children:(h.benefits||[]).map((p,u)=>{if(typeof p==="string")return s("div",{class:"flex items-center gap-2",children:[s("input",{type:"text",name:`benefits[${u}]`,value:p,class:"flex-1 bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"Digite um benef\xEDcio"},void 0,!1,void 0,this),s("button",{type:"button",onclick:`removeBenefit(${h.id}, ${u})`,class:"p-2 text-red-500 hover:bg-red-500/10 rounded",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},u,!0,void 0,this);else return s("div",{class:"space-y-2 p-3 bg-[#1a1a1a]/30 rounded border border-white/5",children:[s("div",{class:"flex items-center gap-2",children:[s("input",{type:"text",name:`benefits[${u}][title]`,value:p.title||"",class:"flex-1 bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"T\xEDtulo"},void 0,!1,void 0,this),s("button",{type:"button",onclick:`removeBenefit(${h.id}, ${u})`,class:"p-2 text-red-500 hover:bg-red-500/10 rounded",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("input",{type:"text",name:`benefits[${u}][icon]`,value:p.icon||"",class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"\xCDcone (opcional)"},void 0,!1,void 0,this),s("input",{type:"text",name:`benefits[${u}][subtitle]`,value:p.subtitle||"",class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"Subt\xEDtulo (opcional)"},void 0,!1,void 0,this)]},u,!0,void 0,this)})},void 0,!1,void 0,this),s("button",{type:"button",onclick:`addBenefit(${h.id})`,class:"mt-2 w-full bg-white/5 hover:bg-primary hover:text-white text-gray-300 py-2 rounded-lg font-bold text-sm transition-all flex items-center justify-center gap-2",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("line",{x1:"12",y1:"5",x2:"12",y2:"19"},void 0,!1,void 0,this),s("line",{x1:"5",y1:"12",x2:"19",y2:"12"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Adicionar Benef\xEDcio"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"pt-4 border-t border-white/5",children:s("button",{type:"submit",class:"w-full bg-white/5 hover:bg-primary hover:text-white text-gray-300 py-2 rounded-lg font-bold text-sm transition-all",children:"SALVAR ALTERA\xC7\xD5ES"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this);return s(Nr,{title:"Gerenciar Planos",activePath:"/admin/plans",children:[s("div",{class:"mb-8 flex justify-between items-start",children:[s("div",{children:[s("h1",{class:"text-3xl font-bold mb-2",children:"Planos de Assinatura"},void 0,!1,void 0,this),s("p",{class:"text-gray-400",children:"Configure os pre\xE7os e links de checkout."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"text-right",children:[s("span",{class:"text-xs text-gray-500 uppercase font-bold block mb-1",children:"Gateway Ativo"},void 0,!1,void 0,this),s("span",{class:"bg-surface border border-white/10 px-3 py-1 rounded text-sm text-primary font-mono",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"grid md:grid-cols-3 gap-6",children:[f(n,"Semanal (Trial)"),f(c,"Mensal"),f(i,"Anual")]},void 0,!0,void 0,this),s("div",{class:"mt-12 border-t border-white/10 pt-8",children:[s("div",{class:"flex justify-between items-center mb-6",children:[s("div",{children:[s("h2",{class:"text-2xl font-bold text-white",children:"Order Bumps"},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm",children:"Ofertas adicionais exibidas no checkout."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("button",{type:"button",onclick:"openOrderBumpModal()",class:"bg-primary hover:bg-primary/80 text-white px-4 py-2 rounded-lg font-bold text-sm transition-all flex items-center gap-2",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("line",{x1:"12",y1:"5",x2:"12",y2:"19"},void 0,!1,void 0,this),s("line",{x1:"5",y1:"12",x2:"19",y2:"12"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Adicionar Order Bump"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),e.length===0?s("div",{class:"text-center py-12 bg-surface rounded-xl border border-white/5",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"mx-auto opacity-30 mb-4",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"},void 0,!1,void 0,this),s("path",{d:"M3 9h18"},void 0,!1,void 0,this),s("path",{d:"M9 21V9"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-gray-500",children:"Nenhuma order bump cadastrada."},void 0,!1,void 0,this),s("p",{class:"text-gray-600 text-sm mt-1",children:'Clique em "Adicionar Order Bump" para criar uma nova.'},void 0,!1,void 0,this)]},void 0,!0,void 0,this):s("div",{class:"grid gap-4",children:e.map((h)=>s("div",{class:`p-5 rounded-xl border transition-all ${h.isActive?"bg-surface border-white/10 hover:border-primary/50":"bg-surface/50 border-white/5 opacity-60"}`,children:s("div",{class:"flex items-center justify-between",children:[s("div",{class:"flex items-center gap-4",children:[h.imageUrl?s("img",{src:h.imageUrl,alt:h.name,class:"w-12 h-12 rounded-lg object-cover"},void 0,!1,void 0,this):s("div",{class:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-primary",children:s("path",{d:"M20.42 4.58a5.4 5.4 0 0 0-7.65 0l-.77.78-.77-.78a5.4 5.4 0 0 0-7.65 7.65l1.06 1.06L12 20.23l7.36-6.94 1.06-1.06a5.4 5.4 0 0 0 0-7.65"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{children:[s("h3",{class:"font-bold text-white text-lg",children:h.name},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm",children:h.description||"Sem descri\xE7\xE3o"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center gap-4",children:[s("div",{class:"text-right",children:[s("span",{class:"text-primary font-bold text-xl",children:(h.price/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},void 0,!1,void 0,this),s("div",{class:"flex items-center gap-2 mt-1",children:[s("span",{class:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${h.isActive?"bg-green-500/10 text-green-500":"bg-gray-500/10 text-gray-500"}`,children:h.isActive?"Ativa":"Inativa"},void 0,!1,void 0,this),h.displayOrder!==null&&h.displayOrder>0&&s("span",{class:"text-[10px] text-gray-500",children:["Ordem: ",h.displayOrder]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center gap-2",children:[s("button",{onclick:`toggleOrderBump(${h.id})`,class:`p-2 rounded-lg transition-all ${h.isActive?"bg-green-500/10 hover:bg-green-500/20 text-green-500":"bg-gray-500/10 hover:bg-gray-500/20 text-gray-500"}`,title:h.isActive?"Desativar":"Ativar",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},void 0,!1,void 0,this),s("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("button",{onclick:`editOrderBump(${h.id})`,class:"p-2 rounded-lg bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white transition-all",title:"Editar",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("button",{onclick:`deleteOrderBump(${h.id}, '${h.name}')`,class:"p-2 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-500 transition-all",title:"Excluir",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M3 6h18"},void 0,!1,void 0,this),s("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},void 0,!1,void 0,this),s("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"order-bump-modal",class:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden items-center justify-center",children:s("div",{class:"bg-[#0a0a0a] border border-white/10 rounded-2xl p-6 w-full max-w-lg mx-4 shadow-2xl",children:[s("div",{class:"flex justify-between items-center mb-6",children:[s("h3",{id:"modal-title",class:"text-xl font-bold text-white",children:"Nova Order Bump"},void 0,!1,void 0,this),s("button",{onclick:"closeOrderBumpModal()",class:"text-gray-500 hover:text-white transition-colors",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,void 0,this),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("form",{id:"order-bump-form",class:"space-y-4",children:[s("input",{type:"hidden",id:"bump-id",value:""},void 0,!1,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Nome *"},void 0,!1,void 0,this),s("input",{type:"text",id:"bump-name",required:!0,class:"w-full bg-surface border border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:outline-none transition-colors",placeholder:"Ex: Acesso ao Grupo VIP"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Descri\xE7\xE3o"},void 0,!1,void 0,this),s("textarea",{id:"bump-description",rows:3,class:"w-full bg-surface border border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:outline-none transition-colors resize-none",placeholder:"Descri\xE7\xE3o que aparecer\xE1 no checkout..."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"grid grid-cols-2 gap-4",children:[s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Pre\xE7o (R$) *"},void 0,!1,void 0,this),s("div",{class:"relative",children:[s("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"R$"},void 0,!1,void 0,this),s("input",{type:"text",id:"bump-price",required:!0,class:"w-full bg-surface border border-white/10 rounded-lg px-4 py-3 pl-10 text-white focus:border-primary focus:outline-none transition-colors",placeholder:"19,90"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Ordem de Exibi\xE7\xE3o"},void 0,!1,void 0,this),s("input",{type:"number",id:"bump-order",class:"w-full bg-surface border border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:outline-none transition-colors",placeholder:"0",min:"0"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"URL da Imagem (Opcional)"},void 0,!1,void 0,this),s("input",{type:"url",id:"bump-image",class:"w-full bg-surface border border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:outline-none transition-colors",placeholder:"https://..."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("label",{class:"flex items-center gap-3 cursor-pointer bg-surface p-3 rounded-lg border border-white/10",children:[s("input",{type:"checkbox",id:"bump-active",checked:!0,class:"accent-primary w-5 h-5 rounded"},void 0,!1,void 0,this),s("span",{class:"text-gray-300",children:"Ativar order bump imediatamente"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-3 pt-4",children:[s("button",{type:"button",onclick:"closeOrderBumpModal()",class:"flex-1 bg-white/5 hover:bg-white/10 text-gray-300 py-3 rounded-lg font-bold text-sm transition-all",children:"CANCELAR"},void 0,!1,void 0,this),s("button",{type:"submit",id:"save-bump-btn",class:"flex-1 bg-primary hover:bg-primary/80 text-white py-3 rounded-lg font-bold text-sm transition-all flex items-center justify-center gap-2",children:[s("span",{id:"save-btn-text",children:"SALVAR"},void 0,!1,void 0,this),s("div",{id:"save-btn-loader",class:"hidden",children:s("svg",{class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,void 0,this),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
        const orderBumpsData = ${JSON.stringify(e)};

        window.openOrderBumpModal = function() {
          const form = document.getElementById('order-bump-form');
          form.reset();
          document.getElementById('modal-title').textContent = 'Nova Order Bump';
          document.getElementById('bump-id').value = '';
          document.getElementById('bump-active').checked = true;
          
          const modal = document.getElementById('order-bump-modal');
          modal.classList.remove('hidden');
          modal.classList.add('flex');
        }

        window.closeOrderBumpModal = function() {
          const modal = document.getElementById('order-bump-modal');
          modal.classList.add('hidden');
          modal.classList.remove('flex');
        }

        window.editOrderBump = function(id) {
          const bump = orderBumpsData.find(b => b.id === id);
          if (!bump) {
            console.error('Order bump n\xE3o encontrada:', id);
            return;
          }

          document.getElementById('modal-title').textContent = 'Editar Order Bump';
          document.getElementById('bump-id').value = bump.id;
          document.getElementById('bump-name').value = bump.name || '';
          document.getElementById('bump-description').value = bump.description || '';
          document.getElementById('bump-price').value = (bump.price / 100).toFixed(2).replace('.', ',');
          document.getElementById('bump-order').value = bump.displayOrder || 0;
          document.getElementById('bump-image').value = bump.imageUrl || '';
          document.getElementById('bump-active').checked = !!bump.isActive;
          
          const modal = document.getElementById('order-bump-modal');
          modal.classList.remove('hidden');
          modal.classList.add('flex');
        }

        window.toggleOrderBump = async function(id) {
          try {
            const res = await fetch('/api/admin/order-bumps/' + id + '/toggle', { method: 'PATCH' });
            const data = await res.json();
            if (data.success) {
              window.location.reload();
            } else {
              alert('Erro: ' + (data.error || 'Erro desconhecido'));
            }
          } catch (e) {
            alert('Erro ao alternar status. Verifique sua conex\xE3o.');
          }
        }

        window.deleteOrderBump = async function(id, name) {
          if (!confirm('Tem certeza que deseja excluir "' + name + '"?')) return;
          
          try {
            const res = await fetch('/api/admin/order-bumps/' + id, { method: 'DELETE' });
            const data = await res.json();
            if (data.success) {
              window.location.reload();
            } else {
              alert('Erro: ' + (data.error || 'Erro desconhecido'));
            }
          } catch (e) {
            alert('Erro ao excluir. Verifique sua conex\xE3o.');
          }
        }

        document.getElementById('order-bump-form').addEventListener('submit', async function(e) {
          e.preventDefault();
          
          const btn = document.getElementById('save-bump-btn');
          const btnText = document.getElementById('save-btn-text');
          const btnLoader = document.getElementById('save-btn-loader');
          
          const id = document.getElementById('bump-id').value;
          const name = document.getElementById('bump-name').value;
          const description = document.getElementById('bump-description').value;
          const priceRaw = document.getElementById('bump-price').value;
          const displayOrder = document.getElementById('bump-order').value;
          const imageUrl = document.getElementById('bump-image').value;
          const isActive = document.getElementById('bump-active').checked;
          
          // Valida\xE7\xE3o b\xE1sica
          if (!name) {
            alert('O nome \xE9 obrigat\xF3rio');
            return;
          }

          // Converter pre\xE7o para centavos
          const priceClean = priceRaw.replace(',', '.');
          const price = Math.round(parseFloat(priceClean) * 100);
          
          if (isNaN(price)) {
            alert('Insira um pre\xE7o v\xE1lido');
            return;
          }
          
          const payload = { 
            name, 
            description: description || null, 
            price, 
            displayOrder: parseInt(displayOrder) || 0, 
            imageUrl: imageUrl || null, 
            isActive 
          };
          
          // Iniciar loading
          btn.disabled = true;
          btnText.textContent = 'SALVANDO...';
          btnLoader.classList.remove('hidden');
          
          try {
            let res;
            if (id) {
              // Usar PATCH conforme solicitado
              res = await fetch('/api/admin/order-bumps/' + id, {
                method: 'PATCH',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
              });
            } else {
              res = await fetch('/api/admin/order-bumps', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
              });
            }
            
            const data = await res.json();
            if (data.success) {
              window.location.reload();
            } else {
              alert('Erro ao salvar: ' + (data.error || 'Erro desconhecido'));
              // Reset loading
              btn.disabled = false;
              btnText.textContent = 'SALVAR';
              btnLoader.classList.add('hidden');
            }
          } catch (e) {
            alert('Erro de rede ao salvar. Tente novamente.');
            // Reset loading
            btn.disabled = false;
            btnText.textContent = 'SALVAR';
            btnLoader.classList.add('hidden');
          }
        });

        // Fechar modal ao clicar fora dele
        document.getElementById('order-bump-modal').addEventListener('click', function(e) {
          if (e.target === this) {
            window.closeOrderBumpModal();
          }
        });
        
        // Fun\xE7\xF5es para manipular benef\xEDcios
        function addBenefit(planId) {
          const container = document.getElementById('benefits-container-' + planId);
          const index = container.children.length;
          
          const div = document.createElement('div');
          div.className = 'flex items-center gap-2';
          
          const input = document.createElement('input');
          input.type = 'text';
          input.name = 'benefits[' + index + ']';
          input.value = '';
          input.className = 'flex-1 bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white text-sm focus:border-primary focus:outline-none transition-colors';
          input.placeholder = 'Digite um benef\xEDcio';
          
          const button = document.createElement('button');
          button.type = 'button';
          button.onclick = function() { removeBenefit(planId, index); };
          button.className = 'p-2 text-red-500 hover:bg-red-500/10 rounded';
          button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>';
          
          div.appendChild(input);
          div.appendChild(button);
          
          container.appendChild(div);
        }
        
        function removeBenefit(planId, index) {
          const container = document.getElementById('benefits-container-' + planId);
          container.removeChild(container.children[index]);
          
          // Reorganizar os nomes dos campos ap\xF3s remo\xE7\xE3o
          reindexBenefits(planId);
        }
        
        function reindexBenefits(planId) {
          const container = document.getElementById('benefits-container-' + planId);
          // Atualizar os nomes dos campos ap\xF3s remo\xE7\xE3o
          const benefitDivs = container.querySelectorAll('div.flex.items-center.gap-2');
          
          benefitDivs.forEach((div, newIndex) => {
            const textInputs = div.querySelectorAll('input[type="text"]');
            textInputs.forEach(input => {
              if (input.name.includes('benefits[')) {
                // Extrai o \xEDndice antigo do nome do campo e substitui pelo novo
                input.name = input.name.replace(/benefits[[^]]*]/, 'benefits[' + newIndex + ']');
              }
            });
            
            const removeButton = div.querySelector('button[onclick*="removeBenefit"]');
            if (removeButton) {
              removeButton.setAttribute('onclick', 'removeBenefit(' + planId + ', ' + newIndex + ')');
            }
          });
        }
      `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var YE=()=>{return s(Nr,{title:"Configura\xE7\xF5es do Sistema",activePath:"/admin/settings",children:s("div",{class:"max-w-2xl space-y-8",children:[s("div",{class:"p-6 rounded-xl bg-surface border border-white/5",children:[s("h3",{class:"font-bold text-white mb-4 border-b border-white/5 pb-2",children:"Geral"},void 0,!1,void 0,this),s("div",{class:"grid grid-cols-2 gap-4",children:[s("div",{children:[s("label",{class:"text-xs text-gray-500",children:"Nome do Site"},void 0,!1,void 0,this),s("input",{type:"text",value:"CreatorFlix",class:"w-full bg-[#1a1a1a] border border-white/10 rounded p-2 text-white mt-1"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"text-xs text-gray-500",children:"Email de Suporte"},void 0,!1,void 0,this),s("input",{type:"text",value:"help@creatorflix.com",class:"w-full bg-[#1a1a1a] border border-white/10 rounded p-2 text-white mt-1"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"p-6 rounded-xl bg-surface border border-white/5",children:[s("h3",{class:"font-bold text-white mb-4 border-b border-white/5 pb-2",children:"Pagamentos (Gateway)"},void 0,!1,void 0,this),s("div",{class:"space-y-4",children:[s("div",{class:"flex items-center justify-between p-3 bg-white/5 rounded border border-white/5",children:[s("span",{class:"font-bold text-white",children:"Stripe"},void 0,!1,void 0,this),s("div",{class:"w-10 h-5 bg-green-500 rounded-full relative cursor-pointer",children:s("div",{class:"absolute right-1 top-1 w-3 h-3 bg-white rounded-full"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center justify-between p-3 bg-white/5 rounded border border-white/5",children:[s("span",{class:"font-bold text-white",children:"Pix (Banco Central)"},void 0,!1,void 0,this),s("div",{class:"w-10 h-5 bg-green-500 rounded-full relative cursor-pointer",children:s("div",{class:"absolute right-1 top-1 w-3 h-3 bg-white rounded-full"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center justify-between p-3 bg-white/5 rounded border border-white/5",children:[s("span",{class:"font-bold text-gray-400",children:"Crypto (USDT)"},void 0,!1,void 0,this),s("div",{class:"w-10 h-5 bg-gray-600 rounded-full relative cursor-pointer",children:s("div",{class:"absolute left-1 top-1 w-3 h-3 bg-white rounded-full"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex justify-end",children:s(Pr,{variant:"primary",children:"Salvar Altera\xE7\xF5es"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var PE=({error:t,stats:r={models:0,posts:0,media:0}})=>{let e=(c)=>c.toLocaleString("pt-BR"),o="group relative bg-surface border border-white/5 rounded-xl p-1 hover:border-primary/50 transition-all duration-300 hover:shadow-neon-purple",n="flex h-full bg-surface rounded-lg p-4 items-center justify-between";return s("div",{class:"w-full mb-8",children:[s("div",{class:"flex items-center gap-2 mb-4 px-1",children:[s("div",{class:"h-6 w-1 bg-primary rounded-full shadow-neon-purple"},void 0,!1,void 0,this),s("h3",{class:"font-display text-xl text-gray-400 tracking-wide",children:"SYSTEM HEALTH"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[s("div",{class:"group relative bg-surface border border-white/5 rounded-xl p-1 hover:border-primary/50 transition-all duration-300 hover:shadow-neon-purple",children:s("div",{class:"flex flex-col h-full bg-surface rounded-lg p-4",children:[s("div",{class:"flex justify-between items-start w-full mb-4",children:[s("div",{class:"flex items-center gap-3",children:[s("div",{class:"p-2 rounded bg-primary/10 text-primary border border-primary/20 group-hover:bg-primary/20 transition-colors",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"M17.5 19.5h-10A4.5 4.5 0 0 1 3 15a4.5 4.5 0 0 1 4.5-4.5H9a5 5 0 0 1 9.5-2.5 5 5 0 0 1 4 4.5V15a4.5 4.5 0 0 1-4.5 4.5Z"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{children:[s("h4",{class:"font-display text-xl text-primary tracking-wide leading-none group-hover:text-white transition-colors",children:"STORAGE"},void 0,!1,void 0,this),s("p",{class:"font-body text-[10px] text-gray-600 uppercase tracking-tighter",children:"S3 BUCKET"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("form",{"hx-post":"/admin/whitelabel/sync","hx-swap":"none","hx-on":"htmx:afterOnLoad: window.location.reload()",children:s("button",{type:"submit",class:"p-1.5 text-gray-600 hover:text-primary transition-colors bg-white/5 rounded-md border border-white/5 hover:border-primary/30",title:"Sync Now",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},void 0,!1,void 0,this),s("path",{d:"M3 3v5h5"},void 0,!1,void 0,this),s("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"},void 0,!1,void 0,this),s("path",{d:"M16 16h5v5"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"mt-auto flex items-center justify-between border-t border-white/5 pt-3",children:[s("div",{class:"flex items-center gap-2",children:[s("div",{class:"h-2 w-2 rounded-full bg-green-500 animate-glow-pulse shadow-[0_0_8px_rgba(34,197,94,0.6)]"},void 0,!1,void 0,this),s("span",{class:"font-display text-xl text-white tracking-wide",children:"ONLINE"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{class:"font-display text-xs text-gray-600 tracking-wider",children:"whitelabel-only"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),[{label:"MODELS",sub:"TOTAL ACTIVE",value:r.models,icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this),s("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"},void 0,!1,void 0,this),s("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},{label:"POSTS",sub:"TOTAL ACTIVE",value:r.posts,icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},void 0,!1,void 0,this),s("line",{x1:"3",y1:"9",x2:"21",y2:"9"},void 0,!1,void 0,this),s("line",{x1:"9",y1:"21",x2:"9",y2:"9"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},{label:"MEDIA ITEMS",sub:"TOTAL ACTIVE",value:r.media,icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"9",r:"2"},void 0,!1,void 0,this),s("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}].map((c)=>s("div",{class:"group relative bg-surface border border-white/5 rounded-xl p-1 hover:border-primary/50 transition-all duration-300 hover:shadow-neon-purple",children:s("div",{class:"flex h-full bg-surface rounded-lg p-4 items-center justify-between",children:[s("div",{class:"flex flex-col",children:[s("div",{class:"flex items-center gap-2 mb-1",children:[s("span",{class:"text-primary group-hover:text-white transition-colors duration-300",children:c.icon},void 0,!1,void 0,this),s("h4",{class:"font-display text-xl text-primary tracking-wide leading-none group-hover:text-white transition-colors duration-300",children:c.label},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{class:"font-body text-[10px] text-gray-600 uppercase tracking-tighter",children:c.sub},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{class:"font-display text-4xl text-white tracking-wide leading-none",children:e(c.value)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this))]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var gE=({models:t,currentPage:r=1,totalPages:e=1,error:o})=>{return s("div",{class:"rounded-xl border border-white/5 bg-surface overflow-hidden",children:[s("div",{class:"p-4 border-b border-white/5 flex justify-between items-center bg-[#1a1a1a]",children:[s("h3",{class:"font-bold text-white text-sm",children:"Explorador de Arquivos S3 (Cached)"},void 0,!1,void 0,this),s("div",{class:"flex gap-2 items-center",children:s("span",{class:"text-xs text-gray-500 flex items-center gap-1 mr-4",children:[s("span",{class:"w-2 h-2 bg-green-500 rounded-full"},void 0,!1,void 0,this)," DB Synced"]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("table",{class:"w-full text-left text-sm text-gray-400",children:[s("thead",{class:"bg-[#050505] text-xs uppercase font-bold text-gray-500",children:s("tr",{children:[s("th",{class:"px-6 py-3 w-10",children:s("input",{type:"checkbox",class:"accent-primary"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("th",{class:"px-6 py-3",children:"Capa"},void 0,!1,void 0,this),s("th",{class:"px-6 py-3",children:"ID da Pasta (Model)"},void 0,!1,void 0,this),s("th",{class:"px-6 py-3",children:"Posts"},void 0,!1,void 0,this),s("th",{class:"px-6 py-3",children:"Status"},void 0,!1,void 0,this),s("th",{class:"px-6 py-3 text-right",children:"A\xE7\xE3o"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("tbody",{class:"divide-y divide-white/5",children:t.length===0?s("tr",{children:s("td",{colspan:6,class:"text-center py-12 text-gray-500",children:o?"Erro ao carregar dados.":"Nenhum modelo encontrado. Clique em Sync."},void 0,!1,void 0,this)},void 0,!1,void 0,this):t.map((n)=>s("tr",{class:"hover:bg-white/5 transition-colors group",children:[s("td",{class:"px-6 py-4",children:s("input",{type:"checkbox",class:"accent-primary"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("div",{class:"w-12 h-12 rounded bg-[#050505] overflow-hidden border border-white/10 group-hover:border-primary transition-colors",children:n.thumbnailUrl?s("img",{src:n.thumbnailUrl,class:"w-full h-full object-cover",loading:"lazy"},void 0,!1,void 0,this):s("div",{class:"w-full h-full flex items-center justify-center text-[10px] text-gray-600",children:"No Img"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:[s("span",{class:"font-mono text-white text-xs block mb-1",children:n.folderName},void 0,!1,void 0,this),s("span",{class:"text-[10px] text-gray-600",children:"\xDAltima sync: Hoje"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("td",{class:"px-6 py-4",children:s("span",{class:"bg-white/5 border border-white/5 px-2 py-1 rounded text-xs text-white font-mono",children:n.postCount||0},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("span",{class:"px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide border bg-green-500/10 text-green-500 border-green-500/20",children:n.status||"Active"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4 text-right",children:s("form",{"hx-post":"/api/admin/whitelabel/activate","hx-swap":"none",children:[s("input",{type:"hidden",name:"model",value:n.folderName},void 0,!1,void 0,this),s("button",{type:"submit",class:"text-[10px] font-bold text-white bg-primary hover:bg-primary/80 px-3 py-1.5 rounded transition-colors uppercase tracking-widest",children:"Importar"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"px-6 py-4 border-t border-white/5 bg-[#1a1a1a] flex items-center justify-between",children:[s("div",{class:"text-xs text-gray-500",children:["P\xE1gina ",s("span",{class:"font-bold text-white",children:r},void 0,!1,void 0,this)," de ",s("span",{class:"font-bold text-white",children:e},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center gap-2",children:[r>1?s("a",{href:`/admin/whitelabel?page=${r-1}`,class:"px-3 py-1.5 rounded bg-[#050505] border border-white/10 text-xs text-white hover:border-primary transition-colors",children:"\u27F5 Anterior"},void 0,!1,void 0,this):s("button",{disabled:!0,class:"px-3 py-1.5 rounded bg-[#050505] border border-white/5 text-xs text-gray-600 cursor-not-allowed",children:"\u27F5 Anterior"},void 0,!1,void 0,this),r<e?s("a",{href:`/admin/whitelabel?page=${r+1}`,class:"px-4 py-1.5 rounded bg-primary text-white text-xs font-bold uppercase tracking-widest hover:brightness-110 transition-colors",children:"Pr\xF3ximo \u27F6"},void 0,!1,void 0,this):s("button",{disabled:!0,class:"px-4 py-1.5 rounded bg-[#050505] border border-white/5 text-xs text-gray-600 cursor-not-allowed uppercase tracking-widest",children:"Fim"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var CE=({models:t,currentPage:r=1,totalPages:e=1,error:o,stats:n})=>{return s(Nr,{title:"Integra\xE7\xE3o Whitelabel (S3/DigitalOcean)",activePath:"/admin/whitelabel",children:s("div",{class:"space-y-8 pb-20",children:[s(PE,{error:o,stats:n},void 0,!1,void 0,this),s(gE,{models:t,currentPage:r,totalPages:e,error:o},void 0,!1,void 0,this),s("script",{src:"/static/js/admin.js",defer:!0},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var QE=({contacts:t,message:r,error:e})=>{return s(Nr,{title:"Suporte",children:s("div",{class:"space-y-6",children:[s("div",{class:"flex justify-between items-center",children:s("h1",{class:"text-3xl font-bold text-white",children:"Configura\xE7\xE3o de Suporte"},void 0,!1,void 0,this)},void 0,!1,void 0,this),r&&s("div",{class:"bg-green-500/20 text-green-400 p-4 rounded-lg border border-green-500/30",children:r},void 0,!1,void 0,this),e&&s("div",{class:"bg-red-500/20 text-red-400 p-4 rounded-lg border border-red-500/30",children:e},void 0,!1,void 0,this),s("div",{class:"bg-[#121212] border border-white/5 rounded-xl p-6",children:[s("h2",{class:"text-xl font-bold text-white mb-4",children:"Canais de Atendimento"},void 0,!1,void 0,this),s("p",{class:"text-gray-400 mb-6 text-sm",children:"Defina os links para WhatsApp e Telegram. Deixe em branco para desativar."},void 0,!1,void 0,this),s("form",{action:"/admin/support/update",method:"post",class:"space-y-6",children:[t.map((o)=>s("div",{class:"space-y-2",children:[s("label",{class:"block text-sm font-medium text-gray-300 capitalize",children:o.platform},void 0,!1,void 0,this),s("div",{class:"flex gap-4",children:[s("input",{type:"hidden",name:`contacts[${o.id}][id]`,value:o.id},void 0,!1,void 0,this),s("div",{class:"flex-1 relative",children:[s("span",{class:"absolute left-3 top-3 text-gray-500",children:o.platform==="whatsapp"?"wa.me/":"t.me/"},void 0,!1,void 0,this),s("input",{type:"text",name:`contacts[${o.id}][url]`,value:o.url.replace("https://wa.me/","").replace("https://t.me/",""),class:"w-full bg-black/50 border border-white/10 rounded-lg py-2.5 pl-16 pr-4 text-white focus:outline-none focus:border-primary transition-colors",placeholder:o.platform==="whatsapp"?"5511999999999":"username"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex items-center gap-2",children:[s("input",{type:"checkbox",name:`contacts[${o.id}][isActive]`,checked:o.isActive||!1,value:"true",class:"w-5 h-5 rounded bg-black/50 border-white/10 text-primary focus:ring-primary"},void 0,!1,void 0,this),s("span",{class:"text-sm text-gray-400",children:"Ativo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)),s("div",{class:"pt-4 border-t border-white/5 flex justify-end",children:s("button",{type:"submit",class:"bg-primary hover:bg-primary/90 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Salvar Altera\xE7\xF5es"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};function KE(t){if(t===null)return"R$ 0,00";return(t/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function ZT(t){if(!t)return"-";return(typeof t==="string"?new Date(t):t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function imt(t){if(!t)return"-";if(t.includes("."))return t;if(t.length===11)return`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6,9)}-${t.slice(9)}`;return t}function EE(t,r){if(!t)return s(rs,{variant:"secondary",children:"-"},void 0,!1,void 0,this);let e={paid:"success",active:"success",pending:"warning",failed:"danger",expired:"danger",abandoned:"secondary"},o={paid:"Pago",active:"Ativo",pending:"Pendente",failed:"Falhou",expired:"Expirado",abandoned:"Abandonado"};return s(rs,{variant:e[t]||"secondary",children:o[t]||t},void 0,!1,void 0,this)}function fmt(t){if(!t)return s("span",{class:"text-gray-500",children:"-"},void 0,!1,void 0,this);if(t==="pix")return s("span",{class:"inline-flex items-center gap-1 text-green-400",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[s("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"},void 0,!1,void 0,this),s("polyline",{points:"16 6 12 2 8 6"},void 0,!1,void 0,this),s("line",{x1:"12",y1:"2",x2:"12",y2:"15"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"PIX"]},void 0,!0,void 0,this);return s("span",{class:"inline-flex items-center gap-1 text-purple-400",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[s("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"},void 0,!1,void 0,this),s("line",{x1:"2",y1:"10",x2:"22",y2:"10"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Cart\xE3o"]},void 0,!0,void 0,this)}var xE=({gatewayType:t,checkouts:r=[],subscriptions:e=[],pagination:o,filters:n})=>{let c=t==="JunglePay",i=c?r.length>0:e.length>0,f=c?["pending","paid","failed","abandoned"]:["active","pending","expired"];return s("div",{class:"mt-8",children:[s("div",{class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[s("div",{children:[s("h2",{class:"text-2xl font-bold text-white",children:c?"Transa\xE7\xF5es (JunglePay)":"Assinaturas (Dias Marketplace)"},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm",children:[o.total," ",c?"transa\xE7\xF5es":"assinaturas"," encontradas"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("form",{method:"get",action:"/admin/finance",class:"flex flex-wrap gap-3",children:[s("input",{type:"text",name:"search",placeholder:"Buscar cliente...",value:n?.search||"",class:"bg-surface border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:border-primary focus:outline-none w-48"},void 0,!1,void 0,this),s("select",{name:"status",class:"bg-surface border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-primary focus:outline-none",children:[s("option",{value:"",children:"Todos os status"},void 0,!1,void 0,this),f.map((h)=>s("option",{value:h,selected:n?.status===h,children:h==="pending"?"Pendente":h==="paid"?"Pago":h==="active"?"Ativo":h==="expired"?"Expirado":h==="failed"?"Falhou":h==="abandoned"?"Abandonado":h},void 0,!1,void 0,this))]},void 0,!0,void 0,this),s("button",{type:"submit",class:"bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Filtrar"},void 0,!1,void 0,this),(n?.search||n?.status)&&s("a",{href:"/admin/finance",class:"bg-white/5 hover:bg-white/10 text-gray-300 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Limpar"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"bg-surface rounded-xl border border-white/5 overflow-hidden",children:[s("div",{class:"overflow-x-auto",children:s("table",{class:"w-full",children:[s("thead",{children:s("tr",{class:"border-b border-white/5 bg-white/[0.02]",children:c?s(Zr,{children:[s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Cliente"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contato"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Plano"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Valor"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"M\xE9todo"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Data"},void 0,!1,void 0,this)]},void 0,!0,void 0,this):s(Zr,{children:[s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Usu\xE1rio"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Plano"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Valor"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"In\xEDcio"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"T\xE9rmino"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"},void 0,!1,void 0,this),s("th",{class:"text-left px-4 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"ID Externo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("tbody",{class:"divide-y divide-white/5",children:!i?s("tr",{children:s("td",{colspan:8,class:"px-4 py-12 text-center text-gray-500",children:s("div",{class:"flex flex-col items-center gap-2",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("span",{children:["Nenhuma ",c?"transa\xE7\xE3o":"assinatura"," encontrada"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this):c?r.map((h)=>s("tr",{class:"hover:bg-white/[0.02] transition-colors",children:[s("td",{class:"px-4 py-3 text-sm font-mono text-gray-400",children:["#",h.id]},void 0,!0,void 0,this),s("td",{class:"px-4 py-3",children:s("div",{class:"flex flex-col",children:[s("span",{class:"text-sm text-white font-medium",children:h.customerName||"-"},void 0,!1,void 0,this),s("span",{class:"text-xs text-gray-500",children:imt(h.customerDocument)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-4 py-3",children:s("div",{class:"flex flex-col",children:[s("span",{class:"text-xs text-gray-400",children:h.customerEmail||"-"},void 0,!1,void 0,this),s("span",{class:"text-xs text-gray-500",children:h.customerPhone||"-"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-4 py-3",children:[s("span",{class:"text-sm text-white",children:h.planName||"-"},void 0,!1,void 0,this),h.orderBump&&s("span",{class:"ml-1 text-[10px] bg-yellow-500/20 text-yellow-400 px-1 py-0.5 rounded",children:"+BUMP"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("td",{class:"px-4 py-3 text-sm font-medium text-white",children:KE(h.totalAmount)},void 0,!1,void 0,this),s("td",{class:"px-4 py-3 text-sm",children:fmt(h.paymentMethod)},void 0,!1,void 0,this),s("td",{class:"px-4 py-3",children:EE(h.status,"checkout")},void 0,!1,void 0,this),s("td",{class:"px-4 py-3 text-xs text-gray-400",children:ZT(h.createdAt)},void 0,!1,void 0,this)]},h.id,!0,void 0,this)):e.map((h)=>s("tr",{class:"hover:bg-white/[0.02] transition-colors",children:[s("td",{class:"px-4 py-3 text-sm font-mono text-gray-400",children:["#",h.id]},void 0,!0,void 0,this),s("td",{class:"px-4 py-3",children:s("div",{class:"flex flex-col",children:[s("span",{class:"text-sm text-white font-medium",children:h.userName||"-"},void 0,!1,void 0,this),s("span",{class:"text-xs text-gray-500",children:h.userEmail},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-4 py-3 text-sm text-white",children:h.planName||"-"},void 0,!1,void 0,this),s("td",{class:"px-4 py-3 text-sm font-medium text-white",children:KE(h.planPrice)},void 0,!1,void 0,this),s("td",{class:"px-4 py-3 text-xs text-gray-400",children:ZT(h.startDate)},void 0,!1,void 0,this),s("td",{class:"px-4 py-3 text-xs text-gray-400",children:ZT(h.endDate)},void 0,!1,void 0,this),s("td",{class:"px-4 py-3",children:EE(h.status,"subscription")},void 0,!1,void 0,this),s("td",{class:"px-4 py-3 text-xs font-mono text-gray-500 truncate max-w-[100px]",title:h.externalId||"",children:h.externalId?h.externalId.slice(0,12)+"...":"-"},void 0,!1,void 0,this)]},h.id,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),o.totalPages>1&&s("div",{class:"flex items-center justify-between px-4 py-3 border-t border-white/5",children:[s("span",{class:"text-sm text-gray-500",children:["P\xE1gina ",o.page," de ",o.totalPages]},void 0,!0,void 0,this),s("div",{class:"flex gap-2",children:[o.page>1&&s("a",{href:`/admin/finance?page=${o.page-1}${n?.status?`&status=${n.status}`:""}${n?.search?`&search=${n.search}`:""}`,class:"px-3 py-1 text-sm bg-white/5 hover:bg-white/10 text-gray-300 rounded transition-colors",children:"Anterior"},void 0,!1,void 0,this),o.page<o.totalPages&&s("a",{href:`/admin/finance?page=${o.page+1}${n?.status?`&status=${n.status}`:""}${n?.search?`&search=${n.search}`:""}`,class:"px-3 py-1 text-sm bg-white/5 hover:bg-white/10 text-gray-300 rounded transition-colors",children:"Pr\xF3xima"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var qE=({gateways:t,activeGatewayName:r,success:e,checkouts:o=[],subscriptions:n=[],pagination:c={page:1,totalPages:1,total:0},filters:i={}})=>{let f=t.find((w)=>w.name==="Dias Marketplace"),h=t.find((w)=>w.name==="JunglePay");return s(Nr,{title:"Financeiro",activePath:"/admin/finance",children:[s("div",{class:"mb-8",children:[s("h1",{class:"text-3xl font-bold mb-2",children:"Configura\xE7\xE3o de Pagamentos"},void 0,!1,void 0,this),s("p",{class:"text-gray-400",children:"Gerencie os gateways de pagamento e visualize transa\xE7\xF5es."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),e&&s("div",{class:"mb-6 p-4 bg-green-500/10 border border-green-500/20 text-green-400 rounded-lg",children:"Configura\xE7\xF5es salvas com sucesso!"},void 0,!1,void 0,this),s("div",{class:"grid md:grid-cols-2 gap-6",children:[s("div",{class:"p-6 rounded-xl bg-surface border border-white/5 h-fit",children:[s("h3",{class:"font-bold text-xl text-white mb-4",children:"Gateway Ativo"},void 0,!1,void 0,this),s("form",{action:"/api/admin/finance/gateway",method:"post",children:[s("div",{class:"mb-4",children:[s("label",{class:"block text-xs text-gray-500 mb-2 uppercase font-bold tracking-wider",children:"Selecione o Provedor"},void 0,!1,void 0,this),s("select",{name:"gatewayName",class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white focus:border-primary focus:outline-none transition-colors appearance-none",children:[s("option",{value:"Dias Marketplace",selected:r==="Dias Marketplace",children:"Dias Marketplace (Externo)"},void 0,!1,void 0,this),s("option",{value:"JunglePay",selected:r==="JunglePay",children:"JunglePay (Checkout Interno)"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("button",{type:"submit",class:"w-full bg-primary hover:bg-primary/90 text-white py-2 rounded-lg font-bold text-sm transition-all",children:"SALVAR PREFER\xCANCIA"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:`p-6 rounded-xl bg-surface border ${r==="JunglePay"?"border-primary/50":"border-white/5"} relative transition-colors`,children:[s("div",{class:"flex justify-between items-center mb-4",children:[s("h3",{class:"font-bold text-xl text-white",children:"Configura\xE7\xE3o JunglePay"},void 0,!1,void 0,this),r==="JunglePay"&&s("span",{class:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full border border-green-500/20",children:"ATIVO"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("form",{action:"/api/admin/finance/junglepay",method:"post",class:"space-y-4",children:[s("input",{type:"hidden",name:"id",value:h?.id||""},void 0,!1,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Public Key (PK)"},void 0,!1,void 0,this),s("input",{type:"text",name:"publicKey",value:h?.publicKey||"",class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white font-mono text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"pk_live_..."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Secret Key (SK)"},void 0,!1,void 0,this),s("input",{type:"password",name:"secretKey",value:h?.secretKey||"",class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white font-mono text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"sk_live_..."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{class:"block text-xs text-gray-500 mb-1 uppercase font-bold tracking-wider",children:"Postback URL (Webhook)"},void 0,!1,void 0,this),s("input",{type:"url",name:"postbackUrl",value:h?.postbackUrl||"",class:"w-full bg-[#1a1a1a] border border-white/10 rounded px-3 py-2 text-white font-mono text-sm focus:border-primary focus:outline-none transition-colors",placeholder:"https://seusite.com/api/webhook/junglepay"},void 0,!1,void 0,this),s("p",{class:"text-xs text-gray-500 mt-1",children:"URL para receber notifica\xE7\xF5es de pagamento da JunglePay"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"pt-4 border-t border-white/5",children:s("button",{type:"submit",class:"w-full bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white py-2 rounded-lg font-bold text-sm transition-all",children:"ATUALIZAR CHAVES"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s(xE,{gatewayType:r,checkouts:o,subscriptions:n,pagination:c,filters:i},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var DE=({totalUsers:t,activeSubscribers:r,inactiveSubscribers:e})=>s("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s(eo,{label:"Total de Usu\xE1rios",value:t.toLocaleString("pt-BR")},void 0,!1,void 0,this),s(eo,{label:"Usu\xE1rios Assinantes",value:r.toLocaleString("pt-BR"),isPositive:!0},void 0,!1,void 0,this),s(eo,{label:"Usu\xE1rios N\xE3o Assinantes",value:e.toLocaleString("pt-BR"),isPositive:!1},void 0,!1,void 0,this)]},void 0,!0,void 0,this);var VE=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("circle",{cx:"11",cy:"11",r:"8"},void 0,!1,void 0,this),s("path",{d:"m21 21-4.3-4.3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this);var jE=({value:t})=>s("div",{class:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:s("form",{method:"get",action:"/admin/clients",class:"relative flex-1 max-w-md",children:[s("input",{type:"text",name:"search",placeholder:"Buscar por nome ou email...",value:t,class:"w-full bg-surface border border-white/10 rounded px-4 py-2 text-xs text-white focus:border-primary focus:outline-none transition-all"},void 0,!1,void 0,this),s("div",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500",children:s(VE,{},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this);var Ah={open:(t)=>`
    const modal = document.getElementById('history-modal');
    const content = document.getElementById('modal-history-content');
    
    content.innerHTML = \`
      <div class="space-y-4 animate-pulse">
        \${Array(3).fill(0).map(() => \`
          <div class="bg-white/5 border border-white/10 rounded-xl p-4">
            <div class="flex justify-between items-start mb-4">
              <div class="space-y-2">
                <div class="h-2 w-16 bg-white/10 rounded"></div>
                <div class="h-3 w-32 bg-white/10 rounded"></div>
              </div>
              <div class="h-5 w-14 bg-white/10 rounded"></div>
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div class="space-y-2">
                <div class="h-2 w-10 bg-white/10 rounded"></div>
                <div class="h-3 w-20 bg-white/10 rounded"></div>
              </div>
              <div class="space-y-2">
                <div class="h-2 w-10 bg-white/10 rounded"></div>
                <div class="h-3 w-24 bg-white/10 rounded"></div>
              </div>
            </div>
          </div>
        \`).join('')}
      </div>
    \`;

    modal.classList.remove('hidden');
    setTimeout(() => {
      modal.classList.remove('opacity-0', 'pointer-events-none');
      modal.querySelector('.modal-box').classList.remove('scale-95');
    }, 10);
    document.body.style.overflow = 'hidden';
  `,close:`
    const modal = document.getElementById('history-modal');
    modal.classList.add('opacity-0', 'pointer-events-none');
    modal.querySelector('.modal-box').classList.add('scale-95');
    setTimeout(() => {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }, 300);
  `},tx=({userId:t})=>s("button",{"hx-get":`/admin/clients/${t}/history`,"hx-target":"#modal-history-content",onclick:Ah.open(t),class:"text-[10px] font-bold text-primary hover:text-white border border-primary/30 hover:bg-primary px-3 py-1.5 rounded transition-all uppercase tracking-widest",children:"Hist\xF3rico"},void 0,!1,void 0,this);var Sh={open:(t)=>`
    const modal = document.getElementById('add-plan-modal');
    const content = document.getElementById('modal-add-plan-content');
    const alertContainer = document.getElementById('add-plan-alert-container');
        
    if (alertContainer) {
      alertContainer.classList.add('hidden');
      alertContainer.innerHTML = '';
    }
        
    content.innerHTML = \`
      <div class="space-y-4 animate-pulse">
        \${Array(3).fill(0).map(() => \`
          <div class="bg-white/5 border border-white/10 rounded-xl p-4">
            <div class="flex justify-between items-center">
              <div class="space-y-2">
                <div class="h-4 w-32 bg-white/10 rounded"></div>
                <div class="h-3 w-20 bg-white/10 rounded"></div>
              </div>
              <div class="h-8 w-24 bg-white/10 rounded"></div>
            </div>
          </div>
        \`).join('')}
      </div>
    \`;

    modal.classList.remove('hidden');
    setTimeout(() => {
      modal.classList.remove('opacity-0', 'pointer-events-none');
      modal.querySelector('.modal-box').classList.remove('scale-95');
    }, 10);
    document.body.style.overflow = 'hidden';
  `,close:`
    const modal = document.getElementById('add-plan-modal');
    modal.classList.add('opacity-0', 'pointer-events-none');
    modal.querySelector('.modal-box').classList.add('scale-95');
    setTimeout(() => {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }, 300);
  `},rx=({userId:t})=>s("button",{"hx-get":`/admin/clients/${t}/add-plan`,"hx-target":"#modal-add-plan-content",onclick:Sh.open(t),class:"text-[10px] font-bold text-green-500 hover:text-white border border-green-500/30 hover:bg-green-600 px-3 py-1.5 rounded transition-all uppercase tracking-widest ml-2",children:"Adicionar Plano"},void 0,!1,void 0,this);var hmt=({user:t})=>s("tr",{class:"hover:bg-white/5 transition-colors group",children:[s("td",{class:"px-6 py-4 text-[11px] font-mono text-gray-600",children:["#",t.id]},void 0,!0,void 0,this),s("td",{class:"px-6 py-4",children:s("div",{class:"font-bold text-white group-hover:text-primary transition-colors text-sm",children:t.name||"Sem nome"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4 text-xs text-gray-500",children:t.email},void 0,!1,void 0,this),s("td",{class:"px-6 py-4 text-xs text-gray-400 font-mono",children:t.lastSubscriptionEndDate?new Date(t.lastSubscriptionEndDate).toLocaleDateString("pt-BR"):s("span",{class:"text-gray-700",children:"Nenhuma"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s(rs,{variant:t.subscriptionStatus===1?"success":"danger",children:t.subscriptionStatus===1?"Ativa":"Inativa"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4 text-right flex items-center justify-end gap-2",children:[s(rx,{userId:t.id},void 0,!1,void 0,this),s(tx,{userId:t.id},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),ex=({users:t,pagination:r})=>s("div",{class:"rounded-xl border border-white/5 bg-surface overflow-hidden shadow-2xl",children:[s("div",{class:"overflow-x-auto",children:s("table",{class:"w-full text-left border-collapse",children:[s("thead",{children:s("tr",{class:"bg-[#1a1a1a] border-b border-white/5",children:[s("th",{class:"px-6 py-4 text-[10px] font-bold text-gray-200 uppercase tracking-[0.2em]",children:"ID"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4 text-[10px] font-bold text-gray-200 uppercase tracking-[0.2em]",children:"Usu\xE1rio"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4 text-[10px] font-bold text-gray-200 uppercase tracking-[0.2em]",children:"Email"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4 text-[10px] font-bold text-gray-200 uppercase tracking-[0.2em]",children:"\xDAltimo T\xE9rmino"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4 text-[10px] font-bold text-gray-200 uppercase tracking-[0.2em]",children:"Status Assinatura"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4 text-[10px] font-bold text-gray-200 uppercase tracking-[0.2em] text-right",children:"A\xE7\xF5es"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("tbody",{class:"divide-y divide-white/5",children:[t.map((e)=>s(hmt,{user:e},e.id,!1,void 0,this)),t.length===0&&s("tr",{children:s("td",{colSpan:6,class:"px-6 py-12 text-center text-gray-500 text-sm",children:"Nenhum usu\xE1rio encontrado."},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),r.totalPages>1&&s(ts,{currentPage:r.page,totalPages:r.totalPages,baseUrl:"/admin/clients"},void 0,!1,void 0,this)]},void 0,!0,void 0,this);var ox=()=>s("div",{id:"history-modal",class:"fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-300 opacity-0 pointer-events-none hidden",children:[s("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-[2px]",onclick:Ah.close},void 0,!1,void 0,this),s("div",{class:"modal-box relative w-full max-w-lg max-h-[85vh] bg-[#121212] border border-white/10 rounded-2xl shadow-[0_0_50px_-12px_rgba(0,0,0,0.5)] flex flex-col overflow-hidden scale-95 transition-all duration-300",children:[s("div",{class:"p-6 border-b border-white/5 flex items-center justify-between bg-[#050505]",children:[s("div",{class:"flex items-center gap-3",children:[s("div",{class:"w-1 h-6 bg-primary rounded-full shadow-neon-purple"},void 0,!1,void 0,this),s("div",{children:[s("h3",{class:"font-display text-xl text-white tracking-wide",children:"HIST\xD3RICO FINANCEIRO"},void 0,!1,void 0,this),s("p",{class:"text-[9px] text-gray-500 uppercase tracking-[0.2em] font-bold",children:"Transa\xE7\xF5es detalhadas do cliente"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("button",{onclick:Ah.close,class:"p-2 text-gray-500 hover:text-white transition-colors bg-white/5 rounded-lg border border-white/5 hover:border-white/10",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M18 6 6 18"},void 0,!1,void 0,this),s("path",{d:"m6 6 12 12"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{id:"modal-history-content",class:"p-6 overflow-y-auto custom-scrollbar flex-1 min-h-[300px] bg-[#121212]"},void 0,!1,void 0,this),s("div",{class:"p-4 border-t border-white/5 bg-[#050505] flex justify-end",children:s("button",{onclick:Ah.close,class:"px-6 py-2 text-[10px] font-bold text-gray-400 hover:text-white border border-white/10 hover:bg-white/5 rounded-lg uppercase tracking-widest transition-all",children:"Fechar"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);var nx=()=>s("div",{id:"add-plan-modal",class:"fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-300 opacity-0 pointer-events-none hidden",children:[s("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-[2px]",onclick:Sh.close},void 0,!1,void 0,this),s("div",{class:"modal-box relative w-full max-w-lg max-h-[85vh] bg-[#121212] border border-white/10 rounded-2xl shadow-[0_0_50px_-12px_rgba(0,0,0,0.5)] flex flex-col overflow-hidden scale-95 transition-all duration-300",children:[s("div",{class:"p-6 border-b border-white/5 flex items-center justify-between bg-[#050505]",children:[s("div",{class:"flex items-center gap-3",children:[s("div",{class:"w-1 h-6 bg-green-500 rounded-full shadow-[0_0_15px_rgba(34,197,94,0.4)]"},void 0,!1,void 0,this),s("div",{children:[s("h3",{class:"font-display text-xl text-white tracking-wide uppercase",children:"Ativar Novo Plano"},void 0,!1,void 0,this),s("p",{class:"text-[9px] text-gray-500 uppercase tracking-[0.2em] font-bold",children:"Selecione um plano para o cliente"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("button",{onclick:Sh.close,class:"p-2 text-gray-500 hover:text-white transition-colors bg-white/5 rounded-lg border border-white/5 hover:border-white/10",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M18 6 6 18"},void 0,!1,void 0,this),s("path",{d:"m6 6 12 12"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"p-6 overflow-y-auto custom-scrollbar flex-1 min-h-[200px] bg-[#121212]",children:[s("div",{id:"add-plan-alert-container",class:"mb-4 hidden"},void 0,!1,void 0,this),s("div",{id:"modal-add-plan-content"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"p-4 border-t border-white/5 bg-[#050505] flex justify-end",children:s("button",{onclick:Sh.close,class:"px-6 py-2 text-[10px] font-bold text-gray-400 hover:text-white border border-white/10 hover:bg-white/5 rounded-lg uppercase tracking-widest transition-all",children:"Cancelar"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);var sx=({users:t=[],stats:r,pagination:e,filters:o})=>{return s(Nr,{title:"Gerenciamento de Clientes",activePath:"/admin/clients",children:[s(DE,{...r},void 0,!1,void 0,this),s(jE,{value:o.search},void 0,!1,void 0,this),s(ex,{users:t,pagination:e},void 0,!1,void 0,this),s(ox,{},void 0,!1,void 0,this),s(nx,{},void 0,!1,void 0,this)]},void 0,!0,void 0,this)};var _n=({children:t,variant:r="info",title:e,className:o="",id:n})=>{let i={success:{container:"bg-green-500/10 border-green-500/20 text-green-500",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},void 0,!1,void 0,this),s("polyline",{points:"22 4 12 14.01 9 11.01"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},error:{container:"bg-red-500/10 border-red-500/20 text-red-500",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,void 0,this),s("line",{x1:"15",y1:"9",x2:"9",y2:"15"},void 0,!1,void 0,this),s("line",{x1:"9",y1:"9",x2:"15",y2:"15"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},info:{container:"bg-blue-500/10 border-blue-500/20 text-blue-400",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round",children:[s("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,void 0,this),s("line",{x1:"12",y1:"16",x2:"12",y2:"12"},void 0,!1,void 0,this),s("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}}[r];return s("div",{id:n,class:`flex gap-3 p-4 rounded-xl border ${i.container} ${o} animate-[fadeIn_0.3s]`,children:[s("div",{class:"mt-0.5",children:i.icon},void 0,!1,void 0,this),s("div",{class:"flex-1",children:[e&&s("h4",{class:"text-xs font-bold uppercase tracking-widest mb-1",children:e},void 0,!1,void 0,this),s("div",{class:"text-[11px] font-medium leading-relaxed opacity-90",children:t},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};Fe();pe();we();class Jo{static async list(t=1,r=20,e){let o=(t-1)*r,n=[];if(e?.status)n.push(Y($t.status,e.status));if(e?.search)n.push(ge(he($t.name,`%${e.search}%`),he($t.slug,`%${e.search}%`)));let c=L.select().from($t).orderBy(Vt($t.createdAt)).limit(r).offset(o);if(n.length>0)c=c.where(Ir(...n));let i=await c,[f]=await L.select({count:I`count(*)`}).from($t),h=Number(f?.count||0),w=Math.ceil(h/r);return{data:i,page:t,limit:r,total:h,totalPages:w}}static async getById(t){return await L.query.models.findFirst({where:Y($t.id,t)})}static async getBySlug(t){return await L.query.models.findFirst({where:Y($t.slug,t)})}static async create(t){let r=t.slug||this.generateSlug(t.name);if(await this.getBySlug(r))throw Error(`J\xE1 existe um modelo com o slug "${r}"`);let[o]=await L.insert($t).values({name:t.name,slug:r,description:t.description,thumbnailUrl:t.thumbnailUrl,iconUrl:t.iconUrl,bannerUrl:t.bannerUrl,externalUrl:t.externalUrl,isFeatured:t.isFeatured??!1,isAdvertiser:t.isAdvertiser??!0,status:t.status||"active",postCount:0}).returning();return o}static async update(t){let r=await this.getById(t.id);if(!r)throw Error("Modelo n\xE3o encontrado");if(t.slug&&t.slug!==r.slug){if(await this.getBySlug(t.slug))throw Error(`J\xE1 existe um modelo com o slug "${t.slug}"`)}let[e]=await L.update($t).set({name:t.name,slug:t.slug||r.slug,description:t.description,thumbnailUrl:t.thumbnailUrl,iconUrl:t.iconUrl,bannerUrl:t.bannerUrl,externalUrl:t.externalUrl,isFeatured:t.isFeatured,isAdvertiser:t.isAdvertiser,status:t.status}).where(Y($t.id,t.id)).returning();return e}static async delete(t){if(!await this.getById(t))throw Error("Modelo n\xE3o encontrado");return await L.delete($t).where(Y($t.id,t)),!0}static async toggleStatus(t){let r=await this.getById(t);if(!r)throw Error("Modelo n\xE3o encontrado");let e=r.status==="active"?"hidden":"active",[o]=await L.update($t).set({status:e}).where(Y($t.id,t)).returning();return o}static async toggleFeatured(t){let r=await this.getById(t);if(!r)throw Error("Modelo n\xE3o encontrado");let[e]=await L.update($t).set({isFeatured:!r.isFeatured}).where(Y($t.id,t)).returning();return e}static async getStats(){let[t]=await L.select({total:I`count(*)`,active:I`count(*) filter (where ${$t.status} = 'active')`,hidden:I`count(*) filter (where ${$t.status} = 'hidden')`,featured:I`count(*) filter (where ${$t.isFeatured} = true)`,advertisers:I`count(*) filter (where ${$t.isAdvertiser} = true)`}).from($t);return{total:Number(t?.total||0),active:Number(t?.active||0),hidden:Number(t?.hidden||0),featured:Number(t?.featured||0),advertisers:Number(t?.advertisers||0)}}static generateSlug(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}}var cx=({posts:t,modelName:r,modelId:e})=>{return s("div",{class:"rounded-xl border border-white/5 bg-surface overflow-hidden",children:[s("div",{class:"px-6 py-4 border-b border-white/5 bg-[#1a1a1a]",children:[s("h3",{class:"text-white font-bold text-lg",children:["Posts de ",r]},void 0,!0,void 0,this),s("p",{class:"text-gray-400 text-sm mt-1",children:['Gerencie os posts da modelo "',r,'"']},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("table",{class:"w-full text-left text-sm text-gray-400",children:[s("thead",{class:"bg-[#1a1a1a] text-xs uppercase font-bold text-gray-200",children:s("tr",{children:[s("th",{class:"px-6 py-4",children:"Preview"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"T\xEDtulo"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Tipo"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4",children:"Criado em"},void 0,!1,void 0,this),s("th",{class:"px-6 py-4 text-right",children:"A\xE7\xF5es"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("tbody",{class:"divide-y divide-white/5 bg-surface",children:t.length===0?s("tr",{children:s("td",{colspan:5,class:"px-6 py-12 text-center text-gray-500",children:s("div",{class:"flex flex-col items-center gap-4",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-20",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"9",r:"2"},void 0,!1,void 0,this),s("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{children:"Nenhum post encontrado para esta modelo."},void 0,!1,void 0,this),s("a",{href:`/admin/models/${e}/posts/new`,class:"text-primary hover:underline text-sm",children:"Criar primeiro post"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this):t.map((o)=>s("tr",{class:"hover:bg-white/5 transition-colors group",children:[s("td",{class:"px-6 py-4",children:s("div",{class:"w-16 h-16 rounded overflow-hidden bg-gray-800 border border-white/10",children:o.type==="image"?s("img",{src:o.contentUrl,alt:o.title||"Post",class:"w-full h-full object-cover",onError:(n)=>{let c=n.target;c.parentElement.innerHTML=`
                          <div class="w-full h-full flex items-center justify-center text-gray-600">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <rect width="18" height="18" x="3" y="3" rx="2" ry="2"/>
                              <circle cx="9" cy="9" r="2"/>
                              <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                            </svg>
                          </div>
                        `}},void 0,!1,void 0,this):s("div",{class:"w-full h-full flex items-center justify-center text-gray-600",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("polygon",{points:"23 7 16 12 23 17 23 7"},void 0,!1,void 0,this),s("rect",{width:"15",height:"14",x:"1",y:"5",rx:"2",ry:"2"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("p",{class:"font-medium text-white group-hover:text-primary transition-colors",children:o.title||`Post #${o.id}`},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("span",{class:`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide ${o.type==="image"?"bg-blue-500/10 text-blue-500 border border-blue-500/20":"bg-purple-500/10 text-purple-500 border border-purple-500/20"}`,children:o.type==="image"?"\uD83D\uDCF7 Imagem":"\uD83C\uDFAC V\xEDdeo"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4",children:s("span",{class:"text-xs text-gray-500",children:o.createdAt?new Date(o.createdAt).toLocaleDateString("pt-BR"):"-"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("td",{class:"px-6 py-4 text-right",children:s("div",{class:"flex justify-end gap-2",children:[s("a",{href:o.contentUrl,target:"_blank",class:"text-gray-400 hover:text-white text-xs uppercase font-bold px-2 py-1 rounded hover:bg-white/5 transition-colors",title:"Visualizar",children:"\uD83D\uDC41"},void 0,!1,void 0,this),s("a",{href:`/admin/models/${e}/posts/${o.id}/edit`,class:"text-gray-400 hover:text-white text-xs uppercase font-bold px-2 py-1 rounded hover:bg-white/5 transition-colors",children:"Editar"},void 0,!1,void 0,this),s("form",{action:`/admin/models/${e}/posts/${o.id}/delete`,method:"post",class:"inline",onsubmit:"return confirm('Tem certeza que deseja excluir este post?')",children:s("button",{type:"submit",class:"text-red-500 hover:text-red-400 text-xs uppercase font-bold px-2 py-1 rounded hover:bg-red-500/10 transition-colors",children:"Excluir"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},o.id,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)};var ix=({model:t,posts:r,page:e,totalPages:o,searchQuery:n,typeFilter:c,error:i,success:f})=>{let h=e<o,w=e>1,p=(u,d,y)=>{let R=new URLSearchParams;if(u>1)R.set("page",u.toString());if(d)R.set("search",d);if(y)R.set("type",y);let S=R.toString();return`/admin/models/${t.id}/posts${S?`?${S}`:""}`};return s(Nr,{title:`Posts de ${t.name}`,breadcrumbs:[{label:"In\xEDcio",href:"/admin"},{label:"Modelos",href:"/admin/models"},{label:t.name,href:`/admin/models/${t.id}`},{label:"Posts",href:"#"}],children:s("div",{class:"space-y-6",children:[s("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s("div",{children:[s("h1",{class:"text-2xl font-bold text-white mb-2",children:["Posts de ",t.name]},void 0,!0,void 0,this),s("p",{class:"text-gray-400",children:['Gerencie os posts da modelo "',t.name,'" (',t.postCount||0," posts)"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-3",children:[s("a",{href:`/admin/models/${t.id}`,class:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors",children:"\u2190 Voltar para Modelo"},void 0,!1,void 0,this),s("a",{href:`/admin/models/${t.id}/posts/new`,class:"px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded-lg text-sm font-medium transition-colors",children:"+ Novo Post"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),i&&s(_n,{type:"error",message:i},void 0,!1,void 0,this),f&&s(_n,{type:"success",message:f},void 0,!1,void 0,this),s("div",{class:"bg-surface rounded-xl border border-white/5 p-6",children:s("form",{method:"GET",class:"flex flex-col sm:flex-row gap-4",children:[s("div",{class:"flex-1",children:s("input",{type:"text",name:"search",placeholder:"Buscar por t\xEDtulo...",value:n||"",class:"w-full px-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{children:s("select",{name:"type",class:"px-4 py-2 bg-black/20 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary",value:c||"",children:[s("option",{value:"",children:"Todos os tipos"},void 0,!1,void 0,this),s("option",{value:"image",children:"Imagens"},void 0,!1,void 0,this),s("option",{value:"video",children:"V\xEDdeos"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("button",{type:"submit",class:"px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded-lg font-medium transition-colors",children:"Filtrar"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s("div",{class:"bg-surface rounded-xl border border-white/5 p-6",children:s("div",{class:"flex items-center",children:[s("div",{class:"p-3 bg-blue-500/10 rounded-lg",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-blue-500",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"9",r:"2"},void 0,!1,void 0,this),s("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"ml-4",children:[s("p",{class:"text-2xl font-bold text-white",children:t.postCount||0},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm",children:"Total de Posts"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"bg-surface rounded-xl border border-white/5 p-6",children:s("div",{class:"flex items-center",children:[s("div",{class:"p-3 bg-green-500/10 rounded-lg",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-green-500",children:[s("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"},void 0,!1,void 0,this),s("polyline",{points:"14 2 14 8 20 8"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"ml-4",children:[s("p",{class:"text-2xl font-bold text-white",children:r.filter((u)=>u.type==="image").length},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm",children:"Imagens"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"bg-surface rounded-xl border border-white/5 p-6",children:s("div",{class:"flex items-center",children:[s("div",{class:"p-3 bg-purple-500/10 rounded-lg",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-purple-500",children:[s("polygon",{points:"23 7 16 12 23 17 23 7"},void 0,!1,void 0,this),s("rect",{width:"15",height:"14",x:"1",y:"5",rx:"2",ry:"2"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"ml-4",children:[s("p",{class:"text-2xl font-bold text-white",children:r.filter((u)=>u.type==="video").length},void 0,!1,void 0,this),s("p",{class:"text-gray-400 text-sm",children:"V\xEDdeos"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s(cx,{posts:r,modelName:t.name,modelId:t.id},void 0,!1,void 0,this),(h||w)&&s("div",{class:"flex justify-between items-center",children:[s("div",{children:w?s("a",{href:p(e-1,n,c),class:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors",children:"\u2190 Anterior"},void 0,!1,void 0,this):s("span",{class:"px-4 py-2 bg-gray-800 text-gray-500 rounded-lg text-sm font-medium cursor-not-allowed",children:"\u2190 Anterior"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("div",{class:"text-gray-400 text-sm",children:["P\xE1gina ",e," de ",o]},void 0,!0,void 0,this),s("div",{children:h?s("a",{href:p(e+1,n,c),class:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Pr\xF3xima \u2192"},void 0,!1,void 0,this):s("span",{class:"px-4 py-2 bg-gray-800 text-gray-500 rounded-lg text-sm font-medium cursor-not-allowed",children:"Pr\xF3xima \u2192"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var BT=({model:t,formData:r,isEditing:e,postId:o,error:n,success:c})=>{let i=e?`/admin/models/${t.id}/posts/${o}/update`:`/admin/models/${t.id}/posts/create`;return s(Nr,{title:`${e?"Editar":"Novo"} Post - ${t.name}`,breadcrumbs:[{label:"In\xEDcio",href:"/admin"},{label:"Modelos",href:"/admin/models"},{label:t.name,href:`/admin/models/${t.id}`},{label:"Posts",href:`/admin/models/${t.id}/posts`},{label:e?"Editar Post":"Novo Post",href:"#"}],children:s("div",{class:"max-w-4xl mx-auto",children:[s("div",{class:"mb-8",children:[s("h1",{class:"text-2xl font-bold text-white mb-2",children:e?"Editar Post":"Novo Post"},void 0,!1,void 0,this),s("p",{class:"text-gray-400",children:e?`Editando post da modelo "${t.name}"`:`Criando novo post para a modelo "${t.name}"`},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n&&s(_n,{type:"error",message:n},void 0,!1,void 0,this),c&&s(_n,{type:"success",message:c},void 0,!1,void 0,this),s("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s("div",{class:"bg-surface rounded-xl border border-white/5 p-6",children:s("form",{method:"POST",action:i,class:"space-y-6",children:[s("div",{children:[s("label",{class:"block text-sm font-medium text-gray-300 mb-2",children:"Tipo de Conte\xFAdo *"},void 0,!1,void 0,this),s("div",{class:"grid grid-cols-2 gap-3",children:[s("label",{class:`cursor-pointer rounded-lg border p-4 text-center transition-colors ${r.type==="image"?"border-blue-500 bg-blue-500/10 text-blue-400":"border-white/10 bg-black/20 text-gray-400 hover:border-white/20"}`,children:[s("input",{type:"radio",name:"type",value:"image",checked:r.type==="image",class:"sr-only"},void 0,!1,void 0,this),s("div",{class:"flex flex-col items-center",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mb-2",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"9",r:"2"},void 0,!1,void 0,this),s("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{class:"text-sm font-medium",children:"Imagem"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("label",{class:`cursor-pointer rounded-lg border p-4 text-center transition-colors ${r.type==="video"?"border-purple-500 bg-purple-500/10 text-purple-400":"border-white/10 bg-black/20 text-gray-400 hover:border-white/20"}`,children:[s("input",{type:"radio",name:"type",value:"video",checked:r.type==="video",class:"sr-only"},void 0,!1,void 0,this),s("div",{class:"flex flex-col items-center",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mb-2",children:[s("polygon",{points:"23 7 16 12 23 17 23 7"},void 0,!1,void 0,this),s("rect",{width:"15",height:"14",x:"1",y:"5",rx:"2",ry:"2"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("span",{class:"text-sm font-medium",children:"V\xEDdeo"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{for:"title",class:"block text-sm font-medium text-gray-300 mb-2",children:"T\xEDtulo do Post"},void 0,!1,void 0,this),s("input",{type:"text",id:"title",name:"title",value:r.title||"",placeholder:"Digite um t\xEDtulo para o post (opcional)",class:"w-full px-4 py-3 bg-black/20 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary"},void 0,!1,void 0,this),s("p",{class:"mt-1 text-xs text-gray-500",children:'O t\xEDtulo \xE9 opcional. Se n\xE3o informado, ser\xE1 usado "Post sem t\xEDtulo".'},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("label",{for:"contentUrl",class:"block text-sm font-medium text-gray-300 mb-2",children:"URL do Conte\xFAdo *"},void 0,!1,void 0,this),s("input",{type:"url",id:"contentUrl",name:"contentUrl",value:r.contentUrl,placeholder:"https://exemplo.com/imagem.jpg ou https://exemplo.com/video.mp4",required:!0,class:"w-full px-4 py-3 bg-black/20 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",onInput:(f)=>{let h=f.currentTarget.value,w=document.getElementById("preview-image"),p=document.getElementById("preview-placeholder"),u=document.getElementById("preview-error");if(h&&w){if(w.src=h,w.style.display="block",p)p.style.display="none";if(u)u.classList.add("hidden")}else if(p){if(p.style.display="flex",w)w.style.display="none";if(u)u.classList.add("hidden")}}},void 0,!1,void 0,this),s("p",{class:"mt-1 text-xs text-gray-500",children:"Insira a URL direta da imagem ou v\xEDdeo. Formatos suportados: JPG, PNG, GIF, MP4, etc."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"flex gap-3 pt-4",children:[s("a",{href:`/admin/models/${t.id}/posts`,class:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:"Cancelar"},void 0,!1,void 0,this),s("button",{type:"submit",class:"px-6 py-3 bg-primary hover:bg-primary-dark text-white rounded-lg font-medium transition-colors flex-1",children:e?"Atualizar Post":"Criar Post"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"bg-surface rounded-xl border border-white/5 p-6",children:[s("h3",{class:"text-lg font-bold text-white mb-4",children:"Pr\xE9-visualiza\xE7\xE3o"},void 0,!1,void 0,this),s("div",{class:"space-y-6",children:[s("div",{class:"bg-black/20 rounded-lg border border-white/10 overflow-hidden",children:[s("div",{class:"aspect-square bg-gray-800 relative",children:[r.contentUrl?r.type==="image"?s("img",{id:"preview-image",src:r.contentUrl,alt:"Preview",class:"w-full h-full object-cover",onError:(f)=>{let h=f.target;h.style.display="none";let w=document.getElementById("preview-error");if(w)w.classList.remove("hidden")},onLoad:(f)=>{let h=f.target;h.style.display="block";let w=document.getElementById("preview-error");if(w)w.classList.add("hidden")}},void 0,!1,void 0,this):s("div",{class:"w-full h-full flex items-center justify-center bg-black/50",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-gray-600",children:[s("polygon",{points:"23 7 16 12 23 17 23 7"},void 0,!1,void 0,this),s("rect",{width:"15",height:"14",x:"1",y:"5",rx:"2",ry:"2"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this):s("div",{id:"preview-placeholder",class:"w-full h-full flex items-center justify-center bg-gray-900",children:s("div",{class:"text-center text-gray-600",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"mx-auto mb-2 opacity-20",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"9",r:"2"},void 0,!1,void 0,this),s("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-sm",children:"Insira uma URL para pr\xE9-visualizar"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{id:"preview-error",class:"hidden w-full h-full flex items-center justify-center bg-black/50",children:s("div",{class:"text-center text-gray-400",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mx-auto mb-2",children:[s("path",{d:"m21.5 8-7 7L13 13.5a2.5 2.5 0 0 1-5 0L6.5 12 3 15.5"},void 0,!1,void 0,this),s("path",{d:"M15 5H9a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z"},void 0,!1,void 0,this),s("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{class:"text-xs",children:"Imagem n\xE3o encontrada"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"p-4",children:[s("h4",{class:"font-medium text-white truncate",children:r.title||"Post sem t\xEDtulo"},void 0,!1,void 0,this),s("div",{class:"flex items-center justify-between mt-2",children:[s("span",{class:`px-2 py-1 rounded text-xs font-bold uppercase tracking-wide ${r.type==="image"?"bg-blue-500/10 text-blue-500 border border-blue-500/20":"bg-purple-500/10 text-purple-500 border border-purple-500/20"}`,children:r.type==="image"?"\uD83D\uDCF7 Imagem":"\uD83C\uDFAC V\xEDdeo"},void 0,!1,void 0,this),s("span",{class:"text-xs text-gray-500",children:"Publicado"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"bg-blue-500/5 border border-blue-500/10 rounded-lg p-4",children:[s("h4",{class:"text-blue-400 font-medium mb-2",children:"\u2139\uFE0F Informa\xE7\xF5es Importantes"},void 0,!1,void 0,this),s("ul",{class:"text-sm text-blue-300 space-y-1",children:[s("li",{children:"\u2022 Posts administrativos n\xE3o possuem likes ou coment\xE1rios"},void 0,!1,void 0,this),s("li",{children:"\u2022 A data de cria\xE7\xE3o ser\xE1 registrada automaticamente"},void 0,!1,void 0,this),s("li",{children:"\u2022 O post ficar\xE1 vis\xEDvel imediatamente ap\xF3s a cria\xE7\xE3o"},void 0,!1,void 0,this),s("li",{children:"\u2022 Certifique-se de que a URL do conte\xFAdo \xE9 acess\xEDvel publicamente"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)};var Pt=new $n;Pt.get("/",async(t)=>{let[r,e,o]=await Promise.all([hd.getStats(),hd.getTrafficData(),hd.getRecentActivity()]);return t.html(s(WE,{stats:r,trafficData:e,recentActivity:o},void 0,!1,void 0,this))});Pt.get("/models",async(t)=>{let r=Math.max(1,parseInt(t.req.query("page")||"1")),e=t.req.query("status"),o=t.req.query("search")||"",n=await Jo.list(r,20,{status:e,search:o}),c=await Jo.getStats();return t.html(s(ZE,{models:n.data,stats:c,pagination:{page:n.page,totalPages:n.totalPages,total:n.total},filters:{search:o,status:e}},void 0,!1,void 0,this))});Pt.get("/models/new",(t)=>t.html(s(kT,{},void 0,!1,void 0,this)));Pt.get("/models/:id/edit",async(t)=>{let r=parseInt(t.req.param("id")),e=await Jo.getById(r);if(!e)return t.redirect("/admin/models?error=not_found");return t.html(s(kT,{model:e,isEditing:!0},void 0,!1,void 0,this))});Pt.post("/models/create",async(t)=>{let r=await t.req.parseBody();try{return await Jo.create({name:r.name,slug:r.slug||void 0,description:r.description,thumbnailUrl:r.thumbnailUrl,iconUrl:r.iconUrl,bannerUrl:r.bannerUrl,externalUrl:r.externalUrl,isFeatured:r.isFeatured==="true",isAdvertiser:r.isAdvertiser==="true",status:r.status||"active"}),t.redirect("/admin/models?success=created")}catch(e){return console.error("[Models Create Error]",e),t.redirect("/admin/models?error="+encodeURIComponent(e.message))}});Pt.post("/models/:id/update",async(t)=>{let r=parseInt(t.req.param("id")),e=await t.req.parseBody();try{return await Jo.update({id:r,name:e.name,slug:e.slug||void 0,description:e.description,thumbnailUrl:e.thumbnailUrl,iconUrl:e.iconUrl,bannerUrl:e.bannerUrl,externalUrl:e.externalUrl,isFeatured:e.isFeatured==="true",isAdvertiser:e.isAdvertiser==="true",status:e.status}),t.redirect("/admin/models?success=updated")}catch(o){return console.error("[Models Update Error]",o),t.redirect("/admin/models?error="+encodeURIComponent(o.message))}});Pt.post("/models/:id/toggle",async(t)=>{let r=parseInt(t.req.param("id"));try{return await Jo.toggleStatus(r),t.redirect("/admin/models?success=toggled")}catch(e){return console.error("[Models Toggle Error]",e),t.redirect("/admin/models?error="+encodeURIComponent(e.message))}});Pt.post("/models/:id/delete",async(t)=>{let r=parseInt(t.req.param("id"));try{return await Jo.delete(r),t.redirect("/admin/models?success=deleted")}catch(e){return console.error("[Models Delete Error]",e),t.redirect("/admin/models?error="+encodeURIComponent(e.message))}});Pt.get("/models/:modelId/posts",async(t)=>{let r=parseInt(t.req.param("modelId")),e=Math.max(1,parseInt(t.req.query("page")||"1")),o=t.req.query("search")||"",n=t.req.query("type");try{let c=await Jo.getById(r);if(!c)return t.redirect("/admin/models?error=model_not_found");let i=await Yn.listByModel(r,e,20,{search:o||void 0,type:n||void 0});return t.html(s(ix,{model:c,posts:i.data,page:i.page,totalPages:i.totalPages,searchQuery:o,typeFilter:n},void 0,!1,void 0,this))}catch(c){return console.error("[Model Posts Error]",c),t.redirect("/admin/models?error="+encodeURIComponent(c.message))}});Pt.get("/models/:modelId/posts/new",async(t)=>{let r=parseInt(t.req.param("modelId"));try{let e=await Jo.getById(r);if(!e)return t.redirect("/admin/models?error=model_not_found");return t.html(s(BT,{model:e,formData:{contentUrl:"",type:"image"},isEditing:!1},void 0,!1,void 0,this))}catch(e){return console.error("[New Post Error]",e),t.redirect(`/admin/models/${r}/posts?error=`+encodeURIComponent(e.message))}});Pt.get("/models/:modelId/posts/:postId/edit",async(t)=>{let r=parseInt(t.req.param("modelId")),e=parseInt(t.req.param("postId"));try{let o=await Jo.getById(r);if(!o)return t.redirect("/admin/models?error=model_not_found");let n=await Yn.getById(e);if(!n)return t.redirect(`/admin/models/${r}/posts?error=post_not_found`);return t.html(s(BT,{model:o,formData:{title:n.title||void 0,contentUrl:n.contentUrl,type:n.type},isEditing:!0,postId:e},void 0,!1,void 0,this))}catch(o){return console.error("[Edit Post Error]",o),t.redirect(`/admin/models/${r}/posts?error=`+encodeURIComponent(o.message))}});Pt.post("/models/:modelId/posts/create",async(t)=>{let r=parseInt(t.req.param("modelId")),e=await t.req.parseBody();try{return await Yn.create({modelId:r,title:e.title||void 0,contentUrl:e.contentUrl,type:e.type}),t.redirect(`/admin/models/${r}/posts?success=created`)}catch(o){return console.error("[Create Post Error]",o),t.redirect(`/admin/models/${r}/posts/new?error=`+encodeURIComponent(o.message))}});Pt.post("/models/:modelId/posts/:postId/update",async(t)=>{let r=parseInt(t.req.param("modelId")),e=parseInt(t.req.param("postId")),o=await t.req.parseBody();try{return await Yn.update({id:e,modelId:r,title:o.title||void 0,contentUrl:o.contentUrl,type:o.type}),t.redirect(`/admin/models/${r}/posts?success=updated`)}catch(n){return console.error("[Update Post Error]",n),t.redirect(`/admin/models/${r}/posts/${e}/edit?error=`+encodeURIComponent(n.message))}});Pt.post("/models/:modelId/posts/:postId/delete",async(t)=>{let r=parseInt(t.req.param("modelId")),e=parseInt(t.req.param("postId"));try{return await Yn.delete(e),t.redirect(`/admin/models/${r}/posts?success=deleted`)}catch(o){return console.error("[Delete Post Error]",o),t.redirect(`/admin/models/${r}/posts?error=`+encodeURIComponent(o.message))}});Pt.get("/ads",async(t)=>{let r=Math.max(1,parseInt(t.req.query("page")||"1")),e=t.req.query("status"),o=t.req.query("placement"),n=await Mr.list(r,20,{status:e,placement:o}),c=n.data.map((i)=>({id:i.id,name:i.name,type:Mr.formatTypeLabel(i.type),placement:Mr.formatPlacementLabel(i.placement),impressions:i.impressions?.toLocaleString("pt-BR")||"0",clicks:i.clicks?.toLocaleString("pt-BR")||"0",status:i.status==="active"?"Active":i.status==="paused"?"Paused":"Draft"}));return t.html(s(XE,{ads:c,pagination:{page:n.page,totalPages:n.totalPages,total:n.total},filters:{status:e,placement:o}},void 0,!1,void 0,this))});Pt.get("/ads/new",(t)=>t.html(s(WT,{},void 0,!1,void 0,this)));Pt.get("/ads/:id/edit",async(t)=>{let r=parseInt(t.req.param("id")),e=await Mr.getById(r);if(!e)return t.redirect("/admin/ads?error=not_found");return t.html(s(WT,{ad:e,isEditing:!0},void 0,!1,void 0,this))});Pt.post("/ads/create",async(t)=>{let r=await t.req.parseBody();try{return await Mr.create({name:r.name||r.title,type:r.type||"banner",placement:r.placement||"home_top",status:r.status||"draft",title:r.title,subtitle:r.subtitle,ctaText:r.ctaText,imageUrl:r.imageUrl,link:r.link||"#",category:r.category,priority:parseInt(r.priority)||0}),t.redirect("/admin/ads?success=created")}catch(e){return console.error("[Ads Create Error]",e),t.redirect("/admin/ads?error="+encodeURIComponent(e.message))}});Pt.post("/ads/:id/update",async(t)=>{let r=parseInt(t.req.param("id")),e=await t.req.parseBody();try{return await Mr.update({id:r,name:e.name||e.title,type:e.type,placement:e.placement,status:e.status,title:e.title,subtitle:e.subtitle,ctaText:e.ctaText,imageUrl:e.imageUrl,link:e.link,category:e.category,priority:parseInt(e.priority)||0}),t.redirect("/admin/ads?success=updated")}catch(o){return console.error("[Ads Update Error]",o),t.redirect("/admin/ads?error="+encodeURIComponent(o.message))}});Pt.post("/ads/:id/toggle",async(t)=>{let r=parseInt(t.req.param("id"));try{return await Mr.toggleStatus(r),t.redirect("/admin/ads?success=toggled")}catch(e){return console.error("[Ads Toggle Error]",e),t.redirect("/admin/ads?error="+encodeURIComponent(e.message))}});Pt.post("/ads/:id/delete",async(t)=>{let r=parseInt(t.req.param("id"));try{return await Mr.delete(r),t.redirect("/admin/ads?success=deleted")}catch(e){return console.error("[Ads Delete Error]",e),t.redirect("/admin/ads?error="+encodeURIComponent(e.message))}});Pt.get("/plans",async(t)=>{let r=await L.select().from(Tt),e=[{duration:7,name:"Semanal (Trial)",price:990},{duration:30,name:"Mensal",price:2990},{duration:365,name:"Anual",price:19990}];for(let f of e)if(!r.find((h)=>h.duration===f.duration))await L.insert(Tt).values({name:f.name,duration:f.duration,price:f.price,benefits:[],ctaText:"Assinar Agora"});let o=await L.select().from(Tt).orderBy(Tt.duration),c=(await L.select().from(Dr).where(Y(Dr.isActive,!0)))[0]?.name||"Dias Marketplace",i=await L.select().from(Wt).orderBy(oo(Wt.displayOrder),oo(Wt.id));return t.html(s(JE,{plans:o,activeGateway:c,orderBumps:i},void 0,!1,void 0,this))});Pt.get("/finance",async(t)=>{let r=await L.select().from(Dr);if(r.length===0)await L.insert(Dr).values([{name:"Dias Marketplace",isActive:!0},{name:"JunglePay",isActive:!1}]),r=await L.select().from(Dr);let e=r.find((R)=>R.isActive)?.name||"Dias Marketplace",o=t.req.query("success")==="true",n=Math.max(1,parseInt(t.req.query("page")||"1")),c=20,i=(n-1)*c,f=t.req.query("status")||"",h=t.req.query("search")||"",w=[],p=[],u=0;if(e==="JunglePay"){let R=L.select({id:ut.id,customerName:ut.customerName,customerEmail:ut.customerEmail,customerDocument:ut.customerDocument,customerPhone:ut.customerPhone,totalAmount:ut.totalAmount,paymentMethod:ut.paymentMethod,status:ut.status,orderBump:ut.orderBump,planName:Tt.name,createdAt:ut.createdAt}).from(ut).leftJoin(Tt,Y(ut.planId,Tt.id)).orderBy(Vt(ut.createdAt)).limit(c).offset(i),S=[];if(f)S.push(Y(ut.status,f));if(h)S.push(ge(he(ut.customerName,`%${h}%`),he(ut.customerEmail,`%${h}%`),he(ut.customerDocument,`%${h}%`)));if(S.length>0)R=R.where(S.length===1?S[0]:I`${S[0]} AND ${S[1]}`);w=await R;let T=await L.select({count:I`count(*)`}).from(ut);u=Number(T[0]?.count||0)}else{let R=L.select({id:pt.id,userName:ft.name,userEmail:ft.email,planName:Tt.name,planPrice:Tt.price,startDate:pt.startDate,endDate:pt.endDate,status:pt.status,externalId:pt.externalId,createdAt:pt.createdAt}).from(pt).leftJoin(ft,Y(pt.userId,ft.id)).leftJoin(Tt,Y(pt.planId,Tt.id)).orderBy(Vt(pt.createdAt)).limit(c).offset(i),S=[];if(f)S.push(Y(pt.status,f));if(h)S.push(ge(he(ft.name,`%${h}%`),he(ft.email,`%${h}%`)));if(S.length>0)R=R.where(S.length===1?S[0]:I`${S[0]} AND ${S[1]}`);p=await R;let T=await L.select({count:I`count(*)`}).from(pt);u=Number(T[0]?.count||0)}let d=Math.ceil(u/c),y=r.map((R)=>({...R,isActive:!!R.isActive}));return t.html(s(qE,{gateways:y,activeGatewayName:e,success:o,checkouts:w,subscriptions:p,pagination:{page:n,totalPages:d,total:u},filters:{status:f,search:h}},void 0,!1,void 0,this))});Pt.get("/settings",(t)=>t.html(s(YE,{},void 0,!1,void 0,this)));Pt.get("/support",async(t)=>{let r=await L.select().from(So).orderBy(So.id);if(r.length===0)await L.insert(So).values([{platform:"whatsapp",url:"https://wa.me/",isActive:!0},{platform:"telegram",url:"https://t.me/",isActive:!0}]),r=await L.select().from(So).orderBy(So.id);return t.html(s(QE,{contacts:r},void 0,!1,void 0,this))});Pt.post("/support/update",async(t)=>{let r=await t.req.parseBody(),e=await L.select().from(So);for(let o of e){let n=`contacts[${o.id}][url]`,c=`contacts[${o.id}][isActive]`,i=r[n],f=r[c]==="true",h=i;if(o.platform==="whatsapp")i=i.replace("https://wa.me/","").replace("wa.me/",""),h=`https://wa.me/${i}`;else if(o.platform==="telegram")i=i.replace("https://t.me/","").replace("t.me/","").replace("@",""),h=`https://t.me/${i}`;await L.update(So).set({url:h,isActive:f}).where(Y(So.id,o.id))}return t.redirect("/admin/support")});Pt.get("/clients",async(t)=>{let r=parseInt(t.req.query("page")||"1"),e=parseInt(t.req.query("limit")||"20"),o=(r-1)*e,n=t.req.query("search")||"",[c]=await L.select({total:I`count(*)`,active:I`count(*) filter (where ${ft.subscriptionStatus} = 1)`,inactive:I`count(*) filter (where ${ft.subscriptionStatus} = 0 or ${ft.subscriptionStatus} is null)`}).from(ft),i={totalUsers:Number(c?.total||0),activeSubscribers:Number(c?.active||0),inactiveSubscribers:Number(c?.inactive||0)},f=L.select({userId:pt.userId,maxEndDate:I`max(${pt.endDate})`.as("max_end_date")}).from(pt).groupBy(pt.userId).as("latest_sub"),h=L.select({id:ft.id,name:ft.name,email:ft.email,subscriptionStatus:ft.subscriptionStatus,lastSubscriptionEndDate:f.maxEndDate}).from(ft).leftJoin(f,Y(ft.id,f.userId));if(n)h=h.where(ge(he(ft.name,`%${n}%`),he(ft.email,`%${n}%`)));let w=await h.limit(e).offset(o).orderBy(Vt(ft.id)),p=L.select({count:I`count(*)`}).from(ft);if(n)p=p.where(ge(he(ft.name,`%${n}%`),he(ft.email,`%${n}%`)));let[u]=await p,d=Number(u?.count||0),y=Math.ceil(d/e);return t.html(s(sx,{users:w,stats:i,pagination:{page:r,totalPages:y,total:d},filters:{search:n}},void 0,!1,void 0,this))});Pt.get("/clients/:id/history",async(t)=>{let r=parseInt(t.req.param("id"));if(!await L.query.users.findFirst({where:Y(ft.id,r)}))return t.html(s("div",{class:"p-8 text-center text-gray-500",children:"Usu\xE1rio n\xE3o encontrado"},void 0,!1,void 0,this));let[o,n]=await Promise.all([L.select({id:ut.id,amount:ut.totalAmount,method:ut.paymentMethod,status:ut.status,date:ut.createdAt,type:I`'Checkout (JunglePay)'`}).from(ut).where(Y(ut.userId,r)).orderBy(Vt(ut.createdAt)),L.select({id:pt.id,amount:Tt.price,method:I`'Assinatura'`,status:pt.status,date:pt.createdAt,type:I`'Subscription (Dias)'`}).from(pt).leftJoin(Tt,Y(pt.planId,Tt.id)).where(Y(pt.userId,r)).orderBy(Vt(pt.createdAt))]),c=[...o,...n].sort((i,f)=>new Date(f.date).getTime()-new Date(i.date).getTime());if(c.length===0)return t.html(s("div",{class:"p-12 text-center text-gray-500 flex flex-col items-center gap-4",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-20",children:[s("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"},void 0,!1,void 0,this),s("path",{d:"M3 9h18"},void 0,!1,void 0,this),s("path",{d:"M9 21V9"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("p",{children:"Nenhuma transa\xE7\xE3o encontrada para este usu\xE1rio."},void 0,!1,void 0,this)]},void 0,!0,void 0,this));return t.html(s("div",{class:"space-y-4 p-1",children:c.map((i)=>s("div",{class:"bg-white/5 border border-white/10 rounded-xl p-4 hover:border-primary/30 transition-all group",children:[s("div",{class:"flex justify-between items-start mb-3",children:[s("div",{children:[s("span",{class:"text-[10px] font-black tracking-widest text-primary/60 uppercase",children:i.type},void 0,!1,void 0,this),s("h5",{class:"text-white font-bold text-sm",children:["Transa\xE7\xE3o #",i.id]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("span",{class:`px-2 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider ${i.status==="paid"||i.status==="active"?"bg-green-500/10 text-green-500 border border-green-500/20":i.status==="pending"?"bg-yellow-500/10 text-yellow-500 border border-yellow-500/20":"bg-red-500/10 text-red-500 border border-red-500/20"}`,children:i.status},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"grid grid-cols-2 gap-4",children:[s("div",{children:[s("p",{class:"text-[10px] text-gray-500 uppercase font-bold mb-0.5",children:"Valor"},void 0,!1,void 0,this),s("p",{class:"text-white font-mono text-sm",children:((i.amount||0)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{children:[s("p",{class:"text-[10px] text-gray-500 uppercase font-bold mb-0.5",children:"M\xE9todo"},void 0,!1,void 0,this),s("p",{class:"text-white text-sm capitalize",children:i.method||"-"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"col-span-2 pt-2 border-t border-white/5",children:[s("p",{class:"text-[10px] text-gray-500 uppercase font-bold mb-0.5",children:"Data"},void 0,!1,void 0,this),s("p",{class:"text-gray-300 text-xs",children:new Date(i.date).toLocaleString("pt-BR")},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},i.id,!0,void 0,this))},void 0,!1,void 0,this))});Pt.get("/clients/:id/add-plan",async(t)=>{let r=parseInt(t.req.param("id")),e=await L.select().from(Tt).orderBy(Tt.duration);return t.html(s("div",{class:"space-y-4 p-1",children:e.map((o)=>s("div",{class:"bg-white/5 border border-white/10 rounded-xl p-4 hover:border-green-500/30 transition-all group",children:s("div",{class:"flex justify-between items-center",children:[s("div",{children:[s("h5",{class:"text-white font-bold text-sm",children:o.name},void 0,!1,void 0,this),s("p",{class:"text-[10px] text-gray-500 uppercase font-bold",children:[o.duration," dias \u2022 ",(o.price/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("form",{"hx-post":`/admin/clients/${r}/activate-plan`,"hx-target":"#add-plan-alert-container","hx-swap":"innerHTML","hx-on":"htmx:after-request: document.getElementById('add-plan-alert-container').classList.remove('hidden')",children:[s("input",{type:"hidden",name:"planId",value:o.id},void 0,!1,void 0,this),s("button",{type:"submit",class:"bg-green-600 hover:bg-green-500 text-white text-[10px] font-bold px-4 py-2 rounded uppercase tracking-widest transition-all",children:"Ativar"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},o.id,!1,void 0,this))},void 0,!1,void 0,this))});Pt.post("/clients/:id/activate-plan",async(t)=>{let r=parseInt(t.req.param("id")),e=await t.req.parseBody(),o=parseInt(e.planId),n=await L.query.plans.findFirst({where:Y(Tt.id,o)});if(!n)return t.html(s(Zr,{children:[s(_n,{variant:"error",title:"Erro na Ativa\xE7\xE3o",children:"O plano selecionado n\xE3o foi encontrado no sistema."},void 0,!1,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:"document.getElementById('add-plan-alert-container').classList.remove('hidden');"}},void 0,!1,void 0,this)]},void 0,!0,void 0,this));try{let c=new Date,i=new Date;return i.setDate(c.getDate()+n.duration),await L.insert(pt).values({userId:r,planId:o,status:"active",startDate:c,endDate:i,externalId:"MANUAL_ADMIN"}),await L.update(ft).set({subscriptionStatus:1}).where(Y(ft.id,r)),t.html(s(Zr,{children:[s(_n,{variant:"success",title:"Plano Ativado!",children:["O plano ",s("strong",{children:n.name},void 0,!1,void 0,this)," foi ativado com sucesso para o cliente. A p\xE1gina ser\xE1 atualizada em instantes."]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:`
          document.getElementById('add-plan-alert-container').classList.remove('hidden');
          setTimeout(() => {
            window.location.reload();
          }, 2000);
        `}},void 0,!1,void 0,this)]},void 0,!0,void 0,this))}catch(c){return console.error("Manual activation error:",c),t.html(s(Zr,{children:[s(_n,{variant:"error",title:"Falha no Processamento",children:["Ocorreu um erro ao tentar ativar o plano: ",c.message]},void 0,!0,void 0,this),s("script",{dangerouslySetInnerHTML:{__html:"document.getElementById('add-plan-alert-container').classList.remove('hidden');"}},void 0,!1,void 0,this)]},void 0,!0,void 0,this))}});Pt.get("/whitelabel",async(t)=>{let r=parseInt(t.req.query("page")||"1"),e=[],o=1,n=void 0,c={models:0,posts:0,media:0};try{let[i,f]=await Promise.all([Ze.listModels(r,12),Ze.getStats()]);e=i.data,o=i.totalPages,c=f}catch(i){n=i.message}return t.html(s(CE,{models:e,currentPage:r,totalPages:o,error:n,stats:c},void 0,!1,void 0,this))});Pt.post("/whitelabel/sync",async(t)=>{try{let r=await Ze.syncModelsFromBucket();return t.json({success:!0,count:r})}catch(r){return console.error(r),t.json({success:!1,error:r.message},500)}});var fx=Pt;Fe();pe();we();Fe();pe();we();Af();var XT={async mapModelToProduction(t){let r=t.thumbnailUrl;if(r&&!r.startsWith("http")){let e=await Xo(r);if(e)r=e}return{name:t.folderName,iconUrl:r,bannerUrl:r,description:`Model imported from S3: ${t.folderName}`,isFeatured:!1,isAdvertiser:!1}},async mapPostToProduction(t,r){let o=t.media.find((i)=>i.type==="video")||t.media[0];if(!o)return null;let n=o.s3Key,c=await Xo(n);if(!c)return null;return{modelId:r,title:t.title||t.folderName,contentUrl:c,type:o.type}}};var hx={async activateModels(t,r){let e=await this._getFoldersToProcess(t,r),o={processedCount:0,newModelsCount:0,newPostsCount:0};for(let n of e){let c=await this._processFolder(n);o.processedCount++,o.newModelsCount+=c.newModels,o.newPostsCount+=c.newPosts}return o},async _getFoldersToProcess(t,r){if(r)return[r];if(t)return(await L.select({folderName:Lt.folderName}).from(Lt)).map((o)=>o.folderName);return[]},async _processFolder(t){await Ze.syncModelDetails(t);let r=await L.query.whitelabelModels.findFirst({where:Y(Lt.folderName,t),with:{posts:{with:{media:!0}}}});if(!r)return{newModels:0,newPosts:0};let{modelId:e,isNew:o}=await this._upsertModel(r),n=await this._upsertPosts(e,r.posts);return await L.update(Lt).set({status:"active"}).where(Y(Lt.id,r.id)),{newModels:o?1:0,newPosts:n}},async _upsertModel(t){let r=await L.query.models.findFirst({where:Y($t.name,t.folderName)});if(r)return{modelId:r.id,isNew:!1};let e=await XT.mapModelToProduction(t),[o]=await L.insert($t).values(e).returning();return{modelId:o.id,isNew:!0}},async _upsertPosts(t,r){let e=0;for(let o of r){let n=await XT.mapPostToProduction(o,t);if(!n)continue;if(!await L.query.posts.findFirst({where:Y(Qr.contentUrl,n.contentUrl)}))await L.insert(Qr).values(n),e++}return e}};var wx={activateModels:hx.activateModels};Fe();pe();we();class $f{static async register(t,r,e,o="user"){let n=await Bun.password.hash(r);if(await L.query.users.findFirst({where:Y(ft.email,t)}))throw Error("User already exists");let[i]=await L.insert(ft).values({email:t,password:n,name:e||null,role:o,subscriptionStatus:0}).returning();return i}static async login(t,r){let e=await L.query.users.findFirst({where:Y(ft.email,t)});if(!e)return null;if(!await Bun.password.verify(r,e.password))return null;return e}static async createSubscription(t,r){let e=await L.query.plans.findFirst({where:Y(Tt.id,r)});if(!e)throw Error("Plan not found");let o=new Date,n=new Date;n.setDate(o.getDate()+e.duration);let[c]=await L.insert(pt).values({userId:t,planId:r,startDate:o,endDate:n,status:"active"}).returning();return await L.update(ft).set({subscriptionStatus:1}).where(Y(ft.id,t)),c}static async checkSubscriptionStatus(t){let r=await L.query.subscriptions.findFirst({where:Ir(Y(pt.userId,t),Y(pt.status,"active")),orderBy:[Vt(pt.endDate)]});if(!r)return await L.update(ft).set({subscriptionStatus:0}).where(Y(ft.id,t)),!1;let e=new Date;if(r.endDate<e)return await L.update(pt).set({status:"expired"}).where(Y(pt.id,r.id)),await L.update(ft).set({subscriptionStatus:0}).where(Y(ft.id,t)),!1;return!0}}Fe();pe();we();class wd{static async getActiveGateway(){let[t]=await L.select().from(Dr).where(Y(Dr.name,"JunglePay")).limit(1);return t}static generateAuthHeader(t){let r=`${t}:x`;return`Basic ${btoa(r)}`}static sanitizeDocument(t){return t.replace(/\D/g,"")}static sanitizePhone(t){return t.replace(/\D/g,"")}static async getPlanById(t){let[r]=await L.select().from(Tt).where(Y(Tt.id,t)).limit(1);return r}static async getOrderBumpsByIds(t){if(!t||t.length===0)return[];return await L.select({id:Wt.id,name:Wt.name,price:Wt.price}).from(Wt).where(bo(Wt.id,t))}static async createPixCharge(t){let r=await this.getActiveGateway();if(!r)return{success:!1,error:"Gateway JunglePay n\xE3o est\xE1 configurado no sistema.",code:"GATEWAY_NOT_CONFIGURED"};if(!r.isActive)return{success:!1,error:"Gateway JunglePay est\xE1 configurado mas n\xE3o est\xE1 ativo.",code:"GATEWAY_INACTIVE"};if(!r.secretKey)return{success:!1,error:"Chave secreta da JunglePay n\xE3o est\xE1 configurada.",code:"GATEWAY_NOT_CONFIGURED"};if(!t.customerName||!t.customerEmail||!t.customerDocument)return{success:!1,error:"Dados do cliente incompletos: nome, email e CPF s\xE3o obrigat\xF3rios.",code:"INVALID_DATA"};if(!t.totalAmount||t.totalAmount<=0)return{success:!1,error:"Valor total inv\xE1lido.",code:"INVALID_DATA"};let e=await this.getPlanById(t.planId);if(!e)return{success:!1,error:"Plano n\xE3o encontrado.",code:"INVALID_DATA"};if(e.acceptsPix===!1)return{success:!1,error:"Este plano n\xE3o aceita pagamento via PIX.",code:"INVALID_DATA"};let o=[{title:e.name,unitPrice:e.price,quantity:1,tangible:!1}];if(t.orderBumpIds&&t.orderBumpIds.length>0){let c=await this.getOrderBumpsByIds(t.orderBumpIds);for(let i of c)o.push({title:i.name,unitPrice:i.price,quantity:1,tangible:!1})}else if(t.orderBump)o.push({title:"Acesso Antecipado Premium",unitPrice:1990,quantity:1,tangible:!1});let n={paymentMethod:"pix",amount:t.totalAmount,customer:{name:t.customerName,email:t.customerEmail,phone:this.sanitizePhone(t.customerPhone),document:{number:this.sanitizeDocument(t.customerDocument),type:"cpf"}},items:o,pix:{expiresInDays:1},postbackUrl:r.postbackUrl||void 0};try{let c=await fetch("https://api.junglepagamentos.com/v1/transactions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.generateAuthHeader(r.secretKey)},body:JSON.stringify(n)});if(!c.ok){let h=await c.text();return console.error("[JunglePay] API Error:",c.status,h),{success:!1,error:`Erro na API JunglePay: ${c.status} - ${h}`,code:"API_ERROR"}}let i=await c.json();if(!i.pix||!i.pix.qrcode)return console.error("[JunglePay] Resposta inesperada:",i),{success:!1,error:"Resposta da API JunglePay n\xE3o cont\xE9m dados do PIX.",code:"UNEXPECTED_RESPONSE"};let[f]=await L.insert(ut).values({planId:t.planId,externalId:String(i.id),paymentMethod:"pix",orderBump:t.orderBump||t.orderBumpIds&&t.orderBumpIds.length>0,orderBumpIds:t.orderBumpIds||null,totalAmount:t.totalAmount,customerName:t.customerName,customerEmail:t.customerEmail,customerDocument:this.sanitizeDocument(t.customerDocument),customerPhone:this.sanitizePhone(t.customerPhone),status:"pending"}).returning();return{success:!0,transactionId:i.id,checkoutId:f.id,pixQrCode:i.pix.qrcode,pixUrl:i.secureUrl||"",expirationDate:i.pix.expirationDate,status:i.status}}catch(c){return console.error("[JunglePay] Request Error:",c),{success:!1,error:`Erro ao conectar com JunglePay: ${c.message}`,code:"API_ERROR"}}}static async createCardCharge(t){let r=await this.getActiveGateway();if(!r)return{success:!1,error:"Gateway JunglePay n\xE3o est\xE1 configurado no sistema.",code:"GATEWAY_NOT_CONFIGURED"};if(!r.isActive)return{success:!1,error:"Gateway JunglePay est\xE1 configurado mas n\xE3o est\xE1 ativo.",code:"GATEWAY_INACTIVE"};if(!r.secretKey)return{success:!1,error:"Chave secreta da JunglePay n\xE3o est\xE1 configurada.",code:"GATEWAY_NOT_CONFIGURED"};if(!t.customerName||!t.customerEmail||!t.customerDocument)return{success:!1,error:"Dados do cliente incompletos: nome, email e CPF s\xE3o obrigat\xF3rios.",code:"INVALID_DATA"};if(!t.cardHash)return{success:!1,error:"Token do cart\xE3o n\xE3o foi fornecido.",code:"INVALID_DATA"};if(!t.totalAmount||t.totalAmount<=0)return{success:!1,error:"Valor total inv\xE1lido.",code:"INVALID_DATA"};let e=await this.getPlanById(t.planId);if(!e)return{success:!1,error:"Plano n\xE3o encontrado.",code:"INVALID_DATA"};if(e.acceptsCard===!1)return{success:!1,error:"Este plano n\xE3o aceita pagamento via Cart\xE3o de Cr\xE9dito.",code:"INVALID_DATA"};let o=[{title:e.name,unitPrice:e.price,quantity:1,tangible:!1}];if(t.orderBumpIds&&t.orderBumpIds.length>0){let c=await this.getOrderBumpsByIds(t.orderBumpIds);for(let i of c)o.push({title:i.name,unitPrice:i.price,quantity:1,tangible:!1})}else if(t.orderBump)o.push({title:"Acesso Antecipado Premium",unitPrice:1990,quantity:1,tangible:!1});let n={paymentMethod:"credit_card",amount:t.totalAmount,installments:t.installments||1,card:{hash:t.cardHash},customer:{name:t.customerName,email:t.customerEmail,phone:this.sanitizePhone(t.customerPhone),document:{number:this.sanitizeDocument(t.customerDocument),type:"cpf"}},items:o,postbackUrl:r.postbackUrl||void 0};try{console.log("[JunglePay] Processando cart\xE3o de cr\xE9dito...");let c=await fetch("https://api.junglepagamentos.com/v1/transactions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.generateAuthHeader(r.secretKey)},body:JSON.stringify(n)});if(!c.ok){let h=await c.text();return console.error("[JunglePay] API Error:",c.status,h),{success:!1,error:`Erro na API JunglePay: ${c.status} - ${h}`,code:"API_ERROR"}}let i=await c.json();if(console.log("[JunglePay] Resposta:",i.status,i.id),i.status==="refused"){let h=i.refusedReason?.message||"Cart\xE3o recusado pela operadora";return console.error("[JunglePay] Cart\xE3o recusado:",h),{success:!1,error:h,code:"CARD_REFUSED"}}let[f]=await L.insert(ut).values({planId:t.planId,externalId:String(i.id),paymentMethod:"credit_card",orderBump:t.orderBump||t.orderBumpIds&&t.orderBumpIds.length>0,orderBumpIds:t.orderBumpIds||null,totalAmount:t.totalAmount,customerName:t.customerName,customerEmail:t.customerEmail,customerDocument:this.sanitizeDocument(t.customerDocument),customerPhone:this.sanitizePhone(t.customerPhone),status:i.status==="paid"?"paid":"pending"}).returning();return{success:!0,transactionId:i.id,checkoutId:f.id,status:i.status,cardLastDigits:i.card?.lastDigits||"****",cardBrand:i.card?.brand||"unknown",installments:i.installments||1}}catch(c){return console.error("[JunglePay] Request Error:",c),{success:!1,error:`Erro ao conectar com JunglePay: ${c.message}`,code:"API_ERROR"}}}}var en=new Map,px=new TextEncoder;function wmt(t,r){let e={checkoutId:t,controller:r,createdAt:new Date},o=en.get(t)||[];o.push(e),en.set(t,o),console.log(`[SSE] Client registered for checkout ${t}. Total clients: ${_h()}`)}function pmt(t,r){let e=en.get(t);if(!e)return;let o=e.filter((n)=>n.controller!==r);if(o.length===0)en.delete(t);else en.set(t,o);console.log(`[SSE] Client unregistered for checkout ${t}. Total clients: ${_h()}`)}function umt(t,r){let e=en.get(t);if(!e||e.length===0){console.log(`[SSE] No clients waiting for checkout ${t}`);return}let n=`event: payment_confirmed
data: ${JSON.stringify({type:"payment_confirmed",checkoutId:t,status:r.status,paymentMethod:r.paymentMethod,customerEmail:r.customerEmail,timestamp:new Date().toISOString()})}

`,c=px.encode(n);console.log(`[SSE] Notifying ${e.length} client(s) for checkout ${t}`);for(let i of e)try{i.controller.enqueue(c)}catch(f){console.error("[SSE] Error sending to client:",f)}en.delete(t),console.log(`[SSE] Clients cleared for checkout ${t}. Total clients: ${_h()}`)}function dmt(t){try{let r=px.encode(`: heartbeat

`);t.enqueue(r)}catch(r){}}function _h(){let t=0;for(let r of en.values())t+=r.length;return t}function ux(){let t=new Date,r=900000;for(let[e,o]of en.entries()){let n=o.filter((c)=>{if(t.getTime()-c.createdAt.getTime()>900000){try{c.controller.close()}catch(f){}return!1}return!0});if(n.length===0)en.delete(e);else en.set(e,n)}console.log(`[SSE] Cleanup complete. Total clients: ${_h()}`)}setInterval(ux,300000);var Of={registerClient:wmt,unregisterClient:pmt,notifyPaymentConfirmed:umt,sendHeartbeat:dmt,getTotalClients:_h,cleanupStaleConnections:ux};var fr=new $n,JT=process.env.JWT_SECRET||"secret";fr.post("/checkout/process",async(t)=>{try{let r=await t.req.json(),{planId:e,paymentMethod:o,orderBump:n,email:c,name:i,cpf:f,phone:h,totalAmount:w}=r,[p]=await L.insert(ut).values({planId:parseInt(e),paymentMethod:o,orderBump:n,totalAmount:parseInt(w),customerName:i,customerEmail:c,customerDocument:f,customerPhone:h,status:"pending"}).returning();return t.json({success:!0,checkoutId:p.id})}catch(r){return console.error("Checkout Process Error:",r),t.json({success:!1,error:r.message},500)}});fr.post("/checkout/pix",async(t)=>{try{let r=await t.req.json(),e=["customerName","customerEmail","customerDocument","totalAmount","planId"];for(let c of e)if(!(c in r)||r[c]===void 0||r[c]==="")return t.json({success:!1,error:`Campo obrigat\xF3rio ausente: ${c}`,code:"INVALID_DATA"},400);let o;if(r.orderBumpIds){if(typeof r.orderBumpIds==="string")o=r.orderBumpIds.split(",").map(Number).filter((c)=>!isNaN(c));else if(Array.isArray(r.orderBumpIds))o=r.orderBumpIds.map(Number).filter((c)=>!isNaN(c))}let n=await wd.createPixCharge({customerName:r.customerName,customerEmail:r.customerEmail,customerDocument:r.customerDocument,customerPhone:r.customerPhone||"",totalAmount:Number(r.totalAmount),planId:Number(r.planId),orderBump:Boolean(r.orderBump),orderBumpIds:o});if(!n.success){let c=n.code==="INVALID_DATA"?400:n.code==="GATEWAY_NOT_CONFIGURED"?503:n.code==="GATEWAY_INACTIVE"?503:500;return t.json(n,c)}return t.json(n)}catch(r){return console.error("[PIX Checkout] Error:",r),t.json({success:!1,error:`Erro interno: ${r.message}`,code:"API_ERROR"},500)}});fr.post("/checkout/card",async(t)=>{try{let r=await t.req.json(),e=["customerName","customerEmail","customerDocument","totalAmount","planId","cardHash"];for(let c of e)if(!(c in r)||r[c]===void 0||r[c]==="")return t.json({success:!1,error:`Campo obrigat\xF3rio ausente: ${c}`,code:"INVALID_DATA"},400);let o;if(r.orderBumpIds){if(typeof r.orderBumpIds==="string")o=r.orderBumpIds.split(",").map(Number).filter((c)=>!isNaN(c));else if(Array.isArray(r.orderBumpIds))o=r.orderBumpIds.map(Number).filter((c)=>!isNaN(c))}let n=await wd.createCardCharge({customerName:r.customerName,customerEmail:r.customerEmail,customerDocument:r.customerDocument,customerPhone:r.customerPhone||"",totalAmount:Number(r.totalAmount),planId:Number(r.planId),orderBump:Boolean(r.orderBump),orderBumpIds:o,cardHash:r.cardHash,installments:Number(r.installments)||1});if(!n.success){let c=n.code==="INVALID_DATA"?400:n.code==="GATEWAY_NOT_CONFIGURED"?503:n.code==="GATEWAY_INACTIVE"?503:n.code==="CARD_REFUSED"?402:500;return t.json(n,c)}return t.json(n)}catch(r){return console.error("[Card Checkout] Error:",r),t.json({success:!1,error:`Erro interno: ${r.message}`,code:"API_ERROR"},500)}});fr.get("/checkout/events/:checkoutId",async(t)=>{let r=parseInt(t.req.param("checkoutId"));if(!r||isNaN(r))return t.json({success:!1,error:"ID de checkout inv\xE1lido"},400);let[e]=await L.select({id:ut.id,status:ut.status}).from(ut).where(Y(ut.id,r)).limit(1);if(!e)return t.json({success:!1,error:"Checkout n\xE3o encontrado"},404);if(e.status==="paid")return t.json({success:!0,checkoutId:e.id,status:"paid",isPaid:!0,message:"Pagamento j\xE1 confirmado"});let o=new ReadableStream({start(n){Of.registerClient(r,n);let c=new TextEncoder,i=`event: connected
data: ${JSON.stringify({checkoutId:r,status:"waiting"})}

`;n.enqueue(c.encode(i));let f=setInterval(()=>{Of.sendHeartbeat(n)},30000),h=setTimeout(()=>{clearInterval(f),Of.unregisterClient(r,n);try{let w=`event: timeout
data: ${JSON.stringify({message:"Connection timeout"})}

`;n.enqueue(c.encode(w)),n.close()}catch(w){}},900000);return()=>{clearInterval(f),clearTimeout(h),Of.unregisterClient(r,n)}},cancel(){console.log(`[SSE] Client disconnected from checkout ${r}`)}});return new Response(o,{headers:{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive","X-Accel-Buffering":"no"}})});fr.post("/webhook/junglepay",async(t)=>{console.log("\uD83D\uDC49 Webhook Hit: /webhook/junglepay");try{let r=await t.req.text();console.log("\uD83D\uDCE6 Raw Body:",r);let e=JSON.parse(r);if(console.log("\u2705 Payload Parsed:",e),e.type!=="transaction")return console.log("\u26A0\uFE0F Tipo ignorado:",e.type),t.json({ignored:!0});let o=e.data,{status:n,id:c,customer:i,amount:f}=o,h=String(c);if(console.log(`\u2139\uFE0F Processing JunglePay Transaction: ${h} | Status: ${n}`),n==="paid"){let w=await L.update(ut).set({status:"paid",updatedAt:new Date}).where(Y(ut.externalId,h)).returning();if(w.length>0){let N=w[0];console.log(`[JunglePay Webhook] Checkout ${N.id} atualizado para 'paid'`),Of.notifyPaymentConfirmed(N.id,{status:"paid",paymentMethod:N.paymentMethod||void 0,customerEmail:N.customerEmail||void 0})}let u=(await L.select().from(ft).where(Y(ft.email,i.email)).limit(1))[0];if(!u)return console.log(`\u2139\uFE0F User not found for email ${i.email}, checkout already updated.`),t.json({received:!0,checkoutUpdated:w.length>0});let d=await L.select().from(Tt),y=null;if(d.length>0)y=d.reduce((N,G)=>{return Math.abs(G.price-f)<Math.abs(N.price-f)?G:N});let R=new Date,S=y?.duration||30,T=new Date;return T.setDate(R.getDate()+S),await L.insert(pt).values({userId:u.id,planId:y?.id||null,externalId:h,status:"active",startDate:R,endDate:T}),await L.update(ft).set({subscriptionStatus:1}).where(Y(ft.id,u.id)),console.log(`[JunglePay Webhook] Subscription activated for user ${u.id} (Tx: ${h})`),t.json({received:!0,activated:!0,checkoutUpdated:w.length>0})}if(n==="waiting_payment")return console.log(`[JunglePay Webhook] Transaction ${h} waiting for payment`),t.json({received:!0});return console.log("\u26A0\uFE0F Status n\xE3o processado:",n),t.json({ignored:!0})}catch(r){return console.error("\u274C JunglePay Webhook Error:",r),t.json({error:r.message},500)}});fr.post("/admin/finance/gateway",async(t)=>{let e=(await t.req.parseBody()).gatewayName;if(await L.update(Dr).set({isActive:!1}),(await L.update(Dr).set({isActive:!0}).where(Y(Dr.name,e)).returning()).length===0)await L.insert(Dr).values({name:e,isActive:!0});return t.redirect("/admin/finance?success=true")});fr.post("/admin/finance/junglepay",async(t)=>{let r=await t.req.parseBody(),e=r.publicKey,o=r.secretKey,n=r.postbackUrl;if((await L.update(Dr).set({publicKey:e,secretKey:o,postbackUrl:n||null}).where(Y(Dr.name,"JunglePay")).returning()).length===0)await L.insert(Dr).values({name:"JunglePay",publicKey:e,secretKey:o,postbackUrl:n||null,isActive:!1});return t.redirect("/admin/finance?success=true")});fr.post("/admin/plans/update",async(t)=>{let r=await t.req.parseBody(),e=parseInt(r.id),o=r.name,n=r.price,c=r.ctaText,i=r.checkoutUrl,f=r.acceptsPix==="true",h=r.acceptsCard==="true",w=r.isActive==="true",p=r.cardStyle,u=[];console.log("Corpo recebido:",r);for(let S in r)if(console.log("Chave encontrada:",S,"Valor:",r[S]),S.startsWith("benefits[")){let T=r[S];if(/^benefits\[\d+\]$/.test(S)){if(typeof T==="string"&&T.trim()!=="")u.push(T.trim()),console.log("Benef\xEDcio adicionado:",T.trim())}else if(/^benefits\[\d+\]\[(title|icon|subtitle)\]$/.test(S));}let d=new Set;for(let S in r){let T=S.match(/^benefits\[(\d+)\]\[(title|icon|subtitle)\]$/);if(T)d.add(parseInt(T[1]))}for(let S of d){let T=r[`benefits[${S}][title]`],N=r[`benefits[${S}][icon]`],G=r[`benefits[${S}][subtitle]`];if(T&&T.trim()!==""){let v={title:T.trim()};if(N&&N.trim()!=="")v.icon=N.trim();if(G&&G.trim()!=="")v.subtitle=G.trim();u.push(v),console.log("Benef\xEDcio complexo adicionado:",v)}}if(console.log("Benef\xEDcios finais:",u),!e)return t.redirect("/admin/plans?error=Invalid ID");let y=n.replace(",","."),R=Math.round(parseFloat(y)*100);try{console.log("Dados a serem atualizados:",{name:o,price:R,ctaText:c,checkoutUrl:i,acceptsPix:f,acceptsCard:h,isActive:w,cardStyle:p,benefits:u}),console.log("ID do plano a ser atualizado:",e);let S=await L.update(Tt).set({name:o,price:R,ctaText:c,checkoutUrl:i,acceptsPix:f,acceptsCard:h,isActive:w,cardStyle:p,benefits:u}).where(Y(Tt.id,e));console.log("Resultado da atualiza\xE7\xE3o (affected rows):",S);let T=await L.select().from(Tt).where(Y(Tt.id,e));return console.log("Plano ap\xF3s atualiza\xE7\xE3o:",T[0]),t.redirect("/admin/plans?success=Updated")}catch(S){return console.error("Erro na atualiza\xE7\xE3o:",S),t.redirect("/admin/plans?error=Database Error")}});fr.post("/admin/whitelabel/activate",async(t)=>{let r=await t.req.parseBody(),e=r.all==="true",o=r.model;try{let n=await wx.activateModels(e,o);return t.html(s("div",{id:"toast",class:"fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded shadow-xl animate-[fadeIn_0.5s]",children:["\u2705 Processado: ",n.processedCount," modelos. (+",n.newModelsCount," novos, +",n.newPostsCount," posts)"]},void 0,!0,void 0,this))}catch(n){return console.error(n),t.html(s("div",{id:"toast",class:"fixed bottom-4 right-4 bg-red-600 text-white px-6 py-3 rounded shadow-xl animate-[fadeIn_0.5s]",children:["\u274C Erro ao ativar: ",n.message]},void 0,!0,void 0,this))}});fr.get("/models",async(t)=>{let r=t.req.query("page"),e=r?Math.max(1,parseInt(r)):1,o=20;try{let n=await Ze.getTopModelsWithThumbnails(e,20);return t.json({data:n.data,meta:{page:n.page,limit:n.limit,count:n.total}})}catch(n){return console.error("Erro API Models:",n),t.json({error:"Erro ao processar modelos."},500)}});fr.get("/models/:modelName/posts",async(t)=>{let r=t.req.param("modelName"),e=parseInt(t.req.query("page")||"1"),o=20;try{let n=await Ze.getModelBySlug(r);if(!n)return t.json({error:"404"},404);let c=await Ze.getModelPosts(n.id,e,20);return t.json({data:c,meta:{page:e,limit:20,count:c.length}})}catch(n){return console.error("Erro API Posts:",n),t.json({error:"Erro ao carregar posts"},500)}});fr.post("/login",async(t)=>{let r=await t.req.parseBody(),e=r.email,o=r.password;try{let n=await $f.login(e,o);if(!n)return t.redirect("/login?error=Credenciais inv\xE1lidas");await $f.checkSubscriptionStatus(n.id);let c={id:n.id,email:n.email,name:n.name||n.email.split("@")[0],role:n.role},i=await zh(c,JT,"HS256");return vh(t,"auth_token",i,{httpOnly:!0,path:"/",maxAge:604800,sameSite:"Lax",secure:!0}),t.redirect("/")}catch(n){return console.error("Login error:",n),t.redirect("/login?error=Erro no servidor")}});fr.post("/register",async(t)=>{let r=await t.req.parseBody(),e=r.email,o=r.password,n=r.name;try{let c=await $f.register(e,o,n),i={id:c.id,email:c.email,name:c.name||c.email.split("@")[0],role:c.role},f=await zh(i,JT,"HS256");return vh(t,"auth_token",f,{httpOnly:!0,path:"/",maxAge:604800,sameSite:"Lax",secure:!0}),t.redirect("/plans")}catch(c){return t.redirect(`/register?error=${encodeURIComponent(c.message)}`)}});fr.post("/subscribe",async(t)=>{let r=Uf(t,"auth_token");if(!r)return t.redirect("/login");try{let e=await lf(r,JT,"HS256"),o=await t.req.parseBody(),n=parseInt(o.planId);if(!n)return t.json({error:"Plan ID required"},400);return await $f.createSubscription(e.id,n),t.redirect("/admin")}catch(e){return console.error("Subscribe error:",e),t.redirect("/login")}});fr.post("/webhook/dias/payment-sucess",async(t)=>{console.log("\uD83D\uDC49 Webhook Hit: /webhook/dias/payment-sucess");try{let r=await t.req.text();console.log("\uD83D\uDCE6 Raw Body:",r);let e=JSON.parse(r);console.log("\u2705 Payload Parsed:",e);let{status:o,id:n,externalRef:c,amount:i,payer:f}=e,h=c||n;if(console.log(`\u2139\uFE0F Processing Transaction: ${h} | Status: ${o}`),o==="PENDING"){console.log(`\uD83D\uDD0D Searching user: ${f?.email}`);let p=(await L.select().from(ft).where(Y(ft.email,f.email)).limit(1))[0];if(!p)return console.error(`\u274C Webhook Error: User not found for email ${f.email}`),t.json({error:"User not found"},404);console.log(`\uD83D\uDC64 User Found: ${p.id}`),console.log(`\uD83D\uDD0D Finding closest plan for amount: ${i}`);let u=await L.select().from(Tt),d=null;if(u.length>0)d=u.reduce((y,R)=>{return Math.abs(R.price-i)<Math.abs(y.price-i)?R:y});return console.log(`\uD83D\uDCCB Closest Plan Found: ${d?.name} (ID: ${d?.id}, Price: ${d?.price})`),await L.insert(pt).values({userId:p.id,planId:d?d.id:null,externalId:h,status:"pending",startDate:null,endDate:null}),console.log(`[Webhook] Pending subscription created for ${f.email} (Tx: ${h})`),t.json({received:!0})}if(o==="PAID"){console.log(`\uD83D\uDD0D Searching subscription: ${h}`);let p=(await L.select().from(pt).where(Y(pt.externalId,h)).limit(1))[0];if(!p)return console.error(`Webhook Error: Subscription not found for Tx ${h}`),t.json({error:"Subscription not found"},404);console.log(`\uD83C\uDFAB Subscription Found: ${p.id}`);let u=new Date,d=30;if(p.planId){let R=await L.select().from(Tt).where(Y(Tt.id,p.planId)).limit(1);if(R[0])d=R[0].duration}let y=new Date;return y.setDate(u.getDate()+d),await L.update(pt).set({status:"active",startDate:u,endDate:y}).where(Y(pt.id,p.id)),await L.update(ft).set({subscriptionStatus:1}).where(Y(ft.id,p.userId)),console.log(`[Webhook] Subscription activated for user ${p.userId} (Tx: ${h})`),t.json({received:!0})}return console.log("\u26A0\uFE0F Status ignored:",o),t.json({ignored:!0})}catch(r){return console.error("\u274C Webhook Fatal Error:",r),t.json({error:r.message},500)}});fr.post("/logout",(t)=>{return vh(t,"auth_token","",{httpOnly:!0,path:"/",maxAge:0,sameSite:"Lax",secure:!0}),t.redirect("/login")});fr.get("/admin/order-bumps",async(t)=>{try{let r=await L.select().from(Wt).orderBy(oo(Wt.displayOrder),oo(Wt.id));return t.json({success:!0,data:r})}catch(r){return console.error("[OrderBumps] List Error:",r),t.json({success:!1,error:r.message},500)}});fr.get("/order-bumps/active",async(t)=>{try{let r=await L.select().from(Wt).where(Y(Wt.isActive,!0)).orderBy(oo(Wt.displayOrder),oo(Wt.id));return t.json({success:!0,data:r})}catch(r){return console.error("[OrderBumps] Active List Error:",r),t.json({success:!1,error:r.message},500)}});fr.post("/admin/order-bumps",async(t)=>{try{let r=await t.req.json(),{name:e,description:o,price:n,isActive:c,imageUrl:i,displayOrder:f}=r;if(!e||n===void 0)return t.json({success:!1,error:"Nome e pre\xE7o s\xE3o obrigat\xF3rios"},400);let[h]=await L.insert(Wt).values({name:e,description:o||null,price:parseInt(n),isActive:c!==!1,imageUrl:i||null,displayOrder:parseInt(f)||0}).returning();return t.json({success:!0,data:h})}catch(r){return console.error("[OrderBumps] Create Error:",r),t.json({success:!1,error:r.message},500)}});fr.patch("/admin/order-bumps/:id",async(t)=>{try{let r=parseInt(t.req.param("id")),e=await t.req.json(),{name:o,description:n,price:c,isActive:i,imageUrl:f,displayOrder:h}=e;if(!r)return t.json({success:!1,error:"ID inv\xE1lido"},400);let w={};if(o!==void 0)w.name=o;if(n!==void 0)w.description=n;if(c!==void 0)w.price=parseInt(c);if(i!==void 0)w.isActive=i;if(f!==void 0)w.imageUrl=f;if(h!==void 0)w.displayOrder=parseInt(h);let[p]=await L.update(Wt).set(w).where(Y(Wt.id,r)).returning();if(!p)return t.json({success:!1,error:"Order bump n\xE3o encontrada"},404);return t.json({success:!0,data:p})}catch(r){return console.error("[OrderBumps] Update Error:",r),t.json({success:!1,error:r.message},500)}});fr.patch("/admin/order-bumps/:id/toggle",async(t)=>{try{let r=parseInt(t.req.param("id")),[e]=await L.select({isActive:Wt.isActive}).from(Wt).where(Y(Wt.id,r)).limit(1);if(!e)return t.json({success:!1,error:"Order bump n\xE3o encontrada"},404);let[o]=await L.update(Wt).set({isActive:!e.isActive}).where(Y(Wt.id,r)).returning();return t.json({success:!0,data:o})}catch(r){return console.error("[OrderBumps] Toggle Error:",r),t.json({success:!1,error:r.message},500)}});fr.delete("/admin/order-bumps/:id",async(t)=>{try{let r=parseInt(t.req.param("id")),[e]=await L.delete(Wt).where(Y(Wt.id,r)).returning();if(!e)return t.json({success:!1,error:"Order bump n\xE3o encontrada"},404);return t.json({success:!0,data:e})}catch(r){return console.error("[OrderBumps] Delete Error:",r),t.json({success:!1,error:r.message},500)}});fr.post("/order-bumps/by-ids",async(t)=>{try{let r=await t.req.json(),{ids:e}=r;if(!e||!Array.isArray(e)||e.length===0)return t.json({success:!0,data:[],total:0});let o=await L.select().from(Wt).where(bo(Wt.id,e.map(Number))),n=o.reduce((c,i)=>c+(i.price||0),0);return t.json({success:!0,data:o,total:n})}catch(r){return console.error("[OrderBumps] ByIds Error:",r),t.json({success:!1,error:r.message},500)}});fr.get("/ads/placement/:placement",async(t)=>{try{let r=t.req.param("placement"),e=parseInt(t.req.query("limit")||"5"),o=await Mr.getActiveByPlacement(r,e,!1);return t.json({success:!0,data:o})}catch(r){return console.error("[Ads] Placement Error:",r),t.json({success:!1,error:r.message},500)}});fr.post("/ads/placements",async(t)=>{try{let r=await t.req.json(),{placements:e}=r;if(!e||!Array.isArray(e))return t.json({success:!1,error:"Placements array required"},400);let o=await Mr.getActiveByPlacements(e,!1);return t.json({success:!0,data:o})}catch(r){return console.error("[Ads] Placements Error:",r),t.json({success:!1,error:r.message},500)}});fr.post("/ads/:id/click",async(t)=>{try{let r=parseInt(t.req.param("id")),e=t.req.header("user-agent"),o=t.req.header("x-forwarded-for")||t.req.header("remote-addr"),n=t.req.query("placement");if(!r||isNaN(r))return t.json({success:!1,error:"Invalid ad ID"},400);return await Mr.trackClick(r,{userAgent:e,ip:o,placement:n}),t.json({success:!0})}catch(r){return console.error("[Ads] Click Track Error:",r),t.json({success:!1,error:r.message},500)}});fr.post("/ads/:id/impression",async(t)=>{try{let r=parseInt(t.req.param("id")),e=t.req.header("user-agent"),o=t.req.header("x-forwarded-for")||t.req.header("remote-addr"),n=t.req.query("placement");if(!r||isNaN(r))return t.json({success:!1,error:"Invalid ad ID"},400);return await Mr.trackImpression(r,{userAgent:e,ip:o,placement:n}),t.json({success:!0})}catch(r){return console.error("[Ads] Impression Track Error:",r),t.json({success:!1,error:r.message},500)}});fr.post("/ads/:id/event",async(t)=>{try{let r=parseInt(t.req.param("id")),e=await t.req.json(),{type:o,metadata:n}=e,c=t.req.header("user-agent"),i=t.req.header("x-forwarded-for")||t.req.header("remote-addr");if(!r||isNaN(r))return t.json({success:!1,error:"Invalid ad ID"},400);if(!o||!["impression","click"].includes(o))return t.json({success:!1,error:"Invalid event type"},400);return await Mr.trackEvent(r,o,{...n,userAgent:c,ip:i}),t.json({success:!0})}catch(r){return console.error("[Ads] Event Track Error:",r),t.json({success:!1,error:r.message},500)}});var dx=fr;var $h=new $n;$h.use("/static/*",Fd({root:"./"}));$h.route("/",zE);$h.route("/admin",fx);$h.route("/api",dx);var gwr={port:parseInt(process.env.PORT||"3000"),fetch:$h.fetch,idleTimeout:120};export{gwr as default};
